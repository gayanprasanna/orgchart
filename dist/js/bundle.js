!function(){"use strict";angular.module("orgChart",[])}(),function(){"use strict";function e(e,t,n){function o(o){function r(e){var t=angular.lowercase(e);return function(e){return 0===e.name.toLowerCase().indexOf(t)}}var i=this;i.simulateQuery=!1,i.isDisabled=!1,i.noCache=!0,i.querySearch=function(n){console.log(i.searchableList);var o,a=n?i.searchableList.filter(r(n)):i.searchableList;return i.simulateQuery?(o=t.defer(),e(function(){o.resolve(a)},1e3*Math.random(),!1),o.promise):a},i.selectedItemChange=function(e){e&&(n.info("Item changed to "+JSON.stringify(e)),o.setSearchedNode(e))},i.searchTextChange=function(e){n.info("Text changed to "+e)},i.newState=function(e){alert("Sorry! You'll need to create a Constitution for "+e+" first!")}}return o.$inject=["treeViewService"],{replace:!1,restrict:"EA",controller:o,template:'<div layout-align="start center" layout="row" layout-fill> <div flex-offset="5" class="search-box-holder"> <md-autocomplete ng-disabled="vm.isDisabled" md-no-cache="vm.noCache" md-selected-item="vm.selectedItem" md-search-text-change="vm.searchTextChange(vm.searchText)" md-search-text="vm.searchText" md-selected-item-change="vm.selectedItemChange(item)" md-items="item in vm.querySearch(vm.searchText)" md-item-text="item.name" md-min-length="0" placeholder="Search People" class="auto-complete-custom"> <md-item-template> <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.name}}</span> </md-item-template> <md-not-found> No states matching "{{ctrl.searchText}}" were found. <a ng-click="ctrl.newState(ctrl.searchText)">Create a new one!</a> </md-not-found> </md-autocomplete> </div><div flex class="btn-search-holder"><button class="btn-search" type="button"><i class="fa fa-search"></i> </button></div></div>',controllerAs:"vm",scope:{},bindToController:{searchableList:"="},link:function(){}}}e.$inject=["$timeout","$q","$log"],angular.module("orgChart").directive("treeSearchBox",e)}(),function(){"use strict";function e(e){var t=this;t.isExpandAllMode=e.isExpandAllMode(),t.toggleExpandAllMode=function(){t.isExpandAllMode=e.toggleExpandAllMode()},t.zoomTrigger=function(e){t.zoomTriggerCallBack({status:e})},t.zoomScale=e.getZoomScale()}e.$inject=["toolSetService"],angular.module("orgChart").directive("treeToolSet",function(){return{replace:!1,restrict:"EA",controller:e,controllerAs:"vm",template:'<div layout="column" layout-align="center end"> <div layout="column" layout-align="space-around center" class="toolset-wrapper" flex-offset="5"> <div> <button class="toolset-btn upper-rounded" ng-click="vm.zoomTrigger(\'increment\')"> <md-tooltip md-direction="bottom">Zoom In</md-tooltip> <md-icon><i ng-class="{\'fa fa-plus\':true,\'custom-font-icon\':true}"></i></md-icon></button> </div><div> <button class="toolset-btn lower-rounded" ng-click="vm.zoomTrigger(\'decrement\')"> <md-tooltip md-direction="bottom">Zoom Out</md-tooltip> <md-icon><i ng-class="{\'fa fa-minus\':true,\'custom-font-icon\':true}"></i></md-icon></button> </div><div style="margin-top: 10px"> <button class="toolset-btn" ng-click="vm.toggleExpandAllMode()"> <md-tooltip md-direction="bottom"><span ng-if="!vm.isExpandAllMode">Expand All</span><span ng-if="vm.isExpandAllMode">Collapse All</span></md-tooltip> <md-icon><i ng-class="{\'fa fa-expand\':!vm.isExpandAllMode,\'fa fa-compress\':vm.isExpandAllMode,\'custom-font-icon\':true}"></i> </md-icon></button> </div></div></div>',scope:{},bindToController:{zoomTriggerCallBack:"&"},link:function(e,t,n,o){}}})}(),function(){"use strict";angular.module("orgChart").factory("toolSetService",function(){var e=!1,t=1;return{isExpandAllMode:function(){return e},toggleExpandAllMode:function(){return e=!e},getZoomScale:function(){return console.log("getZoom Scale",t),t},setZoomScale:function(e){t=e,console.log("zoom scale",t)},incrementZoomScale:function(){return t+=.1},decrementZoomScale:function(){return t>-2.5&&(t-=.1),t}}})}(),function(){"use strict";function e(e,n,o){return{restrict:"E",replace:!0,templateNamespace:"svg",controller:t,template:'<foreignObject width="260" height="220" style="overflow: visible"><div style="margin-top: 50px;margin-left:10px" ng-class="{\'active-node\':vm.isActive}" class="{{vm.nodeClass}}" ng-mouseenter="vm.whenMouseEnter()" ng-mouseleave="vm.whenMouseLeave()" ng-click="vm.makeNodeActive()"> <div layout="column" layout-align="center center"> <div ng-class="{\'node-text-main-no-image\':!vm.isImagePresent}" class="md-subhead node-text-main"><trim-word word-options ="vm.wordTrimOptions" word="vm.node.name"></trim-word></div><div> <div class="round-chip-wrapper"><img ng-if="vm.isImagePresent" ng-src="{{vm.node.image_url}}" class="round-chip"> </div></div><div  ng-class="{\'node-text-sub-no-image\':!vm.isImagePresent}" class="md-subhead node-text-sub">{{vm.node.name}}</div><div layout-align="center center" layout-fill layout="row"> <div ng-repeat="action in vm.nodeActions"> <button ng-click="vm.makeCallBack(action.callBack); $event.stopPropagation();" class="action-btn"><span></span>&nbsp;<i class="{{action.icon}}"></i></button> </div></div></div></div></foreignObject>',controllerAs:"vm",scope:{},bindToController:{nodeId:"@",nodeActions:"@"},link:{pre:function(t,r,i,a){function l(){o.$broadcast("app:nodes:clearactive",{data:""})}function c(e){r===e.target||r[0].contains(e.target)||t.$apply(function(){a.isActive=!1})}console.log(i.imagepresent),a.isImagePresent="true"==i.imagepresent,a.id=i.nodeid,a.nodeActions=angular.fromJson(i.nodeactions),console.log(a.nodeActions),a.isPinnedNode=!1,a.node=e.findById(i.nodeid),a.wordTrimOptions={word:"d",from:"0",until:"12",toolTip:"true",toolTipDirection:"top"},a.nodeClass="node-label node-"+a.node.type+" node-"+a.id,a.isExpandedView=!1,a.isActive=!1,a.whenMouseEnter=function(){console.log("mouse Entered")},a.whenMouseLeave=function(){console.log("mouse leaved")},a.togglePinnedMode=function(){a.isPinnedNode=!0,console.log(a.isPinnedNode)},a.makeCallBack=function(e){console.log(e),t.$parent.vm.makeCallBack(e,a.node)},a.makeNodeActive=function(){l(),a.isActive=!0};angular.element(r.children()[0]);n.on("click",c),t.$on("$destroy",function(){n.off("click",c)})}}}}function t(){}e.$inject=["treeViewService","$document","$rootScope"],angular.module("orgChart").directive("treeNode",e)}(),function(){"use strict";function e(e,n,o,r,i,a){return{replace:"false",templateNamespace:"svg",restrict:"E",scope:{},bindToController:{data:"=",abn:"&",del:"&",add:"&",edit:"&",nodeActions:"@",treedata:"=",searchableList:"=",imagepresent:"="},controller:t,controllerAs:"vm",link:{pre:function(t,l,c,d){function s(){g(),u()}function u(){t.$watch(function(){return i.isExpandAllMode()},function(e){e?h():f()})}function h(){m(.5),i.setZoomScale(.5),J(),A()}function f(){m(1),i.setZoomScale(1),J(),S()}function g(){t.$watch(function(){return o.getSearchedNode()},function(e){if(console.log(e),e){B(e);var t=q(e);Q(),r(function(){console.log(t.x,t.y),R(),K(t.id),H(t)},500)}})}function m(e){var t={x:0,y:0,k:e};Y([t.x,t.y],t.k)}function p(e,t){ve=e,d3.select(t).select(".ghost-area").attr("pointer-events","none"),d3.selectAll(".ghost-area").attr("class","ghost-area show"),d3.select(t).attr("class","node active-drag"),_e.selectAll("g.node").sort(function(e,t){return e.id!=ve.id?1:-1}),X.length>1&&(re=Oe.links(X),ie=_e.selectAll("path.link").data(re,function(e){return e.target.id}).remove(),ae=_e.selectAll("g.node").data(X,function(e){return e.id}).filter(function(e,t){return e.id!=ve.id}).remove()),le=Oe.links(Oe.nodes(ve.parent)),_e.selectAll("path.link").filter(function(e,t){return e.target.id==ve.id}).remove(),me=null}function v(e,t){var n,o,r,a=xe;ne&&(clearTimeout(ne),oe=d3.transform(_e.attr("transform")),"left"==t||"right"==t?(n="left"==t?oe.translate[0]+a:oe.translate[0]-a,o=oe.translate[1]):"up"!=t&&"down"!=t||(n=oe.translate[0],o="up"==t?oe.translate[1]+a:oe.translate[1]-a),oe.scale[0],oe.scale[1],r=i.getZoomScale(),_e.transition().attr("transform","translate("+n+","+o+")scale("+r+")"),d3.select(e).select("g.node").attr("transform","translate("+n+","+o+")"),Ce.scale(r),Ce.translate([n,o]),ne=setTimeout(function(){v(e,a,t)},50))}function x(){var e=[];if(null!==ve&&null!==pe){var t=d.imagepresent?5:50;e=[{source:{x:pe.x0+12+ge.width/2,y:pe.y0+50+ge.height+10},target:{x:ve.x0+12+ge.width/2,y:ve.y0+t}}]}var n=_e.selectAll(".temp-link").data(e);n.enter().append("path").attr("class","temp-link").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),n.attr("d",d3.svg.diagonal()),n.exit().remove()}function y(){pe=null,d3.selectAll(".ghost-area").attr("class","ghost-area"),d3.select(ee).attr("class","node"),d3.select(ee).select(".ghost-area").attr("pointer-events",""),x(),null!==ve&&(T(fe),H(ve),ve=null)}function w(e){e.children&&(e.children.forEach(w),E(e))}function b(e){var t=e.children?e.children:e._children;e._children&&(e.children=e._children,e._children=null),t&&t.forEach(b)}function k(e){var t=e.children?e.children:e._children;e.children&&(e._children=e.children,e.children=null),t&&t.forEach(k)}function A(){b(fe),T(fe)}function S(){k(fe),T(fe)}function T(e){var r=d3.event&&d3.event.altKey?5e3:500,i=Oe.nodes(fe).reverse();i.forEach(function(e){e.weight?e.y=12*e.weight+300*e.depth:e.y=300*e.depth});var a=_e.selectAll("g.node").data(i,function(e){return e.id||(e.id=++Se)}),l=a.enter().append("svg:g").call(he).attr("class","node").attr("id",function(e){return"node-"+e.id}).attr("transform",function(t){return"translate("+e.x0+","+e.y0+")"}).on("click",function(e){d3.event.defaultPrevented||(E(e),T(e))});l.append("rect").attr("class","ghost-area").attr("width",ge.width).attr("height",ge.height+250).attr("opacity",.2).style("fill","transparent").attr("pointer-events","mouseover").on("mouseover",function(e){Ne(e)}).on("mouseout",function(e){Me(e)}),l.append("tree-node").attr("node",function(e){return o.pushNode(e),""}).on("click",P).attr("nodeId",function(e){return e.id}).attr("imagePresent",function(e){return d.imagepresent}).attr("isPinnedNode","false").attr("nodeActions",c.nodeactions).each(function(){n(this)(t)}),a.transition().duration(r).attr("transform",function(e){return"translate("+e.x+","+e.y+")"});var s=a.exit().transition().duration(r).attr("transform",function(t){return"translate("+e.x+","+e.y+")"}).remove();s.select("circle").attr("r",1e-6),s.select("text").style("fill-opacity",1e-6);var u=_e.selectAll("path.link").data(Oe.links(i),function(e){return e.target.id});u.enter().insert("svg:path","g").attr("class","link").attr("d",function(t){var n={x:e.x0,y:e.y0};return ze({source:n,target:n})}).transition().duration(r).attr("d",N),u.transition().duration(r).attr("d",N).style("stroke",function(e){if("highlight-link"===e.target.class)return this.parentNode.appendChild(this),"#ff4136"}),u.exit().transition().duration(0).attr("d",function(t){var n={x:e.x,y:e.y};return ze({source:n,target:n})}).remove(),i.forEach(function(e){e.x0=e.x,e.y0=e.y}),angular.copy(i,ye),o.setNodes(ye)}function E(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null)}function C(e){return e.source.children.length>1&&e.source.children[0]==e.target?"onleft":e.source.children.length>1&&e.source.children[e.source.children.length-1]==e.target?"onright":"straight"}function N(e){var t=C(e),n="",o=d.imagepresent?5:50;switch(t){case"straight":n+="M"+(e.source.x+ge.width/2+12)+","+(e.source.y+ge.height+57)+"V"+(e.source.y+ge.height+ge.height/2+35)+"H"+(e.target.x+12+ge.width/2)+"V"+(e.target.y+o)+"M"+e.target.x+"12,"+(e.target.y+o);break;case"onleft":n+="M"+(e.source.x+ge.width/2+12)+","+(e.source.y+ge.height+57)+"V"+(e.source.y+ge.height+ge.height/2+35)+"H"+(e.target.x+12+ge.width/2+8)+" Q "+(e.target.x+12+ge.width/2-8+8)+","+(e.source.y+ge.height+ge.height/2+35)+" "+(e.target.x+12+ge.width/2-8+8)+","+(e.source.y+ge.height+ge.height/2+8+35)+"V"+(e.target.y+o)+"M"+e.target.x+"12,"+(e.target.y+o);break;case"onright":n+="M"+(e.source.x+12+ge.width/2)+","+(e.source.y+ge.height+57)+"V"+(e.source.y+ge.height+ge.height/2+35)+"H"+(e.target.x+12+ge.width/2-8)+" Q "+(e.target.x+12+ge.width/2)+","+(e.source.y+ge.height+ge.height/2+35)+" "+(e.target.x+12+ge.width/2)+","+(e.source.y+ge.height+ge.height/2+8+35)+"V"+(e.target.y+o)+"M"+e.target.x+"12,"+(e.target.y+o)}return n}function M(e,t){Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,9),I(e.id,t)}function _(e){var t=e.parent.children.indexOf(e);t>-1&&e.parent.children.splice(t,1),O(fe.children,e),T(e.parent),Z()}function O(e,t){angular.forEach(e,function(n,o){if(t.id==n.id){var r=e.indexOf(n);r>-1&&e.splice(r,1)}else angular.isDefined(n.children)&&null!==n.children&&O(n.children,t)})}function z(e,t){angular.forEach(e,function(n,o){if(t.id==n.id){var r=e.indexOf(n);r>-1&&(e[r].name=t.name)}else angular.isDefined(n.children)&&null!==n.children&&O(n.children,t)})}function I(e,t){var n=d3.select("#node-"+e).datum();void 0===n.children&&void 0===n._children?n.children=[t]:null!=n._children?(n._children.push(t),E(n)):null!=n.children?n.children.push(t):null==n._children&&(n._children=[],n._children.push(t),E(n)),T(n)}function Z(){d3.event.stopPropagation()}function P(e){d3.event.defaultPrevented||(console.log(e),D(this)||H(e))}function B(e){var t=L(d.treedata,e.name,[]);angular.isDefined(t)?(j($e),V(t)):console.log("Searched node "+e.name+" not found"),$e=t}function V(e){angular.forEach(e,function(e,t){e.class="highlight-link",e._children&&(e.children=e._children,e._children=null),T(e)})}function j(e){angular.forEach(e,function(e,t){e.class="",e._children&&(e.children=e._children,e._children=null),T(e)})}function L(e,t,n){if(e.name===t)return n.push(e),n;if(!e.children&&!e._children)return!1;for(var o=e.children?e.children:e._children,r=0;r<o.length;r++){n.push(e);var i=L(o[r],t,n);if(i)return i;n.pop()}}function D(e){var t=!1;return Ie.node()===e&&(t=Q()),!!t||(Ie.classed("active",!1),Ie=d3.select(e).classed("active",!0),!1)}function H(e){var t=i.getZoomScale(),n=[-t*e.x,-t*e.y];console.log("node",e),console.log("node translate ",n),_e.transition().duration(1250).call(Ce.translate(n).scale(t).event)}function Q(){return console.log("Resetting Active nodes"),Ie.classed("active",!1),Ie=d3.select(null),!0}function q(t){return e("filter")(ye,{id:t.id},!0)[0]}function W(t){return e("filter")(ye,{id:t},!0)[0]}function J(){F(0,0)}function F(e,t){_e.transition().duration(1e3).delay(100).attr("transform",function(n){return"translate("+e+","+t+")scale("+i.getZoomScale()+")"})}function K(e){var t=d3.selectAll(".node-"+e.toString());angular.element(t[0]).addClass("active-node")}function R(){var e=d3.selectAll(".node-label");angular.forEach(e,function(e,t){angular.element(e).removeClass("active-node")})}function Y(e,t){return d3.transition().duration(250).tween("wheel.zoom",function(){var n=d3.interpolate(Ce.translate(),e),o=d3.interpolate(Ce.scale(),t);return function(e){Ce.scale(o(e)).translate(n(e)),U()}})}function G(e){var t=1,n=1,o=[be/2,Ae/2],r=Ce.scaleExtent(),i=Ce.translate(),a=[],l=[],c={x:i[0],y:i[1],k:Ce.scale()};if(t="increment"===e?1:-1,(n=Ce.scale()*(1+.2*t))<r[0]||n>r[1])return!1;a=[(o[0]-c.x)/c.k,(o[1]-c.y)/c.k],c.k=n,l=[a[0]*c.k+c.x,a[1]*c.k+c.y],c.x+=o[0]-l[0],c.y+=o[1]-l[1],Y(Ce.translate(),c.k)}function U(){console.log(Ce.scale()),i.setZoomScale(Ce.scale()),_e.attr("transform","translate("+Ce.translate()+")scale("+i.getZoomScale()+")"),_e.selectAll("g.parent").attr("transform",function(e){return"translate("+e.x+","+e.y+")scale("+i.getZoomScale()+")"})}var X,ee,te,ne,oe,re,ie,ae,le,ce,de,se,ue,he,fe,ge={width:240,height:146,horizontalSeperation:16,verticalSeperation:128},me=!1,pe=null,ve=null,xe=200,ye=[],we=[20,20,20,20],be=a.innerWidth-20-we[1]-we[3],ke=a.innerHeight,Ae=600-we[0]-we[2],Se=0,Te=(d3.scale.linear().domain([0,be]).range([0,be]),d3.scale.linear().domain([0,Ae]).range([0,Ae]),"0 0 "+be+" "+ke),Ee=d3.select(l[0]),$e=[],Ce=d3.behavior.zoom().translate([0,0]).scale(i.getZoomScale()).scaleExtent([.3,8]).on("zoom",U);d.wordTrimOptions={word:"d",from:"0",until:"12",toolTip:"true",toolTipDirection:"top"},l.append(n("<div class='component-container'><div layout=\"row\" layout-align=\"space-around center\"><div flex><tree-search-box searchable-list='vm.searchableList'></tree-search-box></div><div flex><tree-tool-set zoom-trigger-call-back='vm.zoomTrigger(status)'></tree-tool-set></div></div></div>")(t)),d.zoomTrigger=function(e){console.log(e),G(e)},ce=t.$on("app:nodes:clearactive",function(e,t){R()}),de=t.$on("app:nodes:delete",function(e,t){console.log(t),_(W(t.nodeID))}),se=t.$on("app:nodes:add::after",function(e,t){M(W(t.parentNode.id),t.lastAddedNode)}),ue=t.$on("app:nodes:update::after",function(e,t){z(fe.children,t.lastEditedNode),T(t.lastEditedNode),Z()}),he=d3.behavior.drag().on("dragstart",function(e){e!=fe&&(me=!0,X=Oe.nodes(e),d3.event.sourceEvent.stopPropagation())}).on("drag",function(e){if(e!=fe){if(me&&p(e,ee=this),(te=d3.mouse($("svg").get(0)))[0]<20)ne=!0,v(this,"left");else if(te[0]>$("svg").width()-20)ne=!0,v(this,"right");else if(te[1]<20)ne=!0,v(this,"up");else if(te[1]>$("svg").height()-20)ne=!0,v(this,"down");else try{clearTimeout(ne)}catch(e){console.error(e)}e.x0+=d3.event.dx,e.y0+=d3.event.dy,d3.select(this).attr("transform","translate("+e.x0+","+e.y0+")"),x()}}).on("dragend",function(e){if(e!=fe)if(ee=this,pe){var t=ve.parent.children.indexOf(ve);t>-1&&ve.parent.children.splice(t,1),void 0!==pe.children||void 0!==pe._children?void 0!==pe.children?pe.children.push(ve):pe._children.push(ve):(pe.children=[],pe.children.push(ve)),y()}else y()});var Ne=function(e){pe=e,x()},Me=function(e){pe=null,x()};s();var _e=Ee.append("div").attr("layout","row").attr("layout-align","space-around center").append("div").attr("flex","").attr("id","svg-box-container").call(function(){}).append("svg").attr("id","svgBox").attr("viewBox",Te).attr("style","cursor:move;").attr("width","100%").attr("height",ke).call(Ce).append("svg:g").attr("transform","translate("+(a.innerWidth/2-120)+","+Ae/4+")").attr("style","cursor:pointer;").on("click",Z,!1).call(d3.behavior.drag().on("dragstart",function(){}).on("drag",function(){})).append("g").attr("width",160).attr("height",120).attr("class","tree-holder");d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})};var Oe=d3.layout.tree().nodeSize([ge.width+ge.horizontalSeperation,ge.height+ge.verticalSeperation]).separation(function(e,t){return e.parent==t.parent?1.25:1.5}),ze=d3.svg.diagonal().source(function(e){return{x:e.source.x+ge.width/2,y:e.source.y+(ge.height+10)}}).target(function(e){return{x:e.target.x+ge.width/2,y:e.target.y-("true"==c.imagepresent?45:0)}}).projection(function(e){return[e.x+0,e.y+0]});(fe=d.treedata).x0=Ae/2,fe.y0=0,console.log(fe),fe.children.forEach(w),T(fe);var Ie=d3.select(null);t.$on("$destroy",function(){ce(),de(),se(),ue()})}}}}function t(e){var t=this;t.makeCallBack=function(t,n){e.vm[t]({node:n})},console.log(t.searchableList)}e.$inject=["$filter","$compile","treeViewService","$timeout","toolSetService","$window"],t.$inject=["$scope"],angular.module("orgChart").directive("treeView",e)}(),function(){"use strict";function e(e){var t=null,n=[];return{setSearchedNode:function(e){t=e},getSearchedNode:function(){return t},setNodes:function(e){n=e},pushNode:function(e){n.push(e)},getNodes:function(){return n},findById:function(t){return e("filter")(n,{id:t},!0)[0]}}}e.$inject=["$filter"],angular.module("orgChart").factory("treeViewService",e)}(),function(){"use strict";function e(){}angular.module("orgChart").directive("trimWord",function(){return{restrict:"E",template:'<span ng-bind="vm.parsedText"><md-tooltip ng-if="vm.isToolTipNeed()" md-direction="vm.wordOptions.toolTipDirection">{{::vm.word}}</md-tooltip></span>',scope:{},controller:e,controllerAs:"vm",link:function(e,t,n,o){function r(){e.$watch(angular.bind(o,function(){return o.word}),function(e){console.log("word change to "+e),a()})}function i(){var e=parseInt(o.wordOptions.from),t=parseInt(o.wordOptions.until);return o.word.substring(e,t)}function a(){o.parsedText=i(),o.word.length>parseInt(o.wordOptions.until)?o.parsedText=o.parsedText.concat(" ..."):o.parsedText}o.isToolTipNeed=function(){return"true"==o.wordOptions.toolTip},r(),a()},bindToController:{wordOptions:"=",word:"="}}})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZ2NoYXJ0Lm1vZHVsZS5qcyIsImRpcmVjdGl2ZXMvc2VhcmNoYm94LmRpcmVjdGl2ZS5qcyIsImRpcmVjdGl2ZXMvdG9vbHNldC5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3Rvb2xzZXQuc2VydmljZS5qcyIsImRpcmVjdGl2ZXMvdHJlZW5vZGUuZGlyZWN0aXZlLmpzIiwiZGlyZWN0aXZlcy90cmVldmlldy5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3RyZWV2aWV3LnNlcnZpY2UuanMiLCJkaXJlY3RpdmVzL3RyaW13b3JkLmRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwidHJlZVNlYXJjaEJveCIsIiR0aW1lb3V0IiwiJHEiLCIkbG9nIiwiQ2FzY2FkZVRyZWVTZWFyY2hCb3hDb250cm9sbGVyIiwidHJlZVZpZXdTZXJ2aWNlIiwiY3JlYXRlRmlsdGVyRm9yIiwicXVlcnkiLCJsb3dlcmNhc2VRdWVyeSIsImxvd2VyY2FzZSIsInN0YXRlIiwibmFtZSIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsInZtIiwidGhpcyIsInNpbXVsYXRlUXVlcnkiLCJpc0Rpc2FibGVkIiwibm9DYWNoZSIsInF1ZXJ5U2VhcmNoIiwiY29uc29sZSIsImxvZyIsInNlYXJjaGFibGVMaXN0IiwiZGVmZXJyZWQiLCJyZXN1bHRzIiwiZmlsdGVyIiwiZGVmZXIiLCJyZXNvbHZlIiwiTWF0aCIsInJhbmRvbSIsInByb21pc2UiLCJzZWxlY3RlZEl0ZW1DaGFuZ2UiLCJpdGVtIiwiaW5mbyIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXRTZWFyY2hlZE5vZGUiLCJzZWFyY2hUZXh0Q2hhbmdlIiwidGV4dCIsIm5ld1N0YXRlIiwiYWxlcnQiLCJyZXBsYWNlIiwicmVzdHJpY3QiLCJjb250cm9sbGVyIiwidGVtcGxhdGUiLCJjb250cm9sbGVyQXMiLCJzY29wZSIsImJpbmRUb0NvbnRyb2xsZXIiLCJsaW5rIiwiZGlyZWN0aXZlIiwiVHJlZVRvb2xTZXQiLCJ0b29sU2V0U2VydmljZSIsImlzRXhwYW5kQWxsTW9kZSIsInRvZ2dsZUV4cGFuZEFsbE1vZGUiLCJ6b29tVHJpZ2dlciIsInN0YXR1cyIsInpvb21UcmlnZ2VyQ2FsbEJhY2siLCJ6b29tU2NhbGUiLCJnZXRab29tU2NhbGUiLCJlbGVtIiwiYXR0ciIsImZhY3RvcnkiLCJpc0FsbEV4cGFuZGVkTW9kZSIsInNldFpvb21TY2FsZSIsInNjYWxlIiwiaW5jcmVtZW50Wm9vbVNjYWxlIiwiZGVjcmVtZW50Wm9vbVNjYWxlIiwidHJlZU5vZGUiLCIkZG9jdW1lbnQiLCIkcm9vdFNjb3BlIiwidGVtcGxhdGVOYW1lc3BhY2UiLCJDYXNjYWRlVHJlZU5vZGVDb250cm9sbGVyIiwibm9kZUlkIiwibm9kZUFjdGlvbnMiLCJwcmUiLCJhdHRycyIsImNsZWFyQWxsT3RoZXJBY3RpdmVOb2RlcyIsIiRicm9hZGNhc3QiLCJkYXRhIiwib25Eb2N1bWVudENsaWNrIiwiZXYiLCJ0YXJnZXQiLCJjb250YWlucyIsIiRhcHBseSIsImlzQWN0aXZlIiwiaW1hZ2VwcmVzZW50IiwiaXNJbWFnZVByZXNlbnQiLCJpZCIsIm5vZGVpZCIsImZyb21Kc29uIiwibm9kZWFjdGlvbnMiLCJpc1Bpbm5lZE5vZGUiLCJub2RlIiwiZmluZEJ5SWQiLCJ3b3JkVHJpbU9wdGlvbnMiLCJ3b3JkIiwiZnJvbSIsInVudGlsIiwidG9vbFRpcCIsInRvb2xUaXBEaXJlY3Rpb24iLCJub2RlQ2xhc3MiLCJ0eXBlIiwiaXNFeHBhbmRlZFZpZXciLCJ3aGVuTW91c2VFbnRlciIsIndoZW5Nb3VzZUxlYXZlIiwidG9nZ2xlUGlubmVkTW9kZSIsIm1ha2VDYWxsQmFjayIsImNhbGxCYWNrRnVuY05hbWUiLCIkcGFyZW50IiwibWFrZU5vZGVBY3RpdmUiLCJlbGVtZW50IiwiY2hpbGRyZW4iLCJvbiIsIiRvbiIsIm9mZiIsInRyZWVWaWV3IiwiJGZpbHRlciIsIiRjb21waWxlIiwiJHdpbmRvdyIsImFibiIsImRlbCIsImFkZCIsImVkaXQiLCJ0cmVlZGF0YSIsIlRyZWVWaWV3RGlyZWN0aXZlQ29udHJvbGxlciIsImFjdGl2YXRlV2F0Y2hlcnMiLCJvblNlYXJjaFdhdGNoIiwib25FeHBhbmRXYXRjaCIsIiR3YXRjaCIsImlzSW5FeHBhbmRBbGxNb2RlIiwiZXhwYW5kQWxsSW5DaGFpbiIsImNvbGxhcHNlQWxsSW5DaGFpbiIsImZvcmNlU2NhbGUiLCJjZW50ZXJUaGVSb290IiwiZXhwYW5kQWxsIiwiY29sbGFwc2VBbGwiLCJnZXRTZWFyY2hlZE5vZGUiLCJoaWdobGlnaHRQYXRoIiwicmVzb2x2ZWROb2RlIiwiZ2V0VHJlZU5vZGVCeU9iamVjdCIsInJlc2V0IiwieCIsInkiLCJjbGVhckFsbEFjdGl2ZU5vZGVzIiwicGFuVG9UaGVOb2RlIiwidmlldyIsImsiLCJpbnRlcnBvbGF0ZVpvb20iLCJpbml0aWF0ZURyYWciLCJkIiwiZG9tTm9kZSIsImRyYWdnaW5nTm9kZSIsImQzIiwic2VsZWN0Iiwic2VsZWN0QWxsIiwidmlzIiwic29ydCIsImEiLCJiIiwibm9kZXMiLCJsZW5ndGgiLCJsaW5rcyIsInRyZWUiLCJub2RlUGF0aHMiLCJyZW1vdmUiLCJub2Rlc0V4aXQiLCJpIiwicGFyZW50TGluayIsInBhcmVudCIsImRyYWdTdGFydGVkIiwicGFuIiwiZGlyZWN0aW9uIiwidHJhbnNsYXRlWCIsInRyYW5zbGF0ZVkiLCJzcGVlZCIsInBhblNwZWVkIiwicGFuVGltZXIiLCJjbGVhclRpbWVvdXQiLCJ0cmFuc2xhdGVDb29yZHMiLCJ0cmFuc2Zvcm0iLCJ0cmFuc2xhdGUiLCJ0cmFuc2l0aW9uIiwiem9vbSIsInNldFRpbWVvdXQiLCJ1cGRhdGVUZW1wQ29ubmVjdG9yIiwic2VsZWN0ZWROb2RlIiwiZXh0ZW5kaW5nVmFsdWUiLCJzb3VyY2UiLCJ4MCIsIm5vZGVCb3VuZGFyaWVzIiwid2lkdGgiLCJ5MCIsImhlaWdodCIsImVudGVyIiwiYXBwZW5kIiwic3ZnIiwiZGlhZ29uYWwiLCJleGl0IiwiZW5kRHJhZyIsInVwZGF0ZSIsInJvb3QiLCJ0b2dnbGVBbGwiLCJmb3JFYWNoIiwidG9nZ2xlIiwiZXhwYW5kQWxsQWZ0ZXIiLCJfY2hpbGRyZW4iLCJjb2xsYXBzZUFsbEFmdGVyIiwiZHVyYXRpb24iLCJldmVudCIsImFsdEtleSIsInJldmVyc2UiLCJ3ZWlnaHQiLCJkZXB0aCIsIm5vZGVFbnRlciIsImNhbGwiLCJkcmFnTGlzdGVuZXIiLCJkZWZhdWx0UHJldmVudGVkIiwic3R5bGUiLCJvdmVySW5HaG9zdEFyZWEiLCJvdXRPZkdob3N0QXJlYSIsInB1c2hOb2RlIiwib25DbGlja2VkTm9kZSIsImVhY2giLCJub2RlRXhpdCIsImluc2VydCIsIm8iLCJnZW5lcmF0ZVBhdGgiLCJjbGFzcyIsInBhcmVudE5vZGUiLCJhcHBlbmRDaGlsZCIsImNvcHkiLCJub2RlTGlzdCIsInNldE5vZGVzIiwiZGV0ZXJtaW5lTm9kZVJlbGF0aXZlTG9jYXRpb24iLCJyZWxhdGl2ZUxvY2F0aW9uIiwicGF0aFN0cmluZyIsIm9uQWRkTm9kZSIsImNoaWxkIiwidG9TdHJpbmciLCJzdWJzdHIiLCJhZGRDaGlsZE5vZGUiLCJvblJlbW92ZU5vZGUiLCJpbmRleCIsInNwbGljZSIsImZpbmRJbnRoZVJvb3RBbmREZXN0b3JveSIsInN0b3BQcm9wb2dhdGlvbiIsImxpc3QiLCJ2YWx1ZSIsImtleSIsImlzRGVmaW5lZCIsImZpbmRJbnRoZVJvb3RBbmRSZXBsYWNlTmFtZSIsInBhcmVudElkIiwibmV3Tm9kZSIsIm5vZGVEYXRhIiwiZGF0dW0iLCJ1bmRlZmluZWQiLCJwdXNoIiwic3RvcFByb3BhZ2F0aW9uIiwibWFrZUNsaWNrZWROb2RlQWN0aXZlIiwicGF0aCIsInNlYXJjaFdpdGhpblRyZWUiLCJjbGVhckhpZ2hMaWdodExpbmtzIiwibGFzdFNlYXJjaGVkUGF0aCIsImhpZ2hsaWdodExpbmtzIiwic2VhcmNoS2V5IiwiZm91bmQiLCJwb3AiLCJpc1Jlc2V0IiwiYWN0aXZlIiwiY2xhc3NlZCIsIm9iamVjdCIsImdldFRyZWVOb2RlQnlJRCIsInRyYW5zZm9ybU5vZGUiLCJ4UG9zIiwieVBvcyIsImRlbGF5IiwiYWRkQ2xhc3MiLCJ2IiwicmVtb3ZlQ2xhc3MiLCJ0d2VlbiIsImlUcmFuc2xhdGUiLCJpbnRlcnBvbGF0ZSIsImlTY2FsZSIsInQiLCJ6b29tZWQiLCJ6b29tQ2xpY2siLCJ0YXJnZXRfem9vbSIsImNlbnRlciIsInciLCJoIiwiZXh0ZW50Iiwic2NhbGVFeHRlbnQiLCJ0cmFuc2xhdGUwIiwibCIsInJlbENvb3JkcyIsIm5vZGVBY3RpdmVDbGVhckxpc3RlbmVyIiwibm9kZURlbGV0ZUxpc3RlbmVyIiwibm9kZUFmdGVyQWRkTGlzdGVuZXIiLCJub2RlQWZ0ZXJVcGRhdGVMaXN0ZW5lciIsImhvcml6b250YWxTZXBlcmF0aW9uIiwidmVydGljYWxTZXBlcmF0aW9uIiwibSIsImlubmVyV2lkdGgiLCJpSGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJ2aWV3Qm94Qm91bmRhcnkiLCJsaW5lYXIiLCJkb21haW4iLCJyYW5nZSIsIndyYXBwZXJFbGVtZW50IiwiYmVoYXZpb3IiLCJub2RlSUQiLCJsYXN0QWRkZWROb2RlIiwibGFzdEVkaXRlZE5vZGUiLCJkcmFnIiwic291cmNlRXZlbnQiLCJtb3VzZSIsIiQiLCJnZXQiLCJlIiwiZXJyb3IiLCJkeCIsImR5Iiwic2VsZWN0aW9uIiwicHJvdG90eXBlIiwibW92ZVRvRnJvbnQiLCJsYXlvdXQiLCJub2RlU2l6ZSIsInNlcGFyYXRpb24iLCJwcm9qZWN0aW9uIiwiJHNjb3BlIiwiaWRlbnRpZmllciIsInNldE9mbm9kZXMiLCJnZXROb2RlcyIsInRyaW1Xb3JkQ29udHJvbGxlciIsImJpbmQiLCJwYXJzZVRleHQiLCJ0cmltV29yZCIsImZyb21WYWx1ZSIsInBhcnNlSW50Iiwid29yZE9wdGlvbnMiLCJ0b1ZhbHVlIiwic3Vic3RyaW5nIiwicGFyc2VkVGV4dCIsImNvbmNhdCIsImlzVG9vbFRpcE5lZWQiXSwibWFwcGluZ3MiOiJDQUdBLFdBQ0EsYUFDQUEsUUFBQUMsT0FBQSxrQkNGQSxX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QW5PLFFBQUFDLElBQUEsa0JBQUFrTyxHQUNBeUYsTUFJQSxTQUFBQyxJQUNBLElBQUFDLEVBQUFDLFNBQUFyVSxFQUFBc1UsWUFBQXBQLE1BQ0FxUCxFQUFBRixTQUFBclUsRUFBQXNVLFlBQUFuUCxPQUNBLE9BQUFuRixFQUFBaUYsS0FBQXVQLFVBQUFKLEVBQUFHLEdBT0EsU0FBQUwsSUFDQWxVLEVBQUF5VSxXQUFBTixJQUNBblUsRUFBQWlGLEtBQUFpRSxPQUFBbUwsU0FBQXJVLEVBQUFzVSxZQUFBblAsT0FBQW5GLEVBQUF5VSxXQUFBelUsRUFBQXlVLFdBQUFDLE9BQUEsUUFBQTFVLEVBQUF5VSxXQTlCQXpVLEVBQUEyVSxjQXdCQSxXQUNBLE1BQUEsUUFBQTNVLEVBQUFzVSxZQUFBbFAsU0FwQkEyQixJQUNBbU4sS0FoQkFqUyxrQkFDQXFTLFlBQUEsSUFDQXJQLEtBQUEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNy8xMC8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgYW5ndWxhci5tb2R1bGUoJ29yZ0NoYXJ0JyxbXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDYvMS8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5kaXJlY3RpdmUoJ3RyZWVTZWFyY2hCb3gnLCB0cmVlU2VhcmNoQm94KTtcblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiB0cmVlU2VhcmNoQm94KCR0aW1lb3V0LCAkcSwgJGxvZykge1xuXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXBsYWNlOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogQ2FzY2FkZVRyZWVTZWFyY2hCb3hDb250cm9sbGVyLFxuICAgICAgICAgICAgLy8gdGVtcGxhdGVVcmw6ICdzZWFyY2hib3gudG1wbC5odG1sJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOic8ZGl2IGxheW91dC1hbGlnbj1cInN0YXJ0IGNlbnRlclwiIGxheW91dD1cInJvd1wiIGxheW91dC1maWxsPiA8ZGl2IGZsZXgtb2Zmc2V0PVwiNVwiIGNsYXNzPVwic2VhcmNoLWJveC1ob2xkZXJcIj4gPG1kLWF1dG9jb21wbGV0ZSBuZy1kaXNhYmxlZD1cInZtLmlzRGlzYWJsZWRcIiBtZC1uby1jYWNoZT1cInZtLm5vQ2FjaGVcIiBtZC1zZWxlY3RlZC1pdGVtPVwidm0uc2VsZWN0ZWRJdGVtXCIgbWQtc2VhcmNoLXRleHQtY2hhbmdlPVwidm0uc2VhcmNoVGV4dENoYW5nZSh2bS5zZWFyY2hUZXh0KVwiIG1kLXNlYXJjaC10ZXh0PVwidm0uc2VhcmNoVGV4dFwiIG1kLXNlbGVjdGVkLWl0ZW0tY2hhbmdlPVwidm0uc2VsZWN0ZWRJdGVtQ2hhbmdlKGl0ZW0pXCIgbWQtaXRlbXM9XCJpdGVtIGluIHZtLnF1ZXJ5U2VhcmNoKHZtLnNlYXJjaFRleHQpXCIgbWQtaXRlbS10ZXh0PVwiaXRlbS5uYW1lXCIgbWQtbWluLWxlbmd0aD1cIjBcIiBwbGFjZWhvbGRlcj1cIlNlYXJjaCBQZW9wbGVcIiBjbGFzcz1cImF1dG8tY29tcGxldGUtY3VzdG9tXCI+IDxtZC1pdGVtLXRlbXBsYXRlPiA8c3BhbiBtZC1oaWdobGlnaHQtdGV4dD1cImN0cmwuc2VhcmNoVGV4dFwiIG1kLWhpZ2hsaWdodC1mbGFncz1cIl5pXCI+e3tpdGVtLm5hbWV9fTwvc3Bhbj4gPC9tZC1pdGVtLXRlbXBsYXRlPiA8bWQtbm90LWZvdW5kPiBObyBzdGF0ZXMgbWF0Y2hpbmcgXCJ7e2N0cmwuc2VhcmNoVGV4dH19XCIgd2VyZSBmb3VuZC4gPGEgbmctY2xpY2s9XCJjdHJsLm5ld1N0YXRlKGN0cmwuc2VhcmNoVGV4dClcIj5DcmVhdGUgYSBuZXcgb25lITwvYT4gPC9tZC1ub3QtZm91bmQ+IDwvbWQtYXV0b2NvbXBsZXRlPiA8L2Rpdj48ZGl2IGZsZXggY2xhc3M9XCJidG4tc2VhcmNoLWhvbGRlclwiPjxidXR0b24gY2xhc3M9XCJidG4tc2VhcmNoXCIgdHlwZT1cImJ1dHRvblwiPjxpIGNsYXNzPVwiZmEgZmEtc2VhcmNoXCI+PC9pPiA8L2J1dHRvbj48L2Rpdj48L2Rpdj4nLFxuICAgICAgICAgICAgLy8gdGVtcGxhdGU6JzxkaXYgbGF5b3V0LWFsaWduPVwic3RhcnQgY2VudGVyXCIgbGF5b3V0PVwicm93XCIgbGF5b3V0LWZpbGw+IDxkaXYgZmxleC1vZmZzZXQ9XCI1XCIgZmxleD1cIjYwXCI+IDxkaXYgY2xhc3M9XCJzZWFyY2gtZ3JvdXAgYWN0aXZlXCI+IDxkaXY+IDxpbnB1dCBpZD1cInNlYXJjaF90eHRcIiBuYW1lPVwic2VhcmNoX3R4dFwiIHR5cGU9XCJ0ZXh0XCIgb25rZXl1cD1cInZpZXdFbXBsb3llZSgxKTtcIiBwbGFjZWhvbGRlcj1cIlNlYXJjaFwiPiA8YnV0dG9uIGNsYXNzPVwiYnRuLXNlYXJjaFwiIHR5cGU9XCJidXR0b25cIiBvbmNsaWNrPVwidmlld0VtcGxveWVlKDEpO1wiPjwvYnV0dG9uPiA8L2Rpdj48YSBjbGFzcz1cImFkdmFjZVwiIGhyZWY9XCIjXCI+QWR2YW5jZTwvYT4gPC9kaXY+IDwvZGl2PjwvZGl2PicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICBzY29wZToge30sXG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG4gICAgICAgICAgICAgICAgc2VhcmNoYWJsZUxpc3Q6Jz0nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGluazogbGlua1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoKSB7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8qQG5nSW5qZWN0Ki9cbiAgICAgICAgZnVuY3Rpb24gQ2FzY2FkZVRyZWVTZWFyY2hCb3hDb250cm9sbGVyKHRyZWVWaWV3U2VydmljZSkge1xuXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICAgICAgdm0uc2ltdWxhdGVRdWVyeSA9IGZhbHNlO1xuICAgICAgICAgICAgdm0uaXNEaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdm0ubm9DYWNoZSA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIGxpc3Qgb2YgYHN0YXRlYCB2YWx1ZS9kaXNwbGF5IG9iamVjdHNcbiAgICAgICAgICAgIHZtLnF1ZXJ5U2VhcmNoID0gcXVlcnlTZWFyY2g7XG4gICAgICAgICAgICB2bS5zZWxlY3RlZEl0ZW1DaGFuZ2UgPSBzZWxlY3RlZEl0ZW1DaGFuZ2U7XG4gICAgICAgICAgICB2bS5zZWFyY2hUZXh0Q2hhbmdlID0gc2VhcmNoVGV4dENoYW5nZTtcblxuICAgICAgICAgICAgdm0ubmV3U3RhdGUgPSBuZXdTdGF0ZTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gbmV3U3RhdGUoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIlNvcnJ5ISBZb3UnbGwgbmVlZCB0byBjcmVhdGUgYSBDb25zdGl0dXRpb24gZm9yIFwiICsgc3RhdGUgKyBcIiBmaXJzdCFcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgICAgICAgLy8gSW50ZXJuYWwgbWV0aG9kc1xuICAgICAgICAgICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2VhcmNoIGZvciBzdGF0ZXMuLi4gdXNlICR0aW1lb3V0IHRvIHNpbXVsYXRlXG4gICAgICAgICAgICAgKiByZW1vdGUgZGF0YXNlcnZpY2UgY2FsbC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gcXVlcnlTZWFyY2gocXVlcnkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2bS5zZWFyY2hhYmxlTGlzdCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBxdWVyeSA/IHZtLnNlYXJjaGFibGVMaXN0LmZpbHRlcihjcmVhdGVGaWx0ZXJGb3IocXVlcnkpKSA6IHZtLnNlYXJjaGFibGVMaXN0LFxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZDtcbiAgICAgICAgICAgICAgICBpZiAodm0uc2ltdWxhdGVRdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIE1hdGgucmFuZG9tKCkgKiAxMDAwLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc2VhcmNoVGV4dENoYW5nZSh0ZXh0KSB7XG4gICAgICAgICAgICAgICAgJGxvZy5pbmZvKCdUZXh0IGNoYW5nZWQgdG8gJyArIHRleHQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBzZWxlY3RlZEl0ZW1DaGFuZ2UoaXRlbSkge1xuXG4gICAgICAgICAgICAgICAgaWYoaXRlbSl7XG4gICAgICAgICAgICAgICAgICAgICRsb2cuaW5mbygnSXRlbSBjaGFuZ2VkIHRvICcgKyBKU09OLnN0cmluZ2lmeShpdGVtKSk7XG4gICAgICAgICAgICAgICAgICAgIHRyZWVWaWV3U2VydmljZS5zZXRTZWFyY2hlZE5vZGUoaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICBmdW5jdGlvbiBleHRyYWN0Tm9kZXMobGlzdE9mTm9kZXMpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0T2ZOb2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBub2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9kZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUxvd2VyQ2FzZTogbm9kZS5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGUgZmlsdGVyIGZ1bmN0aW9uIGZvciBhIHF1ZXJ5IHN0cmluZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVGaWx0ZXJGb3IocXVlcnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG93ZXJjYXNlUXVlcnkgPSBhbmd1bGFyLmxvd2VyY2FzZShxdWVyeSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZmlsdGVyRm4oc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChzdGF0ZS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihsb3dlcmNhc2VRdWVyeSkgPT09IDApO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG5cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA2LzUvMTcuXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ29yZ0NoYXJ0JykuZGlyZWN0aXZlKCd0cmVlVG9vbFNldCcsIHRyZWVUb29sU2V0KTtcblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiB0cmVlVG9vbFNldCgpIHtcblxuICAgICAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgcmVwbGFjZTogZmFsc2UsXG4gICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFRyZWVUb29sU2V0LFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgLy8gdGVtcGxhdGVVcmw6ICd0b29sc2V0LnRtcGwuaHRtbCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgbGF5b3V0PVwiY29sdW1uXCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGVuZFwiPicgK1xuICAgICAgICAgICAgJyA8ZGl2IGxheW91dD1cImNvbHVtblwiIGxheW91dC1hbGlnbj1cInNwYWNlLWFyb3VuZCBjZW50ZXJcIiBjbGFzcz1cInRvb2xzZXQtd3JhcHBlclwiIGZsZXgtb2Zmc2V0PVwiNVwiPicgK1xuICAgICAgICAgICAgJyA8ZGl2PiA8YnV0dG9uIGNsYXNzPVwidG9vbHNldC1idG4gdXBwZXItcm91bmRlZFwiIG5nLWNsaWNrPVwidm0uem9vbVRyaWdnZXIoXFwnaW5jcmVtZW50XFwnKVwiPiA8bWQtdG9vbHRpcCBtZC1kaXJlY3Rpb249XCJib3R0b21cIj5ab29tIEluPC9tZC10b29sdGlwPiA8bWQtaWNvbj48aSBuZy1jbGFzcz1cIntcXCdmYSBmYS1wbHVzXFwnOnRydWUsXFwnY3VzdG9tLWZvbnQtaWNvblxcJzp0cnVlfVwiPjwvaT48L21kLWljb24+PC9idXR0b24+IDwvZGl2PicgK1xuICAgICAgICAgICAgJzxkaXY+IDxidXR0b24gY2xhc3M9XCJ0b29sc2V0LWJ0biBsb3dlci1yb3VuZGVkXCIgbmctY2xpY2s9XCJ2bS56b29tVHJpZ2dlcihcXCdkZWNyZW1lbnRcXCcpXCI+IDxtZC10b29sdGlwIG1kLWRpcmVjdGlvbj1cImJvdHRvbVwiPlpvb20gT3V0PC9tZC10b29sdGlwPiA8bWQtaWNvbj48aSBuZy1jbGFzcz1cIntcXCdmYSBmYS1taW51c1xcJzp0cnVlLFxcJ2N1c3RvbS1mb250LWljb25cXCc6dHJ1ZX1cIj48L2k+PC9tZC1pY29uPjwvYnV0dG9uPiA8L2Rpdj4nICtcbiAgICAgICAgICAgICc8ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDogMTBweFwiPiA8YnV0dG9uIGNsYXNzPVwidG9vbHNldC1idG5cIiBuZy1jbGljaz1cInZtLnRvZ2dsZUV4cGFuZEFsbE1vZGUoKVwiPiA8bWQtdG9vbHRpcCBtZC1kaXJlY3Rpb249XCJib3R0b21cIj48c3BhbiBuZy1pZj1cIiF2bS5pc0V4cGFuZEFsbE1vZGVcIj5FeHBhbmQgQWxsPC9zcGFuPjxzcGFuIG5nLWlmPVwidm0uaXNFeHBhbmRBbGxNb2RlXCI+Q29sbGFwc2UgQWxsPC9zcGFuPjwvbWQtdG9vbHRpcD4gPG1kLWljb24+PGkgbmctY2xhc3M9XCJ7XFwnZmEgZmEtZXhwYW5kXFwnOiF2bS5pc0V4cGFuZEFsbE1vZGUsXFwnZmEgZmEtY29tcHJlc3NcXCc6dm0uaXNFeHBhbmRBbGxNb2RlLFxcJ2N1c3RvbS1mb250LWljb25cXCc6dHJ1ZX1cIj48L2k+IDwvbWQtaWNvbj48L2J1dHRvbj4gPC9kaXY+JyArXG4gICAgICAgICAgICAnPC9kaXY+PC9kaXY+JyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgICAgICB6b29tVHJpZ2dlckNhbGxCYWNrOiAnJidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtLCBhdHRyLCB2bSkge1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gVHJlZVRvb2xTZXQodG9vbFNldFNlcnZpY2UpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5pc0V4cGFuZEFsbE1vZGUgPSB0b29sU2V0U2VydmljZS5pc0V4cGFuZEFsbE1vZGUoKTtcbiAgICAgICAgdm0udG9nZ2xlRXhwYW5kQWxsTW9kZSA9IHRvZ2dsZUV4cGFuZEFsbE1vZGU7XG4gICAgICAgIHZtLnpvb21UcmlnZ2VyID0gem9vbVRyaWdnZXI7XG4vKiAgICAgICAgdm0uaW5jcmVtZW50Wm9vbVNjYWxlID0gaW5jcmVtZW50Wm9vbVNjYWxlO1xuICAgICAgICB2bS5kZWNyZW1lbnRab29tU2NhbGUgPSBkZWNyZW1lbnRab29tU2NhbGU7Ki9cbiAgICAgICAgdm0uem9vbVNjYWxlID0gdG9vbFNldFNlcnZpY2UuZ2V0Wm9vbVNjYWxlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlRXhwYW5kQWxsTW9kZSgpIHtcbiAgICAgICAgICAgIHZtLmlzRXhwYW5kQWxsTW9kZSA9IHRvb2xTZXRTZXJ2aWNlLnRvZ2dsZUV4cGFuZEFsbE1vZGUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiB6b29tVHJpZ2dlcihzdGF0dXMpIHtcbiAgICAgICAgICAgIHZtLnpvb21UcmlnZ2VyQ2FsbEJhY2soe3N0YXR1czpzdGF0dXN9KTtcbiAgICAgICAgfVxuXG4vKiAgICAgICAgZnVuY3Rpb24gaW5jcmVtZW50Wm9vbVNjYWxlKCkge1xuICAgICAgICAgICAgdm0uem9vbVNjYWxlID0gdG9vbFNldFNlcnZpY2UuaW5jcmVtZW50Wm9vbVNjYWxlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZWNyZW1lbnRab29tU2NhbGUoKSB7XG4gICAgICAgICAgICB2bS56b29tU2NhbGUgPSB0b29sU2V0U2VydmljZS5kZWNyZW1lbnRab29tU2NhbGUoKTtcbiAgICAgICAgfSovXG4gICAgfVxuXG59KSgpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNi81LzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdvcmdDaGFydCcpLmZhY3RvcnkoJ3Rvb2xTZXRTZXJ2aWNlJywgdG9vbFNldFNlcnZpY2UpO1xuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIHRvb2xTZXRTZXJ2aWNlKCkge1xuXG4gICAgICAgIHZhciBpc0FsbEV4cGFuZGVkTW9kZSA9IGZhbHNlO1xuICAgICAgICB2YXIgTE9XRVNUX1pPT01fU0NBTEUgPSAwLjM7XG4gICAgICAgIHZhciBERUZBVUxUX1pPT01fU0NBTEUgPSAxO1xuICAgICAgICB2YXIgem9vbVNjYWxlID0gREVGQVVMVF9aT09NX1NDQUxFO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0V4cGFuZEFsbE1vZGU6IGlzRXhwYW5kQWxsTW9kZSxcbiAgICAgICAgICAgIHRvZ2dsZUV4cGFuZEFsbE1vZGU6IHRvZ2dsZUV4cGFuZEFsbE1vZGUsXG4gICAgICAgICAgICBnZXRab29tU2NhbGU6IGdldFpvb21TY2FsZSxcbiAgICAgICAgICAgIHNldFpvb21TY2FsZTogc2V0Wm9vbVNjYWxlLFxuICAgICAgICAgICAgaW5jcmVtZW50Wm9vbVNjYWxlOiBpbmNyZW1lbnRab29tU2NhbGUsXG4gICAgICAgICAgICBkZWNyZW1lbnRab29tU2NhbGU6IGRlY3JlbWVudFpvb21TY2FsZVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzRXhwYW5kQWxsTW9kZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0FsbEV4cGFuZGVkTW9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUV4cGFuZEFsbE1vZGUoKSB7XG4gICAgICAgICAgICBpc0FsbEV4cGFuZGVkTW9kZSA9ICFpc0FsbEV4cGFuZGVkTW9kZTtcbiAgICAgICAgICAgIHJldHVybiBpc0FsbEV4cGFuZGVkTW9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFpvb21TY2FsZSgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRab29tIFNjYWxlJyx6b29tU2NhbGUpO1xuICAgICAgICAgICAgcmV0dXJuIHpvb21TY2FsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFpvb21TY2FsZShzY2FsZSkge1xuICAgICAgICAgICAgaWYgKHNjYWxlID4gMSkge1xuICAgICAgICAgICAgICAgIC8vIHpvb21TY2FsZSA9IHNjYWxlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB6b29tU2NhbGUgPSBMT1dFU1RfWk9PTV9TQ0FMRSArIHNjYWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgem9vbVNjYWxlID0gc2NhbGU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnem9vbSBzY2FsZScsIHpvb21TY2FsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpbmNyZW1lbnRab29tU2NhbGUoKSB7XG4gICAgICAgICAgICB6b29tU2NhbGUgKz0gMC4xO1xuXG4gICAgICAgICAgICByZXR1cm4gem9vbVNjYWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZGVjcmVtZW50Wm9vbVNjYWxlKCkge1xuICAgICAgICAgICAgaWYgKHpvb21TY2FsZSA+IC0yLjUpIHtcbiAgICAgICAgICAgICAgICB6b29tU2NhbGUgLT0gMC4xO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gem9vbVNjYWxlO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDUvMzEvMTcuXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIGFuZ3VsYXIubW9kdWxlKCdvcmdDaGFydCcpLmRpcmVjdGl2ZSgndHJlZU5vZGUnLCB0cmVlTm9kZSk7XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gdHJlZU5vZGUodHJlZVZpZXdTZXJ2aWNlLCAkZG9jdW1lbnQsJHJvb3RTY29wZSkge1xuXG4gICAgICAgIHZhciBjYXNjYWRlVHJlZU5vZGVEaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlTmFtZXNwYWNlOidzdmcnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogQ2FzY2FkZVRyZWVOb2RlQ29udHJvbGxlcixcbiAgICAgICAgICAgIC8vIHRlbXBsYXRlVXJsOiAnYXBwL2Nhc2NhZGUvdGVzdC9vcmdjaGFydC9kaXJlY3RpdmVzL3RyZWVub2RlLnRtcGwuaHRtbCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxmb3JlaWduT2JqZWN0IHdpZHRoPVwiMjYwXCIgaGVpZ2h0PVwiMjIwXCIgc3R5bGU9XCJvdmVyZmxvdzogdmlzaWJsZVwiPjxkaXYgc3R5bGU9XCJtYXJnaW4tdG9wOiA1MHB4O21hcmdpbi1sZWZ0OjEwcHhcIiBuZy1jbGFzcz1cIntcXCdhY3RpdmUtbm9kZVxcJzp2bS5pc0FjdGl2ZX1cIiBjbGFzcz1cInt7dm0ubm9kZUNsYXNzfX1cIiBuZy1tb3VzZWVudGVyPVwidm0ud2hlbk1vdXNlRW50ZXIoKVwiIG5nLW1vdXNlbGVhdmU9XCJ2bS53aGVuTW91c2VMZWF2ZSgpXCIgbmctY2xpY2s9XCJ2bS5tYWtlTm9kZUFjdGl2ZSgpXCI+IDxkaXYgbGF5b3V0PVwiY29sdW1uXCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiPiA8ZGl2IG5nLWNsYXNzPVwie1xcJ25vZGUtdGV4dC1tYWluLW5vLWltYWdlXFwnOiF2bS5pc0ltYWdlUHJlc2VudH1cIiBjbGFzcz1cIm1kLXN1YmhlYWQgbm9kZS10ZXh0LW1haW5cIj48dHJpbS13b3JkIHdvcmQtb3B0aW9ucyA9XCJ2bS53b3JkVHJpbU9wdGlvbnNcIiB3b3JkPVwidm0ubm9kZS5uYW1lXCI+PC90cmltLXdvcmQ+PC9kaXY+PGRpdj4gPGRpdiBjbGFzcz1cInJvdW5kLWNoaXAtd3JhcHBlclwiPjxpbWcgbmctaWY9XCJ2bS5pc0ltYWdlUHJlc2VudFwiIG5nLXNyYz1cInt7dm0ubm9kZS5pbWFnZV91cmx9fVwiIGNsYXNzPVwicm91bmQtY2hpcFwiPiA8L2Rpdj48L2Rpdj48ZGl2ICBuZy1jbGFzcz1cIntcXCdub2RlLXRleHQtc3ViLW5vLWltYWdlXFwnOiF2bS5pc0ltYWdlUHJlc2VudH1cIiBjbGFzcz1cIm1kLXN1YmhlYWQgbm9kZS10ZXh0LXN1YlwiPnt7dm0ubm9kZS5uYW1lfX08L2Rpdj48ZGl2IGxheW91dC1hbGlnbj1cImNlbnRlciBjZW50ZXJcIiBsYXlvdXQtZmlsbCBsYXlvdXQ9XCJyb3dcIj4gPGRpdiBuZy1yZXBlYXQ9XCJhY3Rpb24gaW4gdm0ubm9kZUFjdGlvbnNcIj4gPGJ1dHRvbiBuZy1jbGljaz1cInZtLm1ha2VDYWxsQmFjayhhY3Rpb24uY2FsbEJhY2spOyAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XCIgY2xhc3M9XCJhY3Rpb24tYnRuXCI+PHNwYW4+PC9zcGFuPiZuYnNwOzxpIGNsYXNzPVwie3thY3Rpb24uaWNvbn19XCI+PC9pPjwvYnV0dG9uPiA8L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+JyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgICAgICBub2RlSWQ6ICdAJyxcbiAgICAgICAgICAgICAgICBub2RlQWN0aW9uczogJ0AnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGluazoge1xuICAgICAgICAgICAgICAgIHByZTpsaW5rXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGNhc2NhZGVUcmVlTm9kZURpcmVjdGl2ZTtcblxuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW0sIGF0dHJzLCB2bSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYXR0cnMuaW1hZ2VwcmVzZW50KTtcbiAgICAgICAgICAgIHZtLmlzSW1hZ2VQcmVzZW50ID0gYXR0cnMuaW1hZ2VwcmVzZW50PT0ndHJ1ZSc/dHJ1ZTpmYWxzZTtcbiAgICAgICAgICAgIHZtLmlkID0gYXR0cnMubm9kZWlkO1xuICAgICAgICAgICAgdm0ubm9kZUFjdGlvbnMgPSBhbmd1bGFyLmZyb21Kc29uKGF0dHJzLm5vZGVhY3Rpb25zKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZtLm5vZGVBY3Rpb25zKTtcbiAgICAgICAgICAgIHZtLmlzUGlubmVkTm9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgdm0ubm9kZSA9IHRyZWVWaWV3U2VydmljZS5maW5kQnlJZChhdHRycy5ub2RlaWQpO1xuICAgICAgICAgICAgdm0ud29yZFRyaW1PcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHdvcmQ6ICdkJyxcbiAgICAgICAgICAgICAgICBmcm9tOiAnMCcsXG4gICAgICAgICAgICAgICAgdW50aWw6ICcxMicsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogJ3RydWUnLFxuICAgICAgICAgICAgICAgIHRvb2xUaXBEaXJlY3Rpb246ICd0b3AnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdm0ubm9kZUNsYXNzID0gJ25vZGUtbGFiZWwgbm9kZS0nICsgdm0ubm9kZS50eXBlKyAnIG5vZGUtJyt2bS5pZDtcbiAgICAgICAgICAgIHZtLmlzRXhwYW5kZWRWaWV3ID0gZmFsc2U7XG4gICAgICAgICAgICB2bS5pc0FjdGl2ZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICB2bS53aGVuTW91c2VFbnRlciA9IHdoZW5Nb3VzZUVudGVyO1xuICAgICAgICAgICAgdm0ud2hlbk1vdXNlTGVhdmUgPSB3aGVuTW91c2VMZWF2ZTtcbiAgICAgICAgICAgIHZtLnRvZ2dsZVBpbm5lZE1vZGUgPSB0b2dnbGVQaW5uZWRNb2RlO1xuICAgICAgICAgICAgdm0ubWFrZUNhbGxCYWNrID0gbWFrZUNhbGxCYWNrO1xuICAgICAgICAgICAgdm0ubWFrZU5vZGVBY3RpdmUgPSBtYWtlTm9kZUFjdGl2ZTtcbiAgICAgICAgICAgIHZhciBub2RlRE9NRWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChlbGVtLmNoaWxkcmVuKClbMF0pO1xuXG4gICAgICAgICAgICAkZG9jdW1lbnQub24oJ2NsaWNrJywgb25Eb2N1bWVudENsaWNrKTtcbiAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBvbkRlc3Ryb3kpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBtYWtlTm9kZUFjdGl2ZSgpIHtcbiAgICAgICAgICAgICAgICBjbGVhckFsbE90aGVyQWN0aXZlTm9kZXMoKTtcbiAgICAgICAgICAgICAgICB2bS5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHdoZW5Nb3VzZUVudGVyKCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtb3VzZSBFbnRlcmVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHdoZW5Nb3VzZUxlYXZlKCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtb3VzZSBsZWF2ZWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gdG9nZ2xlUGlubmVkTW9kZSgpIHtcbiAgICAgICAgICAgICAgICB2bS5pc1Bpbm5lZE5vZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZtLmlzUGlubmVkTm9kZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG1ha2VDYWxsQmFjayhjYWxsQmFja0Z1bmNOYW1lKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2FsbEJhY2tGdW5jTmFtZSk7XG4gICAgICAgICAgICAgICAgc2NvcGUuJHBhcmVudC52bS5tYWtlQ2FsbEJhY2soY2FsbEJhY2tGdW5jTmFtZSx2bS5ub2RlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJBbGxPdGhlckFjdGl2ZU5vZGVzKCl7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdhcHA6bm9kZXM6Y2xlYXJhY3RpdmUnLHsnZGF0YSc6ICcnfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRG9jdW1lbnRDbGljayhldikge1xuXG4gICAgICAgICAgICAgICAgLy9DaGVjayBpZiBjbGlja2VkIG91dHNpZGUgYW5kIGRpc2NhcmQgQWN0aXZlXG4gICAgICAgICAgICAgICAgaWYgKGVsZW0gIT09IGV2LnRhcmdldCAmJiAhZWxlbVswXS5jb250YWlucyhldi50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vcmVtb3ZlIGV2ZW50IGhhbmRsZXJzIHdoZW4gY3VzdG9tIGRpcmVjdGl2ZSBkZXN0cm95ZWRcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRGVzdHJveSgpIHtcbiAgICAgICAgICAgICAgICAkZG9jdW1lbnQub2ZmKCdjbGljaycsIG9uRG9jdW1lbnRDbGljayk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIENhc2NhZGVUcmVlTm9kZUNvbnRyb2xsZXIoKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgfVxufSkoKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBHYXlhbiBQcmFzYW5uYSBvbiA1LzMwLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5kaXJlY3RpdmUoJ3RyZWVWaWV3JywgdHJlZVZpZXcpO1xuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIHRyZWVWaWV3KCRmaWx0ZXIsICRjb21waWxlLCB0cmVlVmlld1NlcnZpY2UsICR0aW1lb3V0LCB0b29sU2V0U2VydmljZSwgJHdpbmRvdykge1xuICAgICAgICB2YXIgdHJlZVZpZXdEaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXBsYWNlOiAnZmFsc2UnLFxuICAgICAgICAgICAgdGVtcGxhdGVOYW1lc3BhY2U6ICdzdmcnLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgICAgICBkYXRhOiAnPScsXG4gICAgICAgICAgICAgICAgYWJuOiAnJicsXG4gICAgICAgICAgICAgICAgZGVsOiAnJicsXG4gICAgICAgICAgICAgICAgYWRkOiAnJicsXG4gICAgICAgICAgICAgICAgZWRpdDogJyYnLFxuICAgICAgICAgICAgICAgIG5vZGVBY3Rpb25zOiAnQCcsXG4gICAgICAgICAgICAgICAgdHJlZWRhdGE6ICc9JyxcbiAgICAgICAgICAgICAgICBzZWFyY2hhYmxlTGlzdDogJz0nLFxuICAgICAgICAgICAgICAgIGltYWdlcHJlc2VudDogJz0nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlcjogVHJlZVZpZXdEaXJlY3RpdmVDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazoge1xuICAgICAgICAgICAgICAgIHByZTogbGlua1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW0sIGF0dHJzLCB2bSkge1xuXG4gICAgICAgICAgICB2YXIgbm9kZUJvdW5kYXJpZXMgPSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDI0MCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE0NixcbiAgICAgICAgICAgICAgICBob3Jpem9udGFsU2VwZXJhdGlvbjogMTYsXG4gICAgICAgICAgICAgICAgdmVydGljYWxTZXBlcmF0aW9uOiAxMjhcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZHJhZ1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBub2RlcztcbiAgICAgICAgICAgIHZhciBkb21Ob2RlO1xuICAgICAgICAgICAgdmFyIHJlbENvb3JkcztcbiAgICAgICAgICAgIHZhciBwYW5UaW1lcjtcbiAgICAgICAgICAgIC8vIHZhcmlhYmxlcyBmb3IgZHJhZy9kcm9wXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWROb2RlID0gbnVsbDtcbiAgICAgICAgICAgIHZhciBkcmFnZ2luZ05vZGUgPSBudWxsO1xuICAgICAgICAgICAgLy8gcGFubmluZyB2YXJpYWJsZXNcbiAgICAgICAgICAgIHZhciBwYW5TcGVlZCA9IDIwMDtcbiAgICAgICAgICAgIHZhciBwYW5Cb3VuZGFyeSA9IDIwOyAvLyBXaXRoaW4gMjBweCBmcm9tIGVkZ2VzIHdpbGwgcGFuIHdoZW4gZHJhZ2dpbmcuXG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlQ29vcmRzO1xuICAgICAgICAgICAgdmFyIGxpbmtzO1xuICAgICAgICAgICAgdmFyIG5vZGVQYXRocztcbiAgICAgICAgICAgIHZhciBub2Rlc0V4aXQ7XG4gICAgICAgICAgICB2YXIgcGFyZW50TGluaztcblxuICAgICAgICAgICAgdmFyIG5vZGVBY3RpdmVDbGVhckxpc3RlbmVyO1xuICAgICAgICAgICAgdmFyIG5vZGVEZWxldGVMaXN0ZW5lcjtcbiAgICAgICAgICAgIHZhciBub2RlQWZ0ZXJBZGRMaXN0ZW5lcjtcbiAgICAgICAgICAgIHZhciBub2RlQWZ0ZXJVcGRhdGVMaXN0ZW5lcjtcbiAgICAgICAgICAgIHZhciBkcmFnTGlzdGVuZXI7XG5cbiAgICAgICAgICAgIHZhciBub2RlTGlzdCA9IFtdO1xuICAgICAgICAgICAgdmFyIG0gPSBbMjAsIDIwLCAyMCwgMjBdLFxuICAgICAgICAgICAgICAgIHcgPSAkd2luZG93LmlubmVyV2lkdGggLSAyMCAtIG1bMV0gLSBtWzNdLFxuICAgICAgICAgICAgICAgIGlIZWlnaHQgPSAkd2luZG93LmlubmVySGVpZ2h0LFxuICAgICAgICAgICAgICAgIGggPSA2MDAgLSBtWzBdIC0gbVsyXSxcbiAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICByID0gODAwLFxuICAgICAgICAgICAgICAgIHggPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oWzAsIHddKS5yYW5nZShbMCwgd10pLFxuICAgICAgICAgICAgICAgIHkgPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oWzAsIGhdKS5yYW5nZShbMCwgaF0pLFxuICAgICAgICAgICAgICAgIHJvb3Q7XG4gICAgICAgICAgICB2YXIgdmlld0JveEJvdW5kYXJ5ID0gJzAgMCAnICsgdyArIFwiIFwiICsgaUhlaWdodDtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyRWxlbWVudCA9IGQzLnNlbGVjdChlbGVtWzBdKTtcbiAgICAgICAgICAgIHZhciBsYXN0U2VhcmNoZWRQYXRoID0gW107XG5cbiAgICAgICAgICAgIHZhciB6b29tID0gZDMuYmVoYXZpb3Iuem9vbSgpXG4gICAgICAgICAgICAgICAgLnRyYW5zbGF0ZShbMCwgMF0pXG4gICAgICAgICAgICAgICAgLnNjYWxlKHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpKVxuICAgICAgICAgICAgICAgIC5zY2FsZUV4dGVudChbMC4zLCA4XSlcbiAgICAgICAgICAgICAgICAub24oXCJ6b29tXCIsIHpvb21lZCk7XG5cbiAgICAgICAgICAgIHZtLndvcmRUcmltT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICB3b3JkOiAnZCcsXG4gICAgICAgICAgICAgICAgZnJvbTogJzAnLFxuICAgICAgICAgICAgICAgIHVudGlsOiAnMTInLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6ICd0cnVlJyxcbiAgICAgICAgICAgICAgICB0b29sVGlwRGlyZWN0aW9uOiAndG9wJ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZWxlbS5hcHBlbmQoJGNvbXBpbGUoXCI8ZGl2IGNsYXNzPSdjb21wb25lbnQtY29udGFpbmVyJz48ZGl2IGxheW91dD1cXFwicm93XFxcIiBsYXlvdXQtYWxpZ249XFxcInNwYWNlLWFyb3VuZCBjZW50ZXJcXFwiPjxkaXYgZmxleD48dHJlZS1zZWFyY2gtYm94IHNlYXJjaGFibGUtbGlzdD0ndm0uc2VhcmNoYWJsZUxpc3QnPjwvdHJlZS1zZWFyY2gtYm94PjwvZGl2PjxkaXYgZmxleD48dHJlZS10b29sLXNldCB6b29tLXRyaWdnZXItY2FsbC1iYWNrPSd2bS56b29tVHJpZ2dlcihzdGF0dXMpJz48L3RyZWUtdG9vbC1zZXQ+PC9kaXY+PC9kaXY+PC9kaXY+XCIpKHNjb3BlKSk7XG5cbiAgICAgICAgICAgIHZtLnpvb21UcmlnZ2VyID0gem9vbVRyaWdnZXI7XG5cbiAgICAgICAgICAgIC8qTGlzdGVuZXJzKi9cblxuICAgICAgICAgICAgbm9kZUFjdGl2ZUNsZWFyTGlzdGVuZXIgPSBzY29wZS4kb24oJ2FwcDpub2RlczpjbGVhcmFjdGl2ZScsIG9uRGVhY3RpdmF0ZU5vZGVzKTtcbiAgICAgICAgICAgIG5vZGVEZWxldGVMaXN0ZW5lciA9IHNjb3BlLiRvbignYXBwOm5vZGVzOmRlbGV0ZScsIG9uTm9kZURlbGV0ZSk7XG4gICAgICAgICAgICBub2RlQWZ0ZXJBZGRMaXN0ZW5lciA9IHNjb3BlLiRvbignYXBwOm5vZGVzOmFkZDo6YWZ0ZXInLCBvbk5vZGVBZnRlckFkZCk7XG4gICAgICAgICAgICBub2RlQWZ0ZXJVcGRhdGVMaXN0ZW5lciA9IHNjb3BlLiRvbignYXBwOm5vZGVzOnVwZGF0ZTo6YWZ0ZXInLCBvbk5vZGVBZnRlclVwZGF0ZSk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHpvb21UcmlnZ2VyKHN0YXR1cykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgem9vbUNsaWNrKHN0YXR1cyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uSW5pdCgpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZVdhdGNoZXJzKCk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGVXYXRjaGVycygpIHtcbiAgICAgICAgICAgICAgICBvblNlYXJjaFdhdGNoKCk7XG4gICAgICAgICAgICAgICAgLy8gb25ab29tV2F0Y2goKTtcbiAgICAgICAgICAgICAgICBvbkV4cGFuZFdhdGNoKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRXhwYW5kV2F0Y2goKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvb2xTZXRTZXJ2aWNlLmlzRXhwYW5kQWxsTW9kZSgpXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGlzSW5FeHBhbmRBbGxNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0luRXhwYW5kQWxsTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kQWxsSW5DaGFpbigpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VBbGxJbkNoYWluKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBleHBhbmRBbGxJbkNoYWluKCkge1xuICAgICAgICAgICAgICAgIGZvcmNlU2NhbGUoMC41KTtcbiAgICAgICAgICAgICAgICB0b29sU2V0U2VydmljZS5zZXRab29tU2NhbGUoMC41KTtcbiAgICAgICAgICAgICAgICBjZW50ZXJUaGVSb290KCk7XG4gICAgICAgICAgICAgICAgZXhwYW5kQWxsKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbGxhcHNlQWxsSW5DaGFpbigpIHtcbiAgICAgICAgICAgICAgICBmb3JjZVNjYWxlKDEpO1xuICAgICAgICAgICAgICAgIHRvb2xTZXRTZXJ2aWNlLnNldFpvb21TY2FsZSgxKTtcbiAgICAgICAgICAgICAgICBjZW50ZXJUaGVSb290KCk7XG4gICAgICAgICAgICAgICAgLyogICAgICAgICAgICAgICAgZm9yY2Vab29tKCk7Ki9cbiAgICAgICAgICAgICAgICBjb2xsYXBzZUFsbCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvblNlYXJjaFdhdGNoKCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmVlVmlld1NlcnZpY2UuZ2V0U2VhcmNoZWROb2RlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcnN0IGZpbmQgYW5kIGhpZ2hsaWdodCB0aGUgcGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0UGF0aChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNvbHZlZE5vZGUgPSBnZXRUcmVlTm9kZUJ5T2JqZWN0KG5vZGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPIHJlbW92ZSBsYXRlciBjb3ogZXhwYW5kaW5nIG9jY3VycyB3aGVuIGhpZ2hsaWdodGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogICAgICAgICAgICAgICAgICAgICAgICBleHBhbmROb2RlKHJlc29sdmVkTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlKHJlc29sdmVkTm9kZSk7Ki9cblxuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc29sdmVkTm9kZS54LCByZXNvbHZlZE5vZGUueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJBbGxBY3RpdmVOb2RlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VOb2RlQWN0aXZlKHJlc29sdmVkTm9kZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuVG9UaGVOb2RlKHJlc29sdmVkTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZm9yY2VTY2FsZShzY2FsZSkge1xuICAgICAgICAgICAgICAgIHZhciB2aWV3ID0ge1xuICAgICAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgICAgICAgICBrOiBzY2FsZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaW50ZXJwb2xhdGVab29tKFt2aWV3LngsIHZpZXcueV0sIHZpZXcuayk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIERlZmluZSB0aGUgZHJhZyBsaXN0ZW5lcnMgZm9yIGRyYWcvZHJvcCBiZWhhdmlvdXIgb2Ygbm9kZXMuXG4gICAgICAgICAgICBkcmFnTGlzdGVuZXIgPSBkMy5iZWhhdmlvci5kcmFnKClcbiAgICAgICAgICAgICAgICAub24oXCJkcmFnc3RhcnRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQgPT0gcm9vdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRyYWdTdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMgPSB0cmVlLm5vZGVzKGQpO1xuICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5zb3VyY2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBpbXBvcnRhbnQgdGhhdCB3ZSBzdXBwcmVzcyB0aGUgbW91c2VvdmVyIGV2ZW50IG9uIHRoZSBub2RlIGJlaW5nIGRyYWdnZWQuIE90aGVyd2lzZSBpdCB3aWxsIGFic29yYiB0aGUgbW91c2VvdmVyIGV2ZW50IGFuZCB0aGUgdW5kZXJseWluZyBub2RlIHdpbGwgbm90IGRldGVjdCBpdCBkMy5zZWxlY3QodGhpcykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKFwiZHJhZ1wiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZCA9PSByb290KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRyYWdTdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb21Ob2RlID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYXRlRHJhZyhkLCBkb21Ob2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgY29vcmRzIG9mIG1vdXNlRXZlbnQgcmVsYXRpdmUgdG8gc3ZnIGNvbnRhaW5lciB0byBhbGxvdyBmb3IgcGFubmluZ1xuICAgICAgICAgICAgICAgICAgICByZWxDb29yZHMgPSBkMy5tb3VzZSgkKCdzdmcnKS5nZXQoMCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVsQ29vcmRzWzBdIDwgcGFuQm91bmRhcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhblRpbWVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhbih0aGlzLCAnbGVmdCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlbENvb3Jkc1swXSA+ICgkKCdzdmcnKS53aWR0aCgpIC0gcGFuQm91bmRhcnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5UaW1lciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW4odGhpcywgJ3JpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVsQ29vcmRzWzFdIDwgcGFuQm91bmRhcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhblRpbWVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhbih0aGlzLCAndXAnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWxDb29yZHNbMV0gPiAoJCgnc3ZnJykuaGVpZ2h0KCkgLSBwYW5Cb3VuZGFyeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhblRpbWVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhbih0aGlzLCAnZG93bicpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocGFuVGltZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBkLngwICs9IGQzLmV2ZW50LmR4O1xuICAgICAgICAgICAgICAgICAgICBkLnkwICs9IGQzLmV2ZW50LmR5O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBub2RlID0gZDMuc2VsZWN0KHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQueDAgKyBcIixcIiArIGQueTAgKyBcIilcIik7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcbiAgICAgICAgICAgICAgICB9KS5vbihcImRyYWdlbmRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQgPT0gcm9vdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRvbU5vZGUgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3cgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gdGhlIHBhcmVudCwgYW5kIGluc2VydCBpdCBpbnRvIHRoZSBuZXcgZWxlbWVudHMgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGRyYWdnaW5nTm9kZS5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihkcmFnZ2luZ05vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZ05vZGUucGFyZW50LmNoaWxkcmVuLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNlbGVjdGVkTm9kZS5jaGlsZHJlbiAhPT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHNlbGVjdGVkTm9kZS5fY2hpbGRyZW4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RlZE5vZGUuY2hpbGRyZW4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTm9kZS5jaGlsZHJlbi5wdXNoKGRyYWdnaW5nTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWROb2RlLl9jaGlsZHJlbi5wdXNoKGRyYWdnaW5nTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE5vZGUuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE5vZGUuY2hpbGRyZW4ucHVzaChkcmFnZ2luZ05vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIG5vZGUgYmVpbmcgYWRkZWQgdG8gaXMgZXhwYW5kZWQgc28gdXNlciBjYW4gc2VlIGFkZGVkIG5vZGUgaXMgY29ycmVjdGx5IG1vdmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZChzZWxlY3RlZE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydFRyZWUoKTsqL1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kRHJhZygpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kRHJhZygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRpYXRlRHJhZyhkLCBkb21Ob2RlKSB7XG4gICAgICAgICAgICAgICAgZHJhZ2dpbmdOb2RlID0gZDtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCcuZ2hvc3QtYXJlYScpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5naG9zdC1hcmVhJykuYXR0cignY2xhc3MnLCAnZ2hvc3QtYXJlYSBzaG93Jyk7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLmF0dHIoJ2NsYXNzJywgJ25vZGUgYWN0aXZlLWRyYWcnKTtcbiAgICAgICAgICAgICAgICB2aXMuc2VsZWN0QWxsKFwiZy5ub2RlXCIpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgLy8gc2VsZWN0IHRoZSBwYXJlbnQgYW5kIHNvcnQgdGhlIHBhdGgnc1xuICAgICAgICAgICAgICAgICAgICBpZiAoYS5pZCAhPSBkcmFnZ2luZ05vZGUuaWQpIHJldHVybiAxOyAvLyBhIGlzIG5vdCB0aGUgaG92ZXJlZCBlbGVtZW50LCBzZW5kIFwiYVwiIHRvIHRoZSBiYWNrXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIC0xOyAvLyBhIGlzIHRoZSBob3ZlcmVkIGVsZW1lbnQsIGJyaW5nIFwiYVwiIHRvIHRoZSBmcm9udFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIGlmIG5vZGVzIGhhcyBjaGlsZHJlbiwgcmVtb3ZlIHRoZSBsaW5rcyBhbmQgbm9kZXNcbiAgICAgICAgICAgICAgICBpZiAobm9kZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgbGluayBwYXRoc1xuICAgICAgICAgICAgICAgICAgICBsaW5rcyA9IHRyZWUubGlua3Mobm9kZXMpO1xuICAgICAgICAgICAgICAgICAgICBub2RlUGF0aHMgPSB2aXMuc2VsZWN0QWxsKFwicGF0aC5saW5rXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShsaW5rcywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGNoaWxkIG5vZGVzXG4gICAgICAgICAgICAgICAgICAgIG5vZGVzRXhpdCA9IHZpcy5zZWxlY3RBbGwoXCJnLm5vZGVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKG5vZGVzLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQuaWQgPT0gZHJhZ2dpbmdOb2RlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHBhcmVudCBsaW5rXG4gICAgICAgICAgICAgICAgcGFyZW50TGluayA9IHRyZWUubGlua3ModHJlZS5ub2RlcyhkcmFnZ2luZ05vZGUucGFyZW50KSk7XG4gICAgICAgICAgICAgICAgdmlzLnNlbGVjdEFsbCgncGF0aC5saW5rJykuZmlsdGVyKGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkLnRhcmdldC5pZCA9PSBkcmFnZ2luZ05vZGUuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBkcmFnU3RhcnRlZCA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhbihkb21Ob2RlLCBkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgc3BlZWQgPSBwYW5TcGVlZDtcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNsYXRlWDtcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNsYXRlWTtcbiAgICAgICAgICAgICAgICB2YXIgc2NhbGVYO1xuICAgICAgICAgICAgICAgIHZhciBzY2FsZVk7XG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlO1xuICAgICAgICAgICAgICAgIGlmIChwYW5UaW1lcikge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocGFuVGltZXIpO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVDb29yZHMgPSBkMy50cmFuc2Zvcm0odmlzLmF0dHIoXCJ0cmFuc2Zvcm1cIikpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09ICdsZWZ0JyB8fCBkaXJlY3Rpb24gPT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlWCA9IGRpcmVjdGlvbiA9PSAnbGVmdCcgPyB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzBdICsgc3BlZWQgOiB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzBdIC0gc3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVZID0gdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVsxXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gJ3VwJyB8fCBkaXJlY3Rpb24gPT0gJ2Rvd24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVYID0gdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVkgPSBkaXJlY3Rpb24gPT0gJ3VwJyA/IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMV0gKyBzcGVlZCA6IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMV0gLSBzcGVlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzY2FsZVggPSB0cmFuc2xhdGVDb29yZHMuc2NhbGVbMF07XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlWSA9IHRyYW5zbGF0ZUNvb3Jkcy5zY2FsZVsxXTtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGUgPSB0b29sU2V0U2VydmljZS5nZXRab29tU2NhbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdmlzLnRyYW5zaXRpb24oKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgdHJhbnNsYXRlWCArIFwiLFwiICsgdHJhbnNsYXRlWSArIFwiKXNjYWxlKFwiICsgc2NhbGUgKyBcIilcIik7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5zZWxlY3QoJ2cubm9kZScpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB0cmFuc2xhdGVYICsgXCIsXCIgKyB0cmFuc2xhdGVZICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgICAgICB6b29tLnNjYWxlKHNjYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgem9vbS50cmFuc2xhdGUoW3RyYW5zbGF0ZVgsIHRyYW5zbGF0ZVldKTtcbiAgICAgICAgICAgICAgICAgICAgcGFuVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhbihkb21Ob2RlLCBzcGVlZCwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRnVuY3Rpb24gdG8gdXBkYXRlIHRoZSB0ZW1wb3JhcnkgY29ubmVjdG9yIGluZGljYXRpbmcgZHJhZ2dpbmcgYWZmaWxpYXRpb25cbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRlbXBDb25uZWN0b3IoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAoZHJhZ2dpbmdOb2RlICE9PSBudWxsICYmIHNlbGVjdGVkTm9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBoYXZlIHRvIGZsaXAgdGhlIHNvdXJjZSBjb29yZGluYXRlcyBzaW5jZSB3ZSBkaWQgdGhpcyBmb3IgdGhlIGV4aXN0aW5nIGNvbm5lY3RvcnMgb24gdGhlIG9yaWdpbmFsIHRyZWVcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dGVuZGluZ1ZhbHVlID0gKHZtLmltYWdlcHJlc2VudCkgPyA1IDogNTA7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogc2VsZWN0ZWROb2RlLngwICsgMTIgKyAobm9kZUJvdW5kYXJpZXMud2lkdGggLyAyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBzZWxlY3RlZE5vZGUueTAgKyA1MCArIG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIDEwXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZHJhZ2dpbmdOb2RlLngwICsgMTIgKyAobm9kZUJvdW5kYXJpZXMud2lkdGggLyAyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBkcmFnZ2luZ05vZGUueTAgKyBleHRlbmRpbmdWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGxpbmsgPSB2aXMuc2VsZWN0QWxsKFwiLnRlbXAtbGlua1wiKS5kYXRhKGRhdGEpO1xuICAgICAgICAgICAgICAgIGxpbmsuZW50ZXIoKS5hcHBlbmQoXCJwYXRoXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ0ZW1wLWxpbmtcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGQzLnN2Zy5kaWFnb25hbCgpKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgIGxpbmsuYXR0cihcImRcIiwgZDMuc3ZnLmRpYWdvbmFsKCkpO1xuICAgICAgICAgICAgICAgIGxpbmsuZXhpdCgpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIG92ZXJJbkdob3N0QXJlYSA9IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWROb2RlID0gZDtcbiAgICAgICAgICAgICAgICB1cGRhdGVUZW1wQ29ubmVjdG9yKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgb3V0T2ZHaG9zdEFyZWEgPSBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkTm9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdXBkYXRlVGVtcENvbm5lY3RvcigpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gZW5kRHJhZygpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE5vZGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmdob3N0LWFyZWEnKS5hdHRyKCdjbGFzcycsICdnaG9zdC1hcmVhJyk7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLmF0dHIoJ2NsYXNzJywgJ25vZGUnKTtcbiAgICAgICAgICAgICAgICAvLyBub3cgcmVzdG9yZSB0aGUgbW91c2VvdmVyIGV2ZW50IG9yIHdlIHdvbid0IGJlIGFibGUgdG8gZHJhZyBhIDJuZCB0aW1lXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLnNlbGVjdCgnLmdob3N0LWFyZWEnKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICcnKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVUZW1wQ29ubmVjdG9yKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRyYWdnaW5nTm9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGUocm9vdCk7XG4gICAgICAgICAgICAgICAgICAgIHBhblRvVGhlTm9kZShkcmFnZ2luZ05vZGUpO1xuICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZ05vZGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb25Jbml0KCk7XG5cbiAgICAgICAgICAgIHZhciB2aXMgPSB3cmFwcGVyRWxlbWVudC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImxheW91dFwiLCBcInJvd1wiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwibGF5b3V0LWFsaWduXCIsIFwic3BhY2UtYXJvdW5kIGNlbnRlclwiKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImZsZXhcIiwgXCJcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImlkXCIsIFwic3ZnLWJveC1jb250YWluZXJcIilcbiAgICAgICAgICAgICAgICAuY2FsbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICRjb21waWxlKHRoaXNbMF0pKHNjb3BlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImlkXCIsIFwic3ZnQm94XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ2aWV3Qm94XCIsIHZpZXdCb3hCb3VuZGFyeSlcbiAgICAgICAgICAgICAgICAuYXR0cihcInN0eWxlXCIsIFwiY3Vyc29yOm1vdmU7XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCBcIjEwMCVcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBpSGVpZ2h0KVxuICAgICAgICAgICAgICAgIC5jYWxsKHpvb20pXG4gICAgICAgICAgICAgICAgLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgICAgICAgICAgICAgLy9jZW50ZXJpbmcgdGhlIHJvb3Qgbm9kZVxuICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKCgkd2luZG93LmlubmVyV2lkdGggLyAyKSAtIDEyMCkgKyBcIixcIiArIChoIC8gNCkgKyBcIilcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInN0eWxlXCIsIFwiY3Vyc29yOnBvaW50ZXI7XCIpXG4gICAgICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgc3RvcFByb3BvZ2F0aW9uLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAuY2FsbChkMy5iZWhhdmlvci5kcmFnKCkub24oXCJkcmFnc3RhcnRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIH0pLm9uKFwiZHJhZ1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIDE2MClcbiAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCAxMjApXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInRyZWUtaG9sZGVyXCIpO1xuXG4gICAgICAgICAgICBkMy5zZWxlY3Rpb24ucHJvdG90eXBlLm1vdmVUb0Zyb250ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHRyZWUgPSBkMy5sYXlvdXQudHJlZSgpXG4gICAgICAgICAgICAgICAgLm5vZGVTaXplKFtub2RlQm91bmRhcmllcy53aWR0aCArIG5vZGVCb3VuZGFyaWVzLmhvcml6b250YWxTZXBlcmF0aW9uLCBub2RlQm91bmRhcmllcy5oZWlnaHQgKyBub2RlQm91bmRhcmllcy52ZXJ0aWNhbFNlcGVyYXRpb25dKVxuICAgICAgICAgICAgICAgIC5zZXBhcmF0aW9uKGZ1bmN0aW9uIHNlcGFyYXRpb24oYSwgYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5wYXJlbnQgPT0gYi5wYXJlbnQgPyAxLjI1IDogMS41O1xuICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIHZhciBkaWFnb25hbCA9IGQzLnN2Zy5kaWFnb25hbCgpXG4gICAgICAgICAgICAgICAgLnNvdXJjZShmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4XCI6IGQuc291cmNlLnggKyAobm9kZUJvdW5kYXJpZXMud2lkdGgpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieVwiOiBkLnNvdXJjZS55ICsgKG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIDEwKVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRhcmdldChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4XCI6IGQudGFyZ2V0LnggKyAobm9kZUJvdW5kYXJpZXMud2lkdGgpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieVwiOiBkLnRhcmdldC55IC0gKGF0dHJzLmltYWdlcHJlc2VudCA9PSAndHJ1ZScgPyA0NSA6IDApXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAucHJvamVjdGlvbihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2QueCArIDAsIGQueSArIDBdO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcm9vdCA9IHZtLnRyZWVkYXRhO1xuICAgICAgICAgICAgcm9vdC54MCA9IGggLyAyO1xuICAgICAgICAgICAgcm9vdC55MCA9IDA7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUFsbChkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZC5jaGlsZHJlbi5mb3JFYWNoKHRvZ2dsZUFsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZShkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBleHBhbmRBbGxBZnRlcihkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gKGQuY2hpbGRyZW4pID8gZC5jaGlsZHJlbiA6IGQuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGlmIChkLl9jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBkLmNoaWxkcmVuID0gZC5fY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgIGQuX2NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkcmVuKVxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGV4cGFuZEFsbEFmdGVyKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbGxhcHNlQWxsQWZ0ZXIoZCkge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IChkLmNoaWxkcmVuKSA/IGQuY2hpbGRyZW4gOiBkLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBpZiAoZC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBkLl9jaGlsZHJlbiA9IGQuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgIGQuY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goY29sbGFwc2VBbGxBZnRlcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4cGFuZEFsbCgpIHtcbiAgICAgICAgICAgICAgICBleHBhbmRBbGxBZnRlcihyb290KTtcbiAgICAgICAgICAgICAgICB1cGRhdGUocm9vdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbGxhcHNlQWxsKCkge1xuICAgICAgICAgICAgICAgIGNvbGxhcHNlQWxsQWZ0ZXIocm9vdCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlKHJvb3QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyb290KTtcblxuICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgZGlzcGxheSB0byBzaG93IGEgZmV3IG5vZGVzLlxuICAgICAgICAgICAgcm9vdC5jaGlsZHJlbi5mb3JFYWNoKHRvZ2dsZUFsbCk7XG5cblxuICAgICAgICAgICAgdXBkYXRlKHJvb3QpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGUoc291cmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gZDMuZXZlbnQgJiYgZDMuZXZlbnQuYWx0S2V5ID8gNTAwMCA6IDUwMDtcblxuICAgICAgICAgICAgICAgIC8vIENvbXB1dGUgdGhlIG5ldyB0cmVlIGxheW91dC5cbiAgICAgICAgICAgICAgICB2YXIgbm9kZXMgPSB0cmVlLm5vZGVzKHJvb3QpLnJldmVyc2UoKTtcblxuICAgICAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSBmb3IgZml4ZWQtZGVwdGggYW5kIGR5bmFtaWMgZm9yIHdlaWdodC5cbiAgICAgICAgICAgICAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkLndlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZC55ID0gKGQud2VpZ2h0ICogMTIpICsgZC5kZXB0aCAqIDMwMDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQueSA9IGQuZGVwdGggKiAzMDA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBub2Rlcy4uLlxuICAgICAgICAgICAgICAgIHZhciBub2RlID0gdmlzLnNlbGVjdEFsbChcImcubm9kZVwiKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShub2RlcywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmlkIHx8IChkLmlkID0gKytpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBFbnRlciBhbnkgbmV3IG5vZGVzIGF0IHRoZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICB2YXIgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgICAgICAgICAgICAgICAgIC5jYWxsKGRyYWdMaXN0ZW5lcilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm5vZGVcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibm9kZS1cIiArIGQuaWQ7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueDAgKyBcIixcIiArIHNvdXJjZS55MCArIFwiKVwiO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlKGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlKGQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIG5vZGVFbnRlci5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdnaG9zdC1hcmVhJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCBub2RlQm91bmRhcmllcy53aWR0aClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgbm9kZUJvdW5kYXJpZXMuaGVpZ2h0ICsgMjUwKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcIm9wYWNpdHlcIiwgMC4yKSAvLyBjaGFuZ2UgdGhpcyB0byB6ZXJvIHRvIGhpZGUgdGhlIHRhcmdldCBhcmVhXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgXCJ0cmFuc3BhcmVudFwiKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbW91c2VvdmVyJylcbiAgICAgICAgICAgICAgICAgICAgLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVySW5HaG9zdEFyZWEobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5vbihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRPZkdob3N0QXJlYShub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBub2RlRW50ZXIuYXBwZW5kKFwidHJlZS1ub2RlXCIpLmF0dHIoXCJub2RlXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyZWVWaWV3U2VydmljZS5wdXNoTm9kZShkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgb25DbGlja2VkTm9kZSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJub2RlSWRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmlkO1xuICAgICAgICAgICAgICAgICAgICB9KS5hdHRyKFwiaW1hZ2VQcmVzZW50XCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2bS5pbWFnZXByZXNlbnQ7XG4gICAgICAgICAgICAgICAgfSkuYXR0cihcImlzUGlubmVkTm9kZVwiLCBcImZhbHNlXCIpLmF0dHIoXCJub2RlQWN0aW9uc1wiLCBhdHRycy5ub2RlYWN0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUodGhpcykoc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFRyYW5zaXRpb24gbm9kZXMgdG8gdGhlaXIgbmV3IHBvc2l0aW9uLlxuICAgICAgICAgICAgICAgIHZhciBub2RlVXBkYXRlID0gbm9kZS50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgZC54ICsgXCIsXCIgKyBkLnkgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgIC8vIFRyYW5zaXRpb24gZXhpdGluZyBuZG9lcyB0byB0aGUgcGFyZW50J3MgbmV3IHBvc2l0aW9uLlxuICAgICAgICAgICAgICAgIHZhciBub2RlRXhpdCA9IG5vZGUuZXhpdCgpLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueCArIFwiLFwiICsgc291cmNlLnkgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgbm9kZUV4aXQuc2VsZWN0KFwiY2lyY2xlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiclwiLCAxZS02KTtcbiAgICAgICAgICAgICAgICBub2RlRXhpdC5zZWxlY3QoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAxZS02KTtcblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbGlua3MuLi5cbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IHZpcy5zZWxlY3RBbGwoXCJwYXRoLmxpbmtcIilcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEodHJlZS5saW5rcyhub2RlcyksIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQuaWQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gRW50ZXIgYW55IG5ldyBsaW5rcyBhdCBodGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb25cbiAgICAgICAgICAgICAgICBsaW5rLmVudGVyKCkuaW5zZXJ0KFwic3ZnOnBhdGhcIiwgXCJnXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5rXCIpXG4gICAgICAgICAgICAgICAgICAgIC8vIC5zdHlsZShcInN0cm9rZS1kYXNoYXJyYXlcIiwoXCIzLDNcIikpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogc291cmNlLngwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHNvdXJjZS55MFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkaWFnb25hbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogb1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBnZW5lcmF0ZVBhdGgpO1xuXG4gICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBsaW5rcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgbGluay50cmFuc2l0aW9uKClcblxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBnZW5lcmF0ZVBhdGgpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcInN0cm9rZVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQudGFyZ2V0LmNsYXNzID09PSBcImhpZ2hsaWdodC1saW5rXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiI2ZmNDEzNlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFRyYW5zaXRpb24gZXhpdGluZyBub2RlcyB0byB0aGUgcGFyZW50J3MgbmV3IHBvc2l0aW9uLlxuICAgICAgICAgICAgICAgIGxpbmsuZXhpdCgpLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBzb3VyY2UueCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBzb3VyY2UueVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkaWFnb25hbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogb1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgIC8vIFN0YXNoIHRoZSBvbGQgcG9zaXRpb25zIGZvciB0cmFuc2l0aW9uLlxuICAgICAgICAgICAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgZC54MCA9IGQueDtcbiAgICAgICAgICAgICAgICAgICAgZC55MCA9IGQueTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkobm9kZXMsIG5vZGVMaXN0KTtcblxuICAgICAgICAgICAgICAgIHRyZWVWaWV3U2VydmljZS5zZXROb2Rlcyhub2RlTGlzdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRvZ2dsZSBjaGlsZHJlblxuICAgICAgICAgICAgZnVuY3Rpb24gdG9nZ2xlKGQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBkLl9jaGlsZHJlbiA9IGQuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgIGQuY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGQuY2hpbGRyZW4gPSBkLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgZC5fY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXhwYW5kTm9kZShub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jaGlsZHJlbiA9IG5vZGUuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgIG5vZGUuX2NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZGV0ZXJtaW5lTm9kZVJlbGF0aXZlTG9jYXRpb24oZCkge1xuICAgICAgICAgICAgICAgIGlmIChkLnNvdXJjZS5jaGlsZHJlbi5sZW5ndGggPiAxICYmIGQuc291cmNlLmNoaWxkcmVuWzBdID09IGQudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnb25sZWZ0JztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGQuc291cmNlLmNoaWxkcmVuLmxlbmd0aCA+IDEgJiYgZC5zb3VyY2UuY2hpbGRyZW5bZC5zb3VyY2UuY2hpbGRyZW4ubGVuZ3RoIC0gMV0gPT0gZC50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdvbnJpZ2h0JztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3N0cmFpZ2h0JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlUGF0aChkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlbGF0aXZlTG9jYXRpb24gPSBkZXRlcm1pbmVOb2RlUmVsYXRpdmVMb2NhdGlvbihkKTtcbiAgICAgICAgICAgICAgICB2YXIgcGF0aFN0cmluZyA9ICcnO1xuICAgICAgICAgICAgICAgIHZhciBleHRlbmRpbmdWYWx1ZSA9ICh2bS5pbWFnZXByZXNlbnQpID8gNSA6IDUwO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocmVsYXRpdmVMb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzdHJhaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoU3RyaW5nICs9IFwiTVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoZC5zb3VyY2UueCArIChub2RlQm91bmRhcmllcy53aWR0aCAvIDIpICsgMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIixcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGQuc291cmNlLnkgKyBub2RlQm91bmRhcmllcy5oZWlnaHQgKyA1NylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiVlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoZC5zb3VyY2UueSArIG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIChub2RlQm91bmRhcmllcy5oZWlnaHQgLyAyKSArIDM1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJIXCIgKyAoZC50YXJnZXQueCArIDEyICsgKChub2RlQm91bmRhcmllcy53aWR0aCkgLyAyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiVlwiICsgKGQudGFyZ2V0LnkgKyBleHRlbmRpbmdWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiTVwiICsgZC50YXJnZXQueCArIDEyICsgXCIsXCIgKyAoZC50YXJnZXQueSArIGV4dGVuZGluZ1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdvbmxlZnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aFN0cmluZyArPSBcIk1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGQuc291cmNlLnggKyAobm9kZUJvdW5kYXJpZXMud2lkdGggLyAyKSArIDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCIsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChkLnNvdXJjZS55ICsgbm9kZUJvdW5kYXJpZXMuaGVpZ2h0ICsgNTcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIlZcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGQuc291cmNlLnkgKyBub2RlQm91bmRhcmllcy5oZWlnaHQgKyAobm9kZUJvdW5kYXJpZXMuaGVpZ2h0IC8gMikgKyAzNSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiSFwiICsgKGQudGFyZ2V0LnggKyAxMiArICgobm9kZUJvdW5kYXJpZXMud2lkdGgpIC8gMikgKyA4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCIgUSBcIiArICgoZC50YXJnZXQueCArIDEyICsgKChub2RlQm91bmRhcmllcy53aWR0aCkgLyAyKSAtIDgpICsgOCkgKyBcIixcIiArIChkLnNvdXJjZS55ICsgbm9kZUJvdW5kYXJpZXMuaGVpZ2h0ICsgKG5vZGVCb3VuZGFyaWVzLmhlaWdodCAvIDIpICsgMzUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIiBcIiArICgoZC50YXJnZXQueCArIDEyICsgKChub2RlQm91bmRhcmllcy53aWR0aCkgLyAyKSAtIDgpICsgOCkgKyBcIixcIiArIChkLnNvdXJjZS55ICsgbm9kZUJvdW5kYXJpZXMuaGVpZ2h0ICsgKG5vZGVCb3VuZGFyaWVzLmhlaWdodCAvIDIpICsgOCArIDM1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJWXCIgKyAoZC50YXJnZXQueSArIGV4dGVuZGluZ1ZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJNXCIgKyBkLnRhcmdldC54ICsgMTIgKyBcIixcIiArIChkLnRhcmdldC55ICsgZXh0ZW5kaW5nVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ29ucmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aFN0cmluZyArPSBcIk1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGQuc291cmNlLnggKyAxMiArIChub2RlQm91bmRhcmllcy53aWR0aCAvIDIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCIsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChkLnNvdXJjZS55ICsgbm9kZUJvdW5kYXJpZXMuaGVpZ2h0ICsgNTcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIlZcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGQuc291cmNlLnkgKyBub2RlQm91bmRhcmllcy5oZWlnaHQgKyAobm9kZUJvdW5kYXJpZXMuaGVpZ2h0IC8gMikgKyAzNSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiSFwiICsgKGQudGFyZ2V0LnggKyAxMiArICgobm9kZUJvdW5kYXJpZXMud2lkdGgpIC8gMikgLSA4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCIgUSBcIiArICgoZC50YXJnZXQueCArIDEyICsgKChub2RlQm91bmRhcmllcy53aWR0aCkgLyAyKSkgKSArIFwiLFwiICsgKGQuc291cmNlLnkgKyBub2RlQm91bmRhcmllcy5oZWlnaHQgKyAobm9kZUJvdW5kYXJpZXMuaGVpZ2h0IC8gMikgKyAzNSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiIFwiICsgKChkLnRhcmdldC54ICsgMTIgKyAoKG5vZGVCb3VuZGFyaWVzLndpZHRoKSAvIDIpKSkgKyBcIixcIiArIChkLnNvdXJjZS55ICsgbm9kZUJvdW5kYXJpZXMuaGVpZ2h0ICsgKG5vZGVCb3VuZGFyaWVzLmhlaWdodCAvIDIpICsgOCArIDM1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJWXCIgKyAoZC50YXJnZXQueSArIGV4dGVuZGluZ1ZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJNXCIgKyBkLnRhcmdldC54ICsgMTIgKyBcIixcIiArIChkLnRhcmdldC55ICsgZXh0ZW5kaW5nVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhdGhTdHJpbmc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNhdmVBc1BERigpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3ZnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdmctYm94LWNvbnRhaW5lclwiKS5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgaWYgKHZpcykge1xuICAgICAgICAgICAgICAgICAgICBzdmcgPSBzdmcucmVwbGFjZSgvXFxyP1xcbnxcXHIvZywgJycpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG5cbiAgICAgICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGNhbnZnKGNhbnZhcywgc3ZnKTtcblxuXG4gICAgICAgICAgICAgICAgdmFyIGltZ0RhdGEgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcblxuICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIFBERlxuICAgICAgICAgICAgICAgIHZhciBkb2MgPSBuZXcganNQREYoJ3AnLCAncHQnLCAnYTQnKTtcbiAgICAgICAgICAgICAgICBkb2MuYWRkSW1hZ2UoaW1nRGF0YSwgJ1BORycsIDQwLCA0MCwgNzUsIDc1KTtcbiAgICAgICAgICAgICAgICBkb2Muc2F2ZSgndGVzdC5wZGYnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25BZGROb2RlKHBhcmVudCwgY2hpbGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gOTtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5yZXBsYWNlKC9bXmEtel0rL2csICcnKS5zdWJzdHIoMCwgbGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBhZGRDaGlsZE5vZGUocGFyZW50LmlkLCBjaGlsZCk7XG4gICAgICAgICAgICAgICAgLy8gc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uUmVtb3ZlTm9kZShkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZC5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihkKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBkLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5kSW50aGVSb290QW5kRGVzdG9yb3kocm9vdC5jaGlsZHJlbiwgZCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlKGQucGFyZW50KTtcbiAgICAgICAgICAgICAgICBzdG9wUHJvcG9nYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZmluZEludGhlUm9vdEFuZERlc3Rvcm95KGxpc3QsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobGlzdCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5pZCA9PSB2YWx1ZS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gbGlzdC5pbmRleE9mKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlLmNoaWxkcmVuKSAmJiB2YWx1ZS5jaGlsZHJlbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluZEludGhlUm9vdEFuZERlc3Rvcm95KHZhbHVlLmNoaWxkcmVuLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBmaW5kSW50aGVSb290QW5kUmVwbGFjZU5hbWUobGlzdCwgbm9kZSkge1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChsaXN0LCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmlkID09IHZhbHVlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBsaXN0LmluZGV4T2YodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0W2luZGV4XS5uYW1lID0gbm9kZS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlLmNoaWxkcmVuKSAmJiB2YWx1ZS5jaGlsZHJlbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluZEludGhlUm9vdEFuZERlc3Rvcm95KHZhbHVlLmNoaWxkcmVuLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBhZGRDaGlsZE5vZGUocGFyZW50SWQsIG5ld05vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGQzLnNlbGVjdCgnIycgKyAnbm9kZS0nICsgcGFyZW50SWQpO1xuICAgICAgICAgICAgICAgIHZhciBub2RlRGF0YSA9IG5vZGUuZGF0dW0oKTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZURhdGEuY2hpbGRyZW4gPT09IHVuZGVmaW5lZCAmJiBub2RlRGF0YS5fY2hpbGRyZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlRGF0YS5jaGlsZHJlbiA9IFtuZXdOb2RlXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVEYXRhLl9jaGlsZHJlbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVEYXRhLl9jaGlsZHJlbi5wdXNoKG5ld05vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGUobm9kZURhdGEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZURhdGEuY2hpbGRyZW4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlRGF0YS5jaGlsZHJlbi5wdXNoKG5ld05vZGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZURhdGEuX2NoaWxkcmVuID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZURhdGEuX2NoaWxkcmVuID0gW107XG4gICAgICAgICAgICAgICAgICAgIG5vZGVEYXRhLl9jaGlsZHJlbi5wdXNoKG5ld05vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGUobm9kZURhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGUobm9kZURhdGEpO1xuXG4gICAgICAgICAgICAgICAgLy8gc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN0b3BQcm9wb2dhdGlvbigpIHtcbiAgICAgICAgICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGFjdGl2ZSA9IGQzLnNlbGVjdChudWxsKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gb25DbGlja2VkTm9kZShub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhub2RlKTtcbiAgICAgICAgICAgICAgICB2YXIgaXNSZXNldCA9IG1ha2VDbGlja2VkTm9kZUFjdGl2ZSh0aGlzKTtcblxuICAgICAgICAgICAgICAgIGlmIChpc1Jlc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFuVG9UaGVOb2RlKG5vZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBoaWdobGlnaHRQYXRoKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAvL1RPRE8gbXVzdCBpbmNsdWRlIHRoZSByb290IG5vZGUgaW4gdGhlIGFycmF5XG4gICAgICAgICAgICAgICAgLy9QYXRoIGFycmF5IHRvIHN0b3JlIG5vZGVzXG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSBzZWFyY2hXaXRoaW5UcmVlKHZtLnRyZWVkYXRhLCBub2RlLm5hbWUsIFtdKTtcblxuICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChwYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAvL2Z1bmN0aW9uIHRvIG9wZW4gcGF0aHNcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJIaWdoTGlnaHRMaW5rcyhsYXN0U2VhcmNoZWRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0TGlua3MocGF0aCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlYXJjaGVkIG5vZGUgJyArIG5vZGUubmFtZSArICcgbm90IGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGFzdFNlYXJjaGVkUGF0aCA9IHBhdGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGhpZ2hsaWdodExpbmtzKHBhdGgpIHtcblxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChwYXRoLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5jbGFzcyA9ICdoaWdobGlnaHQtbGluayc7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5fY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmNoaWxkcmVuID0gdmFsdWUuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuX2NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGUodmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFySGlnaExpZ2h0TGlua3MocGF0aCkge1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChwYXRoLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5jbGFzcyA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuX2NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5jaGlsZHJlbiA9IHZhbHVlLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLl9jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVIaWdobGlnaHQobm9kZSkge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmNsYXNzID09PSAnaGlnaGxpZ2h0LWxpbmsnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2xhc3MgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vc2VhcmNoIG9uIHRyZWUgZm9yIGEgbGlua1xuICAgICAgICAgICAgZnVuY3Rpb24gc2VhcmNoV2l0aGluVHJlZShub2RlLCBzZWFyY2hLZXksIHBhdGgpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5uYW1lID09PSBzZWFyY2hLZXkpIHsgLy9pZiBzZWFyY2ggaXMgZm91bmQgcmV0dXJuLCBhZGQgdGhlIG9iamVjdCB0byB0aGUgcGF0aCBhbmQgcmV0dXJuIGl0XG4gICAgICAgICAgICAgICAgICAgIHBhdGgucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUuY2hpbGRyZW4gfHwgbm9kZS5fY2hpbGRyZW4pIHsgLy9pZiBjaGlsZHJlbiBhcmUgY29sbGFwc2VkIGQzIG9iamVjdCB3aWxsIGhhdmUgdGhlbSBpbnN0YW50aWF0ZWQgYXMgX2NoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IChub2RlLmNoaWxkcmVuKSA/IG5vZGUuY2hpbGRyZW4gOiBub2RlLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUpOy8vIHdlIGFzc3VtZSB0aGlzIHBhdGggaXMgdGhlIHJpZ2h0IG9uZVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gc2VhcmNoV2l0aGluVHJlZShjaGlsZHJlbltpXSwgc2VhcmNoS2V5LCBwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZCkgey8vIHdlIHdlcmUgcmlnaHQsIHRoaXMgc2hvdWxkIHJldHVybiB0aGUgYnViYmxlZC11cCBwYXRoIGZyb20gdGhlIGZpcnN0IGlmIHN0YXRlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugey8vd2Ugd2VyZSB3cm9uZywgcmVtb3ZlIHRoaXMgcGFyZW50IGZyb20gdGhlIHBhdGggYW5kIGNvbnRpbnVlIGl0ZXJhdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7Ly9ub3QgdGhlIHJpZ2h0IG9iamVjdCwgcmV0dXJuIGZhbHNlIHNvIGl0IHdpbGwgY29udGludWUgdG8gaXRlcmF0ZSBpbiB0aGUgbG9vcFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBtYWtlQ2xpY2tlZE5vZGVBY3RpdmUoZWxlbSkge1xuICAgICAgICAgICAgICAgIHZhciBpc1Jlc2V0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZS5ub2RlKCkgPT09IGVsZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXNldCA9IHJlc2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmUgPSBkMy5zZWxlY3QoZWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBwYW5Ub1RoZU5vZGUobm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpO1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGUgPSBbLXNjYWxlICogbm9kZS54LCAtc2NhbGUgKiBub2RlLnldO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdub2RlJywgbm9kZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25vZGUgdHJhbnNsYXRlICcsIHRyYW5zbGF0ZSk7XG4gICAgICAgICAgICAgICAgdmlzLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMTI1MClcbiAgICAgICAgICAgICAgICAgICAgLmNhbGwoem9vbS50cmFuc2xhdGUodHJhbnNsYXRlKS5zY2FsZShzY2FsZSkuZXZlbnQpO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVzZXR0aW5nIEFjdGl2ZSBub2Rlc1wiKTtcbiAgICAgICAgICAgICAgICBhY3RpdmUuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgYWN0aXZlID0gZDMuc2VsZWN0KG51bGwpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFRyZWVOb2RlQnlPYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyZWVOb2RlID0gJGZpbHRlcignZmlsdGVyJykobm9kZUxpc3QsIHsnaWQnOiBvYmplY3QuaWR9LCB0cnVlKVswXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJlZU5vZGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFRyZWVOb2RlQnlJRChpZCkge1xuICAgICAgICAgICAgICAgIHZhciB0cmVlTm9kZSA9ICRmaWx0ZXIoJ2ZpbHRlcicpKG5vZGVMaXN0LCB7J2lkJzogaWR9LCB0cnVlKVswXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJlZU5vZGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNlbnRlclRoZVJvb3QoKSB7XG4gICAgICAgICAgICAgICAgLy9UcmFuc2Zvcm0gdG8gdGhlIGNlbnRlciAoMCwwKVxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybU5vZGUoMCwgMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zZm9ybU5vZGUoeFBvcywgeVBvcykge1xuICAgICAgICAgICAgICAgIHZpcy50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAvL2R1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gb2YgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMTAwMClcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsYXkgdGltZSBpbiBtc1xuICAgICAgICAgICAgICAgICAgICAuZGVsYXkoMTAwKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgKHhQb3MpICsgXCIsXCIgKyAoeVBvcykgKyBcIilcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJzY2FsZShcIiArIHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpICsgXCIpXCI7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uTm9kZUFmdGVyVXBkYXRlKGV2LCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgZmluZEludGhlUm9vdEFuZFJlcGxhY2VOYW1lKHJvb3QuY2hpbGRyZW4sIGRhdGEubGFzdEVkaXRlZE5vZGUpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZShkYXRhLmxhc3RFZGl0ZWROb2RlKTtcbiAgICAgICAgICAgICAgICBzdG9wUHJvcG9nYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Ob2RlQWZ0ZXJBZGQoZXYsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZWROb2RlID0gZ2V0VHJlZU5vZGVCeUlEKGRhdGEucGFyZW50Tm9kZS5pZCk7XG4gICAgICAgICAgICAgICAgb25BZGROb2RlKHJlc29sdmVkTm9kZSwgZGF0YS5sYXN0QWRkZWROb2RlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Ob2RlRGVsZXRlKGV2LCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgdmFyIHJlc29sdmVkTm9kZSA9IGdldFRyZWVOb2RlQnlJRChkYXRhLm5vZGVJRCk7XG4gICAgICAgICAgICAgICAgb25SZW1vdmVOb2RlKHJlc29sdmVkTm9kZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG1ha2VOb2RlQWN0aXZlKGlkKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGVMaXN0ID0gZDMuc2VsZWN0QWxsKFwiLm5vZGUtXCIgKyBpZC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQobm9kZUxpc3RbMF0pLmFkZENsYXNzKCdhY3RpdmUtbm9kZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhckFsbEFjdGl2ZU5vZGVzKCkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlTGlzdCA9IGQzLnNlbGVjdEFsbChcIi5ub2RlLWxhYmVsXCIpO1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChub2RlTGlzdCwgZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KHYpLnJlbW92ZUNsYXNzKCdhY3RpdmUtbm9kZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkRlYWN0aXZhdGVOb2RlcyhldiwgZGF0YSkge1xuICAgICAgICAgICAgICAgIGNsZWFyQWxsQWN0aXZlTm9kZXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gaW50ZXJwb2xhdGVab29tKHRyYW5zbGF0ZSwgc2NhbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZDMudHJhbnNpdGlvbigpLmR1cmF0aW9uKDI1MCkudHdlZW4oXCJ3aGVlbC56b29tXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlUcmFuc2xhdGUgPSBkMy5pbnRlcnBvbGF0ZSh6b29tLnRyYW5zbGF0ZSgpLCB0cmFuc2xhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaVNjYWxlID0gZDMuaW50ZXJwb2xhdGUoem9vbS5zY2FsZSgpLCBzY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgem9vbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zY2FsZShpU2NhbGUodCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyYW5zbGF0ZShpVHJhbnNsYXRlKHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb21lZCgpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB6b29tQ2xpY2soc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IDEsXG4gICAgICAgICAgICAgICAgICAgIGZhY3RvciA9IDAuMixcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3pvb20gPSAxLFxuICAgICAgICAgICAgICAgICAgICBjZW50ZXIgPSBbdyAvIDIsIGggLyAyXSxcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW50ID0gem9vbS5zY2FsZUV4dGVudCgpLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGUgPSB6b29tLnRyYW5zbGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGUwID0gW10sXG4gICAgICAgICAgICAgICAgICAgIGwgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgdmlldyA9IHt4OiB0cmFuc2xhdGVbMF0sIHk6IHRyYW5zbGF0ZVsxXSwgazogem9vbS5zY2FsZSgpfTtcblxuICAgICAgICAgICAgICAgIC8vIGQzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gKHN0YXR1cyA9PT0gJ2luY3JlbWVudCcpID8gMSA6IC0xO1xuICAgICAgICAgICAgICAgIHRhcmdldF96b29tID0gem9vbS5zY2FsZSgpICogKDEgKyBmYWN0b3IgKiBkaXJlY3Rpb24pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldF96b29tIDwgZXh0ZW50WzBdIHx8IHRhcmdldF96b29tID4gZXh0ZW50WzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0cmFuc2xhdGUwID0gWyhjZW50ZXJbMF0gLSB2aWV3LngpIC8gdmlldy5rLCAoY2VudGVyWzFdIC0gdmlldy55KSAvIHZpZXcua107XG4gICAgICAgICAgICAgICAgdmlldy5rID0gdGFyZ2V0X3pvb207XG4gICAgICAgICAgICAgICAgbCA9IFt0cmFuc2xhdGUwWzBdICogdmlldy5rICsgdmlldy54LCB0cmFuc2xhdGUwWzFdICogdmlldy5rICsgdmlldy55XTtcblxuICAgICAgICAgICAgICAgIHZpZXcueCArPSBjZW50ZXJbMF0gLSBsWzBdO1xuICAgICAgICAgICAgICAgIHZpZXcueSArPSBjZW50ZXJbMV0gLSBsWzFdO1xuXG4gICAgICAgICAgICAgICAgaW50ZXJwb2xhdGVab29tKHpvb20udHJhbnNsYXRlKCksIHZpZXcuayk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHpvb21lZCgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh6b29tLnNjYWxlKCkpO1xuICAgICAgICAgICAgICAgIHRvb2xTZXRTZXJ2aWNlLnNldFpvb21TY2FsZSh6b29tLnNjYWxlKCkpO1xuICAgICAgICAgICAgICAgIHZpcy5hdHRyKFwidHJhbnNmb3JtXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidHJhbnNsYXRlKFwiICsgem9vbS50cmFuc2xhdGUoKSArIFwiKVwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJzY2FsZShcIiArIHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpICsgXCIpXCJcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgdmlzLnNlbGVjdEFsbChcImcucGFyZW50XCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnggKyBcIixcIiArIGQueSArIFwiKVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcInNjYWxlKFwiICsgdG9vbFNldFNlcnZpY2UuZ2V0Wm9vbVNjYWxlKCkgKyBcIilcIlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZGVzdHJveUxpc3RlbmVyKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gZGVzdHJveUxpc3RlbmVyKCkge1xuICAgICAgICAgICAgICAgIG5vZGVBY3RpdmVDbGVhckxpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgbm9kZURlbGV0ZUxpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgbm9kZUFmdGVyQWRkTGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICBub2RlQWZ0ZXJVcGRhdGVMaXN0ZW5lcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICByZXR1cm4gdHJlZVZpZXdEaXJlY3RpdmU7XG4gICAgfVxuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIFRyZWVWaWV3RGlyZWN0aXZlQ29udHJvbGxlcigkc2NvcGUpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0ubWFrZUNhbGxCYWNrID0gbWFrZUNhbGxCYWNrO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHZtLnNlYXJjaGFibGVMaXN0KTtcblxuICAgICAgICBmdW5jdGlvbiBtYWtlQ2FsbEJhY2soaWRlbnRpZmllciwgbm9kZSkge1xuICAgICAgICAgICAgJHNjb3BlLnZtW2lkZW50aWZpZXJdKHtub2RlOiBub2RlfSk7XG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA2LzEvMTcuXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ29yZ0NoYXJ0JykuZmFjdG9yeSgndHJlZVZpZXdTZXJ2aWNlJywgdHJlZVZpZXdTZXJ2aWNlKTtcblxuICAgIGZ1bmN0aW9uIHRyZWVWaWV3U2VydmljZSgkZmlsdGVyKSB7XG4gICAgICAgIHZhciBzZWxlY3RlZE5vZGUgPSBudWxsO1xuICAgICAgICB2YXIgbm9kZXMgPSBbXTtcblxuICAgICAgICB2YXIgc2VydmljZUV4cG9zYWJsZSA9IHtcbiAgICAgICAgICAgIHNldFNlYXJjaGVkTm9kZTogc2V0U2VhcmNoZWROb2RlLFxuICAgICAgICAgICAgZ2V0U2VhcmNoZWROb2RlOiBnZXRTZWFyY2hlZE5vZGUsXG4gICAgICAgICAgICBzZXROb2Rlczogc2V0Tm9kZXMsXG4gICAgICAgICAgICBwdXNoTm9kZTogcHVzaE5vZGUsXG4gICAgICAgICAgICBnZXROb2RlczogZ2V0Tm9kZXMsXG4gICAgICAgICAgICBmaW5kQnlJZDogZmluZEJ5SWRcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gc2VydmljZUV4cG9zYWJsZTtcblxuICAgICAgICBmdW5jdGlvbiBmaW5kQnlJZChpZCkge1xuICAgICAgICAgICAgdmFyIHRyZWVOb2RlID0gJGZpbHRlcignZmlsdGVyJykobm9kZXMsIHsnaWQnOiBpZH0sIHRydWUpWzBdO1xuICAgICAgICAgICAgcmV0dXJuIHRyZWVOb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0Tm9kZXMoc2V0T2Zub2Rlcykge1xuICAgICAgICAgICAgbm9kZXMgPSBzZXRPZm5vZGVzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Tm9kZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZXM7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwdXNoTm9kZShub2RlKSB7XG4gICAgICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0U2VhcmNoZWROb2RlKG5vZGUpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkTm9kZSA9IG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRTZWFyY2hlZE5vZGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWROb2RlO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDYvMjMvMTcuXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIGFuZ3VsYXIubW9kdWxlKCdvcmdDaGFydCcpLmRpcmVjdGl2ZSgndHJpbVdvcmQnLCB0cmltV29yZCk7XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gdHJpbVdvcmQoKSB7XG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8c3BhbiBuZy1iaW5kPVwidm0ucGFyc2VkVGV4dFwiPjxtZC10b29sdGlwIG5nLWlmPVwidm0uaXNUb29sVGlwTmVlZCgpXCIgbWQtZGlyZWN0aW9uPVwidm0ud29yZE9wdGlvbnMudG9vbFRpcERpcmVjdGlvblwiPnt7Ojp2bS53b3JkfX08L21kLXRvb2x0aXA+PC9zcGFuPicsXG4gICAgICAgICAgICBzY29wZToge30sXG4gICAgICAgICAgICBjb250cm9sbGVyOiB0cmltV29yZENvbnRyb2xsZXIsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuICAgICAgICAgICAgICAgIHdvcmRPcHRpb25zOic9JyxcbiAgICAgICAgICAgICAgICB3b3JkOic9J1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbSwgYXR0cix2bSkge1xuXG4gICAgICAgICAgICB2bS5pc1Rvb2xUaXBOZWVkID0gaXNUb29sVGlwTmVlZDtcblxuICAgICAgICAgICAgb25Jbml0KCk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uSW5pdCgpe1xuICAgICAgICAgICAgICAgIGFjdGl2YXRlV2F0Y2hlcnMoKTtcbiAgICAgICAgICAgICAgICBwYXJzZVRleHQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGVXYXRjaGVycygpe1xuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChhbmd1bGFyLmJpbmQodm0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZtLndvcmQ7XG4gICAgICAgICAgICAgICAgfSksIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3b3JkIGNoYW5nZSB0byAnICsgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBwYXJzZVRleHQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gdHJpbVdvcmQoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZyb21WYWx1ZSA9IHBhcnNlSW50KHZtLndvcmRPcHRpb25zLmZyb20pO1xuICAgICAgICAgICAgICAgIHZhciB0b1ZhbHVlID0gcGFyc2VJbnQodm0ud29yZE9wdGlvbnMudW50aWwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB2bS53b3JkLnN1YnN0cmluZyhmcm9tVmFsdWUsIHRvVmFsdWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBpc1Rvb2xUaXBOZWVkKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZtLndvcmRPcHRpb25zLnRvb2xUaXA9PSd0cnVlJz90cnVlOmZhbHNlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlVGV4dCgpe1xuICAgICAgICAgICAgICAgIHZtLnBhcnNlZFRleHQgPSB0cmltV29yZCgpO1xuICAgICAgICAgICAgICAgICh2bS53b3JkLmxlbmd0aD5wYXJzZUludCh2bS53b3JkT3B0aW9ucy51bnRpbCkpP3ZtLnBhcnNlZFRleHQgPSB2bS5wYXJzZWRUZXh0LmNvbmNhdChcIiAuLi5cIik6dm0ucGFyc2VkVGV4dDtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gdHJpbVdvcmRDb250cm9sbGVyKCkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgfVxufSkoKTtcbiJdfQ==
