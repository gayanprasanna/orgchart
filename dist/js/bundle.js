!function(){"use strict";angular.module("orgChart",["orgChart.example"])}(),function(){"use strict";function e(e,t,n){function o(o){function i(e){var t=angular.lowercase(e);return function(e){return 0===e.displayLowerCase.indexOf(t)}}var a=this;a.simulateQuery=!1,a.isDisabled=!1,a.noCache=!0,a.states=[{value:{name:"PublisherNameLongName",id:"id1",type:"type0",addable:!1,editable:!1,removable:!1,enableble:!1},display:"PublisherNameLongName",displayLowerCase:"PublisherNameLongName".toLowerCase()},{value:{name:"Landing A",id:"id2",type:"type1",addable:!0,editable:!0,removable:!0,enablable:!0,enable:!1},display:"Landing A",displayLowerCase:"Landing A".toLowerCase()},{value:{name:"Account 1",id:"id3",type:"type2"},display:"Account 1",displayLowerCase:"Account 1".toLowerCase()},{value:{name:"Landing B",id:"id8",type:"type1"},display:"Landing B",displayLowerCase:"Landing B".toLowerCase()}],a.querySearch=function(n){var o,l=n?a.states.filter(i(n)):a.states;return a.simulateQuery?(o=t.defer(),e(function(){o.resolve(l)},1e3*Math.random(),!1),o.promise):l},a.selectedItemChange=function(e){e&&(n.info("Item changed to "+JSON.stringify(e)),o.setSearchedNode(e.value))},a.searchTextChange=function(e){n.info("Text changed to "+e)},a.newState=function(e){alert("Sorry! You'll need to create a Constitution for "+e+" first!")}}return o.$inject=["treeViewService"],{replace:!1,restrict:"EA",controller:o,template:'<div layout-align="start center" layout="row" layout-fill> <div flex-offset="5"> <md-autocomplete style="margin-top: 20px" ng-disabled="vm.isDisabled" md-no-cache="vm.noCache" md-selected-item="vm.selectedItem" md-search-text-change="vm.searchTextChange(vm.searchText)" md-search-text="vm.searchText" md-selected-item-change="vm.selectedItemChange(item)" md-items="item in vm.querySearch(vm.searchText)" md-item-text="item.display" md-min-length="0" placeholder="Search People"> <md-item-template> <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.display}}</span> </md-item-template> <md-not-found> No states matching "{{ctrl.searchText}}" were found. <a ng-click="ctrl.newState(ctrl.searchText)">Create a new one!</a> </md-not-found> </md-autocomplete> </div></div>',controllerAs:"vm",scope:{},bindToController:{},link:function(){}}}e.$inject=["$timeout","$q","$log"],angular.module("orgChart").directive("treeSearchBox",e)}(),function(){"use strict";function e(e){var t=this;t.isExpandAllMode=e.isExpandAllMode(),t.toggleExpandAllMode=function(){t.isExpandAllMode=e.toggleExpandAllMode()},t.incrementZoomScale=function(){t.zoomScale=e.incrementZoomScale()},t.decrementZoomScale=function(){t.zoomScale=e.decrementZoomScale()},t.zoomScale=e.getZoomScale()}e.$inject=["toolSetService"],angular.module("orgChart").directive("treeToolSet",function(){return{replace:!1,restrict:"EA",controller:e,controllerAs:"vm",template:'<div layout="column" layout-align="center end"> <div layout="column" layout-align="space-around center" class="toolset-wrapper" flex-offset="5"> <div> <button class="toolset-btn upper-rounded" ng-click="vm.incrementZoomScale()"> <md-tooltip md-direction="bottom">Zoom In</md-tooltip> <md-icon md-font-icon="zmdi zmdi-plus"></md-icon></button> </div><div> <button class="toolset-btn lower-rounded" ng-click="vm.decrementZoomScale()" ng-disabled="vm.zoomScale<=1"> <md-tooltip md-direction="bottom">Zoom Out</md-tooltip> <md-icon md-font-icon="zmdi zmdi-minus"></md-icon></button> </div><div style="margin-top: 10px"> <button class="toolset-btn" ng-hide="vm.isExpandAllMode" ng-click="vm.toggleExpandAllMode()"> <md-tooltip md-direction="bottom">Expand All</md-tooltip> <md-icon md-font-icon="fa fa-expand"></md-icon></button> </div><div> <button class="toolset-btn" ng-show="vm.isExpandAllMode" ng-click="vm.toggleExpandAllMode()"> <md-tooltip md-direction="bottom">Collapse All</md-tooltip> <md-icon md-font-icon="fa fa-compress"></md-icon></button> </div></div></div>',scope:{},bindToController:{},link:function(e,t,n,o){}}})}(),function(){"use strict";angular.module("orgChart").factory("toolSetService",function(){var e=!1,t=1;return{isExpandAllMode:function(){return e},toggleExpandAllMode:function(){return e=!e},getZoomScale:function(){return t},setZoomScale:function(e){t=e,console.log("zoom scale",t)},incrementZoomScale:function(){return t+=.1},decrementZoomScale:function(){return t>1&&(t-=.1),t}}})}(),function(){"use strict";function e(e,n,o,i){return{restrict:"E",replace:!1,controller:t,template:'<div ng-class="{\'active-node\':vm.isActive}" class="{{vm.nodeClass}}" ng-mouseenter="vm.whenMouseEnter()" ng-mouseleave="vm.whenMouseLeave()" ng-click="vm.makeNodeActive()"> <div layout="column" layout-align="center center"> <div class="md-subhead node-text-main">CEO</div><div> <div class="round-chip-wrapper"><img ng-src="assets/images/avatars/flasher.thumb.jpg" class="round-chip"></div></div><div class="md-subhead node-text-sub">{{vm.node.name}}</div><div layout-align="center center" layout-fill layout="row"> <div ng-repeat="action in vm.nodeActions"><button ng-click="vm.makeCallBack(action.callBack)" class="action-btn"><span></span>&nbsp;<i class="{{action.icon}}"></i></button></div></div></div></div>',controllerAs:"vm",scope:{},bindToController:{nodeId:"@",nodeActions:"@"},link:function(t,n,a,l){function r(){i.$broadcast("app:nodes:clearactive",{data:""})}function c(e){n===e.target||n[0].contains(e.target)||t.$apply(function(){l.isActive=!1})}l.id=a.nodeid,l.nodeActions=angular.fromJson(a.nodeactions),console.log(l.nodeActions),l.isPinnedNode=!1,l.node=e.findById(a.nodeid),l.nodeClass="node-label node-"+l.node.type+" node-"+l.id,l.isExpandedView=!1,l.isActive=!1,l.whenMouseEnter=function(){console.log("mouse Entered")},l.whenMouseLeave=function(){console.log("mouse leaved")},l.togglePinnedMode=function(){l.isPinnedNode=!0,console.log(l.isPinnedNode)},l.makeCallBack=function(e){console.log(e),t.$parent.vm.makeCallBack(e)},l.makeNodeActive=function(){r(),l.isActive=!0};angular.element(n.children()[0]);o.on("click",c),t.$on("$destroy",function(){o.off("click",c)})}}}function t(e){}e.$inject=["treeViewService","$timeout","$document","$rootScope"],t.$inject=["treeViewService"],angular.module("orgChart").directive("treeNode",e)}(),function(){"use strict";function e(e,n,o,i,a,l){return{replace:"false",restrict:"E",scope:{},bindToController:{data:"=",abn:"&",nodeActions:"@"},controller:t,controllerAs:"vm",link:function(t,r,c,d){function s(){m(),f(),u()}function u(){t.$watch(function(){return a.isExpandAllMode()},function(e){e?g():y()})}function m(){t.$watch(function(){return o.getSearchedNode()},function(e){if(console.log(e),e){C(e);var t=_(e);L(),i(function(){console.log(t.x,t.y),z(),M(t.id),N(t)},500)}})}function f(){t.$watch(function(){return a.getZoomScale()},function(e){console.log(e),D.transition().duration(750).call(R.translate([150,100]).scale(e).scaleExtent([1,8]).event)})}function p(e){e.children&&(e.children.forEach(p),x(e))}function v(e){var t=e.children?e.children:e._children;e._children&&(e.children=e._children,e._children=null),t&&t.forEach(v)}function h(e){var t=e.children?e.children:e._children;e.children&&(e._children=e.children,e.children=null),t&&t.forEach(h)}function g(){v(P),b(P)}function y(){h(P),b(P)}function b(e){var i=d3.event&&d3.event.altKey?5e3:500,a=J.nodes(P).reverse();a.forEach(function(e){e.y=200*e.depth});var l=D.selectAll("g.node").data(a,function(e){return e.id||(e.id=++V)}),r=l.enter().append("svg:g").attr("class","node").attr("id",function(e){return"node-"+e.id}).attr("transform",function(t){return"translate("+e.x0+","+e.y0+")"}).on("click",function(e){d3.event.defaultPrevented||(x(e),b(e),e.info&&playvid(e.info))});r.append("svg:circle").attr("r",1e-6).style("fill",function(e){return e._children?"lightsteelblue":"#fff"}),r.append("svg:foreignObject").attr("y",-30).attr("x",-5).attr("text-anchor",function(e){return e.children||e._children?"end":"start"}).style("fill-opacity",1e-6).attr("width",160).attr("height",120).append("xhtml:div").classed("disabled",function(e){return void 0!==e.enable&&!e.enable}).on("click",S).append("tree-node").attr("node",function(e){return o.pushNode(e),""}).attr("nodeId",function(e){return e.id}).attr("isPinnedNode","false").attr("nodeActions",c.nodeactions).each(function(){n(this)(t)});var d=l.transition().duration(i).attr("transform",function(e){return"translate("+e.x+","+e.y+")"});d.select("circle").attr("r",4.5).style("fill",function(e){return"highlight-link"===e.class?"#ff4136":e._children?"lightsteelblue":"#fff"}),d.select("text").style("fill-opacity",1);var s=l.exit().transition().duration(i).attr("transform",function(t){return"translate("+e.x+","+e.y+")"}).remove();s.select("circle").attr("r",1e-6),s.select("text").style("fill-opacity",1e-6);var u=D.selectAll("path.link").data(J.links(a),function(e){return e.target.id});u.enter().insert("svg:path","g").attr("class","link").attr("d",function(t){var n={x:e.x0,y:e.y0};return Q({source:n,target:n})}).transition().duration(i).attr("d",Q),u.transition().duration(i).attr("d",Q).style("stroke",function(e){if("highlight-link"===e.target.class)return"#ff4136"}),u.exit().transition().duration(i).attr("d",function(t){var n={x:e.x,y:e.y};return Q({source:n,target:n})}).remove(),a.forEach(function(e){e.x0=e.x,e.y0=e.y})}function x(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null)}function A(){d3.event.stopPropagation()}function S(e){d3.event.defaultPrevented||(console.log(e),$(this)||N(e))}function C(e){var t=E(Z,e.name,[]);angular.isDefined(t)?(k(q),w(t)):console.log("Searched node "+e.name+" not found"),q=t}function w(e){angular.forEach(e,function(e,t){e.class="highlight-link",e._children&&(e.children=e._children,e._children=null),b(e)})}function k(e){angular.forEach(e,function(e,t){e.class="",e._children&&(e.children=e._children,e._children=null),b(e)})}function E(e,t,n){if(e.name===t)return n.push(e),n;if(!e.children&&!e._children)return!1;for(var o=e.children?e.children:e._children,i=0;i<o.length;i++){n.push(e);var a=E(o[i],t,n);if(a)return a;n.pop()}}function $(e){var t=!1;return K.node()===e&&(t=L()),!!t||(K.classed("active",!1),K=d3.select(e).classed("active",!0),!1)}function N(e){var t=[e.x/2-1*e.x,e.y/2-1*e.y];D.transition().duration(1250).call(R.translate(t).scale(1).event)}function L(){return console.log("reset called"),K.classed("active",!1),K=d3.select(null),D.transition().duration(750).call(R.translate([150,100]).scale(1).event),!0}function _(t){return e("filter")(T,{id:t.id},!0)[0]}function M(e){var t=d3.selectAll(".node-"+e.toString());angular.element(t[0]).addClass("active-node")}function z(){var e=d3.selectAll(".node-label");angular.forEach(e,function(e,t){angular.element(e).removeClass("active-node")})}var P,Z={name:"RootNode",id:"id1",type:"type0",addable:!1,editable:!1,removable:!1,enableble:!1,root:!0,children:[{name:"Landing A",id:"id2",type:"type1",addable:!0,editable:!0,removable:!0,enablable:!0,enable:!1,children:[{name:"Account 1",id:"id3",type:"type2",children:[{name:"tracking link 1",id:"id4",type:"type3",enablable:!0,enable:!0},{name:"tracking link 2",id:"id5",type:"type3",enablable:!0,enable:!0},{name:"tracking link 3",id:"id6",type:"type3",enablable:!0,enable:!1}]},{name:"Account 2",id:"id7",type:"type2"},{name:"Account 3",id:"id9",type:"type2"}]},{name:"Landing B",id:"id8",type:"type1",children:[{name:"Account 4",id:"id10",type:"type2"},{name:"Account 5",id:"id11",type:"type2"},{name:"Account 6",id:"id12",type:"type2"}]},{name:"Landing C",id:"id13",type:"type1",children:[{name:"Subtopic 7",id:"id14",type:"type3"},{name:"Subtopic 8",id:"id15",type:"type3"},{name:"Subtopic 9",id:"id16",type:"type3"}]}]},T=[],B=[20,20,20,20],j=l.innerWidth-20-B[1]-B[3],I=600-B[0]-B[2],V=0,O=(d3.scale.linear().domain([0,j]).range([0,j]),d3.scale.linear().domain([0,I]).range([0,I]),d3.select(r[0])),q=[];r.append(n('<div layout="row" layout-align="space-around center"><div flex><tree-search-box></tree-search-box></div><div flex><tree-tool-set></tree-tool-set></div></div>')(t)),s();var D=O.append("div").attr("layout","row").attr("layout-align","space-around center").call(function(){n(this[0])(t)}).append("div").attr("flex","").call(function(){n(this[0])(t)}).append("svg:svg").attr("viewBox","0 0 600 600").attr("width",j+B[1]+B[3]).attr("height",I+B[0]+B[2]).append("svg:g").attr("transform","translate("+B[3]+","+B[0]+")").call(d3.behavior.zoom().on("zoom",function(){a.setZoomScale(d3.event.scale),t.$apply(),console.log(d3.event.scale),D.attr("transform","translate("+d3.event.translate+")")})).on("click",A,!1).call(d3.behavior.drag().on("dragstart",function(){d3.event.sourceEvent.stopPropagation()}).on("drag",function(){console.log("dragged"),d3.event.sourceEvent.stopPropagation()})).append("g").attr("width",160).attr("height",120).attr("class","tree-holder"),J=d3.layout.tree().size([I,j]).nodeSize([110,60]).separation(function(e,t){return e.parent,t.parent,2}),Q=d3.svg.diagonal().projection(function(e){return[e.x+80,e.y+80]});(P=Z).x0=I/2,P.y0=0,console.log(P),P.children.forEach(p),b(P);var K=d3.select(null),R=d3.behavior.zoom().translate([0,0]).scale(1).scaleExtent([1,8]).on("zoom",function(){D.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")});t.$on("app:nodes:clearactive",function(e,t){z()}),t.$on("$destroy",function(){})}}}function t(e,t,n){this.makeCallBack=function(e){console.log("called treeview call back abn"),t.vm[e]()}}e.$inject=["$filter","$compile","treeViewService","$timeout","toolSetService","$window"],t.$inject=["$rootScope","$scope","treeViewService"],angular.module("orgChart").directive("treeView",e)}(),function(){"use strict";function e(e){var t=null,n=[];return{setSearchedNode:function(e){t=e},getSearchedNode:function(){return t},setNodes:function(e){n=e},pushNode:function(e){n.push(e)},getNodes:function(){return n},findById:function(t){return e("filter")(n,{id:t},!0)[0]}}}e.$inject=["$filter"],angular.module("orgChart").factory("treeViewService",e)}(),function(){"use strict";angular.module("orgChart.example",[])}(),function(){"use strict";function e(e){e.state("example.test",{url:"/example/test",controller:"ExampleOrgChartController",templateUrl:"app/example/test/test.tmpl.html",controllerAs:"vm",data:{permissions:{only:["fullAccess"]}}})}e.$inject=["$stateProvider"],angular.module("orgChart.example").config(e)}(),function(){"use strict";angular.module("orgChart.example").controller("ExampleController",function(){})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZ2NoYXJ0Lm1vZHVsZS5qcyIsImRpcmVjdGl2ZXMvc2VhcmNoYm94LmRpcmVjdGl2ZS5qcyIsImRpcmVjdGl2ZXMvdG9vbHNldC5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3Rvb2xzZXQuc2VydmljZS5qcyIsImRpcmVjdGl2ZXMvdHJlZW5vZGUuZGlyZWN0aXZlLmpzIiwiZGlyZWN0aXZlcy90cmVldmlldy5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3RyZWV2aWV3LnNlcnZpY2UuanMiLCJleGFtcGxlL2V4YW1wbGUubW9kdWxlLmpzIiwiZXhhbXBsZS9leGFtcGxlLnJvdXRlLmNvbmZpZy5qcyIsImV4YW1wbGUvdGVzdC90ZXN0LmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsInRyZWVTZWFyY2hCb3giLCIkdGltZW91dCIsIiRxIiwiJGxvZyIsIkNhc2NhZGVUcmVlU2VhcmNoQm94Q29udHJvbGxlciIsInRyZWVWaWV3U2VydmljZSIsImNyZWF0ZUZpbHRlckZvciIsInF1ZXJ5IiwibG93ZXJjYXNlUXVlcnkiLCJsb3dlcmNhc2UiLCJzdGF0ZSIsImRpc3BsYXlMb3dlckNhc2UiLCJpbmRleE9mIiwidm0iLCJ0aGlzIiwic2ltdWxhdGVRdWVyeSIsImlzRGlzYWJsZWQiLCJub0NhY2hlIiwic3RhdGVzIiwidmFsdWUiLCJuYW1lIiwiaWQiLCJ0eXBlIiwiYWRkYWJsZSIsImVkaXRhYmxlIiwicmVtb3ZhYmxlIiwiZW5hYmxlYmxlIiwiZGlzcGxheSIsInRvTG93ZXJDYXNlIiwiZW5hYmxhYmxlIiwiZW5hYmxlIiwicXVlcnlTZWFyY2giLCJkZWZlcnJlZCIsInJlc3VsdHMiLCJmaWx0ZXIiLCJkZWZlciIsInJlc29sdmUiLCJNYXRoIiwicmFuZG9tIiwicHJvbWlzZSIsInNlbGVjdGVkSXRlbUNoYW5nZSIsIml0ZW0iLCJpbmZvIiwiSlNPTiIsInN0cmluZ2lmeSIsInNldFNlYXJjaGVkTm9kZSIsInNlYXJjaFRleHRDaGFuZ2UiLCJ0ZXh0IiwibmV3U3RhdGUiLCJhbGVydCIsInJlcGxhY2UiLCJyZXN0cmljdCIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZSIsImNvbnRyb2xsZXJBcyIsInNjb3BlIiwiYmluZFRvQ29udHJvbGxlciIsImxpbmsiLCJkaXJlY3RpdmUiLCJUcmVlVG9vbFNldCIsInRvb2xTZXRTZXJ2aWNlIiwiaXNFeHBhbmRBbGxNb2RlIiwidG9nZ2xlRXhwYW5kQWxsTW9kZSIsImluY3JlbWVudFpvb21TY2FsZSIsInpvb21TY2FsZSIsImRlY3JlbWVudFpvb21TY2FsZSIsImdldFpvb21TY2FsZSIsImVsZW0iLCJhdHRyIiwiZmFjdG9yeSIsImlzQWxsRXhwYW5kZWRNb2RlIiwic2V0Wm9vbVNjYWxlIiwic2NhbGUiLCJjb25zb2xlIiwibG9nIiwidHJlZU5vZGUiLCIkZG9jdW1lbnQiLCIkcm9vdFNjb3BlIiwiQ2FzY2FkZVRyZWVOb2RlQ29udHJvbGxlciIsIm5vZGVJZCIsIm5vZGVBY3Rpb25zIiwiYXR0cnMiLCJjbGVhckFsbE90aGVyQWN0aXZlTm9kZXMiLCIkYnJvYWRjYXN0IiwiZGF0YSIsIm9uRG9jdW1lbnRDbGljayIsImV2IiwidGFyZ2V0IiwiY29udGFpbnMiLCIkYXBwbHkiLCJpc0FjdGl2ZSIsIm5vZGVpZCIsImZyb21Kc29uIiwibm9kZWFjdGlvbnMiLCJpc1Bpbm5lZE5vZGUiLCJub2RlIiwiZmluZEJ5SWQiLCJub2RlQ2xhc3MiLCJpc0V4cGFuZGVkVmlldyIsIndoZW5Nb3VzZUVudGVyIiwid2hlbk1vdXNlTGVhdmUiLCJ0b2dnbGVQaW5uZWRNb2RlIiwibWFrZUNhbGxCYWNrIiwiY2FsbEJhY2tGdW5jTmFtZSIsIiRwYXJlbnQiLCJtYWtlTm9kZUFjdGl2ZSIsImVsZW1lbnQiLCJjaGlsZHJlbiIsIm9uIiwiJG9uIiwib2ZmIiwidHJlZVZpZXciLCIkZmlsdGVyIiwiJGNvbXBpbGUiLCIkd2luZG93IiwiYWJuIiwiVHJlZVZpZXdEaXJlY3RpdmVDb250cm9sbGVyIiwiYWN0aXZhdGVXYXRjaGVycyIsIm9uU2VhcmNoV2F0Y2giLCJvblpvb21XYXRjaCIsIm9uRXhwYW5kV2F0Y2giLCIkd2F0Y2giLCJpc0luRXhwYW5kQWxsTW9kZSIsImV4cGFuZEFsbCIsImNvbGxhcHNlQWxsIiwiZ2V0U2VhcmNoZWROb2RlIiwiaGlnaGxpZ2h0UGF0aCIsInJlc29sdmVkTm9kZSIsImdldFRyZWVOb2RlQnlPYmplY3QiLCJyZXNldCIsIngiLCJ5IiwiY2xlYXJBbGxBY3RpdmVOb2RlcyIsInBhblRvVGhlTm9kZSIsInZpcyIsInRyYW5zaXRpb24iLCJkdXJhdGlvbiIsImNhbGwiLCJ6b29tT2JqZWN0IiwidHJhbnNsYXRlIiwic2NhbGVFeHRlbnQiLCJldmVudCIsInRvZ2dsZUFsbCIsImQiLCJmb3JFYWNoIiwidG9nZ2xlIiwiZXhwYW5kQWxsQWZ0ZXIiLCJfY2hpbGRyZW4iLCJjb2xsYXBzZUFsbEFmdGVyIiwicm9vdCIsInVwZGF0ZSIsInNvdXJjZSIsImQzIiwiYWx0S2V5Iiwibm9kZXMiLCJ0cmVlIiwicmV2ZXJzZSIsImRlcHRoIiwic2VsZWN0QWxsIiwiaSIsIm5vZGVFbnRlciIsImVudGVyIiwiYXBwZW5kIiwieDAiLCJ5MCIsImRlZmF1bHRQcmV2ZW50ZWQiLCJwbGF5dmlkIiwic3R5bGUiLCJjbGFzc2VkIiwidW5kZWZpbmVkIiwib25DbGlja2VkTm9kZSIsInB1c2hOb2RlIiwiZWFjaCIsIm5vZGVVcGRhdGUiLCJzZWxlY3QiLCJjbGFzcyIsIm5vZGVFeGl0IiwiZXhpdCIsInJlbW92ZSIsImxpbmtzIiwiaW5zZXJ0IiwibyIsImRpYWdvbmFsIiwic3RvcFByb3BvZ2F0aW9uIiwic3RvcFByb3BhZ2F0aW9uIiwibWFrZUNsaWNrZWROb2RlQWN0aXZlIiwicGF0aCIsInNlYXJjaFdpdGhpblRyZWUiLCJ0cmVlZGF0YSIsImlzRGVmaW5lZCIsImNsZWFySGlnaExpZ2h0TGlua3MiLCJsYXN0U2VhcmNoZWRQYXRoIiwiaGlnaGxpZ2h0TGlua3MiLCJrZXkiLCJzZWFyY2hLZXkiLCJwdXNoIiwibGVuZ3RoIiwiZm91bmQiLCJwb3AiLCJpc1Jlc2V0IiwiYWN0aXZlIiwib2JqZWN0Iiwibm9kZUxpc3QiLCJ0b1N0cmluZyIsImFkZENsYXNzIiwidiIsImsiLCJyZW1vdmVDbGFzcyIsIm0iLCJ3IiwiaW5uZXJXaWR0aCIsImgiLCJ3cmFwcGVyRWxlbWVudCIsImxpbmVhciIsImRvbWFpbiIsInJhbmdlIiwiYmVoYXZpb3IiLCJ6b29tIiwiZHJhZyIsInNvdXJjZUV2ZW50IiwibGF5b3V0Iiwic2l6ZSIsIm5vZGVTaXplIiwic2VwYXJhdGlvbiIsImEiLCJiIiwicGFyZW50Iiwic3ZnIiwicHJvamVjdGlvbiIsIiRzY29wZSIsImlkZW50aWZpZXIiLCJzZWxlY3RlZE5vZGUiLCJzZXROb2RlcyIsInNldE9mbm9kZXMiLCJnZXROb2RlcyIsIm9yZ2NoYXJ0Um91dGVDb25maWciLCIkc3RhdGVQcm92aWRlciIsInVybCIsInRlbXBsYXRlVXJsIiwicGVybWlzc2lvbnMiLCJvbmx5IiwiY29uZmlnIl0sIm1hcHBpbmdzIjoiQ0FHQSxXQUNBLGFBQ0FBLFFBQUFDLE9BQUEsWUFBQSx3QkNGQSxXQUNBLGFBS0EsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FvQkEsU0FBQUMsRUFBQUMsR0FxT0EsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBVixRQUFBVyxVQUFBRixHQUVBLE9BQUEsU0FBQUcsR0FDQSxPQUFBLElBQUFBLEVBQUFDLGlCQUFBQyxRQUFBSixJQXZPQSxJQUFBSyxFQUFBQyxLQUNBRCxFQUFBRSxlQUFBLEVBQ0FGLEVBQUFHLFlBQUEsRUFDQUgsRUFBQUksU0FBQSxFQUdBSixFQUFBSyxTQW9EQUMsT0FDQUMsS0FBQSx3QkFDQUMsR0FBQSxNQUNBQyxLQUFBLFFBQ0FDLFNBQUEsRUFDQUMsVUFBQSxFQUNBQyxXQUFBLEVBQ0FDLFdBQUEsR0FFQUMsUUFBQSx3QkFDQWhCLGlCQUFBLHdCQUFBaUIsZ0JBR0FULE9BQ0FDLEtBQUEsWUFDQUMsR0FBQSxNQUNBQyxLQUFB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QUNBZ0QsTUFHQTdFLEVBQUFzRCxJQUFBLFdBQ0EsZ0JBU0EsU0FBQU8sRUFBQXZDLEVBQUF3SixFQUFBaE8sR0FDQVMsS0FDQXdGLGFBRUEsU0FBQWdJLEdBQ0E3SixRQUFBQyxJQUFBLGlDQUNBMkosRUFBQXhOLEdBQUF5TixtSkF2ekJBeE8sUUFBQUMsT0FBQSxZQUFBMkQsVUFBQSxXQUFBcUQsTUNGQSxXQUNBLGFBSUEsU0FBQTFHLEVBQUEyRyxHQUNBLElBQUF1SCxFQUFBLEtBQ0E3RSxLQVdBLE9BUkE3RyxnQkEyQkEsU0FBQWtELEdBQ0F3SSxFQUFBeEksR0EzQkE4QixnQkE4QkEsV0FDQSxPQUFBMEcsR0E5QkFDLFNBYUEsU0FBQUMsR0FDQS9FLEVBQUErRSxHQWJBOUQsU0FvQkEsU0FBQTVFLEdBQ0EyRCxFQUFBeUMsS0FBQXBHLElBcEJBMkksU0FlQSxXQUNBLE9BQUFoRixHQWZBMUQsU0FLQSxTQUFBM0UsR0FFQSxPQURBMkYsRUFBQSxVQUFBMEMsR0FBQXJJLEdBQUFBLElBQUEsR0FBQSwyQkFsQkF2QixRQUFBQyxPQUFBLFlBQUFzRSxRQUFBLGtCQUFBaEUsTUNIQSxXQUNBLGFBQ0FQLFFBQUFDLE9BQUEsMEJDRkEsd0JBS0EsU0FBQTRPLEVBQUFDLEdBQ0FBLEVBQUFsTyxNQUFBLGdCQUNBbU8sSUFBQSxnQkFDQXpMLFdBQUEsNEJBQ0EwTCxZQUFBLGtDQUNBeEwsYUFBQSxLQUNBOEIsTUFDQTJKLGFBQ0FDLE1BQUEsK0NBWEFsUCxRQUFBQyxPQUFBLG9CQUFBa1AsT0FBQU4sTUNGQSxXQUNBLGFBQ0E3TyxRQUFBQyxPQUFBLG9CQUFBcUQsV0FBQSxvQkFHQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA3LzEwLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnLFsnb3JnQ2hhcnQuZXhhbXBsZSddKTtcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNi8xLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdvcmdDaGFydCcpLmRpcmVjdGl2ZSgndHJlZVNlYXJjaEJveCcsIHRyZWVTZWFyY2hCb3gpO1xuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIHRyZWVTZWFyY2hCb3goJHRpbWVvdXQsICRxLCAkbG9nKSB7XG5cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBDYXNjYWRlVHJlZVNlYXJjaEJveENvbnRyb2xsZXIsXG4gICAgICAgICAgICAvLyB0ZW1wbGF0ZVVybDogJ3NlYXJjaGJveC50bXBsLmh0bWwnLFxuICAgICAgICAgICAgdGVtcGxhdGU6JzxkaXYgbGF5b3V0LWFsaWduPVwic3RhcnQgY2VudGVyXCIgbGF5b3V0PVwicm93XCIgbGF5b3V0LWZpbGw+IDxkaXYgZmxleC1vZmZzZXQ9XCI1XCI+IDxtZC1hdXRvY29tcGxldGUgc3R5bGU9XCJtYXJnaW4tdG9wOiAyMHB4XCIgbmctZGlzYWJsZWQ9XCJ2bS5pc0Rpc2FibGVkXCIgbWQtbm8tY2FjaGU9XCJ2bS5ub0NhY2hlXCIgbWQtc2VsZWN0ZWQtaXRlbT1cInZtLnNlbGVjdGVkSXRlbVwiIG1kLXNlYXJjaC10ZXh0LWNoYW5nZT1cInZtLnNlYXJjaFRleHRDaGFuZ2Uodm0uc2VhcmNoVGV4dClcIiBtZC1zZWFyY2gtdGV4dD1cInZtLnNlYXJjaFRleHRcIiBtZC1zZWxlY3RlZC1pdGVtLWNoYW5nZT1cInZtLnNlbGVjdGVkSXRlbUNoYW5nZShpdGVtKVwiIG1kLWl0ZW1zPVwiaXRlbSBpbiB2bS5xdWVyeVNlYXJjaCh2bS5zZWFyY2hUZXh0KVwiIG1kLWl0ZW0tdGV4dD1cIml0ZW0uZGlzcGxheVwiIG1kLW1pbi1sZW5ndGg9XCIwXCIgcGxhY2Vob2xkZXI9XCJTZWFyY2ggUGVvcGxlXCI+IDxtZC1pdGVtLXRlbXBsYXRlPiA8c3BhbiBtZC1oaWdobGlnaHQtdGV4dD1cImN0cmwuc2VhcmNoVGV4dFwiIG1kLWhpZ2hsaWdodC1mbGFncz1cIl5pXCI+e3tpdGVtLmRpc3BsYXl9fTwvc3Bhbj4gPC9tZC1pdGVtLXRlbXBsYXRlPiA8bWQtbm90LWZvdW5kPiBObyBzdGF0ZXMgbWF0Y2hpbmcgXCJ7e2N0cmwuc2VhcmNoVGV4dH19XCIgd2VyZSBmb3VuZC4gPGEgbmctY2xpY2s9XCJjdHJsLm5ld1N0YXRlKGN0cmwuc2VhcmNoVGV4dClcIj5DcmVhdGUgYSBuZXcgb25lITwvYT4gPC9tZC1ub3QtZm91bmQ+IDwvbWQtYXV0b2NvbXBsZXRlPiA8L2Rpdj48L2Rpdj4nLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge30sXG4gICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgICAgICAgZnVuY3Rpb24gbGluaygpIHtcblxuICAgICAgICB9XG5cbiAgICAgICAgLypAbmdJbmplY3QqL1xuICAgICAgICBmdW5jdGlvbiBDYXNjYWRlVHJlZVNlYXJjaEJveENvbnRyb2xsZXIodHJlZVZpZXdTZXJ2aWNlKSB7XG5cbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgICAgICB2bS5zaW11bGF0ZVF1ZXJ5ID0gZmFsc2U7XG4gICAgICAgICAgICB2bS5pc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB2bS5ub0NhY2hlID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gbGlzdCBvZiBgc3RhdGVgIHZhbHVlL2Rpc3BsYXkgb2JqZWN0c1xuICAgICAgICAgICAgdm0uc3RhdGVzID0gbG9hZEFsbCgpO1xuICAgICAgICAgICAgdm0ucXVlcnlTZWFyY2ggPSBxdWVyeVNlYXJjaDtcbiAgICAgICAgICAgIHZtLnNlbGVjdGVkSXRlbUNoYW5nZSA9IHNlbGVjdGVkSXRlbUNoYW5nZTtcbiAgICAgICAgICAgIHZtLnNlYXJjaFRleHRDaGFuZ2UgPSBzZWFyY2hUZXh0Q2hhbmdlO1xuXG4gICAgICAgICAgICB2bS5uZXdTdGF0ZSA9IG5ld1N0YXRlO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBuZXdTdGF0ZShzdGF0ZSkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiU29ycnkhIFlvdSdsbCBuZWVkIHRvIGNyZWF0ZSBhIENvbnN0aXR1dGlvbiBmb3IgXCIgKyBzdGF0ZSArIFwiIGZpcnN0IVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICAgICAgICAvLyBJbnRlcm5hbCBtZXRob2RzXG4gICAgICAgICAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTZWFyY2ggZm9yIHN0YXRlcy4uLiB1c2UgJHRpbWVvdXQgdG8gc2ltdWxhdGVcbiAgICAgICAgICAgICAqIHJlbW90ZSBkYXRhc2VydmljZSBjYWxsLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBxdWVyeVNlYXJjaChxdWVyeSkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gcXVlcnkgPyB2bS5zdGF0ZXMuZmlsdGVyKGNyZWF0ZUZpbHRlckZvcihxdWVyeSkpIDogdm0uc3RhdGVzLFxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZDtcbiAgICAgICAgICAgICAgICBpZiAodm0uc2ltdWxhdGVRdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIE1hdGgucmFuZG9tKCkgKiAxMDAwLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc2VhcmNoVGV4dENoYW5nZSh0ZXh0KSB7XG4gICAgICAgICAgICAgICAgJGxvZy5pbmZvKCdUZXh0IGNoYW5nZWQgdG8gJyArIHRleHQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBzZWxlY3RlZEl0ZW1DaGFuZ2UoaXRlbSkge1xuXG4gICAgICAgICAgICAgICAgaWYoaXRlbSl7XG4gICAgICAgICAgICAgICAgICAgICRsb2cuaW5mbygnSXRlbSBjaGFuZ2VkIHRvICcgKyBKU09OLnN0cmluZ2lmeShpdGVtKSk7XG4gICAgICAgICAgICAgICAgICAgIHRyZWVWaWV3U2VydmljZS5zZXRTZWFyY2hlZE5vZGUoaXRlbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQnVpbGQgYHN0YXRlc2AgbGlzdCBvZiBrZXkvdmFsdWUgcGFpcnNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gbG9hZEFsbCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXV0b0NvbXBsZXRlTGlzdCA9IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJQdWJsaXNoZXJOYW1lTG9uZ05hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZGFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlZGl0YWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJlbW92YWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsZWJsZVwiOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiUHVibGlzaGVyTmFtZUxvbmdOYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TG93ZXJDYXNlOiBcIlB1Ymxpc2hlck5hbWVMb25nTmFtZVwiLnRvTG93ZXJDYXNlKClcblxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkxhbmRpbmcgQVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWRkYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZWRpdGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJlbW92YWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVcIjogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIkxhbmRpbmcgQVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUxvd2VyQ2FzZTogXCJMYW5kaW5nIEFcIi50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiQWNjb3VudCAxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJ9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJBY2NvdW50IDFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlMb3dlckNhc2U6IFwiQWNjb3VudCAxXCIudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkxhbmRpbmcgQlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMVwifSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiTGFuZGluZyBCXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TG93ZXJDYXNlOiBcIkxhbmRpbmcgQlwiLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB2YXIgdHJlZWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIlB1Ymxpc2hlck5hbWVMb25nTmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUwXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYWRkYWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgXCJlZGl0YWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgXCJyZW1vdmFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIFwiZW5hYmxlYmxlXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBcImNoaWxkcmVuXCI6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJMYW5kaW5nIEFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImFkZGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZWRpdGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicmVtb3ZhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNoaWxkcmVuXCI6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiQWNjb3VudCAxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ0cmFja2luZyBsaW5rIDFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkNFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsZVwiOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ0cmFja2luZyBsaW5rIDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkNVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsZVwiOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ0cmFja2luZyBsaW5rIDNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkNlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsZVwiOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiQWNjb3VudCAyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkN1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBY2NvdW50IDNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQ5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiTGFuZGluZyBCXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQ4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgNFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDEwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgNVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDExXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgNlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDEyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiTGFuZGluZyBDXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJTdWJ0b3BpYyA3XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMTRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiU3VidG9waWMgOFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDE1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIlN1YnRvcGljIDlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxNlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qICAgICAgICAgICAgICAgIHZhciBhbGxTdGF0ZXMgPSAnQWxhYmFtYSwgQWxhc2thLCBBcml6b25hLCBBcmthbnNhcywgQ2FsaWZvcm5pYSwgQ29sb3JhZG8sIENvbm5lY3RpY3V0LCBEZWxhd2FyZSxcXFxuICAgICAgICAgICAgICAgICBGbG9yaWRhLCBHZW9yZ2lhLCBIYXdhaWksIElkYWhvLCBJbGxpbm9pcywgSW5kaWFuYSwgSW93YSwgS2Fuc2FzLCBLZW50dWNreSwgTG91aXNpYW5hLFxcXG4gICAgICAgICAgICAgICAgIE1haW5lLCBNYXJ5bGFuZCwgTWFzc2FjaHVzZXR0cywgTWljaGlnYW4sIE1pbm5lc290YSwgTWlzc2lzc2lwcGksIE1pc3NvdXJpLCBNb250YW5hLFxcXG4gICAgICAgICAgICAgICAgIE5lYnJhc2thLCBOZXZhZGEsIE5ldyBIYW1wc2hpcmUsIE5ldyBKZXJzZXksIE5ldyBNZXhpY28sIE5ldyBZb3JrLCBOb3J0aCBDYXJvbGluYSxcXFxuICAgICAgICAgICAgICAgICBOb3J0aCBEYWtvdGEsIE9oaW8sIE9rbGFob21hLCBPcmVnb24sIFBlbm5zeWx2YW5pYSwgUmhvZGUgSXNsYW5kLCBTb3V0aCBDYXJvbGluYSxcXFxuICAgICAgICAgICAgICAgICBTb3V0aCBEYWtvdGEsIFRlbm5lc3NlZSwgVGV4YXMsIFV0YWgsIFZlcm1vbnQsIFZpcmdpbmlhLCBXYXNoaW5ndG9uLCBXZXN0IFZpcmdpbmlhLFxcXG4gICAgICAgICAgICAgICAgIFdpc2NvbnNpbiwgV3lvbWluZyc7XG5cbiAgICAgICAgICAgICAgICAgcmV0dXJuIGFsbFN0YXRlcy5zcGxpdCgvLCArL2cpLm1hcCggZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgIHZhbHVlOiBzdGF0ZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICAgICBkaXNwbGF5OiBzdGF0ZVxuICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICB9KTsqL1xuXG4gICAgICAgICAgICAgICAgLyogICAgICAgICAgICAgICAgcmV0dXJuIHRyZWVkYXRhLmNoaWxkcmVuLm1hcChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICB2YWx1ZTogbm9kZSxcbiAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9kZS5uYW1lLFxuICAgICAgICAgICAgICAgICBkaXNwbGF5TG93ZXJDYXNlOiBub2RlLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICB9KTsqL1xuXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIGV4dHJhY3ROb2Rlcyh0cmVlZGF0YS5jaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF1dG9Db21wbGV0ZUxpc3Q7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4dHJhY3ROb2RlcyhsaXN0T2ZOb2Rlcykge1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RPZk5vZGVzLm1hcChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub2RlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TG93ZXJDYXNlOiBub2RlLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZSBmaWx0ZXIgZnVuY3Rpb24gZm9yIGEgcXVlcnkgc3RyaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbHRlckZvcihxdWVyeSkge1xuICAgICAgICAgICAgICAgIHZhciBsb3dlcmNhc2VRdWVyeSA9IGFuZ3VsYXIubG93ZXJjYXNlKHF1ZXJ5KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBmaWx0ZXJGbihzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHN0YXRlLmRpc3BsYXlMb3dlckNhc2UuaW5kZXhPZihsb3dlcmNhc2VRdWVyeSkgPT09IDApO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG5cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA2LzUvMTcuXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ29yZ0NoYXJ0JykuZGlyZWN0aXZlKCd0cmVlVG9vbFNldCcsIHRyZWVUb29sU2V0KTtcblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiB0cmVlVG9vbFNldCgpIHtcblxuICAgICAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgcmVwbGFjZTogZmFsc2UsXG4gICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFRyZWVUb29sU2V0LFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgLy8gdGVtcGxhdGVVcmw6ICd0b29sc2V0LnRtcGwuaHRtbCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZTonPGRpdiBsYXlvdXQ9XCJjb2x1bW5cIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgZW5kXCI+IDxkaXYgbGF5b3V0PVwiY29sdW1uXCIgbGF5b3V0LWFsaWduPVwic3BhY2UtYXJvdW5kIGNlbnRlclwiIGNsYXNzPVwidG9vbHNldC13cmFwcGVyXCIgZmxleC1vZmZzZXQ9XCI1XCI+IDxkaXY+IDxidXR0b24gY2xhc3M9XCJ0b29sc2V0LWJ0biB1cHBlci1yb3VuZGVkXCIgbmctY2xpY2s9XCJ2bS5pbmNyZW1lbnRab29tU2NhbGUoKVwiPiA8bWQtdG9vbHRpcCBtZC1kaXJlY3Rpb249XCJib3R0b21cIj5ab29tIEluPC9tZC10b29sdGlwPiA8bWQtaWNvbiBtZC1mb250LWljb249XCJ6bWRpIHptZGktcGx1c1wiPjwvbWQtaWNvbj48L2J1dHRvbj4gPC9kaXY+PGRpdj4gPGJ1dHRvbiBjbGFzcz1cInRvb2xzZXQtYnRuIGxvd2VyLXJvdW5kZWRcIiBuZy1jbGljaz1cInZtLmRlY3JlbWVudFpvb21TY2FsZSgpXCIgbmctZGlzYWJsZWQ9XCJ2bS56b29tU2NhbGU8PTFcIj4gPG1kLXRvb2x0aXAgbWQtZGlyZWN0aW9uPVwiYm90dG9tXCI+Wm9vbSBPdXQ8L21kLXRvb2x0aXA+IDxtZC1pY29uIG1kLWZvbnQtaWNvbj1cInptZGkgem1kaS1taW51c1wiPjwvbWQtaWNvbj48L2J1dHRvbj4gPC9kaXY+PGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6IDEwcHhcIj4gPGJ1dHRvbiBjbGFzcz1cInRvb2xzZXQtYnRuXCIgbmctaGlkZT1cInZtLmlzRXhwYW5kQWxsTW9kZVwiIG5nLWNsaWNrPVwidm0udG9nZ2xlRXhwYW5kQWxsTW9kZSgpXCI+IDxtZC10b29sdGlwIG1kLWRpcmVjdGlvbj1cImJvdHRvbVwiPkV4cGFuZCBBbGw8L21kLXRvb2x0aXA+IDxtZC1pY29uIG1kLWZvbnQtaWNvbj1cImZhIGZhLWV4cGFuZFwiPjwvbWQtaWNvbj48L2J1dHRvbj4gPC9kaXY+PGRpdj4gPGJ1dHRvbiBjbGFzcz1cInRvb2xzZXQtYnRuXCIgbmctc2hvdz1cInZtLmlzRXhwYW5kQWxsTW9kZVwiIG5nLWNsaWNrPVwidm0udG9nZ2xlRXhwYW5kQWxsTW9kZSgpXCI+IDxtZC10b29sdGlwIG1kLWRpcmVjdGlvbj1cImJvdHRvbVwiPkNvbGxhcHNlIEFsbDwvbWQtdG9vbHRpcD4gPG1kLWljb24gbWQtZm9udC1pY29uPVwiZmEgZmEtY29tcHJlc3NcIj48L21kLWljb24+PC9idXR0b24+IDwvZGl2PjwvZGl2PjwvZGl2PicsXG4gICAgICAgICAgICBzY29wZToge30sXG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7fSxcbiAgICAgICAgICAgIGxpbms6IGxpbmtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW0sIGF0dHIsIHZtKSB7XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiBUcmVlVG9vbFNldCh0b29sU2V0U2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmlzRXhwYW5kQWxsTW9kZSA9IHRvb2xTZXRTZXJ2aWNlLmlzRXhwYW5kQWxsTW9kZSgpO1xuICAgICAgICB2bS50b2dnbGVFeHBhbmRBbGxNb2RlID0gdG9nZ2xlRXhwYW5kQWxsTW9kZTtcbiAgICAgICAgdm0uaW5jcmVtZW50Wm9vbVNjYWxlID0gaW5jcmVtZW50Wm9vbVNjYWxlO1xuICAgICAgICB2bS5kZWNyZW1lbnRab29tU2NhbGUgPSBkZWNyZW1lbnRab29tU2NhbGU7XG4gICAgICAgIHZtLnpvb21TY2FsZSA9IHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUV4cGFuZEFsbE1vZGUoKSB7XG4gICAgICAgICAgICB2bS5pc0V4cGFuZEFsbE1vZGUgPSB0b29sU2V0U2VydmljZS50b2dnbGVFeHBhbmRBbGxNb2RlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gaW5jcmVtZW50Wm9vbVNjYWxlKCkge1xuICAgICAgICAgICAgdm0uem9vbVNjYWxlID0gdG9vbFNldFNlcnZpY2UuaW5jcmVtZW50Wm9vbVNjYWxlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZWNyZW1lbnRab29tU2NhbGUoKSB7XG4gICAgICAgICAgICB2bS56b29tU2NhbGUgPSB0b29sU2V0U2VydmljZS5kZWNyZW1lbnRab29tU2NhbGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxufSkoKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDYvNS8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5mYWN0b3J5KCd0b29sU2V0U2VydmljZScsIHRvb2xTZXRTZXJ2aWNlKTtcblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiB0b29sU2V0U2VydmljZSgpIHtcblxuICAgICAgICB2YXIgaXNBbGxFeHBhbmRlZE1vZGUgPSBmYWxzZTtcbiAgICAgICAgdmFyIExPV0VTVF9aT09NX1NDQUxFID0gMTtcbiAgICAgICAgdmFyIHpvb21TY2FsZSA9IExPV0VTVF9aT09NX1NDQUxFO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0V4cGFuZEFsbE1vZGU6IGlzRXhwYW5kQWxsTW9kZSxcbiAgICAgICAgICAgIHRvZ2dsZUV4cGFuZEFsbE1vZGU6IHRvZ2dsZUV4cGFuZEFsbE1vZGUsXG4gICAgICAgICAgICBnZXRab29tU2NhbGU6IGdldFpvb21TY2FsZSxcbiAgICAgICAgICAgIHNldFpvb21TY2FsZTogc2V0Wm9vbVNjYWxlLFxuICAgICAgICAgICAgaW5jcmVtZW50Wm9vbVNjYWxlOiBpbmNyZW1lbnRab29tU2NhbGUsXG4gICAgICAgICAgICBkZWNyZW1lbnRab29tU2NhbGU6IGRlY3JlbWVudFpvb21TY2FsZVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzRXhwYW5kQWxsTW9kZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0FsbEV4cGFuZGVkTW9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUV4cGFuZEFsbE1vZGUoKSB7XG4gICAgICAgICAgICBpc0FsbEV4cGFuZGVkTW9kZSA9ICFpc0FsbEV4cGFuZGVkTW9kZTtcbiAgICAgICAgICAgIHJldHVybiBpc0FsbEV4cGFuZGVkTW9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFpvb21TY2FsZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB6b29tU2NhbGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRab29tU2NhbGUoc2NhbGUpIHtcbiAgICAgICAgICAgIGlmIChzY2FsZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAvLyB6b29tU2NhbGUgPSBzY2FsZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gem9vbVNjYWxlID0gTE9XRVNUX1pPT01fU0NBTEUgKyBzY2FsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHpvb21TY2FsZSA9IHNjYWxlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3pvb20gc2NhbGUnLCB6b29tU2NhbGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5jcmVtZW50Wm9vbVNjYWxlKCkge1xuICAgICAgICAgICAgem9vbVNjYWxlICs9IDAuMTtcblxuICAgICAgICAgICAgcmV0dXJuIHpvb21TY2FsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRlY3JlbWVudFpvb21TY2FsZSgpIHtcbiAgICAgICAgICAgIGlmICh6b29tU2NhbGUgPiAxKSB7XG4gICAgICAgICAgICAgICAgem9vbVNjYWxlIC09IDAuMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHpvb21TY2FsZTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA1LzMxLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5kaXJlY3RpdmUoJ3RyZWVOb2RlJywgdHJlZU5vZGUpO1xuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIHRyZWVOb2RlKHRyZWVWaWV3U2VydmljZSwgJHRpbWVvdXQsICRkb2N1bWVudCwkcm9vdFNjb3BlKSB7XG5cbiAgICAgICAgdmFyIGNhc2NhZGVUcmVlTm9kZURpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICByZXBsYWNlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIHJlcXVpcmU6J15jYXNjYWRlVHJlZVZpZXcnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogQ2FzY2FkZVRyZWVOb2RlQ29udHJvbGxlcixcbiAgICAgICAgICAgIC8vIHRlbXBsYXRlVXJsOiAndHJlZW5vZGUudG1wbC5odG1sJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBuZy1jbGFzcz1cIntcXCdhY3RpdmUtbm9kZVxcJzp2bS5pc0FjdGl2ZX1cIiBjbGFzcz1cInt7dm0ubm9kZUNsYXNzfX1cIiBuZy1tb3VzZWVudGVyPVwidm0ud2hlbk1vdXNlRW50ZXIoKVwiIG5nLW1vdXNlbGVhdmU9XCJ2bS53aGVuTW91c2VMZWF2ZSgpXCIgbmctY2xpY2s9XCJ2bS5tYWtlTm9kZUFjdGl2ZSgpXCI+IDxkaXYgbGF5b3V0PVwiY29sdW1uXCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiPiA8ZGl2IGNsYXNzPVwibWQtc3ViaGVhZCBub2RlLXRleHQtbWFpblwiPkNFTzwvZGl2PjxkaXY+IDxkaXYgY2xhc3M9XCJyb3VuZC1jaGlwLXdyYXBwZXJcIj48aW1nIG5nLXNyYz1cImFzc2V0cy9pbWFnZXMvYXZhdGFycy9mbGFzaGVyLnRodW1iLmpwZ1wiIGNsYXNzPVwicm91bmQtY2hpcFwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJtZC1zdWJoZWFkIG5vZGUtdGV4dC1zdWJcIj57e3ZtLm5vZGUubmFtZX19PC9kaXY+PGRpdiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCIgbGF5b3V0LWZpbGwgbGF5b3V0PVwicm93XCI+IDxkaXYgbmctcmVwZWF0PVwiYWN0aW9uIGluIHZtLm5vZGVBY3Rpb25zXCI+PGJ1dHRvbiBuZy1jbGljaz1cInZtLm1ha2VDYWxsQmFjayhhY3Rpb24uY2FsbEJhY2spXCIgY2xhc3M9XCJhY3Rpb24tYnRuXCI+PHNwYW4+PC9zcGFuPiZuYnNwOzxpIGNsYXNzPVwie3thY3Rpb24uaWNvbn19XCI+PC9pPjwvYnV0dG9uPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICBzY29wZToge30sXG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG4gICAgICAgICAgICAgICAgbm9kZUlkOiAnQCcsXG4gICAgICAgICAgICAgICAgbm9kZUFjdGlvbnM6ICdAJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpbms6IGxpbmtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gY2FzY2FkZVRyZWVOb2RlRGlyZWN0aXZlO1xuXG5cbiAgICAgICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbSwgYXR0cnMsIHZtKSB7XG4gICAgICAgICAgICB2bS5pZCA9IGF0dHJzLm5vZGVpZDtcbiAgICAgICAgICAgIHZtLm5vZGVBY3Rpb25zID0gYW5ndWxhci5mcm9tSnNvbihhdHRycy5ub2RlYWN0aW9ucyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2bS5ub2RlQWN0aW9ucyk7XG4gICAgICAgICAgICB2bS5pc1Bpbm5lZE5vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHZtLm5vZGUgPSB0cmVlVmlld1NlcnZpY2UuZmluZEJ5SWQoYXR0cnMubm9kZWlkKTtcbiAgICAgICAgICAgIC8qY29uc29sZS5sb2coYW5ndWxhci5mcm9tSnNvbihhdHRycy5ub2RlKSk7XG4gICAgICAgICAgICB2bS5ub2RlID0gYW5ndWxhci5mcm9tSnNvbihhdHRycy5ub2RlKTsqL1xuICAgICAgICAgICAgdm0ubm9kZUNsYXNzID0gJ25vZGUtbGFiZWwgbm9kZS0nICsgdm0ubm9kZS50eXBlKyAnIG5vZGUtJyt2bS5pZDtcblxuICAgICAgICAgICAgLy8gdm0uaXNQaW5uZWROb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgIHZtLmlzRXhwYW5kZWRWaWV3ID0gZmFsc2U7XG4gICAgICAgICAgICB2bS5pc0FjdGl2ZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICB2bS53aGVuTW91c2VFbnRlciA9IHdoZW5Nb3VzZUVudGVyO1xuICAgICAgICAgICAgdm0ud2hlbk1vdXNlTGVhdmUgPSB3aGVuTW91c2VMZWF2ZTtcbiAgICAgICAgICAgIHZtLnRvZ2dsZVBpbm5lZE1vZGUgPSB0b2dnbGVQaW5uZWRNb2RlO1xuICAgICAgICAgICAgdm0ubWFrZUNhbGxCYWNrID0gbWFrZUNhbGxCYWNrO1xuICAgICAgICAgICAgdm0ubWFrZU5vZGVBY3RpdmUgPSBtYWtlTm9kZUFjdGl2ZTtcbiAgICAgICAgICAgIHZhciBub2RlRE9NRWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChlbGVtLmNoaWxkcmVuKClbMF0pO1xuICAgICAgICAgICAgLyogICAgICAgICAgICBlbGVtLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICBlbGVtLmFkZENsYXNzKCdhY3RpdmUtbm9kZScpO1xuICAgICAgICAgICAgIH0pOyovXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG1ha2VOb2RlQWN0aXZlKCkge1xuICAgICAgICAgICAgICAgIGNsZWFyQWxsT3RoZXJBY3RpdmVOb2RlcygpO1xuICAgICAgICAgICAgICAgIHZtLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gd2hlbk1vdXNlRW50ZXIoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21vdXNlIEVudGVyZWQnKTtcbiAgICAgICAgICAgICAgICAvLyB2bS5pc0V4cGFuZGVkVmlldyA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gdm0uaXNQaW5uZWROb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gd2hlbk1vdXNlTGVhdmUoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21vdXNlIGxlYXZlZCcpO1xuICAgICAgICAgICAgICAgIC8vIHZtLmlzRXhwYW5kZWRWaWV3ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLyogICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICB2bS5pc1Bpbm5lZE5vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgfSwxMDAwKTsqL1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB0b2dnbGVQaW5uZWRNb2RlKCkge1xuICAgICAgICAgICAgICAgIHZtLmlzUGlubmVkTm9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codm0uaXNQaW5uZWROb2RlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gbWFrZUNhbGxCYWNrKGNhbGxCYWNrRnVuY05hbWUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYWxsQmFja0Z1bmNOYW1lKTtcbiAgICAgICAgICAgICAgICBzY29wZS4kcGFyZW50LnZtLm1ha2VDYWxsQmFjayhjYWxsQmFja0Z1bmNOYW1lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJBbGxPdGhlckFjdGl2ZU5vZGVzKCl7XG4vKiAgICAgICAgICAgICAgICBlbGVtLmZpbmQoJy5ub2RlLWxhYmVsJyk7Ly9UT0RPXG4gICAgICAgICAgICAgICAgZWxlbS5wYXJlbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYWN0aXZlLW5vZGUnKTsqL1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnYXBwOm5vZGVzOmNsZWFyYWN0aXZlJyx7J2RhdGEnOiAnJ30pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBmaW5kUmVsZXZhbnROb2RlKGtsYXNzKXtcbiAgICAgICAgICAgICAgICBlbGVtLmZpbmQoJy50cmVlLWhvbGRlcicpOy8vVE9ET1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gb25Eb2N1bWVudENsaWNrKGV2KSB7XG5cbiAgICAgICAgICAgICAgICAvL0NoZWNrIGlmIGNsaWNrZWQgb3V0c2lkZSBhbmQgZGlzY2FyZCBBY3RpdmVcbiAgICAgICAgICAgICAgICBpZiAoZWxlbSAhPT0gZXYudGFyZ2V0ICYmICFlbGVtWzBdLmNvbnRhaW5zKGV2LnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9yZW1vdmUgZXZlbnQgaGFuZGxlcnMgd2hlbiBjdXN0b20gZGlyZWN0aXZlIGRlc3Ryb3llZFxuICAgICAgICAgICAgZnVuY3Rpb24gb25EZXN0cm95KCkge1xuICAgICAgICAgICAgICAgICRkb2N1bWVudC5vZmYoJ2NsaWNrJywgb25Eb2N1bWVudENsaWNrKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAkZG9jdW1lbnQub24oJ2NsaWNrJywgb25Eb2N1bWVudENsaWNrKTtcbiAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBvbkRlc3Ryb3kpO1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gQ2FzY2FkZVRyZWVOb2RlQ29udHJvbGxlcih0cmVlVmlld1NlcnZpY2UpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgLyogICAgICAgIHZtLm5vZGUgPSB0cmVlVmlld1NlcnZpY2UuZmluZEJ5SWQodm0ubm9kZUlkKTtcbiAgICAgICAgIHZtLm5vZGVDbGFzcyA9ICdub2RlLWxhYmVsIG5vZGUtJyt2bS5ub2RlLnR5cGU7Ki9cblxuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA1LzMwLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5kaXJlY3RpdmUoJ3RyZWVWaWV3JywgdHJlZVZpZXcpO1xuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIHRyZWVWaWV3KCRmaWx0ZXIsICRjb21waWxlLCB0cmVlVmlld1NlcnZpY2UsICR0aW1lb3V0LCB0b29sU2V0U2VydmljZSwgJHdpbmRvdykge1xuICAgICAgICB2YXIgdHJlZVZpZXdEaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXBsYWNlOiAnZmFsc2UnLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgICAgICBkYXRhOiAnPScsXG4gICAgICAgICAgICAgICAgYWJuOiAnJicsXG4gICAgICAgICAgICAgICAgbm9kZUFjdGlvbnM6ICdAJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFRyZWVWaWV3RGlyZWN0aXZlQ29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtLCBhdHRycywgdm0pIHtcbiAgICAgICAgICAgIC8vVE9ETyBGZXRjaCBGcm9tIHRoZSBkYiBhbmQgYWRkIHRvIHRoZSBzZXJ2aWNlXG4gICAgICAgICAgICB2YXIgdHJlZWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiUm9vdE5vZGVcIixcbiAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxXCIsXG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTBcIixcbiAgICAgICAgICAgICAgICBcImFkZGFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgXCJlZGl0YWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBcInJlbW92YWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBcImVuYWJsZWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBcInJvb3RcIjp0cnVlLFxuICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiTGFuZGluZyBBXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTFcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhZGRhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIFwiZWRpdGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgXCJyZW1vdmFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgXCJlbmFibGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ0cmFja2luZyBsaW5rIDFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQ0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxlXCI6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ0cmFja2luZyBsaW5rIDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQ1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxlXCI6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ0cmFja2luZyBsaW5rIDNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQ2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxlXCI6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBY2NvdW50IDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiQWNjb3VudCAzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQ5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwiXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJMYW5kaW5nIEJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkOFwiLFxuICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMVwiLFxuICAgICAgICAgICAgICAgICAgICBcImNoaWxkcmVuXCI6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBY2NvdW50IDRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDEwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwiXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgNVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMTFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiQWNjb3VudCA2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTJcIlxuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiTGFuZGluZyBDXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDEzXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUxXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIlN1YnRvcGljIDdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDE0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIlN1YnRvcGljIDhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDE1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIlN1YnRvcGljIDlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDE2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBub2RlQWN0aXZlQ2xlYXJMaXN0ZW5lcjtcbiAgICAgICAgICAgIHZhciBub2RlTGlzdCA9IFtdO1xuICAgICAgICAgICAgdmFyIG0gPSBbMjAsIDIwLCAyMCwgMjBdLFxuICAgICAgICAgICAgICAgIHcgPSAkd2luZG93LmlubmVyV2lkdGggLSAyMCAtIG1bMV0gLSBtWzNdLFxuICAgICAgICAgICAgICAgIGggPSA2MDAgLSBtWzBdIC0gbVsyXSxcbiAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICByID0gODAwLFxuICAgICAgICAgICAgICAgIHggPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oWzAsIHddKS5yYW5nZShbMCwgd10pLFxuICAgICAgICAgICAgICAgIHkgPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oWzAsIGhdKS5yYW5nZShbMCwgaF0pLFxuICAgICAgICAgICAgICAgIHJvb3Q7XG5cbiAgICAgICAgICAgIHZhciB3cmFwcGVyRWxlbWVudCA9IGQzLnNlbGVjdChlbGVtWzBdKTtcbiAgICAgICAgICAgIHZhciBsYXN0U2VhcmNoZWRQYXRoID0gW107XG4gICAgICAgICAgICBlbGVtLmFwcGVuZCgkY29tcGlsZShcIjxkaXYgbGF5b3V0PVxcXCJyb3dcXFwiIGxheW91dC1hbGlnbj1cXFwic3BhY2UtYXJvdW5kIGNlbnRlclxcXCI+PGRpdiBmbGV4Pjx0cmVlLXNlYXJjaC1ib3g+PC90cmVlLXNlYXJjaC1ib3g+PC9kaXY+PGRpdiBmbGV4Pjx0cmVlLXRvb2wtc2V0PjwvdHJlZS10b29sLXNldD48L2Rpdj48L2Rpdj5cIikoc2NvcGUpKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Jbml0KCkge1xuICAgICAgICAgICAgICAgIGFjdGl2YXRlV2F0Y2hlcnMoKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZVdhdGNoZXJzKCkge1xuICAgICAgICAgICAgICAgIG9uU2VhcmNoV2F0Y2goKTtcbiAgICAgICAgICAgICAgICBvblpvb21XYXRjaCgpO1xuICAgICAgICAgICAgICAgIG9uRXhwYW5kV2F0Y2goKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25FeHBhbmRXYXRjaCgpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9vbFNldFNlcnZpY2UuaXNFeHBhbmRBbGxNb2RlKClcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoaXNJbkV4cGFuZEFsbE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5FeHBhbmRBbGxNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvblNlYXJjaFdhdGNoKCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmVlVmlld1NlcnZpY2UuZ2V0U2VhcmNoZWROb2RlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcnN0IGZpbmQgYW5kIGhpZ2hsaWdodCB0aGUgcGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0UGF0aChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNvbHZlZE5vZGUgPSBnZXRUcmVlTm9kZUJ5T2JqZWN0KG5vZGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPIHJlbW92ZSBsYXRlciBjb3ogZXhwYW5kaW5nIG9jY3VycyB3aGVuIGhpZ2hsaWdodGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogICAgICAgICAgICAgICAgICAgICAgICBleHBhbmROb2RlKHJlc29sdmVkTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlKHJlc29sdmVkTm9kZSk7Ki9cblxuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc29sdmVkTm9kZS54LCByZXNvbHZlZE5vZGUueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJBbGxBY3RpdmVOb2RlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VOb2RlQWN0aXZlKHJlc29sdmVkTm9kZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuVG9UaGVOb2RlKHJlc29sdmVkTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25ab29tV2F0Y2goKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh6b29tU2NhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coem9vbVNjYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgdmlzLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDc1MClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYWxsKHpvb21PYmplY3QudHJhbnNsYXRlKFsxNTAsIDEwMF0pLnNjYWxlKHpvb21TY2FsZSkuc2NhbGVFeHRlbnQoWzEsIDhdKS5ldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb25Jbml0KCk7XG5cbiAgICAgICAgICAgIHZhciB2aXMgPSB3cmFwcGVyRWxlbWVudC5hcHBlbmQoXCJkaXZcIikuYXR0cihcImxheW91dFwiLCBcInJvd1wiKS5hdHRyKFwibGF5b3V0LWFsaWduXCIsIFwic3BhY2UtYXJvdW5kIGNlbnRlclwiKVxuICAgICAgICAgICAgICAgIC5jYWxsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUodGhpc1swXSkoc2NvcGUpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmFwcGVuZChcImRpdlwiKS5hdHRyKFwiZmxleFwiLCBcIlwiKS5jYWxsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUodGhpc1swXSkoc2NvcGUpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmFwcGVuZChcInN2ZzpzdmdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInZpZXdCb3hcIiwgXCIwIDAgNjAwIDYwMFwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgdyArIG1bMV0gKyBtWzNdKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGggKyBtWzBdICsgbVsyXSlcbiAgICAgICAgICAgICAgICAuYXBwZW5kKFwic3ZnOmdcIilcbiAgICAgICAgICAgICAgICAvLy5hdHRyKFwicG9pbnRlci1ldmVudHNcIiwgXCJhbGxcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1bM10gKyBcIixcIiArIG1bMF0gKyBcIilcIilcbiAgICAgICAgICAgICAgICAvLy5jYWxsKGQzLmJlaGF2aW9yLnpvb20oKS5zY2FsZUV4dGVudChbMSw4XSkub24oXCJ6b29tXCIsem9vbSkpO1xuICAgICAgICAgICAgICAgIC8vLmNhbGwoZDMuYmVoYXZpb3Iuem9vbSgpLngoeCkueSh5KS5zY2FsZUV4dGVudChbMSwgOF0pLm9uXG4gICAgICAgICAgICAgICAgLmNhbGwoZDMuYmVoYXZpb3Iuem9vbSgpLm9uKFwiem9vbVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xTZXRTZXJ2aWNlLnNldFpvb21TY2FsZShkMy5ldmVudC5zY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkMy5ldmVudC5zY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHZpcy5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZDMuZXZlbnQudHJhbnNsYXRlICsgXCIpXCIgKyBcIiBzY2FsZShcIiArIGQzLmV2ZW50LnNjYWxlICsgXCIpXCIpXG4gICAgICAgICAgICAgICAgICAgIHZpcy5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZDMuZXZlbnQudHJhbnNsYXRlICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgIH0pKS5vbihcImNsaWNrXCIsIHN0b3BQcm9wb2dhdGlvbiwgZmFsc2UpLmNhbGwoZDMuYmVoYXZpb3IuZHJhZygpLm9uKFwiZHJhZ3N0YXJ0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSkub24oXCJkcmFnXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJkcmFnZ2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5zb3VyY2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9KSkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwid2lkdGhcIiwgMTYwKS5hdHRyKFwiaGVpZ2h0XCIsIDEyMCkuYXR0cihcImNsYXNzXCIsIFwidHJlZS1ob2xkZXJcIikvKi5jYWxsKGQzLmJlaGF2aW9yLmRyYWcoKS5vbihcImRyYWdzdGFydFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgfSkub24oXCJkcmFnXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImRyYWdnZWRcIik7XG4gICAgICAgICAgICAgfSkpKi87XG5cbiAgICAgICAgICAgIC8vVE9ETyB1bmNvbW1lbnQgbGF0ZXJcbiAgICAgICAgICAgIC8qICAgICAgICAgICAgdmlzLmFwcGVuZChcInJlY3RcIilcbiAgICAgICAgICAgICAvLyAuYXR0cihcImNsYXNzXCIsIFwib3ZlcmxheVwiKVxuICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgdyArIG1bMV0gKyBtWzNdKVxuICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGggKyBtWzBdICsgbVsyXSlcbiAgICAgICAgICAgICAuYXR0cihcIm9wYWNpdHlcIiwgMCkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgICAgICB9KTsqL1xuXG4gICAgICAgICAgICB2YXIgdHJlZSA9IGQzLmxheW91dC50cmVlKClcbiAgICAgICAgICAgICAgICAuc2l6ZShbaCwgd10pXG4gICAgICAgICAgICAgICAgLm5vZGVTaXplKFsxMTAsIDYwXSlcbiAgICAgICAgICAgICAgICAuc2VwYXJhdGlvbihmdW5jdGlvbiBzZXBhcmF0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEucGFyZW50ID09IGIucGFyZW50ID8gMiA6IDI7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBkaWFnb25hbCA9IGQzLnN2Zy5kaWFnb25hbCgpXG4gICAgICAgICAgICAgICAgLnByb2plY3Rpb24oZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtkLnggKyA4MCwgZC55ICsgODBdO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByb290ID0gdHJlZWRhdGE7XG4gICAgICAgICAgICByb290LngwID0gaCAvIDI7XG4gICAgICAgICAgICByb290LnkwID0gMDtcblxuICAgICAgICAgICAgZnVuY3Rpb24gdG9nZ2xlQWxsKGQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBkLmNoaWxkcmVuLmZvckVhY2godG9nZ2xlQWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlKGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4cGFuZEFsbEFmdGVyKGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSAoZC5jaGlsZHJlbikgPyBkLmNoaWxkcmVuIDogZC5fY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgaWYgKGQuX2NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGQuY2hpbGRyZW4gPSBkLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgZC5fY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goZXhwYW5kQWxsQWZ0ZXIpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gY29sbGFwc2VBbGxBZnRlcihkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gKGQuY2hpbGRyZW4pID8gZC5jaGlsZHJlbiA6IGQuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGlmIChkLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgZC5jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjaGlsZHJlbilcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChjb2xsYXBzZUFsbEFmdGVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXhwYW5kQWxsKCkge1xuICAgICAgICAgICAgICAgIGV4cGFuZEFsbEFmdGVyKHJvb3QpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZShyb290KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY29sbGFwc2VBbGwoKSB7XG4gICAgICAgICAgICAgICAgY29sbGFwc2VBbGxBZnRlcihyb290KTtcbiAgICAgICAgICAgICAgICB1cGRhdGUocm9vdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJvb3QpO1xuXG4vLyBpbml0aWFsaXplIHRoZSBkaXNwbGF5IHRvIHNob3cgYSBmZXcgbm9kZXMuXG4gICAgICAgICAgICByb290LmNoaWxkcmVuLmZvckVhY2godG9nZ2xlQWxsKTtcbi8vdG9nZ2xlKHJvb3QuY2hpbGRyZW5bMV0pO1xuLy90b2dnbGUocm9vdC5jaGlsZHJlbls5XSk7XG5cblxuICAgICAgICAgICAgdXBkYXRlKHJvb3QpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGUoc291cmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gZDMuZXZlbnQgJiYgZDMuZXZlbnQuYWx0S2V5ID8gNTAwMCA6IDUwMDtcblxuICAgICAgICAgICAgICAgIC8vIENvbXB1dGUgdGhlIG5ldyB0cmVlIGxheW91dC5cbiAgICAgICAgICAgICAgICB2YXIgbm9kZXMgPSB0cmVlLm5vZGVzKHJvb3QpLnJldmVyc2UoKTtcblxuICAgICAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSBmb3IgZml4ZWQtZGVwdGguXG4gICAgICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICBkLnkgPSBkLmRlcHRoICogMjAwO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBub2Rlcy4uLlxuICAgICAgICAgICAgICAgIHZhciBub2RlID0gdmlzLnNlbGVjdEFsbChcImcubm9kZVwiKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShub2RlcywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmlkIHx8IChkLmlkID0gKytpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBFbnRlciBhbnkgbmV3IG5vZGVzIGF0IHRoZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICB2YXIgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2RlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vZGUtXCIgKyBkLmlkO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgc291cmNlLngwICsgXCIsXCIgKyBzb3VyY2UueTAgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZShkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZShkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkWydpbmZvJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5dmlkKGRbJ2luZm8nXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy9BZGRpbmcgYSBwaWN0dXJlIHRvIHRoZSBub2RlIGNpcmNsZVxuXG4gICAgICAgICAgICAgICAgbm9kZUVudGVyLmFwcGVuZChcInN2ZzpjaXJjbGVcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJyXCIsIDFlLTYpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLl9jaGlsZHJlbiA/IFwibGlnaHRzdGVlbGJsdWVcIiA6IFwiI2ZmZlwiO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHZhciBub2RlVGV4dCA9IG5vZGVFbnRlclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFwic3ZnOmZvcmVpZ25PYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgLy8uYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5jaGlsZHJlbiB8fCBkLl9jaGlsZHJlbiA/IC0xMCA6IDEwOyB9KVxuICAgICAgICAgICAgICAgICAgICAvLy5hdHRyKFwiZHhcIiwgXCIuMzVlbVwiKVxuICAgICAgICAgICAgICAgICAgICAvLy5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICByZXR1cm4gZC5jaGlsZHJlbiB8fCBkLl9jaGlsZHJlbiA/IC0xMCA6IDEwO1xuICAgICAgICAgICAgICAgICAgICAvL30pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwieVwiLCAtMzApXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwieFwiLCAtNSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyBcImVuZFwiIDogXCJzdGFydFwiO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMWUtNilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgMTYwKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMTIwKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCd4aHRtbDpkaXYnKVxuICAgICAgICAgICAgICAgICAgICAvKiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibm9kZS1sYWJlbFwiICsgXCIgbm9kZS1cIiArIGQudHlwZVxuICAgICAgICAgICAgICAgICAgICAgfSkuYXR0cihcIm5nLXNob3dcIiwgXCJ0cnVlXCIpLmNhbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUodGhpc1swXS5wYXJlbnROb2RlKShzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgICB9KSovXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKFwiZGlzYWJsZWRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmVuYWJsZSAhPT0gdW5kZWZpbmVkICYmICFkLmVuYWJsZTtcbiAgICAgICAgICAgICAgICAgICAgfSkub24oXCJjbGlja1wiLCBvbkNsaWNrZWROb2RlKS8qLmNhbGwoZDMuYmVoYXZpb3IuZHJhZygpLm9uKFwiZHJhZ3N0YXJ0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgIH0pLm9uKFwiZHJhZ1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZHJhZ2dlZFwiKTtcbiAgICAgICAgICAgICAgICAgfSkpKi87XG5cbiAgICAgICAgICAgICAgICBub2RlVGV4dC5hcHBlbmQoXCJ0cmVlLW5vZGVcIikuYXR0cihcIm5vZGVcIixmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICB0cmVlVmlld1NlcnZpY2UucHVzaE5vZGUoZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgICAgIH0pLmF0dHIoXCJub2RlSWRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuaWQ7XG4gICAgICAgICAgICAgICAgfSkuYXR0cihcImlzUGlubmVkTm9kZVwiLCBcImZhbHNlXCIpLmF0dHIoXCJub2RlQWN0aW9uc1wiLCBhdHRycy5ub2RlYWN0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUodGhpcykoc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAuY2FsbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICRjb21waWxlKHRoaXNbMF0ucGFyZW50Tm9kZSkoc2NvcGUpO1xuICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAvL0VuYWJsZSBub2RlIGJ1dHRvblxuICAgICAgICAgICAgICAgICBub2RlVGV4dC5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZW5hYmxhYmxlO1xuICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAuYXBwZW5kKFwiaW5wdXRcIiwgXCIuXCIpXG4gICAgICAgICAgICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXG4gICAgICAgICAgICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZW5hYmxlO1xuICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAub24oXCJjaGFuZ2VcIiwgdG9nZ2xlRW5hYmxlLCB0cnVlKVxuICAgICAgICAgICAgICAgICAub24oXCJjbGlja1wiLCBzdG9wUHJvcG9nYXRpb24sIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgIC8vTm9kZSBsYWJlbFxuICAgICAgICAgICAgICAgICBub2RlVGV4dC5hcHBlbmQoXCJzcGFuXCIpXG4gICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2RlLXRleHRcIilcbiAgICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgcmV0dXJuIGQubmFtZSArICcgWCAtICcgKyBkLnggKyAnLCBZIC0gJyArIGQueTtcbiAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgLy9FZGl0IG5vZGUgYnV0dG9uXG4gICAgICAgICAgICAgICAgIG5vZGVUZXh0LmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICByZXR1cm4gZC5lZGl0YWJsZTtcbiAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgLmFwcGVuZChcImFcIilcbiAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm5vZGUtZWRpdFwiKVxuICAgICAgICAgICAgICAgICAub24oXCJjbGlja1wiLCBvbkVkaXROb2RlLCB0cnVlKVxuICAgICAgICAgICAgICAgICAuYXBwZW5kKFwiaVwiKVxuICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiZmEgZmEtcGVuY2lsXCIpO1xuXG4gICAgICAgICAgICAgICAgIC8vQWRkIG5vZGUgYnV0dG9uXG4gICAgICAgICAgICAgICAgIG5vZGVUZXh0LmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICByZXR1cm4gZC5hZGRhYmxlO1xuICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAuYXBwZW5kKFwiYVwiKVxuICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibm9kZS1hZGRcIilcbiAgICAgICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgb25BZGROb2RlLCB0cnVlKVxuICAgICAgICAgICAgICAgICAuYXBwZW5kKFwiaVwiKVxuICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiZmEgZmEtcGx1c1wiKTtcblxuICAgICAgICAgICAgICAgICAvL1JlbW92ZSBub2RlIGJ1dHRvblxuICAgICAgICAgICAgICAgICBub2RlVGV4dC5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgcmV0dXJuIGQucmVtb3ZhYmxlO1xuICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAuYXBwZW5kKFwiYVwiKVxuICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibm9kZS1yZW1vdmVcIilcbiAgICAgICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgb25SZW1vdmVOb2RlLCB0cnVlKVxuICAgICAgICAgICAgICAgICAuYXBwZW5kKFwiaVwiKVxuICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiZmEgZmEtdGltZXNcIik7Ki9cblxuICAgICAgICAgICAgICAgIC8vIFRyYW5zaXRpb24gbm9kZXMgdG8gdGhlaXIgbmV3IHBvc2l0aW9uLlxuICAgICAgICAgICAgICAgIHZhciBub2RlVXBkYXRlID0gbm9kZS50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgZC54ICsgXCIsXCIgKyBkLnkgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBub2RlVXBkYXRlLnNlbGVjdChcImNpcmNsZVwiKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInJcIiwgNC41KVxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC5jbGFzcyA9PT0gJ2hpZ2hsaWdodC1saW5rJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnI2ZmNDEzNic7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGQuX2NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdsaWdodHN0ZWVsYmx1ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnI2ZmZic7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbm9kZVVwZGF0ZS5zZWxlY3QoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAxKTtcblxuICAgICAgICAgICAgICAgIC8vIFRyYW5zaXRpb24gZXhpdGluZyBuZG9lcyB0byB0aGUgcGFyZW50J3MgbmV3IHBvc2l0aW9uLlxuICAgICAgICAgICAgICAgIHZhciBub2RlRXhpdCA9IG5vZGUuZXhpdCgpLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueCArIFwiLFwiICsgc291cmNlLnkgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgbm9kZUV4aXQuc2VsZWN0KFwiY2lyY2xlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiclwiLCAxZS02KTtcbiAgICAgICAgICAgICAgICBub2RlRXhpdC5zZWxlY3QoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAxZS02KTtcblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbGlua3MuLi5cbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IHZpcy5zZWxlY3RBbGwoXCJwYXRoLmxpbmtcIilcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEodHJlZS5saW5rcyhub2RlcyksIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQuaWQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gRW50ZXIgYW55IG5ldyBsaW5rcyBhdCBodGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb25cbiAgICAgICAgICAgICAgICBsaW5rLmVudGVyKCkuaW5zZXJ0KFwic3ZnOnBhdGhcIiwgXCJnXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5rXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogc291cmNlLngwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHNvdXJjZS55MFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkaWFnb25hbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogb1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImRcIiwgZGlhZ29uYWwpO1xuXG4gICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBsaW5rcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgbGluay50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImRcIiwgZGlhZ29uYWwpXG4gICAgICAgICAgICAgICAgICAgIC8qICAgICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZC50YXJnZXQuY2xhc3MgPT09IFwiaGlnaGxpZ2h0LWxpbmtcIik/XCJoaWdobGlnaHQtbGluay1zdHJva2UtYWN0aXZlXCI6XCJoaWdobGlnaHQtbGluay1zdHJva2UtaW5hY3RpdmVcIjtcbiAgICAgICAgICAgICAgICAgICAgIH0pOyovXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcInN0cm9rZVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQudGFyZ2V0LmNsYXNzID09PSBcImhpZ2hsaWdodC1saW5rXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIjZmY0MTM2XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBleGl0aW5nIG5vZGVzIHRvIHRoZSBwYXJlbnQncyBuZXcgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgbGluay5leGl0KCkudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBzb3VyY2UueCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBzb3VyY2UueVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkaWFnb25hbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogb1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgIC8vIFN0YXNoIHRoZSBvbGQgcG9zaXRpb25zIGZvciB0cmFuc2l0aW9uLlxuICAgICAgICAgICAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgZC54MCA9IGQueDtcbiAgICAgICAgICAgICAgICAgICAgZC55MCA9IGQueTtcbiAgICAgICAgICAgICAgICB9KTtcbi8qXG4gICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KG5vZGVzLCBub2RlTGlzdCk7XG5cbiAgICAgICAgICAgICAgICB0cmVlVmlld1NlcnZpY2Uuc2V0Tm9kZXMobm9kZUxpc3QpOyovXG4gICAgICAgICAgICB9XG5cbi8vIFRvZ2dsZSBjaGlsZHJlblxuICAgICAgICAgICAgZnVuY3Rpb24gdG9nZ2xlKGQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBkLl9jaGlsZHJlbiA9IGQuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgIGQuY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGQuY2hpbGRyZW4gPSBkLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgZC5fY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXhwYW5kTm9kZShub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jaGlsZHJlbiA9IG5vZGUuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgIG5vZGUuX2NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuLy8gem9vbSBpbiAvIG91dFxuICAgICAgICAgICAgZnVuY3Rpb24gem9vbShkKSB7XG4gICAgICAgICAgICAgICAgLy92aXMuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbDNhdGUoXCIgKyBkMy5ldmVudC50cmFuc2xhdGUgKyBcIilzY2FsZShcIiArIGQzLmV2ZW50LnNjYWxlICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IHZpcy5zZWxlY3RBbGwoXCJnLm5vZGVcIik7XG4gICAgICAgICAgICAgICAgbm9kZXMuYXR0cihcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0pO1xuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBsaW5rcy4uLlxuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gdmlzLnNlbGVjdEFsbChcInBhdGgubGlua1wiKTtcbiAgICAgICAgICAgICAgICBsaW5rLmF0dHIoXCJkXCIsIHRyYW5zbGF0ZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBFbnRlciBhbnkgbmV3IGxpbmtzIGF0IGh0ZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvblxuICAgICAgICAgICAgICAgIC8vbGluay5hdHRyKFwiZFwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICB2YXIgbyA9IHt4OiBkLngwLCB5OiBkLnkwfTtcbiAgICAgICAgICAgICAgICAvLyAgICAgIHJldHVybiBkaWFnb25hbCh7c291cmNlOiBvLCB0YXJnZXQ6IG99KTtcbiAgICAgICAgICAgICAgICAvLyAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNmb3JtKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB4KGQueSkgKyBcIixcIiArIHkoZC54KSArIFwiKVwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2xhdGUoZCkge1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2VYID0geChkLnRhcmdldC5wYXJlbnQueSk7XG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZVkgPSB5KGQudGFyZ2V0LnBhcmVudC54KTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0WCA9IHgoZC50YXJnZXQueSk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFkgPSAoc291cmNlWCArIHRhcmdldFgpIC8gMjtcbiAgICAgICAgICAgICAgICB2YXIgbGlua1RhcmdldFkgPSB5KGQudGFyZ2V0LngwKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gXCJNXCIgKyBzb3VyY2VYICsgXCIsXCIgKyBzb3VyY2VZICsgXCIgQ1wiICsgdGFyZ2V0WCArIFwiLFwiICsgc291cmNlWSArIFwiIFwiICsgdGFyZ2V0WSArIFwiLFwiICsgeShkLnRhcmdldC54MCkgKyBcIiBcIiArIHRhcmdldFggKyBcIixcIiArIGxpbmtUYXJnZXRZICsgXCJcIjtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3VsdCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRWRpdE5vZGUoZCkge1xuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSA5O1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnJlcGxhY2UoL1teYS16XSsvZywgJycpLnN1YnN0cigwLCBsZW5ndGgpO1xuICAgICAgICAgICAgICAgIGFkZENoaWxkTm9kZShkLmlkLCB7XG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIm5ldyBjaGlsZCBub2RlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIjogaWQsXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdG9wUHJvcG9nYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25BZGROb2RlKGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gOTtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5yZXBsYWNlKC9bXmEtel0rL2csICcnKS5zdWJzdHIoMCwgbGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBhZGRDaGlsZE5vZGUoZC5pZCwge1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJuZXcgY2hpbGQgbm9kZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImlkXCI6IGlkLFxuICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uUmVtb3ZlTm9kZShkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZC5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihkKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBkLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGUoZC5wYXJlbnQpO1xuICAgICAgICAgICAgICAgIHN0b3BQcm9wb2dhdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBhZGRDaGlsZE5vZGUocGFyZW50SWQsIG5ld05vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGQzLnNlbGVjdCgnIycgKyAnbm9kZS0nICsgcGFyZW50SWQpO1xuICAgICAgICAgICAgICAgIHZhciBub2RlRGF0YSA9IG5vZGUuZGF0dW0oKTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZURhdGEuY2hpbGRyZW4gPT09IHVuZGVmaW5lZCAmJiBub2RlRGF0YS5fY2hpbGRyZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlRGF0YS5jaGlsZHJlbiA9IFtuZXdOb2RlXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVEYXRhLl9jaGlsZHJlbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVEYXRhLl9jaGlsZHJlbi5wdXNoKG5ld05vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGUobm9kZURhdGEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZURhdGEuY2hpbGRyZW4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlRGF0YS5jaGlsZHJlbi5wdXNoKG5ld05vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGUobm9kZSk7XG4gICAgICAgICAgICAgICAgc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUVuYWJsZShkKSB7XG4gICAgICAgICAgICAgICAgZC5lbmFibGUgPSAhZC5lbmFibGU7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBkMy5zZWxlY3QoJyMnICsgJ25vZGUtJyArIGQuaWQgKyBcIiAubm9kZS1sYWJlbFwiKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZChcImRpc2FibGVkXCIsICFkLmVuYWJsZSk7XG4gICAgICAgICAgICAgICAgc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gc3RvcFByb3BvZ2F0aW9uKCkge1xuICAgICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYWN0aXZlID0gZDMuc2VsZWN0KG51bGwpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkNsaWNrZWROb2RlKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vZGUpO1xuICAgICAgICAgICAgICAgIHZhciBpc1Jlc2V0ID0gbWFrZUNsaWNrZWROb2RlQWN0aXZlKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vVE9ETyBzY2FsZSBhY2NvcmRpbmcgdG8gdGhlIGJvdW5kc1xuICAgICAgICAgICAgICAgIC8vIHZhciBib3VuZHMgPSBkMy5zZWxlY3QoZWxlbVswXSkubm9kZSgpLmdldEJCb3goKTtcbiAgICAgICAgICAgICAgICAvLyB2YXIgc2NhbGUgPSBNYXRoLm1heCgxLCBNYXRoLm1pbig4LCAwLjkgLyBNYXRoLm1heChkLnggLCBkLnkgKSkpO1xuICAgICAgICAgICAgICAgIHBhblRvVGhlTm9kZShub2RlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gaGlnaGxpZ2h0UGF0aChub2RlKSB7XG4gICAgICAgICAgICAgICAgLy9UT0RPIG11c3QgaW5jbHVkZSB0aGUgcm9vdCBub2RlIGluIHRoZSBhcnJheVxuICAgICAgICAgICAgICAgIC8vUGF0aCBhcnJheSB0byBzdG9yZSBub2Rlc1xuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gc2VhcmNoV2l0aGluVHJlZSh0cmVlZGF0YSwgbm9kZS5uYW1lLCBbXSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQocGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9mdW5jdGlvbiB0byBvcGVuIHBhdGhzXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySGlnaExpZ2h0TGlua3MobGFzdFNlYXJjaGVkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodExpbmtzKHBhdGgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZWFyY2hlZCBub2RlICcgKyBub2RlLm5hbWUgKyAnIG5vdCBmb3VuZCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxhc3RTZWFyY2hlZFBhdGggPSBwYXRoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBoaWdobGlnaHRMaW5rcyhwYXRoKSB7XG5cbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocGF0aCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcblxuICAgICAgICAgICAgICAgICAgICAvL1RPRE8gYXNzdW1lIHRoYXQgaWQgb2YgdGhlIHJvb3Qgbm9kZSBpcyAxLC5tYWtlIHRoaXMgbW9yZSBjb25zaXN0ZW50IGxhdGVyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmICh2YWx1ZS5pZCAhPT0naWQxJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuY2xhc3MgPSAnaGlnaGxpZ2h0LWxpbmsnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLl9jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmNoaWxkcmVuID0gdmFsdWUuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLl9jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJIaWdoTGlnaHRMaW5rcyhwYXRoKSB7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHBhdGgsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmNsYXNzID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5fY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmNoaWxkcmVuID0gdmFsdWUuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuX2NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGUodmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUhpZ2hsaWdodChub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuY2xhc3MgPT09ICdoaWdobGlnaHQtbGluaycpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jbGFzcyA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9zZWFyY2ggb24gdHJlZSBmb3IgYSBsaW5rXG4gICAgICAgICAgICBmdW5jdGlvbiBzZWFyY2hXaXRoaW5UcmVlKG5vZGUsIHNlYXJjaEtleSwgcGF0aCkge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLm5hbWUgPT09IHNlYXJjaEtleSkgeyAvL2lmIHNlYXJjaCBpcyBmb3VuZCByZXR1cm4sIGFkZCB0aGUgb2JqZWN0IHRvIHRoZSBwYXRoIGFuZCByZXR1cm4gaXRcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5jaGlsZHJlbiB8fCBub2RlLl9jaGlsZHJlbikgeyAvL2lmIGNoaWxkcmVuIGFyZSBjb2xsYXBzZWQgZDMgb2JqZWN0IHdpbGwgaGF2ZSB0aGVtIGluc3RhbnRpYXRlZCBhcyBfY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gKG5vZGUuY2hpbGRyZW4pID8gbm9kZS5jaGlsZHJlbiA6IG5vZGUuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoLnB1c2gobm9kZSk7Ly8gd2UgYXNzdW1lIHRoaXMgcGF0aCBpcyB0aGUgcmlnaHQgb25lXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBzZWFyY2hXaXRoaW5UcmVlKGNoaWxkcmVuW2ldLCBzZWFyY2hLZXksIHBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kKSB7Ly8gd2Ugd2VyZSByaWdodCwgdGhpcyBzaG91bGQgcmV0dXJuIHRoZSBidWJibGVkLXVwIHBhdGggZnJvbSB0aGUgZmlyc3QgaWYgc3RhdGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7Ly93ZSB3ZXJlIHdyb25nLCByZW1vdmUgdGhpcyBwYXJlbnQgZnJvbSB0aGUgcGF0aCBhbmQgY29udGludWUgaXRlcmF0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHsvL25vdCB0aGUgcmlnaHQgb2JqZWN0LCByZXR1cm4gZmFsc2Ugc28gaXQgd2lsbCBjb250aW51ZSB0byBpdGVyYXRlIGluIHRoZSBsb29wXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG1ha2VDbGlja2VkTm9kZUFjdGl2ZShlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzUmVzZXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlLm5vZGUoKSA9PT0gZWxlbSkge1xuICAgICAgICAgICAgICAgICAgICBpc1Jlc2V0ID0gcmVzZXQoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNSZXNldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmUuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZSA9IGQzLnNlbGVjdChlbGVtKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhblRvVGhlTm9kZShub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gMTsvL0ZJWE1FIGFkZCBzY2FsZSB0byBoaWdoZXIgaWYgbmVlZFxuICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGUgPSBbbm9kZS54IC8gMiAtIHNjYWxlICogbm9kZS54LCBub2RlLnkgLyAyIC0gc2NhbGUgKiBub2RlLnldO1xuICAgICAgICAgICAgICAgIHZpcy50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDEyNTApXG4gICAgICAgICAgICAgICAgICAgIC5jYWxsKHpvb21PYmplY3QudHJhbnNsYXRlKHRyYW5zbGF0ZSkuc2NhbGUoc2NhbGUpLmV2ZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogICAgICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVUcmFuc2xhdGlvbihub2RlKSB7XG4gICAgICAgICAgICAgdmFyIHRybmFzbGF0aW9uU2V0PSBbXTtcbiAgICAgICAgICAgICBpZihub2RlLng8MzAwKXtcbiAgICAgICAgICAgICAzMDAtbm9kZS54O1xuICAgICAgICAgICAgIH1lbHNlIGlmKG5vZGUueD4zMDApe1xuICAgICAgICAgICAgIG5vZGUueC0zMDA7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH0qL1xuXG4gICAgICAgICAgICB2YXIgem9vbU9iamVjdCA9IGQzLmJlaGF2aW9yLnpvb20oKVxuICAgICAgICAgICAgICAgIC50cmFuc2xhdGUoWzAsIDBdKVxuICAgICAgICAgICAgICAgIC5zY2FsZSgxKVxuICAgICAgICAgICAgICAgIC5zY2FsZUV4dGVudChbMSwgOF0pXG4gICAgICAgICAgICAgICAgLm9uKFwiem9vbVwiLCB6b29tZWRXcmFwcGVyKTtcblxuXG4gICAgICAgICAgICBmdW5jdGlvbiB6b29tZWRXcmFwcGVyKCkge1xuICAgICAgICAgICAgICAgIC8vIGcuc3R5bGUoXCJzdHJva2Utd2lkdGhcIiwgMS41IC8gZDMuZXZlbnQuc2NhbGUgKyBcInB4XCIpO1xuICAgICAgICAgICAgICAgIHZpcy5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZDMuZXZlbnQudHJhbnNsYXRlICsgXCIpc2NhbGUoXCIgKyBkMy5ldmVudC5zY2FsZSArIFwiKVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZXNldCBjYWxsZWRcIik7XG4gICAgICAgICAgICAgICAgYWN0aXZlLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGFjdGl2ZSA9IGQzLnNlbGVjdChudWxsKTtcblxuICAgICAgICAgICAgICAgIHZpcy50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDc1MClcbiAgICAgICAgICAgICAgICAgICAgLmNhbGwoem9vbU9iamVjdC50cmFuc2xhdGUoWzE1MCwgMTAwXSkuc2NhbGUoMSkuZXZlbnQpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFRyZWVOb2RlQnlPYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyZWVOb2RlID0gJGZpbHRlcignZmlsdGVyJykobm9kZUxpc3QsIHsnaWQnOiBvYmplY3QuaWR9LCB0cnVlKVswXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJlZU5vZGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qICAgICAgICAgICAgZWxlbS5yZW1vdmVBdHRyKFwiY2FzY2FkZS10cmVlLXZpZXdcIik7XG4gICAgICAgICAgICAgJGNvbXBpbGUoZWxlbSkoc2NvcGUpOyovXG5cbiAgICAgICAgICAgIG5vZGVBY3RpdmVDbGVhckxpc3RlbmVyID0gc2NvcGUuJG9uKCdhcHA6bm9kZXM6Y2xlYXJhY3RpdmUnLCBvbkRlYWN0aXZhdGVOb2Rlcyk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG1ha2VOb2RlQWN0aXZlKGlkKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGVMaXN0ID0gZDMuc2VsZWN0QWxsKFwiLm5vZGUtXCIgKyBpZC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQobm9kZUxpc3RbMF0pLmFkZENsYXNzKCdhY3RpdmUtbm9kZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhckFsbEFjdGl2ZU5vZGVzKCkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlTGlzdCA9IGQzLnNlbGVjdEFsbChcIi5ub2RlLWxhYmVsXCIpO1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChub2RlTGlzdCwgZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KHYpLnJlbW92ZUNsYXNzKCdhY3RpdmUtbm9kZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkRlYWN0aXZhdGVOb2RlcyhldiwgZGF0YSkge1xuICAgICAgICAgICAgICAgIGNsZWFyQWxsQWN0aXZlTm9kZXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGRlc3Ryb3lMaXN0ZW5lcik7XG4gICAgICAgICAgICBmdW5jdGlvbiBkZXN0cm95TGlzdGVuZXIoKSB7XG4gICAgICAgICAgICAgICAgbm9kZUFjdGl2ZUNsZWFyTGlzdGVuZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJlZVZpZXdEaXJlY3RpdmU7XG4gICAgfVxuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIFRyZWVWaWV3RGlyZWN0aXZlQ29udHJvbGxlcigkcm9vdFNjb3BlLCAkc2NvcGUsIHRyZWVWaWV3U2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5tYWtlQ2FsbEJhY2sgPSBtYWtlQ2FsbEJhY2s7XG5cbiAgICAgICAgZnVuY3Rpb24gbWFrZUNhbGxCYWNrKGlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjYWxsZWQgdHJlZXZpZXcgY2FsbCBiYWNrIGFibicpO1xuICAgICAgICAgICAgJHNjb3BlLnZtW2lkZW50aWZpZXJdKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiAgICAgICAgZnVuY3Rpb24gb25Jbml0KCkge1xuICAgICAgICAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICByZXR1cm4gdHJlZVZpZXdTZXJ2aWNlLmdldFNlYXJjaGVkTm9kZSgpO1xuICAgICAgICAgfSwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgIGNvbnNvbGUubG9nKG5vZGUpO1xuICAgICAgICAgfSk7XG4gICAgICAgICB9XG5cbiAgICAgICAgIG9uSW5pdCgpOyovXG4gICAgICAgIC8qICAgICAgICB2YXIgc2VhcmNoTGlzdGVuZXIgPSAkcm9vdFNjb3BlLiRvbignY2hhcnQ6aGllcmFyY2h5OnNlYXJjaCcsIG9uU2VhcmNoKTtcblxuICAgICAgICAgZnVuY3Rpb24gb25TZWFyY2gobm9kZSkge1xuICAgICAgICAgY29uc29sZS5sb2cobm9kZSk7XG4gICAgICAgICB9XG5cblxuICAgICAgICAgJHJvb3RTY29wZS4kb24oJyRkZXN0cm95JywgZGVzdHJveUxpc3RlbmVyKTtcbiAgICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lMaXN0ZW5lcigpIHtcbiAgICAgICAgIHNlYXJjaExpc3RlbmVyKCk7XG4gICAgICAgICB9Ki9cbiAgICB9XG59KSgpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNi8xLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdvcmdDaGFydCcpLmZhY3RvcnkoJ3RyZWVWaWV3U2VydmljZScsIHRyZWVWaWV3U2VydmljZSk7XG5cbiAgICBmdW5jdGlvbiB0cmVlVmlld1NlcnZpY2UoJGZpbHRlcikge1xuICAgICAgICB2YXIgc2VsZWN0ZWROb2RlID0gbnVsbDtcbiAgICAgICAgdmFyIG5vZGVzID0gW107XG5cbiAgICAgICAgdmFyIHNlcnZpY2VFeHBvc2FibGUgPSB7XG4gICAgICAgICAgICBzZXRTZWFyY2hlZE5vZGU6IHNldFNlYXJjaGVkTm9kZSxcbiAgICAgICAgICAgIGdldFNlYXJjaGVkTm9kZTogZ2V0U2VhcmNoZWROb2RlLFxuICAgICAgICAgICAgc2V0Tm9kZXM6IHNldE5vZGVzLFxuICAgICAgICAgICAgcHVzaE5vZGU6IHB1c2hOb2RlLFxuICAgICAgICAgICAgZ2V0Tm9kZXM6IGdldE5vZGVzLFxuICAgICAgICAgICAgZmluZEJ5SWQ6IGZpbmRCeUlkXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHNlcnZpY2VFeHBvc2FibGU7XG5cbiAgICAgICAgZnVuY3Rpb24gZmluZEJ5SWQoaWQpIHtcbiAgICAgICAgICAgIHZhciB0cmVlTm9kZSA9ICRmaWx0ZXIoJ2ZpbHRlcicpKG5vZGVzLCB7J2lkJzogaWR9LCB0cnVlKVswXTtcbiAgICAgICAgICAgIHJldHVybiB0cmVlTm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldE5vZGVzKHNldE9mbm9kZXMpIHtcbiAgICAgICAgICAgIG5vZGVzID0gc2V0T2Zub2RlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldE5vZGVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGVzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcHVzaE5vZGUobm9kZSkge1xuICAgICAgICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFNlYXJjaGVkTm9kZShub2RlKSB7XG4gICAgICAgICAgICBzZWxlY3RlZE5vZGUgPSBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0U2VhcmNoZWROb2RlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkTm9kZTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA3LzIxLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQuZXhhbXBsZScsW10pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA3LzIxLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQuZXhhbXBsZScpLmNvbmZpZyhvcmdjaGFydFJvdXRlQ29uZmlnKTtcblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiBvcmdjaGFydFJvdXRlQ29uZmlnKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdleGFtcGxlLnRlc3QnLCB7XG4gICAgICAgICAgICB1cmw6ICcvZXhhbXBsZS90ZXN0JyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdFeGFtcGxlT3JnQ2hhcnRDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2V4YW1wbGUvdGVzdC90ZXN0LnRtcGwuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgb25seTogWydmdWxsQWNjZXNzJ11cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA3LzIxLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQuZXhhbXBsZScpLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJyxFeGFtcGxlQ29udHJvbGxlcik7XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gRXhhbXBsZUNvbnRyb2xsZXIoKSB7XG4gICAgICB2YXIgdm0gPSB0aGlzO1xuICAgIH1cbn0pKCk7Il19
