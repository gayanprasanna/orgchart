!function(){"use strict";angular.module("orgChart",[])}(),function(){"use strict";function e(e,n,t){function o(o){function i(e){var n=angular.lowercase(e);return function(e){return 0===e.displayLowerCase.indexOf(n)}}var a=this;a.simulateQuery=!1,a.isDisabled=!1,a.noCache=!0,a.states=[{value:{name:"PublisherNameLongName",id:"id1",type:"type0",addable:!1,editable:!1,removable:!1,enableble:!1},display:"PublisherNameLongName",displayLowerCase:"PublisherNameLongName".toLowerCase()},{value:{name:"Landing A",id:"id2",type:"type1",addable:!0,editable:!0,removable:!0,enablable:!0,enable:!1},display:"Landing A",displayLowerCase:"Landing A".toLowerCase()},{value:{name:"Account 1",id:"id3",type:"type2"},display:"Account 1",displayLowerCase:"Account 1".toLowerCase()},{value:{name:"Landing B",id:"id8",type:"type1"},display:"Landing B",displayLowerCase:"Landing B".toLowerCase()}],a.querySearch=function(t){var o,c=t?a.states.filter(i(t)):a.states;return a.simulateQuery?(o=n.defer(),e(function(){o.resolve(c)},1e3*Math.random(),!1),o.promise):c},a.selectedItemChange=function(e){e&&(t.info("Item changed to "+JSON.stringify(e)),o.setSearchedNode(e.value))},a.searchTextChange=function(e){t.info("Text changed to "+e)},a.newState=function(e){alert("Sorry! You'll need to create a Constitution for "+e+" first!")}}return o.$inject=["treeViewService"],{replace:!1,restrict:"EA",controller:o,template:'<div layout-align="start center" layout="row" layout-fill> <div flex-offset="5"> <md-autocomplete style="margin-top: 20px" ng-disabled="vm.isDisabled" md-no-cache="vm.noCache" md-selected-item="vm.selectedItem" md-search-text-change="vm.searchTextChange(vm.searchText)" md-search-text="vm.searchText" md-selected-item-change="vm.selectedItemChange(item)" md-items="item in vm.querySearch(vm.searchText)" md-item-text="item.display" md-min-length="0" placeholder="Search People"> <md-item-template> <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.display}}</span> </md-item-template> <md-not-found> No states matching "{{ctrl.searchText}}" were found. <a ng-click="ctrl.newState(ctrl.searchText)">Create a new one!</a> </md-not-found> </md-autocomplete> </div></div>',controllerAs:"vm",scope:{},bindToController:{},link:function(){}}}e.$inject=["$timeout","$q","$log"],angular.module("orgChart").directive("cascadeTreeSearchBox",e)}(),function(){"use strict";function e(e){var n=this;n.isExpandAllMode=e.isExpandAllMode(),n.toggleExpandAllMode=function(){n.isExpandAllMode=e.toggleExpandAllMode()},n.incrementZoomScale=function(){n.zoomScale=e.incrementZoomScale()},n.decrementZoomScale=function(){n.zoomScale=e.decrementZoomScale()},n.zoomScale=e.getZoomScale()}e.$inject=["toolSetService"],angular.module("orgChart").directive("cascadeToolSet",function(){return{replace:!1,restrict:"EA",controller:e,controllerAs:"vm",template:'<div layout="column" layout-align="center end"> <div layout="row" layout-align="space-around center" style="margin-top: 20px" flex-offset="5"> <div> <md-button class="md-icon-button" ng-click="vm.incrementZoomScale()"> <md-tooltip md-direction="bottom">Zoom In</md-tooltip> <md-icon md-font-icon="zmdi zmdi-plus"></md-icon></md-button> </div><div> <md-button class="md-icon-button" ng-click="vm.decrementZoomScale()" ng-disabled="vm.zoomScale<=1"> <md-tooltip md-direction="bottom">Zoom Out</md-tooltip> <md-icon md-font-icon="zmdi zmdi-minus"></md-icon></md-button> </div><div> <md-button class="md-icon-button" ng-hide="vm.isExpandAllMode" ng-click="vm.toggleExpandAllMode()"> <md-tooltip md-direction="bottom">Expand All</md-tooltip> <md-icon md-font-icon="zmdi zmdi-triangle-down"></md-icon></md-button> </div><div> <md-button class="md-icon-button" ng-show="vm.isExpandAllMode" ng-click="vm.toggleExpandAllMode()"> <md-tooltip md-direction="bottom">Collapse All</md-tooltip> <md-icon md-font-icon="zmdi zmdi-triangle-up"></md-icon></md-button> </div></div></div>',scope:{},bindToController:{},link:function(e,n,t,o){}}})}(),function(){"use strict";angular.module("orgChart").factory("toolSetService",function(){var e=!1,n=1;return{isExpandAllMode:function(){return e},toggleExpandAllMode:function(){return e=!e},getZoomScale:function(){return n},setZoomScale:function(e){n=e,console.log("zoom scale",n)},incrementZoomScale:function(){return n+=.1},decrementZoomScale:function(){return n>1&&(n-=.1),n}}})}(),function(){"use strict";function e(e,t,o,i){return{restrict:"E",replace:!1,controller:n,template:'<div ng-class="{\'active-node\':vm.isActive}" class="{{vm.nodeClass}}" ng-mouseenter="vm.whenMouseEnter()" ng-mouseleave="vm.whenMouseLeave()" ng-click="vm.makeNodeActive()"> <div layout="column" layout-align="center center"> <div class="md-subhead">Some Text</div><div> <div class=""><img ng-src="assets/images/avatars/flasher.thumb.jpg" class="round-chip"></div></div><div class="md-subhead">{{vm.node.name}}</div><div layout-align="center center" layout-fill class="action-area" layout="row" ng-show="vm.isExpandedView"> <div ng-repeat="action in vm.nodeActions"><button ng-click="vm.makeCallBack(action.callBack)"><span ng-bind="action.name"></span>&nbsp;<i class="{{action.icon}}"></i></button></div></div></div></div>',controllerAs:"vm",scope:{},bindToController:{nodeId:"@",nodeActions:"@"},link:function(n,t,a,c){function l(){i.$broadcast("app:nodes:clearactive",{data:""})}function r(e){t===e.target||t[0].contains(e.target)||n.$apply(function(){c.isActive=!1})}c.id=a.nodeid,c.nodeActions=angular.fromJson(a.nodeactions),console.log(c.nodeActions),c.isPinnedNode=!1,c.node=e.findById(a.nodeid),c.nodeClass="node-label node-"+c.node.type+" node-"+c.id,c.isExpandedView=!1,c.isActive=!1,c.whenMouseEnter=function(){console.log("mouse Entered"),c.isExpandedView=!0},c.whenMouseLeave=function(){console.log("mouse leaved"),c.isExpandedView=!1},c.togglePinnedMode=function(){c.isPinnedNode=!0,console.log(c.isPinnedNode)},c.makeCallBack=function(e){console.log(e),n.$parent.vm.makeCallBack(e)},c.makeNodeActive=function(){l(),c.isActive=!0};angular.element(t.children()[0]);o.on("click",r),n.$on("$destroy",function(){o.off("click",r)})}}}function n(e){}e.$inject=["treeViewService","$timeout","$document","$rootScope"],n.$inject=["treeViewService"],angular.module("orgChart").directive("cascadeTreeNode",e)}(),function(){"use strict";function e(e,t,o,i,a,c){return{replace:"false",restrict:"E",scope:{},bindToController:{data:"=",abn:"&",nodeActions:"@"},controller:n,controllerAs:"vm",link:function(n,l,r,d){function s(){m(),f(),u()}function u(){n.$watch(function(){return a.isExpandAllMode()},function(e){e?g():y()})}function m(){n.$watch(function(){return o.getSearchedNode()},function(e){if(console.log(e),e){w(e);var n=_(e);L(),i(function(){console.log(n.x,n.y),M(),z(n.id),N(n)},500)}})}function f(){n.$watch(function(){return a.getZoomScale()},function(e){console.log(e),D.transition().duration(750).call(R.translate([150,100]).scale(e).scaleExtent([1,8]).event)})}function v(e){e.children&&(e.children.forEach(v),x(e))}function p(e){var n=e.children?e.children:e._children;e._children&&(e.children=e._children,e._children=null),n&&n.forEach(p)}function h(e){var n=e.children?e.children:e._children;e.children&&(e._children=e.children,e.children=null),n&&n.forEach(h)}function g(){p(T),b(T)}function y(){h(T),b(T)}function b(e){var i=d3.event&&d3.event.altKey?5e3:500,a=J.nodes(T).reverse();a.forEach(function(e){e.y=200*e.depth});var c=D.selectAll("g.node").data(a,function(e){return e.id||(e.id=++I)}),l=c.enter().append("svg:g").attr("class","node").attr("id",function(e){return"node-"+e.id}).attr("transform",function(n){return"translate("+e.x0+","+e.y0+")"}).on("click",function(e){d3.event.defaultPrevented||(x(e),b(e),e.info&&playvid(e.info))});l.append("svg:circle").attr("r",1e-6).style("fill",function(e){return e._children?"lightsteelblue":"#fff"}),l.append("svg:foreignObject").attr("y",-30).attr("x",-5).attr("text-anchor",function(e){return e.children||e._children?"end":"start"}).style("fill-opacity",1e-6).attr("width",160).attr("height",120).append("xhtml:div").classed("disabled",function(e){return void 0!==e.enable&&!e.enable}).on("click",A).append("cascade-tree-node").attr("node",function(e){return o.pushNode(e),""}).attr("nodeId",function(e){return e.id}).attr("isPinnedNode","false").attr("nodeActions",r.nodeactions).each(function(){t(this)(n)});var d=c.transition().duration(i).attr("transform",function(e){return"translate("+e.x+","+e.y+")"});d.select("circle").attr("r",4.5).style("fill",function(e){return"highlight-link"===e.class?"#ff4136":e._children?"lightsteelblue":"#fff"}),d.select("text").style("fill-opacity",1);var s=c.exit().transition().duration(i).attr("transform",function(n){return"translate("+e.x+","+e.y+")"}).remove();s.select("circle").attr("r",1e-6),s.select("text").style("fill-opacity",1e-6);var u=D.selectAll("path.link").data(J.links(a),function(e){return e.target.id});u.enter().insert("svg:path","g").attr("class","link").attr("d",function(n){var t={x:e.x0,y:e.y0};return Q({source:t,target:t})}).transition().duration(i).attr("d",Q),u.transition().duration(i).attr("d",Q).style("stroke",function(e){if("highlight-link"===e.target.class)return"#ff4136"}),u.exit().transition().duration(i).attr("d",function(n){var t={x:e.x,y:e.y};return Q({source:t,target:t})}).remove(),a.forEach(function(e){e.x0=e.x,e.y0=e.y})}function x(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null)}function S(){d3.event.stopPropagation()}function A(e){d3.event.defaultPrevented||(console.log(e),$(this)||N(e))}function w(e){var n=E(Z,e.name,[]);angular.isDefined(n)?(C(q),k(n)):console.log("Searched node "+e.name+" not found"),q=n}function k(e){angular.forEach(e,function(e,n){e.class="highlight-link",e._children&&(e.children=e._children,e._children=null),b(e)})}function C(e){angular.forEach(e,function(e,n){e.class="",e._children&&(e.children=e._children,e._children=null),b(e)})}function E(e,n,t){if(e.name===n)return t.push(e),t;if(!e.children&&!e._children)return!1;for(var o=e.children?e.children:e._children,i=0;i<o.length;i++){t.push(e);var a=E(o[i],n,t);if(a)return a;t.pop()}}function $(e){var n=!1;return K.node()===e&&(n=L()),!!n||(K.classed("active",!1),K=d3.select(e).classed("active",!0),!1)}function N(e){var n=[e.x/2-1*e.x,e.y/2-1*e.y];D.transition().duration(1250).call(R.translate(n).scale(1).event)}function L(){return console.log("reset called"),K.classed("active",!1),K=d3.select(null),D.transition().duration(750).call(R.translate([150,100]).scale(1).event),!0}function _(n){return e("filter")(P,{id:n.id},!0)[0]}function z(e){var n=d3.selectAll(".node-"+e.toString());angular.element(n[0]).addClass("active-node")}function M(){var e=d3.selectAll(".node-label");angular.forEach(e,function(e,n){angular.element(e).removeClass("active-node")})}var T,Z={name:"RootNode",id:"id1",type:"type0",addable:!1,editable:!1,removable:!1,enableble:!1,root:!0,children:[{name:"Landing A",id:"id2",type:"type1",addable:!0,editable:!0,removable:!0,enablable:!0,enable:!1,children:[{name:"Account 1",id:"id3",type:"type2",children:[{name:"tracking link 1",id:"id4",type:"type3",enablable:!0,enable:!0},{name:"tracking link 2",id:"id5",type:"type3",enablable:!0,enable:!0},{name:"tracking link 3",id:"id6",type:"type3",enablable:!0,enable:!1}]},{name:"Account 2",id:"id7",type:"type2"},{name:"Account 3",id:"id9",type:"type2"}]},{name:"Landing B",id:"id8",type:"type1",children:[{name:"Account 4",id:"id10",type:"type2"},{name:"Account 5",id:"id11",type:"type2"},{name:"Account 6",id:"id12",type:"type2"}]},{name:"Landing C",id:"id13",type:"type1",children:[{name:"Subtopic 7",id:"id14",type:"type3"},{name:"Subtopic 8",id:"id15",type:"type3"},{name:"Subtopic 9",id:"id16",type:"type3"}]}]},P=[],B=[20,20,20,20],j=c.innerWidth-20-B[1]-B[3],V=600-B[0]-B[2],I=0,O=(d3.scale.linear().domain([0,j]).range([0,j]),d3.scale.linear().domain([0,V]).range([0,V]),d3.select(l[0])),q=[];l.append(t('<div layout="row" layout-align="space-around center"><div flex><cascade-tree-search-box></cascade-tree-search-box></div><div flex><cascade-tool-set></cascade-tool-set></div></div>')(n)),s();var D=O.append("div").attr("layout","row").attr("layout-align","space-around center").call(function(){t(this[0])(n)}).append("div").attr("flex","").call(function(){t(this[0])(n)}).append("svg:svg").attr("viewBox","0 0 600 600").attr("width",j+B[1]+B[3]).attr("height",V+B[0]+B[2]).append("svg:g").attr("transform","translate("+B[3]+","+B[0]+")").call(d3.behavior.zoom().on("zoom",function(){a.setZoomScale(d3.event.scale),n.$apply(),console.log(d3.event.scale),D.attr("transform","translate("+d3.event.translate+")")})).on("click",S,!1).call(d3.behavior.drag().on("dragstart",function(){d3.event.sourceEvent.stopPropagation()}).on("drag",function(){console.log("dragged"),d3.event.sourceEvent.stopPropagation()})).append("g").attr("width",160).attr("height",120).attr("class","tree-holder"),J=d3.layout.tree().size([V,j]).nodeSize([110,60]).separation(function(e,n){return e.parent,n.parent,2}),Q=d3.svg.diagonal().projection(function(e){return[e.x+80,e.y+80]});(T=Z).x0=V/2,T.y0=0,console.log(T),T.children.forEach(v),b(T);var K=d3.select(null),R=d3.behavior.zoom().translate([0,0]).scale(1).scaleExtent([1,8]).on("zoom",function(){D.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")});n.$on("app:nodes:clearactive",function(e,n){M()}),n.$on("$destroy",function(){})}}}function n(e,n,t){this.makeCallBack=function(e){console.log("called treeview call back abn"),n.vm[e]()}}e.$inject=["$filter","$compile","treeViewService","$timeout","toolSetService","$window"],n.$inject=["$rootScope","$scope","treeViewService"],angular.module("orgChart").directive("cascadeTreeView",e)}(),function(){"use strict";function e(e){var n=null,t=[];return{setSearchedNode:function(e){n=e},getSearchedNode:function(){return n},setNodes:function(e){t=e},pushNode:function(e){t.push(e)},getNodes:function(){return t},findById:function(n){return e("filter")(t,{id:n},!0)[0]}}}e.$inject=["$filter"],angular.module("orgChart").factory("treeViewService",e)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZ2NoYXJ0Lm1vZHVsZS5qcyIsImRpcmVjdGl2ZXMvc2VhcmNoYm94LmRpcmVjdGl2ZS5qcyIsImRpcmVjdGl2ZXMvdG9vbHNldC5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3Rvb2xzZXQuc2VydmljZS5qcyIsImRpcmVjdGl2ZXMvdHJlZW5vZGUuZGlyZWN0aXZlLmpzIiwiZGlyZWN0aXZlcy90cmVldmlldy5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3RyZWV2aWV3LnNlcnZpY2UuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNhc2NhZGVUcmVlU2VhcmNoQm94IiwiJHRpbWVvdXQiLCIkcSIsIiRsb2ciLCJDYXNjYWRlVHJlZVNlYXJjaEJveENvbnRyb2xsZXIiLCJ0cmVlVmlld1NlcnZpY2UiLCJjcmVhdGVGaWx0ZXJGb3IiLCJxdWVyeSIsImxvd2VyY2FzZVF1ZXJ5IiwibG93ZXJjYXNlIiwic3RhdGUiLCJkaXNwbGF5TG93ZXJDYXNlIiwiaW5kZXhPZiIsInZtIiwidGhpcyIsInNpbXVsYXRlUXVlcnkiLCJpc0Rpc2FibGVkIiwibm9DYWNoZSIsInN0YXRlcyIsInZhbHVlIiwibmFtZSIsImlkIiwidHlwZSIsImFkZGFibGUiLCJlZGl0YWJsZSIsInJlbW92YWJsZSIsImVuYWJsZWJsZSIsImRpc3BsYXkiLCJ0b0xvd2VyQ2FzZSIsImVuYWJsYWJsZSIsImVuYWJsZSIsInF1ZXJ5U2VhcmNoIiwiZGVmZXJyZWQiLCJyZXN1bHRzIiwiZmlsdGVyIiwiZGVmZXIiLCJyZXNvbHZlIiwiTWF0aCIsInJhbmRvbSIsInByb21pc2UiLCJzZWxlY3RlZEl0ZW1DaGFuZ2UiLCJpdGVtIiwiaW5mbyIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXRTZWFyY2hlZE5vZGUiLCJzZWFyY2hUZXh0Q2hhbmdlIiwidGV4dCIsIm5ld1N0YXRlIiwiYWxlcnQiLCJyZXBsYWNlIiwicmVzdHJpY3QiLCJjb250cm9sbGVyIiwidGVtcGxhdGUiLCJjb250cm9sbGVyQXMiLCJzY29wZSIsImJpbmRUb0NvbnRyb2xsZXIiLCJsaW5rIiwiZGlyZWN0aXZlIiwiY2FzY2FkZVRvb2xTZXRDb250cm9sbGVyIiwidG9vbFNldFNlcnZpY2UiLCJpc0V4cGFuZEFsbE1vZGUiLCJ0b2dnbGVFeHBhbmRBbGxNb2RlIiwiaW5jcmVtZW50Wm9vbVNjYWxlIiwiem9vbVNjYWxlIiwiZGVjcmVtZW50Wm9vbVNjYWxlIiwiZ2V0Wm9vbVNjYWxlIiwiZWxlbSIsImF0dHIiLCJmYWN0b3J5IiwiaXNBbGxFeHBhbmRlZE1vZGUiLCJzZXRab29tU2NhbGUiLCJzY2FsZSIsImNvbnNvbGUiLCJsb2ciLCJjYXNjYWRlVHJlZU5vZGUiLCIkZG9jdW1lbnQiLCIkcm9vdFNjb3BlIiwiQ2FzY2FkZVRyZWVOb2RlQ29udHJvbGxlciIsIm5vZGVJZCIsIm5vZGVBY3Rpb25zIiwiYXR0cnMiLCJjbGVhckFsbE90aGVyQWN0aXZlTm9kZXMiLCIkYnJvYWRjYXN0IiwiZGF0YSIsIm9uRG9jdW1lbnRDbGljayIsImV2IiwidGFyZ2V0IiwiY29udGFpbnMiLCIkYXBwbHkiLCJpc0FjdGl2ZSIsIm5vZGVpZCIsImZyb21Kc29uIiwibm9kZWFjdGlvbnMiLCJpc1Bpbm5lZE5vZGUiLCJub2RlIiwiZmluZEJ5SWQiLCJub2RlQ2xhc3MiLCJpc0V4cGFuZGVkVmlldyIsIndoZW5Nb3VzZUVudGVyIiwid2hlbk1vdXNlTGVhdmUiLCJ0b2dnbGVQaW5uZWRNb2RlIiwibWFrZUNhbGxCYWNrIiwiY2FsbEJhY2tGdW5jTmFtZSIsIiRwYXJlbnQiLCJtYWtlTm9kZUFjdGl2ZSIsImVsZW1lbnQiLCJjaGlsZHJlbiIsIm9uIiwiJG9uIiwib2ZmIiwiY2FzY2FkZVRyZWVWaWV3IiwiJGZpbHRlciIsIiRjb21waWxlIiwiJHdpbmRvdyIsImFibiIsIlRyZWVWaWV3RGlyZWN0aXZlQ29udHJvbGxlciIsImFjdGl2YXRlV2F0Y2hlcnMiLCJvblNlYXJjaFdhdGNoIiwib25ab29tV2F0Y2giLCJvbkV4cGFuZFdhdGNoIiwiJHdhdGNoIiwiaXNJbkV4cGFuZEFsbE1vZGUiLCJleHBhbmRBbGwiLCJjb2xsYXBzZUFsbCIsImdldFNlYXJjaGVkTm9kZSIsImhpZ2hsaWdodFBhdGgiLCJyZXNvbHZlZE5vZGUiLCJnZXRUcmVlTm9kZUJ5T2JqZWN0IiwicmVzZXQiLCJ4IiwieSIsImNsZWFyQWxsQWN0aXZlTm9kZXMiLCJwYW5Ub1RoZU5vZGUiLCJ2aXMiLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJjYWxsIiwiem9vbU9iamVjdCIsInRyYW5zbGF0ZSIsInNjYWxlRXh0ZW50IiwiZXZlbnQiLCJ0b2dnbGVBbGwiLCJkIiwiZm9yRWFjaCIsInRvZ2dsZSIsImV4cGFuZEFsbEFmdGVyIiwiX2NoaWxkcmVuIiwiY29sbGFwc2VBbGxBZnRlciIsInJvb3QiLCJ1cGRhdGUiLCJzb3VyY2UiLCJkMyIsImFsdEtleSIsIm5vZGVzIiwidHJlZSIsInJldmVyc2UiLCJkZXB0aCIsInNlbGVjdEFsbCIsImkiLCJub2RlRW50ZXIiLCJlbnRlciIsImFwcGVuZCIsIngwIiwieTAiLCJkZWZhdWx0UHJldmVudGVkIiwicGxheXZpZCIsInN0eWxlIiwiY2xhc3NlZCIsInVuZGVmaW5lZCIsIm9uQ2xpY2tlZE5vZGUiLCJwdXNoTm9kZSIsImVhY2giLCJub2RlVXBkYXRlIiwic2VsZWN0IiwiY2xhc3MiLCJub2RlRXhpdCIsImV4aXQiLCJyZW1vdmUiLCJsaW5rcyIsImluc2VydCIsIm8iLCJkaWFnb25hbCIsInN0b3BQcm9wb2dhdGlvbiIsInN0b3BQcm9wYWdhdGlvbiIsIm1ha2VDbGlja2VkTm9kZUFjdGl2ZSIsInBhdGgiLCJzZWFyY2hXaXRoaW5UcmVlIiwidHJlZWRhdGEiLCJpc0RlZmluZWQiLCJjbGVhckhpZ2hMaWdodExpbmtzIiwibGFzdFNlYXJjaGVkUGF0aCIsImhpZ2hsaWdodExpbmtzIiwia2V5Iiwic2VhcmNoS2V5IiwicHVzaCIsImxlbmd0aCIsImZvdW5kIiwicG9wIiwiaXNSZXNldCIsImFjdGl2ZSIsIm9iamVjdCIsIm5vZGVMaXN0IiwidG9TdHJpbmciLCJhZGRDbGFzcyIsInYiLCJrIiwicmVtb3ZlQ2xhc3MiLCJtIiwidyIsImlubmVyV2lkdGgiLCJoIiwid3JhcHBlckVsZW1lbnQiLCJsaW5lYXIiLCJkb21haW4iLCJyYW5nZSIsImJlaGF2aW9yIiwiem9vbSIsImRyYWciLCJzb3VyY2VFdmVudCIsImxheW91dCIsInNpemUiLCJub2RlU2l6ZSIsInNlcGFyYXRpb24iLCJhIiwiYiIsInBhcmVudCIsInN2ZyIsInByb2plY3Rpb24iLCIkc2NvcGUiLCJpZGVudGlmaWVyIiwic2VsZWN0ZWROb2RlIiwic2V0Tm9kZXMiLCJzZXRPZm5vZGVzIiwiZ2V0Tm9kZXMiXSwibWFwcGluZ3MiOiJDQUdBLFdBQ0EsYUFDQUEsUUFBQUMsT0FBQSxrQkNGQSxXQUNBLGFBS0EsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FvQkEsU0FBQUMsRUFBQUMsR0FxT0EsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBVixRQUFBVyxVQUFBRixHQUVBLE9BQUEsU0FBQUcsR0FDQSxPQUFBLElBQUFBLEVBQUFDLGlCQUFBQyxRQUFBSixJQXZPQSxJQUFBSyxFQUFBQyxLQUNBRCxFQUFBRSxlQUFBLEVBQ0FGLEVBQUFHLFlBQUEsRUFDQUgsRUFBQUksU0FBQSxFQUdBSixFQUFBSyxTQW9EQUMsT0FDQUMsS0FBQSx3QkFDQUMsR0FBQSxNQUNBQyxLQUFBLFFBQ0FDLFNBQUEsRUFDQUMsVUFBQSxFQUNBQyxXQUFBLEVBQ0FDLFdBQUEsR0FFQUMsUUFBQSx3QkFDQWhCLGlCQUFBLHdCQUFBaUIsZ0JBR0FULE9BQ0FDLEtBQUEsWUFDQUMsR0FBQSxNQUNBQyxLQUFBLFFBQ0FDLFNBQUEsRUFDQUMsVUFBQSxFQUNBQyxXQUFBLEVBQ0FJLFdBQUEsRUFDQUMsUUFBQSxHQUVBSCxRQUFBLFlBQ0FoQixpQkFBQSxZQUFBaUIsZ0JBRUFULE9BQ0FDLEtBQUEsWUFDQUMsR0FBQSxNQUNBQyxLQUFBLFNBQ0FLLFFBQUEsWUFDQWhCLGlCQUFBLFlBQUFp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SixFQUFBeE4sR0FBQXlOLG1KQXZ6QkF4TyxRQUFBQyxPQUFBLFlBQUEyRCxVQUFBLGtCQUFBcUQsTUNGQSxXQUNBLGFBSUEsU0FBQTFHLEVBQUEyRyxHQUNBLElBQUF1SCxFQUFBLEtBQ0E3RSxLQVdBLE9BUkE3RyxnQkEyQkEsU0FBQWtELEdBQ0F3SSxFQUFBeEksR0EzQkE4QixnQkE4QkEsV0FDQSxPQUFBMEcsR0E5QkFDLFNBYUEsU0FBQUMsR0FDQS9FLEVBQUErRSxHQWJBOUQsU0FvQkEsU0FBQTVFLEdBQ0EyRCxFQUFBeUMsS0FBQXBHLElBcEJBMkksU0FlQSxXQUNBLE9BQUFoRixHQWZBMUQsU0FLQSxTQUFBM0UsR0FFQSxPQURBMkYsRUFBQSxVQUFBMEMsR0FBQXJJLEdBQUFBLElBQUEsR0FBQSwyQkFsQkF2QixRQUFBQyxPQUFBLFlBQUFzRSxRQUFBLGtCQUFBaEUiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNy8xMC8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgYW5ndWxhci5tb2R1bGUoJ29yZ0NoYXJ0JyxbXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDYvMS8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5kaXJlY3RpdmUoJ2Nhc2NhZGVUcmVlU2VhcmNoQm94JywgY2FzY2FkZVRyZWVTZWFyY2hCb3gpO1xuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIGNhc2NhZGVUcmVlU2VhcmNoQm94KCR0aW1lb3V0LCAkcSwgJGxvZykge1xuXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXBsYWNlOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogQ2FzY2FkZVRyZWVTZWFyY2hCb3hDb250cm9sbGVyLFxuICAgICAgICAgICAgLy8gdGVtcGxhdGVVcmw6ICdzZWFyY2hib3gudG1wbC5odG1sJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOic8ZGl2IGxheW91dC1hbGlnbj1cInN0YXJ0IGNlbnRlclwiIGxheW91dD1cInJvd1wiIGxheW91dC1maWxsPiA8ZGl2IGZsZXgtb2Zmc2V0PVwiNVwiPiA8bWQtYXV0b2NvbXBsZXRlIHN0eWxlPVwibWFyZ2luLXRvcDogMjBweFwiIG5nLWRpc2FibGVkPVwidm0uaXNEaXNhYmxlZFwiIG1kLW5vLWNhY2hlPVwidm0ubm9DYWNoZVwiIG1kLXNlbGVjdGVkLWl0ZW09XCJ2bS5zZWxlY3RlZEl0ZW1cIiBtZC1zZWFyY2gtdGV4dC1jaGFuZ2U9XCJ2bS5zZWFyY2hUZXh0Q2hhbmdlKHZtLnNlYXJjaFRleHQpXCIgbWQtc2VhcmNoLXRleHQ9XCJ2bS5zZWFyY2hUZXh0XCIgbWQtc2VsZWN0ZWQtaXRlbS1jaGFuZ2U9XCJ2bS5zZWxlY3RlZEl0ZW1DaGFuZ2UoaXRlbSlcIiBtZC1pdGVtcz1cIml0ZW0gaW4gdm0ucXVlcnlTZWFyY2godm0uc2VhcmNoVGV4dClcIiBtZC1pdGVtLXRleHQ9XCJpdGVtLmRpc3BsYXlcIiBtZC1taW4tbGVuZ3RoPVwiMFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIFBlb3BsZVwiPiA8bWQtaXRlbS10ZW1wbGF0ZT4gPHNwYW4gbWQtaGlnaGxpZ2h0LXRleHQ9XCJjdHJsLnNlYXJjaFRleHRcIiBtZC1oaWdobGlnaHQtZmxhZ3M9XCJeaVwiPnt7aXRlbS5kaXNwbGF5fX08L3NwYW4+IDwvbWQtaXRlbS10ZW1wbGF0ZT4gPG1kLW5vdC1mb3VuZD4gTm8gc3RhdGVzIG1hdGNoaW5nIFwie3tjdHJsLnNlYXJjaFRleHR9fVwiIHdlcmUgZm91bmQuIDxhIG5nLWNsaWNrPVwiY3RybC5uZXdTdGF0ZShjdHJsLnNlYXJjaFRleHQpXCI+Q3JlYXRlIGEgbmV3IG9uZSE8L2E+IDwvbWQtbm90LWZvdW5kPiA8L21kLWF1dG9jb21wbGV0ZT4gPC9kaXY+PC9kaXY+JyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHt9LFxuICAgICAgICAgICAgbGluazogbGlua1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoKSB7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8qQG5nSW5qZWN0Ki9cbiAgICAgICAgZnVuY3Rpb24gQ2FzY2FkZVRyZWVTZWFyY2hCb3hDb250cm9sbGVyKHRyZWVWaWV3U2VydmljZSkge1xuXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICAgICAgdm0uc2ltdWxhdGVRdWVyeSA9IGZhbHNlO1xuICAgICAgICAgICAgdm0uaXNEaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdm0ubm9DYWNoZSA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIGxpc3Qgb2YgYHN0YXRlYCB2YWx1ZS9kaXNwbGF5IG9iamVjdHNcbiAgICAgICAgICAgIHZtLnN0YXRlcyA9IGxvYWRBbGwoKTtcbiAgICAgICAgICAgIHZtLnF1ZXJ5U2VhcmNoID0gcXVlcnlTZWFyY2g7XG4gICAgICAgICAgICB2bS5zZWxlY3RlZEl0ZW1DaGFuZ2UgPSBzZWxlY3RlZEl0ZW1DaGFuZ2U7XG4gICAgICAgICAgICB2bS5zZWFyY2hUZXh0Q2hhbmdlID0gc2VhcmNoVGV4dENoYW5nZTtcblxuICAgICAgICAgICAgdm0ubmV3U3RhdGUgPSBuZXdTdGF0ZTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gbmV3U3RhdGUoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIlNvcnJ5ISBZb3UnbGwgbmVlZCB0byBjcmVhdGUgYSBDb25zdGl0dXRpb24gZm9yIFwiICsgc3RhdGUgKyBcIiBmaXJzdCFcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgICAgICAgLy8gSW50ZXJuYWwgbWV0aG9kc1xuICAgICAgICAgICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2VhcmNoIGZvciBzdGF0ZXMuLi4gdXNlICR0aW1lb3V0IHRvIHNpbXVsYXRlXG4gICAgICAgICAgICAgKiByZW1vdGUgZGF0YXNlcnZpY2UgY2FsbC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gcXVlcnlTZWFyY2gocXVlcnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IHF1ZXJ5ID8gdm0uc3RhdGVzLmZpbHRlcihjcmVhdGVGaWx0ZXJGb3IocXVlcnkpKSA6IHZtLnN0YXRlcyxcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHZtLnNpbXVsYXRlUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICB9LCBNYXRoLnJhbmRvbSgpICogMTAwMCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNlYXJjaFRleHRDaGFuZ2UodGV4dCkge1xuICAgICAgICAgICAgICAgICRsb2cuaW5mbygnVGV4dCBjaGFuZ2VkIHRvICcgKyB0ZXh0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc2VsZWN0ZWRJdGVtQ2hhbmdlKGl0ZW0pIHtcblxuICAgICAgICAgICAgICAgIGlmKGl0ZW0pe1xuICAgICAgICAgICAgICAgICAgICAkbG9nLmluZm8oJ0l0ZW0gY2hhbmdlZCB0byAnICsgSlNPTi5zdHJpbmdpZnkoaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICB0cmVlVmlld1NlcnZpY2Uuc2V0U2VhcmNoZWROb2RlKGl0ZW0udmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEJ1aWxkIGBzdGF0ZXNgIGxpc3Qgb2Yga2V5L3ZhbHVlIHBhaXJzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvYWRBbGwoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF1dG9Db21wbGV0ZUxpc3QgPSBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiUHVibGlzaGVyTmFtZUxvbmdOYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRhYmxlXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZWRpdGFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZW1vdmFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVibGVcIjogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIlB1Ymxpc2hlck5hbWVMb25nTmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUxvd2VyQ2FzZTogXCJQdWJsaXNoZXJOYW1lTG9uZ05hbWVcIi50b0xvd2VyQ2FzZSgpXG5cbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJMYW5kaW5nIEFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVkaXRhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZW1vdmFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxlXCI6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJMYW5kaW5nIEFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlMb3dlckNhc2U6IFwiTGFuZGluZyBBXCIudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwifSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiQWNjb3VudCAxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TG93ZXJDYXNlOiBcIkFjY291bnQgMVwiLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJMYW5kaW5nIEJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQ4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTFcIn0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIkxhbmRpbmcgQlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUxvd2VyQ2FzZTogXCJMYW5kaW5nIEJcIi50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgdmFyIHRyZWVkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJQdWJsaXNoZXJOYW1lTG9uZ05hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMVwiLFxuICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMFwiLFxuICAgICAgICAgICAgICAgICAgICBcImFkZGFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIFwiZWRpdGFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIFwicmVtb3ZhYmxlXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBcImVuYWJsZWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiTGFuZGluZyBBXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVkaXRhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInJlbW92YWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxlXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwidHJhY2tpbmcgbGluayAxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVcIjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwidHJhY2tpbmcgbGluayAyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVcIjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwidHJhY2tpbmcgbGluayAzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVcIjogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiQWNjb3VudCAzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkOVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkxhbmRpbmcgQlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkOFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBY2NvdW50IDRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBY2NvdW50IDVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBY2NvdW50IDZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkxhbmRpbmcgQ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNoaWxkcmVuXCI6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiU3VidG9waWMgN1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDE0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIlN1YnRvcGljIDhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxNVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJTdWJ0b3BpYyA5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMTZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKiAgICAgICAgICAgICAgICB2YXIgYWxsU3RhdGVzID0gJ0FsYWJhbWEsIEFsYXNrYSwgQXJpem9uYSwgQXJrYW5zYXMsIENhbGlmb3JuaWEsIENvbG9yYWRvLCBDb25uZWN0aWN1dCwgRGVsYXdhcmUsXFxcbiAgICAgICAgICAgICAgICAgRmxvcmlkYSwgR2VvcmdpYSwgSGF3YWlpLCBJZGFobywgSWxsaW5vaXMsIEluZGlhbmEsIElvd2EsIEthbnNhcywgS2VudHVja3ksIExvdWlzaWFuYSxcXFxuICAgICAgICAgICAgICAgICBNYWluZSwgTWFyeWxhbmQsIE1hc3NhY2h1c2V0dHMsIE1pY2hpZ2FuLCBNaW5uZXNvdGEsIE1pc3Npc3NpcHBpLCBNaXNzb3VyaSwgTW9udGFuYSxcXFxuICAgICAgICAgICAgICAgICBOZWJyYXNrYSwgTmV2YWRhLCBOZXcgSGFtcHNoaXJlLCBOZXcgSmVyc2V5LCBOZXcgTWV4aWNvLCBOZXcgWW9yaywgTm9ydGggQ2Fyb2xpbmEsXFxcbiAgICAgICAgICAgICAgICAgTm9ydGggRGFrb3RhLCBPaGlvLCBPa2xhaG9tYSwgT3JlZ29uLCBQZW5uc3lsdmFuaWEsIFJob2RlIElzbGFuZCwgU291dGggQ2Fyb2xpbmEsXFxcbiAgICAgICAgICAgICAgICAgU291dGggRGFrb3RhLCBUZW5uZXNzZWUsIFRleGFzLCBVdGFoLCBWZXJtb250LCBWaXJnaW5pYSwgV2FzaGluZ3RvbiwgV2VzdCBWaXJnaW5pYSxcXFxuICAgICAgICAgICAgICAgICBXaXNjb25zaW4sIFd5b21pbmcnO1xuXG4gICAgICAgICAgICAgICAgIHJldHVybiBhbGxTdGF0ZXMuc3BsaXQoLywgKy9nKS5tYXAoIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICB2YWx1ZTogc3RhdGUudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgZGlzcGxheTogc3RhdGVcbiAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgfSk7Ki9cblxuICAgICAgICAgICAgICAgIC8qICAgICAgICAgICAgICAgIHJldHVybiB0cmVlZGF0YS5jaGlsZHJlbi5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgdmFsdWU6IG5vZGUsXG4gICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vZGUubmFtZSxcbiAgICAgICAgICAgICAgICAgZGlzcGxheUxvd2VyQ2FzZTogbm9kZS5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgfSk7Ki9cblxuICAgICAgICAgICAgICAgIC8vIHJldHVybiBleHRyYWN0Tm9kZXModHJlZWRhdGEuY2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIHJldHVybiBhdXRvQ29tcGxldGVMaXN0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBleHRyYWN0Tm9kZXMobGlzdE9mTm9kZXMpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0T2ZOb2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBub2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9kZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUxvd2VyQ2FzZTogbm9kZS5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGUgZmlsdGVyIGZ1bmN0aW9uIGZvciBhIHF1ZXJ5IHN0cmluZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVGaWx0ZXJGb3IocXVlcnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG93ZXJjYXNlUXVlcnkgPSBhbmd1bGFyLmxvd2VyY2FzZShxdWVyeSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZmlsdGVyRm4oc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChzdGF0ZS5kaXNwbGF5TG93ZXJDYXNlLmluZGV4T2YobG93ZXJjYXNlUXVlcnkpID09PSAwKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH1cblxuXG59KSgpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNi81LzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdvcmdDaGFydCcpLmRpcmVjdGl2ZSgnY2FzY2FkZVRvb2xTZXQnLCBjYXNjYWRlVG9vbFNldCk7XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gY2FzY2FkZVRvb2xTZXQoKSB7XG5cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBjYXNjYWRlVG9vbFNldENvbnRyb2xsZXIsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAvLyB0ZW1wbGF0ZVVybDogJ3Rvb2xzZXQudG1wbC5odG1sJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOic8ZGl2IGxheW91dD1cImNvbHVtblwiIGxheW91dC1hbGlnbj1cImNlbnRlciBlbmRcIj4gPGRpdiBsYXlvdXQ9XCJyb3dcIiBsYXlvdXQtYWxpZ249XCJzcGFjZS1hcm91bmQgY2VudGVyXCIgc3R5bGU9XCJtYXJnaW4tdG9wOiAyMHB4XCIgZmxleC1vZmZzZXQ9XCI1XCI+IDxkaXY+IDxtZC1idXR0b24gY2xhc3M9XCJtZC1pY29uLWJ1dHRvblwiIG5nLWNsaWNrPVwidm0uaW5jcmVtZW50Wm9vbVNjYWxlKClcIj4gPG1kLXRvb2x0aXAgbWQtZGlyZWN0aW9uPVwiYm90dG9tXCI+Wm9vbSBJbjwvbWQtdG9vbHRpcD4gPG1kLWljb24gbWQtZm9udC1pY29uPVwiem1kaSB6bWRpLXBsdXNcIj48L21kLWljb24+PC9tZC1idXR0b24+IDwvZGl2PjxkaXY+IDxtZC1idXR0b24gY2xhc3M9XCJtZC1pY29uLWJ1dHRvblwiIG5nLWNsaWNrPVwidm0uZGVjcmVtZW50Wm9vbVNjYWxlKClcIiBuZy1kaXNhYmxlZD1cInZtLnpvb21TY2FsZTw9MVwiPiA8bWQtdG9vbHRpcCBtZC1kaXJlY3Rpb249XCJib3R0b21cIj5ab29tIE91dDwvbWQtdG9vbHRpcD4gPG1kLWljb24gbWQtZm9udC1pY29uPVwiem1kaSB6bWRpLW1pbnVzXCI+PC9tZC1pY29uPjwvbWQtYnV0dG9uPiA8L2Rpdj48ZGl2PiA8bWQtYnV0dG9uIGNsYXNzPVwibWQtaWNvbi1idXR0b25cIiBuZy1oaWRlPVwidm0uaXNFeHBhbmRBbGxNb2RlXCIgbmctY2xpY2s9XCJ2bS50b2dnbGVFeHBhbmRBbGxNb2RlKClcIj4gPG1kLXRvb2x0aXAgbWQtZGlyZWN0aW9uPVwiYm90dG9tXCI+RXhwYW5kIEFsbDwvbWQtdG9vbHRpcD4gPG1kLWljb24gbWQtZm9udC1pY29uPVwiem1kaSB6bWRpLXRyaWFuZ2xlLWRvd25cIj48L21kLWljb24+PC9tZC1idXR0b24+IDwvZGl2PjxkaXY+IDxtZC1idXR0b24gY2xhc3M9XCJtZC1pY29uLWJ1dHRvblwiIG5nLXNob3c9XCJ2bS5pc0V4cGFuZEFsbE1vZGVcIiBuZy1jbGljaz1cInZtLnRvZ2dsZUV4cGFuZEFsbE1vZGUoKVwiPiA8bWQtdG9vbHRpcCBtZC1kaXJlY3Rpb249XCJib3R0b21cIj5Db2xsYXBzZSBBbGw8L21kLXRvb2x0aXA+IDxtZC1pY29uIG1kLWZvbnQtaWNvbj1cInptZGkgem1kaS10cmlhbmdsZS11cFwiPjwvbWQtaWNvbj48L21kLWJ1dHRvbj4gPC9kaXY+PC9kaXY+PC9kaXY+JyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHt9LFxuICAgICAgICAgICAgbGluazogbGlua1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbSwgYXR0ciwgdm0pIHtcblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIGNhc2NhZGVUb29sU2V0Q29udHJvbGxlcih0b29sU2V0U2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmlzRXhwYW5kQWxsTW9kZSA9IHRvb2xTZXRTZXJ2aWNlLmlzRXhwYW5kQWxsTW9kZSgpO1xuICAgICAgICB2bS50b2dnbGVFeHBhbmRBbGxNb2RlID0gdG9nZ2xlRXhwYW5kQWxsTW9kZTtcbiAgICAgICAgdm0uaW5jcmVtZW50Wm9vbVNjYWxlID0gaW5jcmVtZW50Wm9vbVNjYWxlO1xuICAgICAgICB2bS5kZWNyZW1lbnRab29tU2NhbGUgPSBkZWNyZW1lbnRab29tU2NhbGU7XG4gICAgICAgIHZtLnpvb21TY2FsZSA9IHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUV4cGFuZEFsbE1vZGUoKSB7XG4gICAgICAgICAgICB2bS5pc0V4cGFuZEFsbE1vZGUgPSB0b29sU2V0U2VydmljZS50b2dnbGVFeHBhbmRBbGxNb2RlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gaW5jcmVtZW50Wm9vbVNjYWxlKCkge1xuICAgICAgICAgICAgdm0uem9vbVNjYWxlID0gdG9vbFNldFNlcnZpY2UuaW5jcmVtZW50Wm9vbVNjYWxlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZWNyZW1lbnRab29tU2NhbGUoKSB7XG4gICAgICAgICAgICB2bS56b29tU2NhbGUgPSB0b29sU2V0U2VydmljZS5kZWNyZW1lbnRab29tU2NhbGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxufSkoKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDYvNS8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5mYWN0b3J5KCd0b29sU2V0U2VydmljZScsIHRvb2xTZXRTZXJ2aWNlKTtcblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiB0b29sU2V0U2VydmljZSgpIHtcblxuICAgICAgICB2YXIgaXNBbGxFeHBhbmRlZE1vZGUgPSBmYWxzZTtcbiAgICAgICAgdmFyIExPV0VTVF9aT09NX1NDQUxFID0gMTtcbiAgICAgICAgdmFyIHpvb21TY2FsZSA9IExPV0VTVF9aT09NX1NDQUxFO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0V4cGFuZEFsbE1vZGU6IGlzRXhwYW5kQWxsTW9kZSxcbiAgICAgICAgICAgIHRvZ2dsZUV4cGFuZEFsbE1vZGU6IHRvZ2dsZUV4cGFuZEFsbE1vZGUsXG4gICAgICAgICAgICBnZXRab29tU2NhbGU6IGdldFpvb21TY2FsZSxcbiAgICAgICAgICAgIHNldFpvb21TY2FsZTogc2V0Wm9vbVNjYWxlLFxuICAgICAgICAgICAgaW5jcmVtZW50Wm9vbVNjYWxlOiBpbmNyZW1lbnRab29tU2NhbGUsXG4gICAgICAgICAgICBkZWNyZW1lbnRab29tU2NhbGU6IGRlY3JlbWVudFpvb21TY2FsZVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzRXhwYW5kQWxsTW9kZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0FsbEV4cGFuZGVkTW9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUV4cGFuZEFsbE1vZGUoKSB7XG4gICAgICAgICAgICBpc0FsbEV4cGFuZGVkTW9kZSA9ICFpc0FsbEV4cGFuZGVkTW9kZTtcbiAgICAgICAgICAgIHJldHVybiBpc0FsbEV4cGFuZGVkTW9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFpvb21TY2FsZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB6b29tU2NhbGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRab29tU2NhbGUoc2NhbGUpIHtcbiAgICAgICAgICAgIGlmIChzY2FsZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAvLyB6b29tU2NhbGUgPSBzY2FsZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gem9vbVNjYWxlID0gTE9XRVNUX1pPT01fU0NBTEUgKyBzY2FsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHpvb21TY2FsZSA9IHNjYWxlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3pvb20gc2NhbGUnLCB6b29tU2NhbGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5jcmVtZW50Wm9vbVNjYWxlKCkge1xuICAgICAgICAgICAgem9vbVNjYWxlICs9IDAuMTtcblxuICAgICAgICAgICAgcmV0dXJuIHpvb21TY2FsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRlY3JlbWVudFpvb21TY2FsZSgpIHtcbiAgICAgICAgICAgIGlmICh6b29tU2NhbGUgPiAxKSB7XG4gICAgICAgICAgICAgICAgem9vbVNjYWxlIC09IDAuMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHpvb21TY2FsZTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA1LzMxLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5kaXJlY3RpdmUoJ2Nhc2NhZGVUcmVlTm9kZScsIGNhc2NhZGVUcmVlTm9kZSk7XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gY2FzY2FkZVRyZWVOb2RlKHRyZWVWaWV3U2VydmljZSwgJHRpbWVvdXQsICRkb2N1bWVudCwkcm9vdFNjb3BlKSB7XG5cbiAgICAgICAgdmFyIGNhc2NhZGVUcmVlTm9kZURpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICByZXBsYWNlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIHJlcXVpcmU6J15jYXNjYWRlVHJlZVZpZXcnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogQ2FzY2FkZVRyZWVOb2RlQ29udHJvbGxlcixcbiAgICAgICAgICAgIC8vIHRlbXBsYXRlVXJsOiAndHJlZW5vZGUudG1wbC5odG1sJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBuZy1jbGFzcz1cIntcXCdhY3RpdmUtbm9kZVxcJzp2bS5pc0FjdGl2ZX1cIiBjbGFzcz1cInt7dm0ubm9kZUNsYXNzfX1cIiBuZy1tb3VzZWVudGVyPVwidm0ud2hlbk1vdXNlRW50ZXIoKVwiIG5nLW1vdXNlbGVhdmU9XCJ2bS53aGVuTW91c2VMZWF2ZSgpXCIgbmctY2xpY2s9XCJ2bS5tYWtlTm9kZUFjdGl2ZSgpXCI+IDxkaXYgbGF5b3V0PVwiY29sdW1uXCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiPiA8ZGl2IGNsYXNzPVwibWQtc3ViaGVhZFwiPlNvbWUgVGV4dDwvZGl2PjxkaXY+IDxkaXYgY2xhc3M9XCJcIj48aW1nIG5nLXNyYz1cImFzc2V0cy9pbWFnZXMvYXZhdGFycy9mbGFzaGVyLnRodW1iLmpwZ1wiIGNsYXNzPVwicm91bmQtY2hpcFwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJtZC1zdWJoZWFkXCI+e3t2bS5ub2RlLm5hbWV9fTwvZGl2PjxkaXYgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiIGxheW91dC1maWxsIGNsYXNzPVwiYWN0aW9uLWFyZWFcIiBsYXlvdXQ9XCJyb3dcIiBuZy1zaG93PVwidm0uaXNFeHBhbmRlZFZpZXdcIj4gPGRpdiBuZy1yZXBlYXQ9XCJhY3Rpb24gaW4gdm0ubm9kZUFjdGlvbnNcIj48YnV0dG9uIG5nLWNsaWNrPVwidm0ubWFrZUNhbGxCYWNrKGFjdGlvbi5jYWxsQmFjaylcIj48c3BhbiBuZy1iaW5kPVwiYWN0aW9uLm5hbWVcIj48L3NwYW4+Jm5ic3A7PGkgY2xhc3M9XCJ7e2FjdGlvbi5pY29ufX1cIj48L2k+PC9idXR0b24+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+JyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgICAgICBub2RlSWQ6ICdAJyxcbiAgICAgICAgICAgICAgICBub2RlQWN0aW9uczogJ0AnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGluazogbGlua1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBjYXNjYWRlVHJlZU5vZGVEaXJlY3RpdmU7XG5cblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtLCBhdHRycywgdm0pIHtcbiAgICAgICAgICAgIHZtLmlkID0gYXR0cnMubm9kZWlkO1xuICAgICAgICAgICAgdm0ubm9kZUFjdGlvbnMgPSBhbmd1bGFyLmZyb21Kc29uKGF0dHJzLm5vZGVhY3Rpb25zKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZtLm5vZGVBY3Rpb25zKTtcbiAgICAgICAgICAgIHZtLmlzUGlubmVkTm9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgdm0ubm9kZSA9IHRyZWVWaWV3U2VydmljZS5maW5kQnlJZChhdHRycy5ub2RlaWQpO1xuICAgICAgICAgICAgLypjb25zb2xlLmxvZyhhbmd1bGFyLmZyb21Kc29uKGF0dHJzLm5vZGUpKTtcbiAgICAgICAgICAgIHZtLm5vZGUgPSBhbmd1bGFyLmZyb21Kc29uKGF0dHJzLm5vZGUpOyovXG4gICAgICAgICAgICB2bS5ub2RlQ2xhc3MgPSAnbm9kZS1sYWJlbCBub2RlLScgKyB2bS5ub2RlLnR5cGUrICcgbm9kZS0nK3ZtLmlkO1xuXG4gICAgICAgICAgICAvLyB2bS5pc1Bpbm5lZE5vZGUgPSB0cnVlO1xuICAgICAgICAgICAgdm0uaXNFeHBhbmRlZFZpZXcgPSBmYWxzZTtcbiAgICAgICAgICAgIHZtLmlzQWN0aXZlID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHZtLndoZW5Nb3VzZUVudGVyID0gd2hlbk1vdXNlRW50ZXI7XG4gICAgICAgICAgICB2bS53aGVuTW91c2VMZWF2ZSA9IHdoZW5Nb3VzZUxlYXZlO1xuICAgICAgICAgICAgdm0udG9nZ2xlUGlubmVkTW9kZSA9IHRvZ2dsZVBpbm5lZE1vZGU7XG4gICAgICAgICAgICB2bS5tYWtlQ2FsbEJhY2sgPSBtYWtlQ2FsbEJhY2s7XG4gICAgICAgICAgICB2bS5tYWtlTm9kZUFjdGl2ZSA9IG1ha2VOb2RlQWN0aXZlO1xuICAgICAgICAgICAgdmFyIG5vZGVET01FbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KGVsZW0uY2hpbGRyZW4oKVswXSk7XG4gICAgICAgICAgICAvKiAgICAgICAgICAgIGVsZW0ub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xuICAgICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoJ2FjdGl2ZS1ub2RlJyk7XG4gICAgICAgICAgICAgfSk7Ki9cblxuICAgICAgICAgICAgZnVuY3Rpb24gbWFrZU5vZGVBY3RpdmUoKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJBbGxPdGhlckFjdGl2ZU5vZGVzKCk7XG4gICAgICAgICAgICAgICAgdm0uaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB3aGVuTW91c2VFbnRlcigpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbW91c2UgRW50ZXJlZCcpO1xuICAgICAgICAgICAgICAgIHZtLmlzRXhwYW5kZWRWaWV3ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyB2bS5pc1Bpbm5lZE5vZGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB3aGVuTW91c2VMZWF2ZSgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbW91c2UgbGVhdmVkJyk7XG4gICAgICAgICAgICAgICAgdm0uaXNFeHBhbmRlZFZpZXcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAvKiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgIHZtLmlzUGlubmVkTm9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICB9LDEwMDApOyovXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZVBpbm5lZE1vZGUoKSB7XG4gICAgICAgICAgICAgICAgdm0uaXNQaW5uZWROb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2bS5pc1Bpbm5lZE5vZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBtYWtlQ2FsbEJhY2soY2FsbEJhY2tGdW5jTmFtZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhbGxCYWNrRnVuY05hbWUpO1xuICAgICAgICAgICAgICAgIHNjb3BlLiRwYXJlbnQudm0ubWFrZUNhbGxCYWNrKGNhbGxCYWNrRnVuY05hbWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhckFsbE90aGVyQWN0aXZlTm9kZXMoKXtcbi8qICAgICAgICAgICAgICAgIGVsZW0uZmluZCgnLm5vZGUtbGFiZWwnKTsvL1RPRE9cbiAgICAgICAgICAgICAgICBlbGVtLnBhcmVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhY3RpdmUtbm9kZScpOyovXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdhcHA6bm9kZXM6Y2xlYXJhY3RpdmUnLHsnZGF0YSc6ICcnfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGZpbmRSZWxldmFudE5vZGUoa2xhc3Mpe1xuICAgICAgICAgICAgICAgIGVsZW0uZmluZCgnLnRyZWUtaG9sZGVyJyk7Ly9UT0RPXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBvbkRvY3VtZW50Q2xpY2soZXYpIHtcblxuICAgICAgICAgICAgICAgIC8vQ2hlY2sgaWYgY2xpY2tlZCBvdXRzaWRlIGFuZCBkaXNjYXJkIEFjdGl2ZVxuICAgICAgICAgICAgICAgIGlmIChlbGVtICE9PSBldi50YXJnZXQgJiYgIWVsZW1bMF0uY29udGFpbnMoZXYudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdm0uaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3JlbW92ZSBldmVudCBoYW5kbGVycyB3aGVuIGN1c3RvbSBkaXJlY3RpdmUgZGVzdHJveWVkXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkRlc3Ryb3koKSB7XG4gICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9mZignY2xpY2snLCBvbkRvY3VtZW50Q2xpY2spO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICRkb2N1bWVudC5vbignY2xpY2snLCBvbkRvY3VtZW50Q2xpY2spO1xuICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIG9uRGVzdHJveSk7XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiBDYXNjYWRlVHJlZU5vZGVDb250cm9sbGVyKHRyZWVWaWV3U2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICAvKiAgICAgICAgdm0ubm9kZSA9IHRyZWVWaWV3U2VydmljZS5maW5kQnlJZCh2bS5ub2RlSWQpO1xuICAgICAgICAgdm0ubm9kZUNsYXNzID0gJ25vZGUtbGFiZWwgbm9kZS0nK3ZtLm5vZGUudHlwZTsqL1xuXG4gICAgfVxufSkoKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDUvMzAvMTcuXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIGFuZ3VsYXIubW9kdWxlKCdvcmdDaGFydCcpLmRpcmVjdGl2ZSgnY2FzY2FkZVRyZWVWaWV3JywgY2FzY2FkZVRyZWVWaWV3KTtcblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiBjYXNjYWRlVHJlZVZpZXcoJGZpbHRlciwgJGNvbXBpbGUsIHRyZWVWaWV3U2VydmljZSwgJHRpbWVvdXQsIHRvb2xTZXRTZXJ2aWNlLCAkd2luZG93KSB7XG4gICAgICAgIHZhciB0cmVlVmlld0RpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlcGxhY2U6ICdmYWxzZScsXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuICAgICAgICAgICAgICAgIGRhdGE6ICc9JyxcbiAgICAgICAgICAgICAgICBhYm46ICcmJyxcbiAgICAgICAgICAgICAgICBub2RlQWN0aW9uczogJ0AnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlcjogVHJlZVZpZXdEaXJlY3RpdmVDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazogbGlua1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW0sIGF0dHJzLCB2bSkge1xuICAgICAgICAgICAgLy9UT0RPIEZldGNoIEZyb20gdGhlIGRiIGFuZCBhZGQgdG8gdGhlIHNlcnZpY2VcbiAgICAgICAgICAgIHZhciB0cmVlZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJSb290Tm9kZVwiLFxuICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDFcIixcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMFwiLFxuICAgICAgICAgICAgICAgIFwiYWRkYWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBcImVkaXRhYmxlXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIFwicmVtb3ZhYmxlXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIFwiZW5hYmxlYmxlXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIFwicm9vdFwiOnRydWUsXG4gICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbe1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJMYW5kaW5nIEFcIixcbiAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMlwiLFxuICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMVwiLFxuICAgICAgICAgICAgICAgICAgICBcImFkZGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgXCJlZGl0YWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBcInJlbW92YWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBcImVuYWJsYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBcImVuYWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiQWNjb3VudCAxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcInRyYWNraW5nIGxpbmsgMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVcIjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcInRyYWNraW5nIGxpbmsgMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVcIjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcInRyYWNraW5nIGxpbmsgM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVcIjogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkN1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTJcIlxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBY2NvdW50IDNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkxhbmRpbmcgQlwiLFxuICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQ4XCIsXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUxXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgNFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMTBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiQWNjb3VudCA1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTJcIlxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBY2NvdW50IDZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDEyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwiXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJMYW5kaW5nIENcIixcbiAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMTNcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTFcIixcbiAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiU3VidG9waWMgN1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMTRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUzXCJcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiU3VidG9waWMgOFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMTVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUzXCJcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiU3VidG9waWMgOVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMTZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUzXCJcbiAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIG5vZGVBY3RpdmVDbGVhckxpc3RlbmVyO1xuICAgICAgICAgICAgdmFyIG5vZGVMaXN0ID0gW107XG4gICAgICAgICAgICB2YXIgbSA9IFsyMCwgMjAsIDIwLCAyMF0sXG4gICAgICAgICAgICAgICAgdyA9ICR3aW5kb3cuaW5uZXJXaWR0aCAtIDIwIC0gbVsxXSAtIG1bM10sXG4gICAgICAgICAgICAgICAgaCA9IDYwMCAtIG1bMF0gLSBtWzJdLFxuICAgICAgICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgICAgICAgIHIgPSA4MDAsXG4gICAgICAgICAgICAgICAgeCA9IGQzLnNjYWxlLmxpbmVhcigpLmRvbWFpbihbMCwgd10pLnJhbmdlKFswLCB3XSksXG4gICAgICAgICAgICAgICAgeSA9IGQzLnNjYWxlLmxpbmVhcigpLmRvbWFpbihbMCwgaF0pLnJhbmdlKFswLCBoXSksXG4gICAgICAgICAgICAgICAgcm9vdDtcblxuICAgICAgICAgICAgdmFyIHdyYXBwZXJFbGVtZW50ID0gZDMuc2VsZWN0KGVsZW1bMF0pO1xuICAgICAgICAgICAgdmFyIGxhc3RTZWFyY2hlZFBhdGggPSBbXTtcbiAgICAgICAgICAgIGVsZW0uYXBwZW5kKCRjb21waWxlKFwiPGRpdiBsYXlvdXQ9XFxcInJvd1xcXCIgbGF5b3V0LWFsaWduPVxcXCJzcGFjZS1hcm91bmQgY2VudGVyXFxcIj48ZGl2IGZsZXg+PGNhc2NhZGUtdHJlZS1zZWFyY2gtYm94PjwvY2FzY2FkZS10cmVlLXNlYXJjaC1ib3g+PC9kaXY+PGRpdiBmbGV4PjxjYXNjYWRlLXRvb2wtc2V0PjwvY2FzY2FkZS10b29sLXNldD48L2Rpdj48L2Rpdj5cIikoc2NvcGUpKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Jbml0KCkge1xuICAgICAgICAgICAgICAgIGFjdGl2YXRlV2F0Y2hlcnMoKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZVdhdGNoZXJzKCkge1xuICAgICAgICAgICAgICAgIG9uU2VhcmNoV2F0Y2goKTtcbiAgICAgICAgICAgICAgICBvblpvb21XYXRjaCgpO1xuICAgICAgICAgICAgICAgIG9uRXhwYW5kV2F0Y2goKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25FeHBhbmRXYXRjaCgpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9vbFNldFNlcnZpY2UuaXNFeHBhbmRBbGxNb2RlKClcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoaXNJbkV4cGFuZEFsbE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5FeHBhbmRBbGxNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvblNlYXJjaFdhdGNoKCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmVlVmlld1NlcnZpY2UuZ2V0U2VhcmNoZWROb2RlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcnN0IGZpbmQgYW5kIGhpZ2hsaWdodCB0aGUgcGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0UGF0aChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNvbHZlZE5vZGUgPSBnZXRUcmVlTm9kZUJ5T2JqZWN0KG5vZGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPIHJlbW92ZSBsYXRlciBjb3ogZXhwYW5kaW5nIG9jY3VycyB3aGVuIGhpZ2hsaWdodGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogICAgICAgICAgICAgICAgICAgICAgICBleHBhbmROb2RlKHJlc29sdmVkTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlKHJlc29sdmVkTm9kZSk7Ki9cblxuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc29sdmVkTm9kZS54LCByZXNvbHZlZE5vZGUueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJBbGxBY3RpdmVOb2RlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VOb2RlQWN0aXZlKHJlc29sdmVkTm9kZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuVG9UaGVOb2RlKHJlc29sdmVkTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25ab29tV2F0Y2goKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh6b29tU2NhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coem9vbVNjYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgdmlzLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDc1MClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYWxsKHpvb21PYmplY3QudHJhbnNsYXRlKFsxNTAsIDEwMF0pLnNjYWxlKHpvb21TY2FsZSkuc2NhbGVFeHRlbnQoWzEsIDhdKS5ldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb25Jbml0KCk7XG5cbiAgICAgICAgICAgIHZhciB2aXMgPSB3cmFwcGVyRWxlbWVudC5hcHBlbmQoXCJkaXZcIikuYXR0cihcImxheW91dFwiLCBcInJvd1wiKS5hdHRyKFwibGF5b3V0LWFsaWduXCIsIFwic3BhY2UtYXJvdW5kIGNlbnRlclwiKVxuICAgICAgICAgICAgICAgIC5jYWxsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUodGhpc1swXSkoc2NvcGUpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmFwcGVuZChcImRpdlwiKS5hdHRyKFwiZmxleFwiLCBcIlwiKS5jYWxsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUodGhpc1swXSkoc2NvcGUpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmFwcGVuZChcInN2ZzpzdmdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInZpZXdCb3hcIiwgXCIwIDAgNjAwIDYwMFwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgdyArIG1bMV0gKyBtWzNdKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGggKyBtWzBdICsgbVsyXSlcbiAgICAgICAgICAgICAgICAuYXBwZW5kKFwic3ZnOmdcIilcbiAgICAgICAgICAgICAgICAvLy5hdHRyKFwicG9pbnRlci1ldmVudHNcIiwgXCJhbGxcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1bM10gKyBcIixcIiArIG1bMF0gKyBcIilcIilcbiAgICAgICAgICAgICAgICAvLy5jYWxsKGQzLmJlaGF2aW9yLnpvb20oKS5zY2FsZUV4dGVudChbMSw4XSkub24oXCJ6b29tXCIsem9vbSkpO1xuICAgICAgICAgICAgICAgIC8vLmNhbGwoZDMuYmVoYXZpb3Iuem9vbSgpLngoeCkueSh5KS5zY2FsZUV4dGVudChbMSwgOF0pLm9uXG4gICAgICAgICAgICAgICAgLmNhbGwoZDMuYmVoYXZpb3Iuem9vbSgpLm9uKFwiem9vbVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xTZXRTZXJ2aWNlLnNldFpvb21TY2FsZShkMy5ldmVudC5zY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkMy5ldmVudC5zY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHZpcy5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZDMuZXZlbnQudHJhbnNsYXRlICsgXCIpXCIgKyBcIiBzY2FsZShcIiArIGQzLmV2ZW50LnNjYWxlICsgXCIpXCIpXG4gICAgICAgICAgICAgICAgICAgIHZpcy5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZDMuZXZlbnQudHJhbnNsYXRlICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgIH0pKS5vbihcImNsaWNrXCIsIHN0b3BQcm9wb2dhdGlvbiwgZmFsc2UpLmNhbGwoZDMuYmVoYXZpb3IuZHJhZygpLm9uKFwiZHJhZ3N0YXJ0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSkub24oXCJkcmFnXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJkcmFnZ2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5zb3VyY2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9KSkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwid2lkdGhcIiwgMTYwKS5hdHRyKFwiaGVpZ2h0XCIsIDEyMCkuYXR0cihcImNsYXNzXCIsIFwidHJlZS1ob2xkZXJcIikvKi5jYWxsKGQzLmJlaGF2aW9yLmRyYWcoKS5vbihcImRyYWdzdGFydFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgfSkub24oXCJkcmFnXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImRyYWdnZWRcIik7XG4gICAgICAgICAgICAgfSkpKi87XG5cbiAgICAgICAgICAgIC8vVE9ETyB1bmNvbW1lbnQgbGF0ZXJcbiAgICAgICAgICAgIC8qICAgICAgICAgICAgdmlzLmFwcGVuZChcInJlY3RcIilcbiAgICAgICAgICAgICAvLyAuYXR0cihcImNsYXNzXCIsIFwib3ZlcmxheVwiKVxuICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgdyArIG1bMV0gKyBtWzNdKVxuICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGggKyBtWzBdICsgbVsyXSlcbiAgICAgICAgICAgICAuYXR0cihcIm9wYWNpdHlcIiwgMCkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgICAgICB9KTsqL1xuXG4gICAgICAgICAgICB2YXIgdHJlZSA9IGQzLmxheW91dC50cmVlKClcbiAgICAgICAgICAgICAgICAuc2l6ZShbaCwgd10pXG4gICAgICAgICAgICAgICAgLm5vZGVTaXplKFsxMTAsIDYwXSlcbiAgICAgICAgICAgICAgICAuc2VwYXJhdGlvbihmdW5jdGlvbiBzZXBhcmF0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEucGFyZW50ID09IGIucGFyZW50ID8gMiA6IDI7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBkaWFnb25hbCA9IGQzLnN2Zy5kaWFnb25hbCgpXG4gICAgICAgICAgICAgICAgLnByb2plY3Rpb24oZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtkLnggKyA4MCwgZC55ICsgODBdO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByb290ID0gdHJlZWRhdGE7XG4gICAgICAgICAgICByb290LngwID0gaCAvIDI7XG4gICAgICAgICAgICByb290LnkwID0gMDtcblxuICAgICAgICAgICAgZnVuY3Rpb24gdG9nZ2xlQWxsKGQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBkLmNoaWxkcmVuLmZvckVhY2godG9nZ2xlQWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlKGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4cGFuZEFsbEFmdGVyKGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSAoZC5jaGlsZHJlbikgPyBkLmNoaWxkcmVuIDogZC5fY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgaWYgKGQuX2NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGQuY2hpbGRyZW4gPSBkLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgZC5fY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goZXhwYW5kQWxsQWZ0ZXIpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gY29sbGFwc2VBbGxBZnRlcihkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gKGQuY2hpbGRyZW4pID8gZC5jaGlsZHJlbiA6IGQuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGlmIChkLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgZC5jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjaGlsZHJlbilcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChjb2xsYXBzZUFsbEFmdGVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXhwYW5kQWxsKCkge1xuICAgICAgICAgICAgICAgIGV4cGFuZEFsbEFmdGVyKHJvb3QpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZShyb290KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY29sbGFwc2VBbGwoKSB7XG4gICAgICAgICAgICAgICAgY29sbGFwc2VBbGxBZnRlcihyb290KTtcbiAgICAgICAgICAgICAgICB1cGRhdGUocm9vdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJvb3QpO1xuXG4vLyBpbml0aWFsaXplIHRoZSBkaXNwbGF5IHRvIHNob3cgYSBmZXcgbm9kZXMuXG4gICAgICAgICAgICByb290LmNoaWxkcmVuLmZvckVhY2godG9nZ2xlQWxsKTtcbi8vdG9nZ2xlKHJvb3QuY2hpbGRyZW5bMV0pO1xuLy90b2dnbGUocm9vdC5jaGlsZHJlbls5XSk7XG5cblxuICAgICAgICAgICAgdXBkYXRlKHJvb3QpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGUoc291cmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gZDMuZXZlbnQgJiYgZDMuZXZlbnQuYWx0S2V5ID8gNTAwMCA6IDUwMDtcblxuICAgICAgICAgICAgICAgIC8vIENvbXB1dGUgdGhlIG5ldyB0cmVlIGxheW91dC5cbiAgICAgICAgICAgICAgICB2YXIgbm9kZXMgPSB0cmVlLm5vZGVzKHJvb3QpLnJldmVyc2UoKTtcblxuICAgICAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSBmb3IgZml4ZWQtZGVwdGguXG4gICAgICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICBkLnkgPSBkLmRlcHRoICogMjAwO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBub2Rlcy4uLlxuICAgICAgICAgICAgICAgIHZhciBub2RlID0gdmlzLnNlbGVjdEFsbChcImcubm9kZVwiKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShub2RlcywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmlkIHx8IChkLmlkID0gKytpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBFbnRlciBhbnkgbmV3IG5vZGVzIGF0IHRoZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICB2YXIgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2RlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vZGUtXCIgKyBkLmlkO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgc291cmNlLngwICsgXCIsXCIgKyBzb3VyY2UueTAgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZShkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZShkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkWydpbmZvJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5dmlkKGRbJ2luZm8nXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy9BZGRpbmcgYSBwaWN0dXJlIHRvIHRoZSBub2RlIGNpcmNsZVxuXG4gICAgICAgICAgICAgICAgbm9kZUVudGVyLmFwcGVuZChcInN2ZzpjaXJjbGVcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJyXCIsIDFlLTYpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLl9jaGlsZHJlbiA/IFwibGlnaHRzdGVlbGJsdWVcIiA6IFwiI2ZmZlwiO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHZhciBub2RlVGV4dCA9IG5vZGVFbnRlclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFwic3ZnOmZvcmVpZ25PYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgLy8uYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5jaGlsZHJlbiB8fCBkLl9jaGlsZHJlbiA/IC0xMCA6IDEwOyB9KVxuICAgICAgICAgICAgICAgICAgICAvLy5hdHRyKFwiZHhcIiwgXCIuMzVlbVwiKVxuICAgICAgICAgICAgICAgICAgICAvLy5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICByZXR1cm4gZC5jaGlsZHJlbiB8fCBkLl9jaGlsZHJlbiA/IC0xMCA6IDEwO1xuICAgICAgICAgICAgICAgICAgICAvL30pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwieVwiLCAtMzApXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwieFwiLCAtNSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyBcImVuZFwiIDogXCJzdGFydFwiO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMWUtNilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgMTYwKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMTIwKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCd4aHRtbDpkaXYnKVxuICAgICAgICAgICAgICAgICAgICAvKiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibm9kZS1sYWJlbFwiICsgXCIgbm9kZS1cIiArIGQudHlwZVxuICAgICAgICAgICAgICAgICAgICAgfSkuYXR0cihcIm5nLXNob3dcIiwgXCJ0cnVlXCIpLmNhbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUodGhpc1swXS5wYXJlbnROb2RlKShzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgICB9KSovXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKFwiZGlzYWJsZWRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmVuYWJsZSAhPT0gdW5kZWZpbmVkICYmICFkLmVuYWJsZTtcbiAgICAgICAgICAgICAgICAgICAgfSkub24oXCJjbGlja1wiLCBvbkNsaWNrZWROb2RlKS8qLmNhbGwoZDMuYmVoYXZpb3IuZHJhZygpLm9uKFwiZHJhZ3N0YXJ0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgIH0pLm9uKFwiZHJhZ1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZHJhZ2dlZFwiKTtcbiAgICAgICAgICAgICAgICAgfSkpKi87XG5cbiAgICAgICAgICAgICAgICBub2RlVGV4dC5hcHBlbmQoXCJjYXNjYWRlLXRyZWUtbm9kZVwiKS5hdHRyKFwibm9kZVwiLGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyZWVWaWV3U2VydmljZS5wdXNoTm9kZShkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICAgICAgfSkuYXR0cihcIm5vZGVJZFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5pZDtcbiAgICAgICAgICAgICAgICB9KS5hdHRyKFwiaXNQaW5uZWROb2RlXCIsIFwiZmFsc2VcIikuYXR0cihcIm5vZGVBY3Rpb25zXCIsIGF0dHJzLm5vZGVhY3Rpb25zKVxuICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29tcGlsZSh0aGlzKShzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgIC5jYWxsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgJGNvbXBpbGUodGhpc1swXS5wYXJlbnROb2RlKShzY29wZSk7XG4gICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgIC8vRW5hYmxlIG5vZGUgYnV0dG9uXG4gICAgICAgICAgICAgICAgIG5vZGVUZXh0LmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICByZXR1cm4gZC5lbmFibGFibGU7XG4gICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJpbnB1dFwiLCBcIi5cIilcbiAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIilcbiAgICAgICAgICAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICByZXR1cm4gZC5lbmFibGU7XG4gICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgIC5vbihcImNoYW5nZVwiLCB0b2dnbGVFbmFibGUsIHRydWUpXG4gICAgICAgICAgICAgICAgIC5vbihcImNsaWNrXCIsIHN0b3BQcm9wb2dhdGlvbiwgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgLy9Ob2RlIGxhYmVsXG4gICAgICAgICAgICAgICAgIG5vZGVUZXh0LmFwcGVuZChcInNwYW5cIilcbiAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm5vZGUtdGV4dFwiKVxuICAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICByZXR1cm4gZC5uYW1lICsgJyBYIC0gJyArIGQueCArICcsIFkgLSAnICsgZC55O1xuICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAvL0VkaXQgbm9kZSBidXR0b25cbiAgICAgICAgICAgICAgICAgbm9kZVRleHQuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgIHJldHVybiBkLmVkaXRhYmxlO1xuICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAuYXBwZW5kKFwiYVwiKVxuICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibm9kZS1lZGl0XCIpXG4gICAgICAgICAgICAgICAgIC5vbihcImNsaWNrXCIsIG9uRWRpdE5vZGUsIHRydWUpXG4gICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJpXCIpXG4gICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJmYSBmYS1wZW5jaWxcIik7XG5cbiAgICAgICAgICAgICAgICAgLy9BZGQgbm9kZSBidXR0b25cbiAgICAgICAgICAgICAgICAgbm9kZVRleHQuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgIHJldHVybiBkLmFkZGFibGU7XG4gICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJhXCIpXG4gICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2RlLWFkZFwiKVxuICAgICAgICAgICAgICAgICAub24oXCJjbGlja1wiLCBvbkFkZE5vZGUsIHRydWUpXG4gICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJpXCIpXG4gICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJmYSBmYS1wbHVzXCIpO1xuXG4gICAgICAgICAgICAgICAgIC8vUmVtb3ZlIG5vZGUgYnV0dG9uXG4gICAgICAgICAgICAgICAgIG5vZGVUZXh0LmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICByZXR1cm4gZC5yZW1vdmFibGU7XG4gICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJhXCIpXG4gICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2RlLXJlbW92ZVwiKVxuICAgICAgICAgICAgICAgICAub24oXCJjbGlja1wiLCBvblJlbW92ZU5vZGUsIHRydWUpXG4gICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJpXCIpXG4gICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJmYSBmYS10aW1lc1wiKTsqL1xuXG4gICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBub2RlcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVVcGRhdGUgPSBub2RlLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnggKyBcIixcIiArIGQueSArIFwiKVwiO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIG5vZGVVcGRhdGUuc2VsZWN0KFwiY2lyY2xlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiclwiLCA0LjUpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLmNsYXNzID09PSAnaGlnaGxpZ2h0LWxpbmsnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcjZmY0MTM2JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC5fY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2xpZ2h0c3RlZWxibHVlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcjZmZmJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBub2RlVXBkYXRlLnNlbGVjdChcInRleHRcIilcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDEpO1xuXG4gICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBleGl0aW5nIG5kb2VzIHRvIHRoZSBwYXJlbnQncyBuZXcgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVFeGl0ID0gbm9kZS5leGl0KCkudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHNvdXJjZS54ICsgXCIsXCIgKyBzb3VyY2UueSArIFwiKVwiO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICBub2RlRXhpdC5zZWxlY3QoXCJjaXJjbGVcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJyXCIsIDFlLTYpO1xuICAgICAgICAgICAgICAgIG5vZGVFeGl0LnNlbGVjdChcInRleHRcIilcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDFlLTYpO1xuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBsaW5rcy4uLlxuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gdmlzLnNlbGVjdEFsbChcInBhdGgubGlua1wiKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YSh0cmVlLmxpbmtzKG5vZGVzKSwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC5pZDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBFbnRlciBhbnkgbmV3IGxpbmtzIGF0IGh0ZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvblxuICAgICAgICAgICAgICAgIGxpbmsuZW50ZXIoKS5pbnNlcnQoXCJzdmc6cGF0aFwiLCBcImdcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmtcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBzb3VyY2UueDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogc291cmNlLnkwXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpYWdvbmFsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBvXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBkaWFnb25hbCk7XG5cbiAgICAgICAgICAgICAgICAvLyBUcmFuc2l0aW9uIGxpbmtzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICBsaW5rLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBkaWFnb25hbClcbiAgICAgICAgICAgICAgICAgICAgLyogICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIixmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChkLnRhcmdldC5jbGFzcyA9PT0gXCJoaWdobGlnaHQtbGlua1wiKT9cImhpZ2hsaWdodC1saW5rLXN0cm9rZS1hY3RpdmVcIjpcImhpZ2hsaWdodC1saW5rLXN0cm9rZS1pbmFjdGl2ZVwiO1xuICAgICAgICAgICAgICAgICAgICAgfSk7Ki9cbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwic3Ryb2tlXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC50YXJnZXQuY2xhc3MgPT09IFwiaGlnaGxpZ2h0LWxpbmtcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIiNmZjQxMzZcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICBsaW5rLmV4aXQoKS50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHNvdXJjZS54LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHNvdXJjZS55XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpYWdvbmFsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBvXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgLy8gU3Rhc2ggdGhlIG9sZCBwb3NpdGlvbnMgZm9yIHRyYW5zaXRpb24uXG4gICAgICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICBkLngwID0gZC54O1xuICAgICAgICAgICAgICAgICAgICBkLnkwID0gZC55O1xuICAgICAgICAgICAgICAgIH0pO1xuLypcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkobm9kZXMsIG5vZGVMaXN0KTtcblxuICAgICAgICAgICAgICAgIHRyZWVWaWV3U2VydmljZS5zZXROb2Rlcyhub2RlTGlzdCk7Ki9cbiAgICAgICAgICAgIH1cblxuLy8gVG9nZ2xlIGNoaWxkcmVuXG4gICAgICAgICAgICBmdW5jdGlvbiB0b2dnbGUoZCkge1xuICAgICAgICAgICAgICAgIGlmIChkLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgZC5jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZC5jaGlsZHJlbiA9IGQuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBkLl9jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBleHBhbmROb2RlKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNoaWxkcmVuID0gbm9kZS5fY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgbm9kZS5fY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4vLyB6b29tIGluIC8gb3V0XG4gICAgICAgICAgICBmdW5jdGlvbiB6b29tKGQpIHtcbiAgICAgICAgICAgICAgICAvL3Zpcy5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsM2F0ZShcIiArIGQzLmV2ZW50LnRyYW5zbGF0ZSArIFwiKXNjYWxlKFwiICsgZDMuZXZlbnQuc2NhbGUgKyBcIilcIik7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gdmlzLnNlbGVjdEFsbChcImcubm9kZVwiKTtcbiAgICAgICAgICAgICAgICBub2Rlcy5hdHRyKFwidHJhbnNmb3JtXCIsIHRyYW5zZm9ybSk7XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGxpbmtzLi4uXG4gICAgICAgICAgICAgICAgdmFyIGxpbmsgPSB2aXMuc2VsZWN0QWxsKFwicGF0aC5saW5rXCIpO1xuICAgICAgICAgICAgICAgIGxpbmsuYXR0cihcImRcIiwgdHJhbnNsYXRlKTtcblxuICAgICAgICAgICAgICAgIC8vIEVudGVyIGFueSBuZXcgbGlua3MgYXQgaHRlIHBhcmVudCdzIHByZXZpb3VzIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgLy9saW5rLmF0dHIoXCJkXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgIHZhciBvID0ge3g6IGQueDAsIHk6IGQueTB9O1xuICAgICAgICAgICAgICAgIC8vICAgICAgcmV0dXJuIGRpYWdvbmFsKHtzb3VyY2U6IG8sIHRhcmdldDogb30pO1xuICAgICAgICAgICAgICAgIC8vICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2Zvcm0oZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHgoZC55KSArIFwiLFwiICsgeShkLngpICsgXCIpXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zbGF0ZShkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZVggPSB4KGQudGFyZ2V0LnBhcmVudC55KTtcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlWSA9IHkoZC50YXJnZXQucGFyZW50LngpO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRYID0geChkLnRhcmdldC55KTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0WSA9IChzb3VyY2VYICsgdGFyZ2V0WCkgLyAyO1xuICAgICAgICAgICAgICAgIHZhciBsaW5rVGFyZ2V0WSA9IHkoZC50YXJnZXQueDApO1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBcIk1cIiArIHNvdXJjZVggKyBcIixcIiArIHNvdXJjZVkgKyBcIiBDXCIgKyB0YXJnZXRYICsgXCIsXCIgKyBzb3VyY2VZICsgXCIgXCIgKyB0YXJnZXRZICsgXCIsXCIgKyB5KGQudGFyZ2V0LngwKSArIFwiIFwiICsgdGFyZ2V0WCArIFwiLFwiICsgbGlua1RhcmdldFkgKyBcIlwiO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzdWx0KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25FZGl0Tm9kZShkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IDk7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikucmVwbGFjZSgvW15hLXpdKy9nLCAnJykuc3Vic3RyKDAsIGxlbmd0aCk7XG4gICAgICAgICAgICAgICAgYWRkQ2hpbGROb2RlKGQuaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibmV3IGNoaWxkIG5vZGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTJcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0b3BQcm9wb2dhdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkFkZE5vZGUoZCkge1xuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSA5O1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnJlcGxhY2UoL1teYS16XSsvZywgJycpLnN1YnN0cigwLCBsZW5ndGgpO1xuICAgICAgICAgICAgICAgIGFkZENoaWxkTm9kZShkLmlkLCB7XG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIm5ldyBjaGlsZCBub2RlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIjogaWQsXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdG9wUHJvcG9nYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25SZW1vdmVOb2RlKGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBkLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKGQpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGQucGFyZW50LmNoaWxkcmVuLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZShkLnBhcmVudCk7XG4gICAgICAgICAgICAgICAgc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZENoaWxkTm9kZShwYXJlbnRJZCwgbmV3Tm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gZDMuc2VsZWN0KCcjJyArICdub2RlLScgKyBwYXJlbnRJZCk7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGVEYXRhID0gbm9kZS5kYXR1bSgpO1xuICAgICAgICAgICAgICAgIGlmIChub2RlRGF0YS5jaGlsZHJlbiA9PT0gdW5kZWZpbmVkICYmIG5vZGVEYXRhLl9jaGlsZHJlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVEYXRhLmNoaWxkcmVuID0gW25ld05vZGVdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZURhdGEuX2NoaWxkcmVuICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZURhdGEuX2NoaWxkcmVuLnB1c2gobmV3Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZShub2RlRGF0YSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlRGF0YS5jaGlsZHJlbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVEYXRhLmNoaWxkcmVuLnB1c2gobmV3Tm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZShub2RlKTtcbiAgICAgICAgICAgICAgICBzdG9wUHJvcG9nYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gdG9nZ2xlRW5hYmxlKGQpIHtcbiAgICAgICAgICAgICAgICBkLmVuYWJsZSA9ICFkLmVuYWJsZTtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGQzLnNlbGVjdCgnIycgKyAnbm9kZS0nICsgZC5pZCArIFwiIC5ub2RlLWxhYmVsXCIpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKFwiZGlzYWJsZWRcIiwgIWQuZW5hYmxlKTtcbiAgICAgICAgICAgICAgICBzdG9wUHJvcG9nYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBmdW5jdGlvbiBzdG9wUHJvcG9nYXRpb24oKSB7XG4gICAgICAgICAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBhY3RpdmUgPSBkMy5zZWxlY3QobnVsbCk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uQ2xpY2tlZE5vZGUobm9kZSkge1xuICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobm9kZSk7XG4gICAgICAgICAgICAgICAgdmFyIGlzUmVzZXQgPSBtYWtlQ2xpY2tlZE5vZGVBY3RpdmUodGhpcyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNSZXNldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9UT0RPIHNjYWxlIGFjY29yZGluZyB0byB0aGUgYm91bmRzXG4gICAgICAgICAgICAgICAgLy8gdmFyIGJvdW5kcyA9IGQzLnNlbGVjdChlbGVtWzBdKS5ub2RlKCkuZ2V0QkJveCgpO1xuICAgICAgICAgICAgICAgIC8vIHZhciBzY2FsZSA9IE1hdGgubWF4KDEsIE1hdGgubWluKDgsIDAuOSAvIE1hdGgubWF4KGQueCAsIGQueSApKSk7XG4gICAgICAgICAgICAgICAgcGFuVG9UaGVOb2RlKG5vZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBoaWdobGlnaHRQYXRoKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAvL1RPRE8gbXVzdCBpbmNsdWRlIHRoZSByb290IG5vZGUgaW4gdGhlIGFycmF5XG4gICAgICAgICAgICAgICAgLy9QYXRoIGFycmF5IHRvIHN0b3JlIG5vZGVzXG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSBzZWFyY2hXaXRoaW5UcmVlKHRyZWVkYXRhLCBub2RlLm5hbWUsIFtdKTtcblxuICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChwYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAvL2Z1bmN0aW9uIHRvIG9wZW4gcGF0aHNcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJIaWdoTGlnaHRMaW5rcyhsYXN0U2VhcmNoZWRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0TGlua3MocGF0aCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlYXJjaGVkIG5vZGUgJyArIG5vZGUubmFtZSArICcgbm90IGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGFzdFNlYXJjaGVkUGF0aCA9IHBhdGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGhpZ2hsaWdodExpbmtzKHBhdGgpIHtcblxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChwYXRoLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vVE9ETyBhc3N1bWUgdGhhdCBpZCBvZiB0aGUgcm9vdCBub2RlIGlzIDEsLm1ha2UgdGhpcyBtb3JlIGNvbnNpc3RlbnQgbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHZhbHVlLmlkICE9PSdpZDEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5jbGFzcyA9ICdoaWdobGlnaHQtbGluayc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuX2NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuY2hpbGRyZW4gPSB2YWx1ZS5fY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuX2NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhckhpZ2hMaWdodExpbmtzKHBhdGgpIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocGF0aCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuY2xhc3MgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLl9jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuY2hpbGRyZW4gPSB2YWx1ZS5fY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5fY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlSGlnaGxpZ2h0KG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5jbGFzcyA9PT0gJ2hpZ2hsaWdodC1saW5rJykge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmNsYXNzID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3NlYXJjaCBvbiB0cmVlIGZvciBhIGxpbmtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNlYXJjaFdpdGhpblRyZWUobm9kZSwgc2VhcmNoS2V5LCBwYXRoKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUubmFtZSA9PT0gc2VhcmNoS2V5KSB7IC8vaWYgc2VhcmNoIGlzIGZvdW5kIHJldHVybiwgYWRkIHRoZSBvYmplY3QgdG8gdGhlIHBhdGggYW5kIHJldHVybiBpdFxuICAgICAgICAgICAgICAgICAgICBwYXRoLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChub2RlLmNoaWxkcmVuIHx8IG5vZGUuX2NoaWxkcmVuKSB7IC8vaWYgY2hpbGRyZW4gYXJlIGNvbGxhcHNlZCBkMyBvYmplY3Qgd2lsbCBoYXZlIHRoZW0gaW5zdGFudGlhdGVkIGFzIF9jaGlsZHJlblxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSAobm9kZS5jaGlsZHJlbikgPyBub2RlLmNoaWxkcmVuIDogbm9kZS5fY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgucHVzaChub2RlKTsvLyB3ZSBhc3N1bWUgdGhpcyBwYXRoIGlzIHRoZSByaWdodCBvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IHNlYXJjaFdpdGhpblRyZWUoY2hpbGRyZW5baV0sIHNlYXJjaEtleSwgcGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmQpIHsvLyB3ZSB3ZXJlIHJpZ2h0LCB0aGlzIHNob3VsZCByZXR1cm4gdGhlIGJ1YmJsZWQtdXAgcGF0aCBmcm9tIHRoZSBmaXJzdCBpZiBzdGF0ZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsvL3dlIHdlcmUgd3JvbmcsIHJlbW92ZSB0aGlzIHBhcmVudCBmcm9tIHRoZSBwYXRoIGFuZCBjb250aW51ZSBpdGVyYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Ugey8vbm90IHRoZSByaWdodCBvYmplY3QsIHJldHVybiBmYWxzZSBzbyBpdCB3aWxsIGNvbnRpbnVlIHRvIGl0ZXJhdGUgaW4gdGhlIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gbWFrZUNsaWNrZWROb2RlQWN0aXZlKGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNSZXNldCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChhY3RpdmUubm9kZSgpID09PSBlbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzUmVzZXQgPSByZXNldCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpc1Jlc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlID0gZDMuc2VsZWN0KGVsZW0pLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcGFuVG9UaGVOb2RlKG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2NhbGUgPSAxOy8vRklYTUUgYWRkIHNjYWxlIHRvIGhpZ2hlciBpZiBuZWVkXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZSA9IFtub2RlLnggLyAyIC0gc2NhbGUgKiBub2RlLngsIG5vZGUueSAvIDIgLSBzY2FsZSAqIG5vZGUueV07XG4gICAgICAgICAgICAgICAgdmlzLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMTI1MClcbiAgICAgICAgICAgICAgICAgICAgLmNhbGwoem9vbU9iamVjdC50cmFuc2xhdGUodHJhbnNsYXRlKS5zY2FsZShzY2FsZSkuZXZlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVRyYW5zbGF0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgICB2YXIgdHJuYXNsYXRpb25TZXQ9IFtdO1xuICAgICAgICAgICAgIGlmKG5vZGUueDwzMDApe1xuICAgICAgICAgICAgIDMwMC1ub2RlLng7XG4gICAgICAgICAgICAgfWVsc2UgaWYobm9kZS54PjMwMCl7XG4gICAgICAgICAgICAgbm9kZS54LTMwMDtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfSovXG5cbiAgICAgICAgICAgIHZhciB6b29tT2JqZWN0ID0gZDMuYmVoYXZpb3Iuem9vbSgpXG4gICAgICAgICAgICAgICAgLnRyYW5zbGF0ZShbMCwgMF0pXG4gICAgICAgICAgICAgICAgLnNjYWxlKDEpXG4gICAgICAgICAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCA4XSlcbiAgICAgICAgICAgICAgICAub24oXCJ6b29tXCIsIHpvb21lZFdyYXBwZXIpO1xuXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHpvb21lZFdyYXBwZXIoKSB7XG4gICAgICAgICAgICAgICAgLy8gZy5zdHlsZShcInN0cm9rZS13aWR0aFwiLCAxLjUgLyBkMy5ldmVudC5zY2FsZSArIFwicHhcIik7XG4gICAgICAgICAgICAgICAgdmlzLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBkMy5ldmVudC50cmFuc2xhdGUgKyBcIilzY2FsZShcIiArIGQzLmV2ZW50LnNjYWxlICsgXCIpXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlc2V0IGNhbGxlZFwiKTtcbiAgICAgICAgICAgICAgICBhY3RpdmUuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgYWN0aXZlID0gZDMuc2VsZWN0KG51bGwpO1xuXG4gICAgICAgICAgICAgICAgdmlzLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oNzUwKVxuICAgICAgICAgICAgICAgICAgICAuY2FsbCh6b29tT2JqZWN0LnRyYW5zbGF0ZShbMTUwLCAxMDBdKS5zY2FsZSgxKS5ldmVudCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VHJlZU5vZGVCeU9iamVjdChvYmplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHJlZU5vZGUgPSAkZmlsdGVyKCdmaWx0ZXInKShub2RlTGlzdCwgeydpZCc6IG9iamVjdC5pZH0sIHRydWUpWzBdO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmVlTm9kZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogICAgICAgICAgICBlbGVtLnJlbW92ZUF0dHIoXCJjYXNjYWRlLXRyZWUtdmlld1wiKTtcbiAgICAgICAgICAgICAkY29tcGlsZShlbGVtKShzY29wZSk7Ki9cblxuICAgICAgICAgICAgbm9kZUFjdGl2ZUNsZWFyTGlzdGVuZXIgPSBzY29wZS4kb24oJ2FwcDpub2RlczpjbGVhcmFjdGl2ZScsIG9uRGVhY3RpdmF0ZU5vZGVzKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gbWFrZU5vZGVBY3RpdmUoaWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZUxpc3QgPSBkMy5zZWxlY3RBbGwoXCIubm9kZS1cIiArIGlkLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChub2RlTGlzdFswXSkuYWRkQ2xhc3MoJ2FjdGl2ZS1ub2RlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFyQWxsQWN0aXZlTm9kZXMoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGVMaXN0ID0gZDMuc2VsZWN0QWxsKFwiLm5vZGUtbGFiZWxcIik7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG5vZGVMaXN0LCBmdW5jdGlvbiAodiwgaykge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQodikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1ub2RlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRGVhY3RpdmF0ZU5vZGVzKGV2LCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJBbGxBY3RpdmVOb2RlcygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZGVzdHJveUxpc3RlbmVyKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lMaXN0ZW5lcigpIHtcbiAgICAgICAgICAgICAgICBub2RlQWN0aXZlQ2xlYXJMaXN0ZW5lcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cmVlVmlld0RpcmVjdGl2ZTtcbiAgICB9XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gVHJlZVZpZXdEaXJlY3RpdmVDb250cm9sbGVyKCRyb290U2NvcGUsICRzY29wZSwgdHJlZVZpZXdTZXJ2aWNlKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLm1ha2VDYWxsQmFjayA9IG1ha2VDYWxsQmFjaztcblxuICAgICAgICBmdW5jdGlvbiBtYWtlQ2FsbEJhY2soaWRlbnRpZmllcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NhbGxlZCB0cmVldmlldyBjYWxsIGJhY2sgYWJuJyk7XG4gICAgICAgICAgICAkc2NvcGUudm1baWRlbnRpZmllcl0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qICAgICAgICBmdW5jdGlvbiBvbkluaXQoKSB7XG4gICAgICAgICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgIHJldHVybiB0cmVlVmlld1NlcnZpY2UuZ2V0U2VhcmNoZWROb2RlKCk7XG4gICAgICAgICB9LCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgY29uc29sZS5sb2cobm9kZSk7XG4gICAgICAgICB9KTtcbiAgICAgICAgIH1cblxuICAgICAgICAgb25Jbml0KCk7Ki9cbiAgICAgICAgLyogICAgICAgIHZhciBzZWFyY2hMaXN0ZW5lciA9ICRyb290U2NvcGUuJG9uKCdjaGFydDpoaWVyYXJjaHk6c2VhcmNoJywgb25TZWFyY2gpO1xuXG4gICAgICAgICBmdW5jdGlvbiBvblNlYXJjaChub2RlKSB7XG4gICAgICAgICBjb25zb2xlLmxvZyhub2RlKTtcbiAgICAgICAgIH1cblxuXG4gICAgICAgICAkcm9vdFNjb3BlLiRvbignJGRlc3Ryb3knLCBkZXN0cm95TGlzdGVuZXIpO1xuICAgICAgICAgZnVuY3Rpb24gZGVzdHJveUxpc3RlbmVyKCkge1xuICAgICAgICAgc2VhcmNoTGlzdGVuZXIoKTtcbiAgICAgICAgIH0qL1xuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA2LzEvMTcuXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ29yZ0NoYXJ0JykuZmFjdG9yeSgndHJlZVZpZXdTZXJ2aWNlJywgdHJlZVZpZXdTZXJ2aWNlKTtcblxuICAgIGZ1bmN0aW9uIHRyZWVWaWV3U2VydmljZSgkZmlsdGVyKSB7XG4gICAgICAgIHZhciBzZWxlY3RlZE5vZGUgPSBudWxsO1xuICAgICAgICB2YXIgbm9kZXMgPSBbXTtcblxuICAgICAgICB2YXIgc2VydmljZUV4cG9zYWJsZSA9IHtcbiAgICAgICAgICAgIHNldFNlYXJjaGVkTm9kZTogc2V0U2VhcmNoZWROb2RlLFxuICAgICAgICAgICAgZ2V0U2VhcmNoZWROb2RlOiBnZXRTZWFyY2hlZE5vZGUsXG4gICAgICAgICAgICBzZXROb2Rlczogc2V0Tm9kZXMsXG4gICAgICAgICAgICBwdXNoTm9kZTogcHVzaE5vZGUsXG4gICAgICAgICAgICBnZXROb2RlczogZ2V0Tm9kZXMsXG4gICAgICAgICAgICBmaW5kQnlJZDogZmluZEJ5SWRcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gc2VydmljZUV4cG9zYWJsZTtcblxuICAgICAgICBmdW5jdGlvbiBmaW5kQnlJZChpZCkge1xuICAgICAgICAgICAgdmFyIHRyZWVOb2RlID0gJGZpbHRlcignZmlsdGVyJykobm9kZXMsIHsnaWQnOiBpZH0sIHRydWUpWzBdO1xuICAgICAgICAgICAgcmV0dXJuIHRyZWVOb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0Tm9kZXMoc2V0T2Zub2Rlcykge1xuICAgICAgICAgICAgbm9kZXMgPSBzZXRPZm5vZGVzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Tm9kZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZXM7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwdXNoTm9kZShub2RlKSB7XG4gICAgICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0U2VhcmNoZWROb2RlKG5vZGUpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkTm9kZSA9IG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRTZWFyY2hlZE5vZGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWROb2RlO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiJdfQ==
