!function(){"use strict";angular.module("orgChart",[])}(),function(){"use strict";function e(e,t,n){function o(o){function r(e){var t=angular.lowercase(e);return function(e){return 0===e.name.toLowerCase().indexOf(t)}}var i=this;i.simulateQuery=!1,i.isDisabled=!1,i.noCache=!0,i.querySearch=function(n){console.log(i.searchableList);var o,a=n?i.searchableList.filter(r(n)):i.searchableList;return i.simulateQuery?(o=t.defer(),e(function(){o.resolve(a)},1e3*Math.random(),!1),o.promise):a},i.selectedItemChange=function(e){e&&(n.info("Item changed to "+JSON.stringify(e)),o.setSearchedNode(e))},i.searchTextChange=function(e){n.info("Text changed to "+e)},i.newState=function(e){alert("Sorry! You'll need to create a Constitution for "+e+" first!")}}return o.$inject=["treeViewService"],{replace:!1,restrict:"EA",controller:o,template:'<div layout-align="start center" layout="row" layout-fill> <div flex-offset="5" class="search-box-holder"> <md-autocomplete ng-disabled="vm.isDisabled" md-no-cache="vm.noCache" md-selected-item="vm.selectedItem" md-search-text-change="vm.searchTextChange(vm.searchText)" md-search-text="vm.searchText" md-selected-item-change="vm.selectedItemChange(item)" md-items="item in vm.querySearch(vm.searchText)" md-item-text="item.name" md-min-length="0" placeholder="Search People" class="auto-complete-custom"> <md-item-template> <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.name}}</span> </md-item-template> <md-not-found> No states matching "{{ctrl.searchText}}" were found. <a ng-click="ctrl.newState(ctrl.searchText)">Create a new one!</a> </md-not-found> </md-autocomplete> </div><div flex class="btn-search-holder"><button class="btn-search" type="button"><i class="fa fa-search"></i> </button></div></div>',controllerAs:"vm",scope:{},bindToController:{searchableList:"="},link:function(){}}}e.$inject=["$timeout","$q","$log"],angular.module("orgChart").directive("treeSearchBox",e)}(),function(){"use strict";function e(e){var t=this;t.isExpandAllMode=e.isExpandAllMode(),t.toggleExpandAllMode=function(){t.isExpandAllMode=e.toggleExpandAllMode()},t.zoomTrigger=function(e){t.zoomTriggerCallBack({status:e})},t.zoomScale=e.getZoomScale()}e.$inject=["toolSetService"],angular.module("orgChart").directive("treeToolSet",function(){return{replace:!1,restrict:"EA",controller:e,controllerAs:"vm",template:'<div layout="column" layout-align="center end"> <div layout="column" layout-align="space-around center" class="toolset-wrapper" flex-offset="5"> <div> <button class="toolset-btn upper-rounded" ng-click="vm.zoomTrigger(\'increment\')"> <md-tooltip md-direction="bottom">Zoom In</md-tooltip> <md-icon><i ng-class="{\'fa fa-plus\':true,\'custom-font-icon\':true}"></i></md-icon></button> </div><div> <button class="toolset-btn lower-rounded" ng-click="vm.zoomTrigger(\'decrement\')"> <md-tooltip md-direction="bottom">Zoom Out</md-tooltip> <md-icon><i ng-class="{\'fa fa-minus\':true,\'custom-font-icon\':true}"></i></md-icon></button> </div><div style="margin-top: 10px"> <button class="toolset-btn" ng-click="vm.toggleExpandAllMode()"> <md-tooltip md-direction="bottom"><span ng-if="!vm.isExpandAllMode">Expand All</span><span ng-if="vm.isExpandAllMode">Collapse All</span></md-tooltip> <md-icon><i ng-class="{\'fa fa-expand\':!vm.isExpandAllMode,\'fa fa-compress\':vm.isExpandAllMode,\'custom-font-icon\':true}"></i> </md-icon></button> </div></div></div>',scope:{},bindToController:{zoomTriggerCallBack:"&"},link:function(e,t,n,o){}}})}(),function(){"use strict";angular.module("orgChart").factory("toolSetService",function(){var e=!1,t=1;return{isExpandAllMode:function(){return e},toggleExpandAllMode:function(){return e=!e},getZoomScale:function(){return console.log("getZoom Scale",t),t},setZoomScale:function(e){t=e,console.log("zoom scale",t)},incrementZoomScale:function(){return t+=.1},decrementZoomScale:function(){return t>-2.5&&(t-=.1),t}}})}(),function(){"use strict";function e(e,n,o,r){return{restrict:"E",replace:!0,templateNamespace:"svg",controller:t,template:'<foreignObject width="260" height="220" style="overflow: visible"><div style="margin-top: 50px;margin-left:10px" ng-class="{\'active-node\':vm.isActive}" class="{{vm.nodeClass}}" ng-mouseenter="vm.whenMouseEnter()" ng-mouseleave="vm.whenMouseLeave()" ng-click="vm.makeNodeActive()"> <div layout="column" layout-align="center center"> <div ng-class="{\'node-text-main-no-image\':!vm.isImagePresent}" class="md-subhead node-text-main"><trim-word word-options ="vm.wordTrimOptions" word="vm.node.name"></trim-word></div><div> <div class="round-chip-wrapper"><img ng-if="vm.isImagePresent" ng-src="{{vm.node.image_url}}" class="round-chip"> </div></div><div  ng-class="{\'node-text-sub-no-image\':!vm.isImagePresent}" class="md-subhead node-text-sub">{{vm.node.name}}</div><div layout-align="center center" layout-fill layout="row"> <div ng-repeat="action in vm.nodeActions"> <button ng-click="vm.makeCallBack(action.callBack); $event.stopPropagation();" class="action-btn"><span></span>&nbsp;<i class="{{action.icon}}"></i></button> </div></div></div></div></foreignObject>',controllerAs:"vm",scope:{},bindToController:{nodeId:"@",nodeActions:"@"},link:{pre:function(t,n,i,a){function l(){r.$broadcast("app:nodes:clearactive",{data:""})}function c(e){n===e.target||n[0].contains(e.target)||t.$apply(function(){a.isActive=!1})}console.log(i.imagepresent),a.isImagePresent="true"==i.imagepresent,a.id=i.nodeid,a.nodeActions=angular.fromJson(i.nodeactions),console.log(a.nodeActions),a.isPinnedNode=!1,a.node=e.findById(i.nodeid),a.wordTrimOptions={word:"d",from:"0",until:"12",toolTip:"true",toolTipDirection:"top"},a.nodeClass="node-label node-"+a.node.type+" node-"+a.id,a.isExpandedView=!1,a.isActive=!1,a.whenMouseEnter=function(){console.log("mouse Entered")},a.whenMouseLeave=function(){console.log("mouse leaved")},a.togglePinnedMode=function(){a.isPinnedNode=!0,console.log(a.isPinnedNode)},a.makeCallBack=function(e){console.log(e),t.$parent.vm.makeCallBack(e,a.node)},a.makeNodeActive=function(){l(),a.isActive=!0};angular.element(n.children()[0]);o.on("click",c),t.$on("$destroy",function(){o.off("click",c)})}}}}function t(e){}e.$inject=["treeViewService","$timeout","$document","$rootScope"],t.$inject=["treeViewService"],angular.module("orgChart").directive("treeNode",e)}(),function(){"use strict";function e(e,n,o,r,i,a){return{replace:"false",templateNamespace:"svg",restrict:"E",scope:{},bindToController:{data:"=",abn:"&",del:"&",add:"&",edit:"&",nodeActions:"@",treedata:"=",searchableList:"=",imagepresent:"="},controller:t,controllerAs:"vm",link:{pre:function(t,l,c,d){function s(){f(),u()}function u(){t.$watch(function(){return i.isExpandAllMode()},function(e){e?h():g()})}function h(){m(.5),i.setZoomScale(.5),J(),S()}function g(){m(1),i.setZoomScale(1),J(),A()}function f(){t.$watch(function(){return o.getSearchedNode()},function(e){if(console.log(e),e){V(e);var t=q(e);Q(),r(function(){console.log(t.x,t.y),F(),Y(t.id),H(t)},500)}})}function m(e){var t={x:0,y:0,k:e};G([t.x,t.y],t.k)}function p(e,t){ve=e,d3.select(t).select(".ghost-area").attr("pointer-events","none"),d3.selectAll(".ghost-area").attr("class","ghost-area show"),d3.select(t).attr("class","node active-drag"),_e.selectAll("g.node").sort(function(e,t){return e.id!=ve.id?1:-1}),X.length>1&&(re=ze.links(X),ie=_e.selectAll("path.link").data(re,function(e){return e.target.id}).remove(),ae=_e.selectAll("g.node").data(X,function(e){return e.id}).filter(function(e,t){return e.id!=ve.id}).remove()),le=ze.links(ze.nodes(ve.parent)),_e.selectAll("path.link").filter(function(e,t){return e.target.id==ve.id}).remove(),me=null}function v(e,t){var n,o,r,a=xe;ne&&(clearTimeout(ne),oe=d3.transform(_e.attr("transform")),"left"==t||"right"==t?(n="left"==t?oe.translate[0]+a:oe.translate[0]-a,o=oe.translate[1]):"up"!=t&&"down"!=t||(n=oe.translate[0],o="up"==t?oe.translate[1]+a:oe.translate[1]-a),oe.scale[0],oe.scale[1],r=i.getZoomScale(),_e.transition().attr("transform","translate("+n+","+o+")scale("+r+")"),d3.select(e).select("g.node").attr("transform","translate("+n+","+o+")"),Ce.scale(r),Ce.translate([n,o]),ne=setTimeout(function(){v(e,a,t)},50))}function x(){var e=[];if(null!==ve&&null!==pe){var t=d.imagepresent?5:50;e=[{source:{x:pe.x0+12+fe.width/2,y:pe.y0+50+fe.height+10},target:{x:ve.x0+12+fe.width/2,y:ve.y0+t}}]}var n=_e.selectAll(".temp-link").data(e);n.enter().append("path").attr("class","temp-link").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),n.attr("d",d3.svg.diagonal()),n.exit().remove()}function y(){pe=null,d3.selectAll(".ghost-area").attr("class","ghost-area"),d3.select(ee).attr("class","node"),d3.select(ee).select(".ghost-area").attr("pointer-events",""),x(),null!==ve&&(T(ge),H(ve),ve=null)}function w(e){e.children&&(e.children.forEach(w),E(e))}function b(e){var t=e.children?e.children:e._children;e._children&&(e.children=e._children,e._children=null),t&&t.forEach(b)}function k(e){var t=e.children?e.children:e._children;e.children&&(e._children=e.children,e.children=null),t&&t.forEach(k)}function S(){b(ge),T(ge)}function A(){k(ge),T(ge)}function T(e){var r=d3.event&&d3.event.altKey?5e3:500,i=ze.nodes(ge).reverse();i.forEach(function(e){e.weight?e.y=12*e.weight+300*e.depth:e.y=300*e.depth});var a=_e.selectAll("g.node").data(i,function(e){return e.id||(e.id=++Ae)}),l=a.enter().append("svg:g").call(he).attr("class","node").attr("id",function(e){return"node-"+e.id}).attr("transform",function(t){return"translate("+e.x0+","+e.y0+")"}).on("click",function(e){d3.event.defaultPrevented||(E(e),T(e))});l.append("rect").attr("class","ghost-area").attr("width",fe.width).attr("height",fe.height+250).attr("opacity",.2).style("fill","transparent").attr("pointer-events","mouseover").on("mouseover",function(e){Me(e)}).on("mouseout",function(e){Ne(e)}),l.append("tree-node").attr("node",function(e){return o.pushNode(e),""}).on("click",Z).attr("nodeId",function(e){return e.id}).attr("imagePresent",function(e){return d.imagepresent}).attr("isPinnedNode","false").attr("nodeActions",c.nodeactions).each(function(){n(this)(t)}),a.transition().duration(r).attr("transform",function(e){return"translate("+e.x+","+e.y+")"});var s=a.exit().transition().duration(r).attr("transform",function(t){return"translate("+e.x+","+e.y+")"}).remove();s.select("circle").attr("r",1e-6),s.select("text").style("fill-opacity",1e-6);var u=_e.selectAll("path.link").data(ze.links(i),function(e){return e.target.id});u.enter().insert("svg:path","g").attr("class","link").attr("d",function(t){var n={x:e.x0,y:e.y0};return Oe({source:n,target:n})}).transition().duration(r).attr("d",M),u.transition().duration(r).attr("d",M).style("stroke",function(e){if("highlight-link"===e.target.class)return"#ff4136"}).style("z-index",function(e){if("highlight-link"===e.target.class)return"2000"}),u.exit().transition().duration(0).attr("d",function(t){var n={x:e.x,y:e.y};return Oe({source:n,target:n})}).remove(),i.forEach(function(e){e.x0=e.x,e.y0=e.y}),angular.copy(i,ye),o.setNodes(ye)}function E(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null)}function C(e){return e.source.children.length>1&&e.source.children[0]==e.target?"onleft":e.source.children.length>1&&e.source.children[e.source.children.length-1]==e.target?"onright":"straight"}function M(e){var t="";switch(C(e)){case"straight":t+="M"+(e.source.x+fe.width/2+12)+","+(e.source.y+fe.height+55)+"V"+(e.source.y+fe.height+fe.height/2+35)+"H"+(e.target.x+12+fe.width/2)+"V"+(e.target.y+50)+"M"+e.target.x+"12,"+(e.target.y+50);break;case"onleft":t+="M"+(e.source.x+fe.width/2+12)+","+(e.source.y+fe.height+55)+"V"+(e.source.y+fe.height+fe.height/2+35)+"H"+(e.target.x+12+fe.width/2+8)+" Q "+(e.target.x+12+fe.width/2-8+8)+","+(e.source.y+fe.height+fe.height/2+35)+" "+(e.target.x+12+fe.width/2-8+8)+","+(e.source.y+fe.height+fe.height/2+8+35)+"V"+(e.target.y+50)+"M"+e.target.x+"12,"+(e.target.y+50);break;case"onright":t+="M"+(e.source.x+12+fe.width/2)+","+(e.source.y+fe.height+55)+"V"+(e.source.y+fe.height+fe.height/2+35)+"H"+(e.target.x+12+fe.width/2-8)+" Q "+(e.target.x+12+fe.width/2)+","+(e.source.y+fe.height+fe.height/2+35)+" "+(e.target.x+12+fe.width/2)+","+(e.source.y+fe.height+fe.height/2+8+35)+"V"+(e.target.y+50)+"M"+e.target.x+"12,"+(e.target.y+50)}return t}function N(e,t){Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,9),I(e.id,t)}function _(e){var t=e.parent.children.indexOf(e);t>-1&&e.parent.children.splice(t,1),z(ge.children,e),T(e.parent),P()}function z(e,t){angular.forEach(e,function(n,o){if(t.id==n.id){var r=e.indexOf(n);r>-1&&e.splice(r,1)}else angular.isDefined(n.children)&&null!==n.children&&z(n.children,t)})}function O(e,t){angular.forEach(e,function(n,o){if(t.id==n.id){var r=e.indexOf(n);r>-1&&(e[r].name=t.name)}else angular.isDefined(n.children)&&null!==n.children&&z(n.children,t)})}function I(e,t){var n=d3.select("#node-"+e).datum();void 0===n.children&&void 0===n._children?n.children=[t]:null!=n._children?(n._children.push(t),E(n)):null!=n.children?n.children.push(t):null==n._children&&(n._children=[],n._children.push(t),E(n)),T(n)}function P(){d3.event.stopPropagation()}function Z(e){d3.event.defaultPrevented||(console.log(e),D(this)||H(e))}function V(e){var t=L(d.treedata,e.name,[]);angular.isDefined(t)?(j($e),B(t)):console.log("Searched node "+e.name+" not found"),$e=t}function B(e){angular.forEach(e,function(e,t){e.class="highlight-link",e._children&&(e.children=e._children,e._children=null),T(e)})}function j(e){angular.forEach(e,function(e,t){e.class="",e._children&&(e.children=e._children,e._children=null),T(e)})}function L(e,t,n){if(e.name===t)return n.push(e),n;if(!e.children&&!e._children)return!1;for(var o=e.children?e.children:e._children,r=0;r<o.length;r++){n.push(e);var i=L(o[r],t,n);if(i)return i;n.pop()}}function D(e){var t=!1;return Ie.node()===e&&(t=Q()),!!t||(Ie.classed("active",!1),Ie=d3.select(e).classed("active",!0),!1)}function H(e){var t=i.getZoomScale(),n=[-t*e.x,-t*e.y];console.log("node",e),console.log("node translate ",n),_e.transition().duration(1250).call(Ce.translate(n).scale(t).event)}function Q(){return console.log("reset called"),Ie.classed("active",!1),Ie=d3.select(null),!0}function q(t){return e("filter")(ye,{id:t.id},!0)[0]}function W(t){return e("filter")(ye,{id:t},!0)[0]}function J(){K(0,0)}function K(e,t){_e.transition().duration(1e3).delay(100).attr("transform",function(n){return"translate("+e+","+t+")scale("+i.getZoomScale()+")"})}function Y(e){var t=d3.selectAll(".node-"+e.toString());angular.element(t[0]).addClass("active-node")}function F(){var e=d3.selectAll(".node-label");angular.forEach(e,function(e,t){angular.element(e).removeClass("active-node")})}function G(e,t){return d3.transition().duration(250).tween("wheel.zoom",function(){var n=d3.interpolate(Ce.translate(),e),o=d3.interpolate(Ce.scale(),t);return function(e){Ce.scale(o(e)).translate(n(e)),U()}})}function R(e){var t=1,n=1,o=[be/2,Se/2],r=Ce.scaleExtent(),i=Ce.translate(),a=[],l=[],c={x:i[0],y:i[1],k:Ce.scale()};if(t="increment"===e?1:-1,(n=Ce.scale()*(1+.2*t))<r[0]||n>r[1])return!1;a=[(o[0]-c.x)/c.k,(o[1]-c.y)/c.k],c.k=n,l=[a[0]*c.k+c.x,a[1]*c.k+c.y],c.x+=o[0]-l[0],c.y+=o[1]-l[1],G(Ce.translate(),c.k)}function U(){console.log(Ce.scale()),i.setZoomScale(Ce.scale()),_e.attr("transform","translate("+Ce.translate()+")scale("+i.getZoomScale()+")")}var X,ee,te,ne,oe,re,ie,ae,le,ce,de,se,ue,he,ge,fe={width:240,height:146,horizontalSeperation:16,verticalSeperation:128},me=!1,pe=null,ve=null,xe=200,ye=[],we=[20,20,20,20],be=a.innerWidth-20-we[1]-we[3],ke=a.innerHeight,Se=600-we[0]-we[2],Ae=0,Te=(d3.scale.linear().domain([0,be]).range([0,be]),d3.scale.linear().domain([0,Se]).range([0,Se]),"0 0 "+be+" "+ke),Ee=d3.select(l[0]),$e=[],Ce=d3.behavior.zoom().translate([0,0]).scale(i.getZoomScale()).scaleExtent([.3,8]).on("zoom",U);d.wordTrimOptions={word:"d",from:"0",until:"12",toolTip:"true",toolTipDirection:"top"},l.append(n("<div class='component-container'><div layout=\"row\" layout-align=\"space-around center\"><div flex><tree-search-box searchable-list='vm.searchableList'></tree-search-box></div><div flex><tree-tool-set zoom-trigger-call-back='vm.zoomTrigger(status)'></tree-tool-set></div></div></div>")(t)),d.zoomTrigger=function(e){console.log(e),R(e)},he=d3.behavior.drag().on("dragstart",function(e){e!=ge&&(me=!0,X=ze.nodes(e),d3.event.sourceEvent.stopPropagation())}).on("drag",function(e){if(e!=ge){if(me&&p(e,ee=this),(te=d3.mouse($("svg").get(0)))[0]<20)ne=!0,v(this,"left");else if(te[0]>$("svg").width()-20)ne=!0,v(this,"right");else if(te[1]<20)ne=!0,v(this,"up");else if(te[1]>$("svg").height()-20)ne=!0,v(this,"down");else try{clearTimeout(ne)}catch(e){console.error(e)}e.x0+=d3.event.dx,e.y0+=d3.event.dy,d3.select(this).attr("transform","translate("+e.x0+","+e.y0+")"),x()}}).on("dragend",function(e){if(e!=ge)if(ee=this,pe){var t=ve.parent.children.indexOf(ve);t>-1&&ve.parent.children.splice(t,1),void 0!==pe.children||void 0!==pe._children?void 0!==pe.children?pe.children.push(ve):pe._children.push(ve):(pe.children=[],pe.children.push(ve)),y()}else y()});var Me=function(e){pe=e,x()},Ne=function(e){pe=null,x()};s();var _e=Ee.append("div").attr("layout","row").attr("layout-align","space-around center").call(function(){}).append("div").attr("flex","").attr("id","svg-box-container").call(function(){}).append("svg").attr("id","svgBox").attr("viewBox",Te).attr("style","cursor:move;").attr("width","100%").attr("height",ke).call(Ce).append("svg:g").attr("transform","translate("+(a.innerWidth/2-120)+","+Se/4+")").attr("style","cursor:pointer;").on("click",P,!1).call(d3.behavior.drag().on("dragstart",function(){}).on("drag",function(){console.log("dragged")})).append("g").attr("width",160).attr("height",120).attr("class","tree-holder"),ze=d3.layout.tree().nodeSize([fe.width+fe.horizontalSeperation,fe.height+fe.verticalSeperation]).separation(function(e,t){return e.parent==t.parent?1.25:1.5}),Oe=(d3.svg.line().x(function(e){return xScale(e.x)}).y(function(e){return yScale(e.y)}),d3.svg.diagonal().source(function(e){return{x:e.source.x+fe.width/2,y:e.source.y+(fe.height+10)}}).target(function(e){return{x:e.target.x+fe.width/2,y:e.target.y-("true"==c.imagepresent?45:0)}}).projection(function(e){return[e.x+0,e.y+0]}));(ge=d.treedata).x0=Se/2,ge.y0=0,console.log(ge),ge.children.forEach(w),T(ge),r(function(){},300);var Ie=d3.select(null);ce=t.$on("app:nodes:clearactive",function(e,t){F()}),de=t.$on("app:nodes:delete",function(e,t){console.log(t),_(W(t.nodeID))}),se=t.$on("app:nodes:add::after",function(e,t){N(W(t.parentNode.id),t.lastAddedNode)}),ue=t.$on("app:nodes:update::after",function(e,t){O(ge.children,t.lastEditedNode),T(t.lastEditedNode),P()}),t.$on("$destroy",function(){ce(),de(),se(),ue()})}}}}function t(e,t,n){var o=this;o.makeCallBack=function(e,n){console.log("called treeview call back abn"),t.vm[e]({node:n})},console.log(o.searchableList)}e.$inject=["$filter","$compile","treeViewService","$timeout","toolSetService","$window"],t.$inject=["$rootScope","$scope","treeViewService"],angular.module("orgChart").directive("treeView",e)}(),function(){"use strict";function e(e){var t=null,n=[];return{setSearchedNode:function(e){t=e},getSearchedNode:function(){return t},setNodes:function(e){n=e},pushNode:function(e){n.push(e)},getNodes:function(){return n},findById:function(t){return e("filter")(n,{id:t},!0)[0]}}}e.$inject=["$filter"],angular.module("orgChart").factory("treeViewService",e)}(),function(){"use strict";function e(){}angular.module("orgChart").directive("trimWord",function(){return{restrict:"E",template:'<span ng-bind="vm.parsedText"><md-tooltip ng-if="vm.isToolTipNeed()" md-direction="vm.wordOptions.toolTipDirection">{{::vm.word}}</md-tooltip></span>',scope:{},controller:e,controllerAs:"vm",link:function(e,t,n,o){function r(){e.$watch(angular.bind(o,function(){return o.word}),function(e){console.log("word change to "+e),a()})}function i(){var e=parseInt(o.wordOptions.from),t=parseInt(o.wordOptions.until);return o.word.substring(e,t)}function a(){o.parsedText=i(),o.word.length>parseInt(o.wordOptions.until)?o.parsedText=o.parsedText.concat(" ..."):o.parsedText}o.isToolTipNeed=function(){return"true"==o.wordOptions.toolTip},r(),a()},bindToController:{wordOptions:"=",word:"="}}})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZ2NoYXJ0Lm1vZHVsZS5qcyIsImRpcmVjdGl2ZXMvc2VhcmNoYm94LmRpcmVjdGl2ZS5qcyIsImRpcmVjdGl2ZXMvdG9vbHNldC5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3Rvb2xzZXQuc2VydmljZS5qcyIsImRpcmVjdGl2ZXMvdHJlZW5vZGUuZGlyZWN0aXZlLmpzIiwiZGlyZWN0aXZlcy90cmVldmlldy5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3RyZWV2aWV3LnNlcnZpY2UuanMiLCJkaXJlY3RpdmVzL3RyaW13b3JkLmRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwidHJlZVNlYXJjaEJveCIsIiR0aW1lb3V0IiwiJHEiLCIkbG9nIiwiQ2FzY2FkZVRyZWVTZWFyY2hCb3hDb250cm9sbGVyIiwidHJlZVZpZXdTZXJ2aWNlIiwiY3JlYXRlRmlsdGVyRm9yIiwicXVlcnkiLCJsb3dlcmNhc2VRdWVyeSIsImxvd2VyY2FzZSIsInN0YXRlIiwibmFtZSIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsInZtIiwidGhpcyIsInNpbXVsYXRlUXVlcnkiLCJpc0Rpc2FibGVkIiwibm9DYWNoZSIsInF1ZXJ5U2VhcmNoIiwiY29uc29sZSIsImxvZyIsInNlYXJjaGFibGVMaXN0IiwiZGVmZXJyZWQiLCJyZXN1bHRzIiwiZmlsdGVyIiwiZGVmZXIiLCJyZXNvbHZlIiwiTWF0aCIsInJhbmRvbSIsInByb21pc2UiLCJzZWxlY3RlZEl0ZW1DaGFuZ2UiLCJpdGVtIiwiaW5mbyIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXRTZWFyY2hlZE5vZGUiLCJzZWFyY2hUZXh0Q2hhbmdlIiwidGV4dCIsIm5ld1N0YXRlIiwiYWxlcnQiLCJyZXBsYWNlIiwicmVzdHJpY3QiLCJjb250cm9sbGVyIiwidGVtcGxhdGUiLCJjb250cm9sbGVyQXMiLCJzY29wZSIsImJpbmRUb0NvbnRyb2xsZXIiLCJsaW5rIiwiZGlyZWN0aXZlIiwiVHJlZVRvb2xTZXQiLCJ0b29sU2V0U2VydmljZSIsImlzRXhwYW5kQWxsTW9kZSIsInRvZ2dsZUV4cGFuZEFsbE1vZGUiLCJ6b29tVHJpZ2dlciIsInN0YXR1cyIsInpvb21UcmlnZ2VyQ2FsbEJhY2siLCJ6b29tU2NhbGUiLCJnZXRab29tU2NhbGUiLCJlbGVtIiwiYXR0ciIsImZhY3RvcnkiLCJpc0FsbEV4cGFuZGVkTW9kZSIsInNldFpvb21TY2FsZSIsInNjYWxlIiwiaW5jcmVtZW50Wm9vbVNjYWxlIiwiZGVjcmVtZW50Wm9vbVNjYWxlIiwidHJlZU5vZGUiLCIkZG9jdW1lbnQiLCIkcm9vdFNjb3BlIiwidGVtcGxhdGVOYW1lc3BhY2UiLCJDYXNjYWRlVHJlZU5vZGVDb250cm9sbGVyIiwibm9kZUlkIiwibm9kZUFjdGlvbnMiLCJwcmUiLCJhdHRycyIsImNsZWFyQWxsT3RoZXJBY3RpdmVOb2RlcyIsIiRicm9hZGNhc3QiLCJkYXRhIiwib25Eb2N1bWVudENsaWNrIiwiZXYiLCJ0YXJnZXQiLCJjb250YWlucyIsIiRhcHBseSIsImlzQWN0aXZlIiwiaW1hZ2VwcmVzZW50IiwiaXNJbWFnZVByZXNlbnQiLCJpZCIsIm5vZGVpZCIsImZyb21Kc29uIiwibm9kZWFjdGlvbnMiLCJpc1Bpbm5lZE5vZGUiLCJub2RlIiwiZmluZEJ5SWQiLCJ3b3JkVHJpbU9wdGlvbnMiLCJ3b3JkIiwiZnJvbSIsInVudGlsIiwidG9vbFRpcCIsInRvb2xUaXBEaXJlY3Rpb24iLCJub2RlQ2xhc3MiLCJ0eXBlIiwiaXNFeHBhbmRlZFZpZXciLCJ3aGVuTW91c2VFbnRlciIsIndoZW5Nb3VzZUxlYXZlIiwidG9nZ2xlUGlubmVkTW9kZSIsIm1ha2VDYWxsQmFjayIsImNhbGxCYWNrRnVuY05hbWUiLCIkcGFyZW50IiwibWFrZU5vZGVBY3RpdmUiLCJlbGVtZW50IiwiY2hpbGRyZW4iLCJvbiIsIiRvbiIsIm9mZiIsInRyZWVWaWV3IiwiJGZpbHRlciIsIiRjb21waWxlIiwiJHdpbmRvdyIsImFibiIsImRlbCIsImFkZCIsImVkaXQiLCJ0cmVlZGF0YSIsIlRyZWVWaWV3RGlyZWN0aXZlQ29udHJvbGxlciIsImFjdGl2YXRlV2F0Y2hlcnMiLCJvblNlYXJjaFdhdGNoIiwib25FeHBhbmRXYXRjaCIsIiR3YXRjaCIsImlzSW5FeHBhbmRBbGxNb2RlIiwiZXhwYW5kQWxsSW5DaGFpbiIsImNvbGxhcHNlQWxsSW5DaGFpbiIsImZvcmNlU2NhbGUiLCJjZW50ZXJUaGVSb290IiwiZXhwYW5kQWxsIiwiY29sbGFwc2VBbGwiLCJnZXRTZWFyY2hlZE5vZGUiLCJoaWdobGlnaHRQYXRoIiwicmVzb2x2ZWROb2RlIiwiZ2V0VHJlZU5vZGVCeU9iamVjdCIsInJlc2V0IiwieCIsInkiLCJjbGVhckFsbEFjdGl2ZU5vZGVzIiwicGFuVG9UaGVOb2RlIiwidmlldyIsImsiLCJpbnRlcnBvbGF0ZVpvb20iLCJpbml0aWF0ZURyYWciLCJkIiwiZG9tTm9kZSIsImRyYWdnaW5nTm9kZSIsImQzIiwic2VsZWN0Iiwic2VsZWN0QWxsIiwidmlzIiwic29ydCIsImEiLCJiIiwibm9kZXMiLCJsZW5ndGgiLCJsaW5rcyIsInRyZWUiLCJub2RlUGF0aHMiLCJyZW1vdmUiLCJub2Rlc0V4aXQiLCJpIiwicGFyZW50TGluayIsInBhcmVudCIsImRyYWdTdGFydGVkIiwicGFuIiwiZGlyZWN0aW9uIiwidHJhbnNsYXRlWCIsInRyYW5zbGF0ZVkiLCJzcGVlZCIsInBhblNwZWVkIiwicGFuVGltZXIiLCJjbGVhclRpbWVvdXQiLCJ0cmFuc2xhdGVDb29yZHMiLCJ0cmFuc2Zvcm0iLCJ0cmFuc2xhdGUiLCJ0cmFuc2l0aW9uIiwiem9vbSIsInNldFRpbWVvdXQiLCJ1cGRhdGVUZW1wQ29ubmVjdG9yIiwic2VsZWN0ZWROb2RlIiwiZXh0ZW5kaW5nVmFsdWUiLCJzb3VyY2UiLCJ4MCIsIm5vZGVCb3VuZGFyaWVzIiwid2lkdGgiLCJ5MCIsImhlaWdodCIsImVudGVyIiwiYXBwZW5kIiwic3ZnIiwiZGlhZ29uYWwiLCJleGl0IiwiZW5kRHJhZyIsInVwZGF0ZSIsInJvb3QiLCJ0b2dnbGVBbGwiLCJmb3JFYWNoIiwidG9nZ2xlIiwiZXhwYW5kQWxsQWZ0ZXIiLCJfY2hpbGRyZW4iLCJjb2xsYXBzZUFsbEFmdGVyIiwiZHVyYXRpb24iLCJldmVudCIsImFsdEtleSIsInJldmVyc2UiLCJ3ZWlnaHQiLCJkZXB0aCIsIm5vZGVFbnRlciIsImNhbGwiLCJkcmFnTGlzdGVuZXIiLCJkZWZhdWx0UHJldmVudGVkIiwic3R5bGUiLCJvdmVySW5HaG9zdEFyZWEiLCJvdXRPZkdob3N0QXJlYSIsInB1c2hOb2RlIiwib25DbGlja2VkTm9kZSIsImVhY2giLCJub2RlRXhpdCIsImluc2VydCIsIm8iLCJnZW5lcmF0ZVBhdGgiLCJjbGFzcyIsImNvcHkiLCJub2RlTGlzdCIsInNldE5vZGVzIiwiZGV0ZXJtaW5lTm9kZVJlbGF0aXZlTG9jYXRpb24iLCJwYXRoU3RyaW5nIiwib25BZGROb2RlIiwiY2hpbGQiLCJ0b1N0cmluZyIsInN1YnN0ciIsImFkZENoaWxkTm9kZSIsIm9uUmVtb3ZlTm9kZSIsImluZGV4Iiwic3BsaWNlIiwiZmluZEludGhlUm9vdEFuZERlc3Rvcm95Iiwic3RvcFByb3BvZ2F0aW9uIiwibGlzdCIsInZhbHVlIiwia2V5IiwiaXNEZWZpbmVkIiwiZmluZEludGhlUm9vdEFuZFJlcGxhY2VOYW1lIiwicGFyZW50SWQiLCJuZXdOb2RlIiwibm9kZURhdGEiLCJkYXR1bSIsInVuZGVmaW5lZCIsInB1c2giLCJzdG9wUHJvcGFnYXRpb24iLCJtYWtlQ2xpY2tlZE5vZGVBY3RpdmUiLCJwYXRoIiwic2VhcmNoV2l0aGluVHJlZSIsImNsZWFySGlnaExpZ2h0TGlua3MiLCJsYXN0U2VhcmNoZWRQYXRoIiwiaGlnaGxpZ2h0TGlua3MiLCJzZWFyY2hLZXkiLCJmb3VuZCIsInBvcCIsImlzUmVzZXQiLCJhY3RpdmUiLCJjbGFzc2VkIiwib2JqZWN0IiwiZ2V0VHJlZU5vZGVCeUlEIiwidHJhbnNmb3JtTm9kZSIsInhQb3MiLCJ5UG9zIiwiZGVsYXkiLCJhZGRDbGFzcyIsInYiLCJyZW1vdmVDbGFzcyIsInR3ZWVuIiwiaVRyYW5zbGF0ZSIsImludGVycG9sYXRlIiwiaVNjYWxlIiwidCIsInpvb21lZCIsInpvb21DbGljayIsInRhcmdldF96b29tIiwiY2VudGVyIiwidyIsImgiLCJleHRlbnQiLCJzY2FsZUV4dGVudCIsInRyYW5zbGF0ZTAiLCJsIiwicmVsQ29vcmRzIiwibm9kZUFjdGl2ZUNsZWFyTGlzdGVuZXIiLCJub2RlRGVsZXRlTGlzdGVuZXIiLCJub2RlQWZ0ZXJBZGRMaXN0ZW5lciIsIm5vZGVBZnRlclVwZGF0ZUxpc3RlbmVyIiwiaG9yaXpvbnRhbFNlcGVyYXRpb24iLCJ2ZXJ0aWNhbFNlcGVyYXRpb24iLCJtIiwiaW5uZXJXaWR0aCIsImlIZWlnaHQiLCJpbm5lckhlaWdodCIsInZpZXdCb3hCb3VuZGFyeSIsImxpbmVhciIsImRvbWFpbiIsInJhbmdlIiwid3JhcHBlckVsZW1lbnQiLCJiZWhhdmlvciIsImRyYWciLCJzb3VyY2VFdmVudCIsIm1vdXNlIiwiJCIsImdldCIsImUiLCJlcnJvciIsImR4IiwiZHkiLCJsYXlvdXQiLCJub2RlU2l6ZSIsInNlcGFyYXRpb24iLCJsaW5lIiwieFNjYWxlIiwieVNjYWxlIiwicHJvamVjdGlvbiIsIm5vZGVJRCIsInBhcmVudE5vZGUiLCJsYXN0QWRkZWROb2RlIiwibGFzdEVkaXRlZE5vZGUiLCIkc2NvcGUiLCJpZGVudGlmaWVyIiwic2V0T2Zub2RlcyIsImdldE5vZGVzIiwidHJpbVdvcmRDb250cm9sbGVyIiwiYmluZCIsInBhcnNlVGV4dCIsInRyaW1Xb3JkIiwiZnJvbVZhbHVlIiwicGFyc2VJbnQiLCJ3b3JkT3B0aW9ucyIsInRvVmFsdWUiLCJzdWJzdHJpbmciLCJwYXJzZWRUZXh0IiwiY29uY2F0IiwiaXNUb29sVGlwTmVlZCJdLCJtYXBwaW5ncyI6IkNBR0EsV0FDQSxhQUNBQSxRQUFBQyxPQUFBLGtCQ0ZBLFdBQ0EsYUFLQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQXVCQSxTQUFBQyxF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QW5VLEVBQUFvVSxZQUFBbFAsTUFDQW1QLEVBQUFGLFNBQUFuVSxFQUFBb1UsWUFBQWpQLE9BQ0EsT0FBQW5GLEVBQUFpRixLQUFBcVAsVUFBQUosRUFBQUcsR0FPQSxTQUFBTCxJQUNBaFUsRUFBQXVVLFdBQUFOLElBQ0FqVSxFQUFBaUYsS0FBQWlFLE9BQUFpTCxTQUFBblUsRUFBQW9VLFlBQUFqUCxPQUFBbkYsRUFBQXVVLFdBQUF2VSxFQUFBdVUsV0FBQUMsT0FBQSxRQUFBeFUsRUFBQXVVLFdBOUJBdlUsRUFBQXlVLGNBd0JBLFdBQ0EsTUFBQSxRQUFBelUsRUFBQW9VLFlBQUFoUCxTQXBCQTJCLElBQ0FpTixLQWhCQS9SLGtCQUNBbVMsWUFBQSxJQUNBblAsS0FBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA3LzEwLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnLFtdKTtcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNi8xLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdvcmdDaGFydCcpLmRpcmVjdGl2ZSgndHJlZVNlYXJjaEJveCcsIHRyZWVTZWFyY2hCb3gpO1xuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIHRyZWVTZWFyY2hCb3goJHRpbWVvdXQsICRxLCAkbG9nKSB7XG5cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBDYXNjYWRlVHJlZVNlYXJjaEJveENvbnRyb2xsZXIsXG4gICAgICAgICAgICAvLyB0ZW1wbGF0ZVVybDogJ3NlYXJjaGJveC50bXBsLmh0bWwnLFxuICAgICAgICAgICAgdGVtcGxhdGU6JzxkaXYgbGF5b3V0LWFsaWduPVwic3RhcnQgY2VudGVyXCIgbGF5b3V0PVwicm93XCIgbGF5b3V0LWZpbGw+IDxkaXYgZmxleC1vZmZzZXQ9XCI1XCIgY2xhc3M9XCJzZWFyY2gtYm94LWhvbGRlclwiPiA8bWQtYXV0b2NvbXBsZXRlIG5nLWRpc2FibGVkPVwidm0uaXNEaXNhYmxlZFwiIG1kLW5vLWNhY2hlPVwidm0ubm9DYWNoZVwiIG1kLXNlbGVjdGVkLWl0ZW09XCJ2bS5zZWxlY3RlZEl0ZW1cIiBtZC1zZWFyY2gtdGV4dC1jaGFuZ2U9XCJ2bS5zZWFyY2hUZXh0Q2hhbmdlKHZtLnNlYXJjaFRleHQpXCIgbWQtc2VhcmNoLXRleHQ9XCJ2bS5zZWFyY2hUZXh0XCIgbWQtc2VsZWN0ZWQtaXRlbS1jaGFuZ2U9XCJ2bS5zZWxlY3RlZEl0ZW1DaGFuZ2UoaXRlbSlcIiBtZC1pdGVtcz1cIml0ZW0gaW4gdm0ucXVlcnlTZWFyY2godm0uc2VhcmNoVGV4dClcIiBtZC1pdGVtLXRleHQ9XCJpdGVtLm5hbWVcIiBtZC1taW4tbGVuZ3RoPVwiMFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIFBlb3BsZVwiIGNsYXNzPVwiYXV0by1jb21wbGV0ZS1jdXN0b21cIj4gPG1kLWl0ZW0tdGVtcGxhdGU+IDxzcGFuIG1kLWhpZ2hsaWdodC10ZXh0PVwiY3RybC5zZWFyY2hUZXh0XCIgbWQtaGlnaGxpZ2h0LWZsYWdzPVwiXmlcIj57e2l0ZW0ubmFtZX19PC9zcGFuPiA8L21kLWl0ZW0tdGVtcGxhdGU+IDxtZC1ub3QtZm91bmQ+IE5vIHN0YXRlcyBtYXRjaGluZyBcInt7Y3RybC5zZWFyY2hUZXh0fX1cIiB3ZXJlIGZvdW5kLiA8YSBuZy1jbGljaz1cImN0cmwubmV3U3RhdGUoY3RybC5zZWFyY2hUZXh0KVwiPkNyZWF0ZSBhIG5ldyBvbmUhPC9hPiA8L21kLW5vdC1mb3VuZD4gPC9tZC1hdXRvY29tcGxldGU+IDwvZGl2PjxkaXYgZmxleCBjbGFzcz1cImJ0bi1zZWFyY2gtaG9sZGVyXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi1zZWFyY2hcIiB0eXBlPVwiYnV0dG9uXCI+PGkgY2xhc3M9XCJmYSBmYS1zZWFyY2hcIj48L2k+IDwvYnV0dG9uPjwvZGl2PjwvZGl2PicsXG4gICAgICAgICAgICAvLyB0ZW1wbGF0ZTonPGRpdiBsYXlvdXQtYWxpZ249XCJzdGFydCBjZW50ZXJcIiBsYXlvdXQ9XCJyb3dcIiBsYXlvdXQtZmlsbD4gPGRpdiBmbGV4LW9mZnNldD1cIjVcIiBmbGV4PVwiNjBcIj4gPGRpdiBjbGFzcz1cInNlYXJjaC1ncm91cCBhY3RpdmVcIj4gPGRpdj4gPGlucHV0IGlkPVwic2VhcmNoX3R4dFwiIG5hbWU9XCJzZWFyY2hfdHh0XCIgdHlwZT1cInRleHRcIiBvbmtleXVwPVwidmlld0VtcGxveWVlKDEpO1wiIHBsYWNlaG9sZGVyPVwiU2VhcmNoXCI+IDxidXR0b24gY2xhc3M9XCJidG4tc2VhcmNoXCIgdHlwZT1cImJ1dHRvblwiIG9uY2xpY2s9XCJ2aWV3RW1wbG95ZWUoMSk7XCI+PC9idXR0b24+IDwvZGl2PjxhIGNsYXNzPVwiYWR2YWNlXCIgaHJlZj1cIiNcIj5BZHZhbmNlPC9hPiA8L2Rpdj4gPC9kaXY+PC9kaXY+JyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgICAgICBzZWFyY2hhYmxlTGlzdDonPSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgICAgICAgZnVuY3Rpb24gbGluaygpIHtcblxuICAgICAgICB9XG5cbiAgICAgICAgLypAbmdJbmplY3QqL1xuICAgICAgICBmdW5jdGlvbiBDYXNjYWRlVHJlZVNlYXJjaEJveENvbnRyb2xsZXIodHJlZVZpZXdTZXJ2aWNlKSB7XG5cbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgICAgICB2bS5zaW11bGF0ZVF1ZXJ5ID0gZmFsc2U7XG4gICAgICAgICAgICB2bS5pc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB2bS5ub0NhY2hlID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gbGlzdCBvZiBgc3RhdGVgIHZhbHVlL2Rpc3BsYXkgb2JqZWN0c1xuICAgICAgICAgICAgdm0ucXVlcnlTZWFyY2ggPSBxdWVyeVNlYXJjaDtcbiAgICAgICAgICAgIHZtLnNlbGVjdGVkSXRlbUNoYW5nZSA9IHNlbGVjdGVkSXRlbUNoYW5nZTtcbiAgICAgICAgICAgIHZtLnNlYXJjaFRleHRDaGFuZ2UgPSBzZWFyY2hUZXh0Q2hhbmdlO1xuXG4gICAgICAgICAgICB2bS5uZXdTdGF0ZSA9IG5ld1N0YXRlO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBuZXdTdGF0ZShzdGF0ZSkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiU29ycnkhIFlvdSdsbCBuZWVkIHRvIGNyZWF0ZSBhIENvbnN0aXR1dGlvbiBmb3IgXCIgKyBzdGF0ZSArIFwiIGZpcnN0IVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICAgICAgICAvLyBJbnRlcm5hbCBtZXRob2RzXG4gICAgICAgICAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTZWFyY2ggZm9yIHN0YXRlcy4uLiB1c2UgJHRpbWVvdXQgdG8gc2ltdWxhdGVcbiAgICAgICAgICAgICAqIHJlbW90ZSBkYXRhc2VydmljZSBjYWxsLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBxdWVyeVNlYXJjaChxdWVyeSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZtLnNlYXJjaGFibGVMaXN0KTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IHF1ZXJ5ID8gdm0uc2VhcmNoYWJsZUxpc3QuZmlsdGVyKGNyZWF0ZUZpbHRlckZvcihxdWVyeSkpIDogdm0uc2VhcmNoYWJsZUxpc3QsXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkO1xuICAgICAgICAgICAgICAgIGlmICh2bS5zaW11bGF0ZVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgTWF0aC5yYW5kb20oKSAqIDEwMDAsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBzZWFyY2hUZXh0Q2hhbmdlKHRleHQpIHtcbiAgICAgICAgICAgICAgICAkbG9nLmluZm8oJ1RleHQgY2hhbmdlZCB0byAnICsgdGV4dCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNlbGVjdGVkSXRlbUNoYW5nZShpdGVtKSB7XG5cbiAgICAgICAgICAgICAgICBpZihpdGVtKXtcbiAgICAgICAgICAgICAgICAgICAgJGxvZy5pbmZvKCdJdGVtIGNoYW5nZWQgdG8gJyArIEpTT04uc3RyaW5naWZ5KGl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgdHJlZVZpZXdTZXJ2aWNlLnNldFNlYXJjaGVkTm9kZShpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4dHJhY3ROb2RlcyhsaXN0T2ZOb2Rlcykge1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RPZk5vZGVzLm1hcChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub2RlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TG93ZXJDYXNlOiBub2RlLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZSBmaWx0ZXIgZnVuY3Rpb24gZm9yIGEgcXVlcnkgc3RyaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbHRlckZvcihxdWVyeSkge1xuICAgICAgICAgICAgICAgIHZhciBsb3dlcmNhc2VRdWVyeSA9IGFuZ3VsYXIubG93ZXJjYXNlKHF1ZXJ5KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBmaWx0ZXJGbihzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHN0YXRlLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGxvd2VyY2FzZVF1ZXJ5KSA9PT0gMCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG5cblxufSkoKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDYvNS8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5kaXJlY3RpdmUoJ3RyZWVUb29sU2V0JywgdHJlZVRvb2xTZXQpO1xuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIHRyZWVUb29sU2V0KCkge1xuXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXBsYWNlOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogVHJlZVRvb2xTZXQsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAvLyB0ZW1wbGF0ZVVybDogJ3Rvb2xzZXQudG1wbC5odG1sJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBsYXlvdXQ9XCJjb2x1bW5cIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgZW5kXCI+JyArXG4gICAgICAgICAgICAnIDxkaXYgbGF5b3V0PVwiY29sdW1uXCIgbGF5b3V0LWFsaWduPVwic3BhY2UtYXJvdW5kIGNlbnRlclwiIGNsYXNzPVwidG9vbHNldC13cmFwcGVyXCIgZmxleC1vZmZzZXQ9XCI1XCI+JyArXG4gICAgICAgICAgICAnIDxkaXY+IDxidXR0b24gY2xhc3M9XCJ0b29sc2V0LWJ0biB1cHBlci1yb3VuZGVkXCIgbmctY2xpY2s9XCJ2bS56b29tVHJpZ2dlcihcXCdpbmNyZW1lbnRcXCcpXCI+IDxtZC10b29sdGlwIG1kLWRpcmVjdGlvbj1cImJvdHRvbVwiPlpvb20gSW48L21kLXRvb2x0aXA+IDxtZC1pY29uPjxpIG5nLWNsYXNzPVwie1xcJ2ZhIGZhLXBsdXNcXCc6dHJ1ZSxcXCdjdXN0b20tZm9udC1pY29uXFwnOnRydWV9XCI+PC9pPjwvbWQtaWNvbj48L2J1dHRvbj4gPC9kaXY+JyArXG4gICAgICAgICAgICAnPGRpdj4gPGJ1dHRvbiBjbGFzcz1cInRvb2xzZXQtYnRuIGxvd2VyLXJvdW5kZWRcIiBuZy1jbGljaz1cInZtLnpvb21UcmlnZ2VyKFxcJ2RlY3JlbWVudFxcJylcIj4gPG1kLXRvb2x0aXAgbWQtZGlyZWN0aW9uPVwiYm90dG9tXCI+Wm9vbSBPdXQ8L21kLXRvb2x0aXA+IDxtZC1pY29uPjxpIG5nLWNsYXNzPVwie1xcJ2ZhIGZhLW1pbnVzXFwnOnRydWUsXFwnY3VzdG9tLWZvbnQtaWNvblxcJzp0cnVlfVwiPjwvaT48L21kLWljb24+PC9idXR0b24+IDwvZGl2PicgK1xuICAgICAgICAgICAgJzxkaXYgc3R5bGU9XCJtYXJnaW4tdG9wOiAxMHB4XCI+IDxidXR0b24gY2xhc3M9XCJ0b29sc2V0LWJ0blwiIG5nLWNsaWNrPVwidm0udG9nZ2xlRXhwYW5kQWxsTW9kZSgpXCI+IDxtZC10b29sdGlwIG1kLWRpcmVjdGlvbj1cImJvdHRvbVwiPjxzcGFuIG5nLWlmPVwiIXZtLmlzRXhwYW5kQWxsTW9kZVwiPkV4cGFuZCBBbGw8L3NwYW4+PHNwYW4gbmctaWY9XCJ2bS5pc0V4cGFuZEFsbE1vZGVcIj5Db2xsYXBzZSBBbGw8L3NwYW4+PC9tZC10b29sdGlwPiA8bWQtaWNvbj48aSBuZy1jbGFzcz1cIntcXCdmYSBmYS1leHBhbmRcXCc6IXZtLmlzRXhwYW5kQWxsTW9kZSxcXCdmYSBmYS1jb21wcmVzc1xcJzp2bS5pc0V4cGFuZEFsbE1vZGUsXFwnY3VzdG9tLWZvbnQtaWNvblxcJzp0cnVlfVwiPjwvaT4gPC9tZC1pY29uPjwvYnV0dG9uPiA8L2Rpdj4nICtcbiAgICAgICAgICAgICc8L2Rpdj48L2Rpdj4nLFxuICAgICAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuICAgICAgICAgICAgICAgIHpvb21UcmlnZ2VyQ2FsbEJhY2s6ICcmJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpbms6IGxpbmtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW0sIGF0dHIsIHZtKSB7XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiBUcmVlVG9vbFNldCh0b29sU2V0U2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmlzRXhwYW5kQWxsTW9kZSA9IHRvb2xTZXRTZXJ2aWNlLmlzRXhwYW5kQWxsTW9kZSgpO1xuICAgICAgICB2bS50b2dnbGVFeHBhbmRBbGxNb2RlID0gdG9nZ2xlRXhwYW5kQWxsTW9kZTtcbiAgICAgICAgdm0uem9vbVRyaWdnZXIgPSB6b29tVHJpZ2dlcjtcbi8qICAgICAgICB2bS5pbmNyZW1lbnRab29tU2NhbGUgPSBpbmNyZW1lbnRab29tU2NhbGU7XG4gICAgICAgIHZtLmRlY3JlbWVudFpvb21TY2FsZSA9IGRlY3JlbWVudFpvb21TY2FsZTsqL1xuICAgICAgICB2bS56b29tU2NhbGUgPSB0b29sU2V0U2VydmljZS5nZXRab29tU2NhbGUoKTtcblxuICAgICAgICBmdW5jdGlvbiB0b2dnbGVFeHBhbmRBbGxNb2RlKCkge1xuICAgICAgICAgICAgdm0uaXNFeHBhbmRBbGxNb2RlID0gdG9vbFNldFNlcnZpY2UudG9nZ2xlRXhwYW5kQWxsTW9kZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHpvb21UcmlnZ2VyKHN0YXR1cykge1xuICAgICAgICAgICAgdm0uem9vbVRyaWdnZXJDYWxsQmFjayh7c3RhdHVzOnN0YXR1c30pO1xuICAgICAgICB9XG5cbi8qICAgICAgICBmdW5jdGlvbiBpbmNyZW1lbnRab29tU2NhbGUoKSB7XG4gICAgICAgICAgICB2bS56b29tU2NhbGUgPSB0b29sU2V0U2VydmljZS5pbmNyZW1lbnRab29tU2NhbGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRlY3JlbWVudFpvb21TY2FsZSgpIHtcbiAgICAgICAgICAgIHZtLnpvb21TY2FsZSA9IHRvb2xTZXRTZXJ2aWNlLmRlY3JlbWVudFpvb21TY2FsZSgpO1xuICAgICAgICB9Ki9cbiAgICB9XG5cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA2LzUvMTcuXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ29yZ0NoYXJ0JykuZmFjdG9yeSgndG9vbFNldFNlcnZpY2UnLCB0b29sU2V0U2VydmljZSk7XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gdG9vbFNldFNlcnZpY2UoKSB7XG5cbiAgICAgICAgdmFyIGlzQWxsRXhwYW5kZWRNb2RlID0gZmFsc2U7XG4gICAgICAgIHZhciBMT1dFU1RfWk9PTV9TQ0FMRSA9IDAuMztcbiAgICAgICAgdmFyIERFRkFVTFRfWk9PTV9TQ0FMRSA9IDE7XG4gICAgICAgIHZhciB6b29tU2NhbGUgPSBERUZBVUxUX1pPT01fU0NBTEU7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzRXhwYW5kQWxsTW9kZTogaXNFeHBhbmRBbGxNb2RlLFxuICAgICAgICAgICAgdG9nZ2xlRXhwYW5kQWxsTW9kZTogdG9nZ2xlRXhwYW5kQWxsTW9kZSxcbiAgICAgICAgICAgIGdldFpvb21TY2FsZTogZ2V0Wm9vbVNjYWxlLFxuICAgICAgICAgICAgc2V0Wm9vbVNjYWxlOiBzZXRab29tU2NhbGUsXG4gICAgICAgICAgICBpbmNyZW1lbnRab29tU2NhbGU6IGluY3JlbWVudFpvb21TY2FsZSxcbiAgICAgICAgICAgIGRlY3JlbWVudFpvb21TY2FsZTogZGVjcmVtZW50Wm9vbVNjYWxlXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gaXNFeHBhbmRBbGxNb2RlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGlzQWxsRXhwYW5kZWRNb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlRXhwYW5kQWxsTW9kZSgpIHtcbiAgICAgICAgICAgIGlzQWxsRXhwYW5kZWRNb2RlID0gIWlzQWxsRXhwYW5kZWRNb2RlO1xuICAgICAgICAgICAgcmV0dXJuIGlzQWxsRXhwYW5kZWRNb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Wm9vbVNjYWxlKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldFpvb20gU2NhbGUnLHpvb21TY2FsZSk7XG4gICAgICAgICAgICByZXR1cm4gem9vbVNjYWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0Wm9vbVNjYWxlKHNjYWxlKSB7XG4gICAgICAgICAgICBpZiAoc2NhbGUgPiAxKSB7XG4gICAgICAgICAgICAgICAgLy8gem9vbVNjYWxlID0gc2NhbGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHpvb21TY2FsZSA9IExPV0VTVF9aT09NX1NDQUxFICsgc2NhbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB6b29tU2NhbGUgPSBzY2FsZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd6b29tIHNjYWxlJywgem9vbVNjYWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGluY3JlbWVudFpvb21TY2FsZSgpIHtcbiAgICAgICAgICAgIHpvb21TY2FsZSArPSAwLjE7XG5cbiAgICAgICAgICAgIHJldHVybiB6b29tU2NhbGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZWNyZW1lbnRab29tU2NhbGUoKSB7XG4gICAgICAgICAgICBpZiAoem9vbVNjYWxlID4gLTIuNSkge1xuICAgICAgICAgICAgICAgIHpvb21TY2FsZSAtPSAwLjE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB6b29tU2NhbGU7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNS8zMS8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgYW5ndWxhci5tb2R1bGUoJ29yZ0NoYXJ0JykuZGlyZWN0aXZlKCd0cmVlTm9kZScsIHRyZWVOb2RlKTtcblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiB0cmVlTm9kZSh0cmVlVmlld1NlcnZpY2UsICR0aW1lb3V0LCAkZG9jdW1lbnQsJHJvb3RTY29wZSkge1xuXG4gICAgICAgIHZhciBjYXNjYWRlVHJlZU5vZGVEaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlTmFtZXNwYWNlOidzdmcnLFxuICAgICAgICAgICAgLy8gcmVxdWlyZTonXmNhc2NhZGVUcmVlVmlldycsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBDYXNjYWRlVHJlZU5vZGVDb250cm9sbGVyLFxuICAgICAgICAgICAgLy8gdGVtcGxhdGVVcmw6ICdhcHAvY2FzY2FkZS90ZXN0L29yZ2NoYXJ0L2RpcmVjdGl2ZXMvdHJlZW5vZGUudG1wbC5odG1sJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGZvcmVpZ25PYmplY3Qgd2lkdGg9XCIyNjBcIiBoZWlnaHQ9XCIyMjBcIiBzdHlsZT1cIm92ZXJmbG93OiB2aXNpYmxlXCI+PGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6IDUwcHg7bWFyZ2luLWxlZnQ6MTBweFwiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1ub2RlXFwnOnZtLmlzQWN0aXZlfVwiIGNsYXNzPVwie3t2bS5ub2RlQ2xhc3N9fVwiIG5nLW1vdXNlZW50ZXI9XCJ2bS53aGVuTW91c2VFbnRlcigpXCIgbmctbW91c2VsZWF2ZT1cInZtLndoZW5Nb3VzZUxlYXZlKClcIiBuZy1jbGljaz1cInZtLm1ha2VOb2RlQWN0aXZlKClcIj4gPGRpdiBsYXlvdXQ9XCJjb2x1bW5cIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCI+IDxkaXYgbmctY2xhc3M9XCJ7XFwnbm9kZS10ZXh0LW1haW4tbm8taW1hZ2VcXCc6IXZtLmlzSW1hZ2VQcmVzZW50fVwiIGNsYXNzPVwibWQtc3ViaGVhZCBub2RlLXRleHQtbWFpblwiPjx0cmltLXdvcmQgd29yZC1vcHRpb25zID1cInZtLndvcmRUcmltT3B0aW9uc1wiIHdvcmQ9XCJ2bS5ub2RlLm5hbWVcIj48L3RyaW0td29yZD48L2Rpdj48ZGl2PiA8ZGl2IGNsYXNzPVwicm91bmQtY2hpcC13cmFwcGVyXCI+PGltZyBuZy1pZj1cInZtLmlzSW1hZ2VQcmVzZW50XCIgbmctc3JjPVwie3t2bS5ub2RlLmltYWdlX3VybH19XCIgY2xhc3M9XCJyb3VuZC1jaGlwXCI+IDwvZGl2PjwvZGl2PjxkaXYgIG5nLWNsYXNzPVwie1xcJ25vZGUtdGV4dC1zdWItbm8taW1hZ2VcXCc6IXZtLmlzSW1hZ2VQcmVzZW50fVwiIGNsYXNzPVwibWQtc3ViaGVhZCBub2RlLXRleHQtc3ViXCI+e3t2bS5ub2RlLm5hbWV9fTwvZGl2PjxkaXYgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiIGxheW91dC1maWxsIGxheW91dD1cInJvd1wiPiA8ZGl2IG5nLXJlcGVhdD1cImFjdGlvbiBpbiB2bS5ub2RlQWN0aW9uc1wiPiA8YnV0dG9uIG5nLWNsaWNrPVwidm0ubWFrZUNhbGxCYWNrKGFjdGlvbi5jYWxsQmFjayk7ICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcIiBjbGFzcz1cImFjdGlvbi1idG5cIj48c3Bhbj48L3NwYW4+Jm5ic3A7PGkgY2xhc3M9XCJ7e2FjdGlvbi5pY29ufX1cIj48L2k+PC9idXR0b24+IDwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD4nLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuICAgICAgICAgICAgICAgIG5vZGVJZDogJ0AnLFxuICAgICAgICAgICAgICAgIG5vZGVBY3Rpb25zOiAnQCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaW5rOiB7XG4gICAgICAgICAgICAgICAgcHJlOmxpbmtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gY2FzY2FkZVRyZWVOb2RlRGlyZWN0aXZlO1xuXG5cbiAgICAgICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbSwgYXR0cnMsIHZtKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhdHRycy5pbWFnZXByZXNlbnQpO1xuICAgICAgICAgICAgdm0uaXNJbWFnZVByZXNlbnQgPSBhdHRycy5pbWFnZXByZXNlbnQ9PSd0cnVlJz90cnVlOmZhbHNlO1xuICAgICAgICAgICAgdm0uaWQgPSBhdHRycy5ub2RlaWQ7XG4gICAgICAgICAgICB2bS5ub2RlQWN0aW9ucyA9IGFuZ3VsYXIuZnJvbUpzb24oYXR0cnMubm9kZWFjdGlvbnMpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codm0ubm9kZUFjdGlvbnMpO1xuICAgICAgICAgICAgdm0uaXNQaW5uZWROb2RlID0gZmFsc2U7XG4gICAgICAgICAgICB2bS5ub2RlID0gdHJlZVZpZXdTZXJ2aWNlLmZpbmRCeUlkKGF0dHJzLm5vZGVpZCk7XG4gICAgICAgICAgICB2bS53b3JkVHJpbU9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgd29yZDogJ2QnLFxuICAgICAgICAgICAgICAgIGZyb206ICcwJyxcbiAgICAgICAgICAgICAgICB1bnRpbDogJzEyJyxcbiAgICAgICAgICAgICAgICB0b29sVGlwOiAndHJ1ZScsXG4gICAgICAgICAgICAgICAgdG9vbFRpcERpcmVjdGlvbjogJ3RvcCdcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qY29uc29sZS5sb2coYW5ndWxhci5mcm9tSnNvbihhdHRycy5ub2RlKSk7XG4gICAgICAgICAgICB2bS5ub2RlID0gYW5ndWxhci5mcm9tSnNvbihhdHRycy5ub2RlKTsqL1xuICAgICAgICAgICAgdm0ubm9kZUNsYXNzID0gJ25vZGUtbGFiZWwgbm9kZS0nICsgdm0ubm9kZS50eXBlKyAnIG5vZGUtJyt2bS5pZDtcblxuICAgICAgICAgICAgLy8gdm0uaXNQaW5uZWROb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgIHZtLmlzRXhwYW5kZWRWaWV3ID0gZmFsc2U7XG4gICAgICAgICAgICB2bS5pc0FjdGl2ZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICB2bS53aGVuTW91c2VFbnRlciA9IHdoZW5Nb3VzZUVudGVyO1xuICAgICAgICAgICAgdm0ud2hlbk1vdXNlTGVhdmUgPSB3aGVuTW91c2VMZWF2ZTtcbiAgICAgICAgICAgIHZtLnRvZ2dsZVBpbm5lZE1vZGUgPSB0b2dnbGVQaW5uZWRNb2RlO1xuICAgICAgICAgICAgdm0ubWFrZUNhbGxCYWNrID0gbWFrZUNhbGxCYWNrO1xuICAgICAgICAgICAgdm0ubWFrZU5vZGVBY3RpdmUgPSBtYWtlTm9kZUFjdGl2ZTtcbiAgICAgICAgICAgIHZhciBub2RlRE9NRWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChlbGVtLmNoaWxkcmVuKClbMF0pO1xuICAgICAgICAgICAgLyogICAgICAgICAgICBlbGVtLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICBlbGVtLmFkZENsYXNzKCdhY3RpdmUtbm9kZScpO1xuICAgICAgICAgICAgIH0pOyovXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG1ha2VOb2RlQWN0aXZlKCkge1xuICAgICAgICAgICAgICAgIGNsZWFyQWxsT3RoZXJBY3RpdmVOb2RlcygpO1xuICAgICAgICAgICAgICAgIHZtLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gd2hlbk1vdXNlRW50ZXIoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21vdXNlIEVudGVyZWQnKTtcbiAgICAgICAgICAgICAgICAvLyB2bS5pc0V4cGFuZGVkVmlldyA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gdm0uaXNQaW5uZWROb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gd2hlbk1vdXNlTGVhdmUoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21vdXNlIGxlYXZlZCcpO1xuICAgICAgICAgICAgICAgIC8vIHZtLmlzRXhwYW5kZWRWaWV3ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLyogICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICB2bS5pc1Bpbm5lZE5vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgfSwxMDAwKTsqL1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB0b2dnbGVQaW5uZWRNb2RlKCkge1xuICAgICAgICAgICAgICAgIHZtLmlzUGlubmVkTm9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codm0uaXNQaW5uZWROb2RlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gbWFrZUNhbGxCYWNrKGNhbGxCYWNrRnVuY05hbWUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYWxsQmFja0Z1bmNOYW1lKTtcbiAgICAgICAgICAgICAgICBzY29wZS4kcGFyZW50LnZtLm1ha2VDYWxsQmFjayhjYWxsQmFja0Z1bmNOYW1lLHZtLm5vZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhckFsbE90aGVyQWN0aXZlTm9kZXMoKXtcbi8qICAgICAgICAgICAgICAgIGVsZW0uZmluZCgnLm5vZGUtbGFiZWwnKTsvL1RPRE9cbiAgICAgICAgICAgICAgICBlbGVtLnBhcmVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhY3RpdmUtbm9kZScpOyovXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdhcHA6bm9kZXM6Y2xlYXJhY3RpdmUnLHsnZGF0YSc6ICcnfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGZpbmRSZWxldmFudE5vZGUoa2xhc3Mpe1xuICAgICAgICAgICAgICAgIGVsZW0uZmluZCgnLnRyZWUtaG9sZGVyJyk7Ly9UT0RPXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBvbkRvY3VtZW50Q2xpY2soZXYpIHtcblxuICAgICAgICAgICAgICAgIC8vQ2hlY2sgaWYgY2xpY2tlZCBvdXRzaWRlIGFuZCBkaXNjYXJkIEFjdGl2ZVxuICAgICAgICAgICAgICAgIGlmIChlbGVtICE9PSBldi50YXJnZXQgJiYgIWVsZW1bMF0uY29udGFpbnMoZXYudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdm0uaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3JlbW92ZSBldmVudCBoYW5kbGVycyB3aGVuIGN1c3RvbSBkaXJlY3RpdmUgZGVzdHJveWVkXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkRlc3Ryb3koKSB7XG4gICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9mZignY2xpY2snLCBvbkRvY3VtZW50Q2xpY2spO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICRkb2N1bWVudC5vbignY2xpY2snLCBvbkRvY3VtZW50Q2xpY2spO1xuICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIG9uRGVzdHJveSk7XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiBDYXNjYWRlVHJlZU5vZGVDb250cm9sbGVyKHRyZWVWaWV3U2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICAvKiAgICAgICAgdm0ubm9kZSA9IHRyZWVWaWV3U2VydmljZS5maW5kQnlJZCh2bS5ub2RlSWQpO1xuICAgICAgICAgdm0ubm9kZUNsYXNzID0gJ25vZGUtbGFiZWwgbm9kZS0nK3ZtLm5vZGUudHlwZTsqL1xuXG4gICAgfVxufSkoKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBHYXlhbiBQcmFzYW5uYSBvbiA1LzMwLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5kaXJlY3RpdmUoJ3RyZWVWaWV3JywgdHJlZVZpZXcpO1xuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIHRyZWVWaWV3KCRmaWx0ZXIsICRjb21waWxlLCB0cmVlVmlld1NlcnZpY2UsICR0aW1lb3V0LCB0b29sU2V0U2VydmljZSwgJHdpbmRvdykge1xuICAgICAgICB2YXIgdHJlZVZpZXdEaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXBsYWNlOiAnZmFsc2UnLFxuICAgICAgICAgICAgdGVtcGxhdGVOYW1lc3BhY2U6ICdzdmcnLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgICAgICBkYXRhOiAnPScsXG4gICAgICAgICAgICAgICAgYWJuOiAnJicsXG4gICAgICAgICAgICAgICAgZGVsOiAnJicsXG4gICAgICAgICAgICAgICAgYWRkOiAnJicsXG4gICAgICAgICAgICAgICAgZWRpdDogJyYnLFxuICAgICAgICAgICAgICAgIG5vZGVBY3Rpb25zOiAnQCcsXG4gICAgICAgICAgICAgICAgdHJlZWRhdGE6ICc9JyxcbiAgICAgICAgICAgICAgICBzZWFyY2hhYmxlTGlzdDogJz0nLFxuICAgICAgICAgICAgICAgIGltYWdlcHJlc2VudDogJz0nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlcjogVHJlZVZpZXdEaXJlY3RpdmVDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazoge1xuICAgICAgICAgICAgICAgIHByZTogbGlua1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW0sIGF0dHJzLCB2bSkge1xuXG4gICAgICAgICAgICB2YXIgbm9kZUJvdW5kYXJpZXMgPSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDI0MCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE0NixcbiAgICAgICAgICAgICAgICBob3Jpem9udGFsU2VwZXJhdGlvbjogMTYsXG4gICAgICAgICAgICAgICAgdmVydGljYWxTZXBlcmF0aW9uOiAxMjhcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZHJhZ1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBub2RlcztcbiAgICAgICAgICAgIHZhciBkb21Ob2RlO1xuICAgICAgICAgICAgdmFyIHJlbENvb3JkcztcbiAgICAgICAgICAgIHZhciBwYW5UaW1lcjtcbiAgICAgICAgICAgIC8vIHZhcmlhYmxlcyBmb3IgZHJhZy9kcm9wXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWROb2RlID0gbnVsbDtcbiAgICAgICAgICAgIHZhciBkcmFnZ2luZ05vZGUgPSBudWxsO1xuICAgICAgICAgICAgLy8gcGFubmluZyB2YXJpYWJsZXNcbiAgICAgICAgICAgIHZhciBwYW5TcGVlZCA9IDIwMDtcbiAgICAgICAgICAgIHZhciBwYW5Cb3VuZGFyeSA9IDIwOyAvLyBXaXRoaW4gMjBweCBmcm9tIGVkZ2VzIHdpbGwgcGFuIHdoZW4gZHJhZ2dpbmcuXG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlQ29vcmRzO1xuICAgICAgICAgICAgdmFyIGxpbmtzO1xuICAgICAgICAgICAgdmFyIG5vZGVQYXRocztcbiAgICAgICAgICAgIHZhciBub2Rlc0V4aXQ7XG4gICAgICAgICAgICB2YXIgcGFyZW50TGluaztcblxuICAgICAgICAgICAgdmFyIG5vZGVBY3RpdmVDbGVhckxpc3RlbmVyO1xuICAgICAgICAgICAgdmFyIG5vZGVEZWxldGVMaXN0ZW5lcjtcbiAgICAgICAgICAgIHZhciBub2RlQWZ0ZXJBZGRMaXN0ZW5lcjtcbiAgICAgICAgICAgIHZhciBub2RlQWZ0ZXJVcGRhdGVMaXN0ZW5lcjtcbiAgICAgICAgICAgIHZhciBkcmFnTGlzdGVuZXI7XG4gICAgICAgICAgICB2YXIgbm9kZUxpc3QgPSBbXTtcbiAgICAgICAgICAgIHZhciBtID0gWzIwLCAyMCwgMjAsIDIwXSxcbiAgICAgICAgICAgICAgICB3ID0gJHdpbmRvdy5pbm5lcldpZHRoIC0gMjAgLSBtWzFdIC0gbVszXSxcbiAgICAgICAgICAgICAgICBpSGVpZ2h0ID0gJHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICAgICAgICAgICAgICBoID0gNjAwIC0gbVswXSAtIG1bMl0sXG4gICAgICAgICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgICAgICAgciA9IDgwMCxcbiAgICAgICAgICAgICAgICB4ID0gZDMuc2NhbGUubGluZWFyKCkuZG9tYWluKFswLCB3XSkucmFuZ2UoWzAsIHddKSxcbiAgICAgICAgICAgICAgICB5ID0gZDMuc2NhbGUubGluZWFyKCkuZG9tYWluKFswLCBoXSkucmFuZ2UoWzAsIGhdKSxcbiAgICAgICAgICAgICAgICByb290O1xuICAgICAgICAgICAgdmFyIHZpZXdCb3hCb3VuZGFyeSA9ICcwIDAgJyArIHcgKyBcIiBcIiArIGlIZWlnaHQ7XG4gICAgICAgICAgICB2YXIgd3JhcHBlckVsZW1lbnQgPSBkMy5zZWxlY3QoZWxlbVswXSk7XG4gICAgICAgICAgICB2YXIgbGFzdFNlYXJjaGVkUGF0aCA9IFtdO1xuXG4gICAgICAgICAgICB2YXIgem9vbSA9IGQzLmJlaGF2aW9yLnpvb20oKVxuICAgICAgICAgICAgICAgIC50cmFuc2xhdGUoWzAsIDBdKVxuICAgICAgICAgICAgICAgIC5zY2FsZSh0b29sU2V0U2VydmljZS5nZXRab29tU2NhbGUoKSlcbiAgICAgICAgICAgICAgICAuc2NhbGVFeHRlbnQoWzAuMywgOF0pXG4gICAgICAgICAgICAgICAgLm9uKFwiem9vbVwiLCB6b29tZWQpO1xuXG4gICAgICAgICAgICB2bS53b3JkVHJpbU9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgd29yZDogJ2QnLFxuICAgICAgICAgICAgICAgIGZyb206ICcwJyxcbiAgICAgICAgICAgICAgICB1bnRpbDogJzEyJyxcbiAgICAgICAgICAgICAgICB0b29sVGlwOiAndHJ1ZScsXG4gICAgICAgICAgICAgICAgdG9vbFRpcERpcmVjdGlvbjogJ3RvcCdcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgem9vbU9iamVjdCA9IGQzLmJlaGF2aW9yLnpvb20oKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmFuc2xhdGUoWzAsIDBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zY2FsZSh0b29sU2V0U2VydmljZS5nZXRab29tU2NhbGUoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGVFeHRlbnQoWzAuMywgOF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKFwiem9vbVwiLCB6b29tZWRXcmFwcGVyKTsqL1xuXG4gICAgICAgICAgICAvLyB6b29tKCk7XG4gICAgICAgICAgICBlbGVtLmFwcGVuZCgkY29tcGlsZShcIjxkaXYgY2xhc3M9J2NvbXBvbmVudC1jb250YWluZXInPjxkaXYgbGF5b3V0PVxcXCJyb3dcXFwiIGxheW91dC1hbGlnbj1cXFwic3BhY2UtYXJvdW5kIGNlbnRlclxcXCI+PGRpdiBmbGV4Pjx0cmVlLXNlYXJjaC1ib3ggc2VhcmNoYWJsZS1saXN0PSd2bS5zZWFyY2hhYmxlTGlzdCc+PC90cmVlLXNlYXJjaC1ib3g+PC9kaXY+PGRpdiBmbGV4Pjx0cmVlLXRvb2wtc2V0IHpvb20tdHJpZ2dlci1jYWxsLWJhY2s9J3ZtLnpvb21UcmlnZ2VyKHN0YXR1cyknPjwvdHJlZS10b29sLXNldD48L2Rpdj48L2Rpdj48L2Rpdj5cIikoc2NvcGUpKTtcblxuICAgICAgICAgICAgdm0uem9vbVRyaWdnZXIgPSB6b29tVHJpZ2dlcjtcblxuXG4gICAgICAgICAgICBmdW5jdGlvbiB6b29tVHJpZ2dlcihzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdGF0dXMpO1xuICAgICAgICAgICAgICAgIHpvb21DbGljayhzdGF0dXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkluaXQoKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZhdGVXYXRjaGVycygpO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlV2F0Y2hlcnMoKSB7XG4gICAgICAgICAgICAgICAgb25TZWFyY2hXYXRjaCgpO1xuICAgICAgICAgICAgICAgIC8vIG9uWm9vbVdhdGNoKCk7XG4gICAgICAgICAgICAgICAgb25FeHBhbmRXYXRjaCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkV4cGFuZFdhdGNoKCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b29sU2V0U2VydmljZS5pc0V4cGFuZEFsbE1vZGUoKVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChpc0luRXhwYW5kQWxsTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJbkV4cGFuZEFsbE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZEFsbEluQ2hhaW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlQWxsSW5DaGFpbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXhwYW5kQWxsSW5DaGFpbigpIHtcbiAgICAgICAgICAgICAgICBmb3JjZVNjYWxlKDAuNSk7XG4gICAgICAgICAgICAgICAgdG9vbFNldFNlcnZpY2Uuc2V0Wm9vbVNjYWxlKDAuNSk7XG4gICAgICAgICAgICAgICAgY2VudGVyVGhlUm9vdCgpO1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlWm9vbSgpO1xuICAgICAgICAgICAgICAgIGV4cGFuZEFsbCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjb2xsYXBzZUFsbEluQ2hhaW4oKSB7XG4gICAgICAgICAgICAgICAgZm9yY2VTY2FsZSgxKTtcbiAgICAgICAgICAgICAgICB0b29sU2V0U2VydmljZS5zZXRab29tU2NhbGUoMSk7XG4gICAgICAgICAgICAgICAgY2VudGVyVGhlUm9vdCgpO1xuICAgICAgICAgICAgICAgIC8qICAgICAgICAgICAgICAgIGZvcmNlWm9vbSgpOyovXG4gICAgICAgICAgICAgICAgY29sbGFwc2VBbGwoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25TZWFyY2hXYXRjaCgpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJlZVZpZXdTZXJ2aWNlLmdldFNlYXJjaGVkTm9kZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJzdCBmaW5kIGFuZCBoaWdobGlnaHQgdGhlIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodFBhdGgobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZWROb2RlID0gZ2V0VHJlZU5vZGVCeU9iamVjdChub2RlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vVE9ETyByZW1vdmUgbGF0ZXIgY296IGV4cGFuZGluZyBvY2N1cnMgd2hlbiBoaWdobGlnaHRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kTm9kZShyZXNvbHZlZE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZShyZXNvbHZlZE5vZGUpOyovXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNvbHZlZE5vZGUueCwgcmVzb2x2ZWROb2RlLnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyQWxsQWN0aXZlTm9kZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlTm9kZUFjdGl2ZShyZXNvbHZlZE5vZGUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhblRvVGhlTm9kZShyZXNvbHZlZE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uWm9vbVdhdGNoKCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b29sU2V0U2VydmljZS5nZXRab29tU2NhbGUoKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoem9vbVNjYWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHpvb21TY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIHZpcy50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbig3NTApXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2FsbCh6b29tT2JqZWN0LnRyYW5zbGF0ZShbMTUwLCAxMDBdKS5zY2FsZSh6b29tU2NhbGUpLnNjYWxlRXh0ZW50KFsxLCA4XSkuZXZlbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGZvcmNlWm9vbSgpIHtcbiAgICAgICAgICAgICAgICB2YXIgem9vbVNjYWxlID0gdG9vbFNldFNlcnZpY2UuZ2V0Wm9vbVNjYWxlKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coem9vbVNjYWxlKTtcbiAgICAgICAgICAgICAgICB2aXMudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbig3NTApXG4gICAgICAgICAgICAgICAgICAgIC5jYWxsKHpvb21PYmplY3QudHJhbnNsYXRlKFswLCAwXSkuc2NhbGUoem9vbVNjYWxlKS5zY2FsZUV4dGVudChbMC4zLCA4XSkuZXZlbnQpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGZvcmNlU2NhbGUoc2NhbGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmlldyA9IHtcbiAgICAgICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgICAgICAgazogc2NhbGVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGludGVycG9sYXRlWm9vbShbdmlldy54LCB2aWV3LnldLCB2aWV3LmspO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBEZWZpbmUgdGhlIGRyYWcgbGlzdGVuZXJzIGZvciBkcmFnL2Ryb3AgYmVoYXZpb3VyIG9mIG5vZGVzLlxuICAgICAgICAgICAgZHJhZ0xpc3RlbmVyID0gZDMuYmVoYXZpb3IuZHJhZygpXG4gICAgICAgICAgICAgICAgLm9uKFwiZHJhZ3N0YXJ0XCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkID09IHJvb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkcmFnU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzID0gdHJlZS5ub2RlcyhkKTtcbiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgaW1wb3J0YW50IHRoYXQgd2Ugc3VwcHJlc3MgdGhlIG1vdXNlb3ZlciBldmVudCBvbiB0aGUgbm9kZSBiZWluZyBkcmFnZ2VkLiBPdGhlcndpc2UgaXQgd2lsbCBhYnNvcmIgdGhlIG1vdXNlb3ZlciBldmVudCBhbmQgdGhlIHVuZGVybHlpbmcgbm9kZSB3aWxsIG5vdCBkZXRlY3QgaXQgZDMuc2VsZWN0KHRoaXMpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbihcImRyYWdcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQgPT0gcm9vdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChkcmFnU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9tTm9kZSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWF0ZURyYWcoZCwgZG9tTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGNvb3JkcyBvZiBtb3VzZUV2ZW50IHJlbGF0aXZlIHRvIHN2ZyBjb250YWluZXIgdG8gYWxsb3cgZm9yIHBhbm5pbmdcbiAgICAgICAgICAgICAgICAgICAgcmVsQ29vcmRzID0gZDMubW91c2UoJCgnc3ZnJykuZ2V0KDApKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbENvb3Jkc1swXSA8IHBhbkJvdW5kYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5UaW1lciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW4odGhpcywgJ2xlZnQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWxDb29yZHNbMF0gPiAoJCgnc3ZnJykud2lkdGgoKSAtIHBhbkJvdW5kYXJ5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFuVGltZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFuKHRoaXMsICdyaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlbENvb3Jkc1sxXSA8IHBhbkJvdW5kYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5UaW1lciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW4odGhpcywgJ3VwJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVsQ29vcmRzWzFdID4gKCQoJ3N2ZycpLmhlaWdodCgpIC0gcGFuQm91bmRhcnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5UaW1lciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW4odGhpcywgJ2Rvd24nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHBhblRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZC54MCArPSBkMy5ldmVudC5keDtcbiAgICAgICAgICAgICAgICAgICAgZC55MCArPSBkMy5ldmVudC5keTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGQzLnNlbGVjdCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICBub2RlLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBkLngwICsgXCIsXCIgKyBkLnkwICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUZW1wQ29ubmVjdG9yKCk7XG4gICAgICAgICAgICAgICAgfSkub24oXCJkcmFnZW5kXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkID09IHJvb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkb21Ob2RlID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm93IHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBwYXJlbnQsIGFuZCBpbnNlcnQgaXQgaW50byB0aGUgbmV3IGVsZW1lbnRzIGNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBkcmFnZ2luZ05vZGUucGFyZW50LmNoaWxkcmVuLmluZGV4T2YoZHJhZ2dpbmdOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdOb2RlLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RlZE5vZGUuY2hpbGRyZW4gIT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBzZWxlY3RlZE5vZGUuX2NoaWxkcmVuICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0ZWROb2RlLmNoaWxkcmVuICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE5vZGUuY2hpbGRyZW4ucHVzaChkcmFnZ2luZ05vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTm9kZS5fY2hpbGRyZW4ucHVzaChkcmFnZ2luZ05vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWROb2RlLmNoaWxkcmVuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWROb2RlLmNoaWxkcmVuLnB1c2goZHJhZ2dpbmdOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBub2RlIGJlaW5nIGFkZGVkIHRvIGlzIGV4cGFuZGVkIHNvIHVzZXIgY2FuIHNlZSBhZGRlZCBub2RlIGlzIGNvcnJlY3RseSBtb3ZlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLyogICAgICAgICAgICAgICAgICAgICAgICBleHBhbmQoc2VsZWN0ZWROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRUcmVlKCk7Ki9cbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZERyYWcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZERyYWcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBpbml0aWF0ZURyYWcoZCwgZG9tTm9kZSkge1xuICAgICAgICAgICAgICAgIGRyYWdnaW5nTm9kZSA9IGQ7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLnNlbGVjdCgnLmdob3N0LWFyZWEnKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcuZ2hvc3QtYXJlYScpLmF0dHIoJ2NsYXNzJywgJ2dob3N0LWFyZWEgc2hvdycpO1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5hdHRyKCdjbGFzcycsICdub2RlIGFjdGl2ZS1kcmFnJyk7XG4gICAgICAgICAgICAgICAgdmlzLnNlbGVjdEFsbChcImcubm9kZVwiKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IC8vIHNlbGVjdCB0aGUgcGFyZW50IGFuZCBzb3J0IHRoZSBwYXRoJ3NcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEuaWQgIT0gZHJhZ2dpbmdOb2RlLmlkKSByZXR1cm4gMTsgLy8gYSBpcyBub3QgdGhlIGhvdmVyZWQgZWxlbWVudCwgc2VuZCBcImFcIiB0byB0aGUgYmFja1xuICAgICAgICAgICAgICAgICAgICBlbHNlIHJldHVybiAtMTsgLy8gYSBpcyB0aGUgaG92ZXJlZCBlbGVtZW50LCBicmluZyBcImFcIiB0byB0aGUgZnJvbnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBpZiBub2RlcyBoYXMgY2hpbGRyZW4sIHJlbW92ZSB0aGUgbGlua3MgYW5kIG5vZGVzXG4gICAgICAgICAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGxpbmsgcGF0aHNcbiAgICAgICAgICAgICAgICAgICAgbGlua3MgPSB0cmVlLmxpbmtzKG5vZGVzKTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZVBhdGhzID0gdmlzLnNlbGVjdEFsbChcInBhdGgubGlua1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEobGlua3MsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0LmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjaGlsZCBub2Rlc1xuICAgICAgICAgICAgICAgICAgICBub2Rlc0V4aXQgPSB2aXMuc2VsZWN0QWxsKFwiZy5ub2RlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShub2RlcywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLmlkID09IGRyYWdnaW5nTm9kZS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBwYXJlbnQgbGlua1xuICAgICAgICAgICAgICAgIHBhcmVudExpbmsgPSB0cmVlLmxpbmtzKHRyZWUubm9kZXMoZHJhZ2dpbmdOb2RlLnBhcmVudCkpO1xuICAgICAgICAgICAgICAgIHZpcy5zZWxlY3RBbGwoJ3BhdGgubGluaycpLmZpbHRlcihmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZC50YXJnZXQuaWQgPT0gZHJhZ2dpbmdOb2RlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgZHJhZ1N0YXJ0ZWQgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBwYW4oZG9tTm9kZSwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwZWVkID0gcGFuU3BlZWQ7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZVg7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZVk7XG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlWDtcbiAgICAgICAgICAgICAgICB2YXIgc2NhbGVZO1xuICAgICAgICAgICAgICAgIHZhciBzY2FsZTtcbiAgICAgICAgICAgICAgICBpZiAocGFuVGltZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHBhblRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlQ29vcmRzID0gZDMudHJhbnNmb3JtKHZpcy5hdHRyKFwidHJhbnNmb3JtXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSAnbGVmdCcgfHwgZGlyZWN0aW9uID09ICdyaWdodCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVggPSBkaXJlY3Rpb24gPT0gJ2xlZnQnID8gdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVswXSArIHNwZWVkIDogdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVswXSAtIHNwZWVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlWSA9IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMV07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09ICd1cCcgfHwgZGlyZWN0aW9uID09ICdkb3duJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlWCA9IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVZID0gZGlyZWN0aW9uID09ICd1cCcgPyB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdICsgc3BlZWQgOiB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdIC0gc3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2NhbGVYID0gdHJhbnNsYXRlQ29vcmRzLnNjYWxlWzBdO1xuICAgICAgICAgICAgICAgICAgICBzY2FsZVkgPSB0cmFuc2xhdGVDb29yZHMuc2NhbGVbMV07XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlID0gdG9vbFNldFNlcnZpY2UuZ2V0Wm9vbVNjYWxlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZpcy50cmFuc2l0aW9uKCkuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHRyYW5zbGF0ZVggKyBcIixcIiArIHRyYW5zbGF0ZVkgKyBcIilzY2FsZShcIiArIHNjYWxlICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCdnLm5vZGUnKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgdHJhbnNsYXRlWCArIFwiLFwiICsgdHJhbnNsYXRlWSArIFwiKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgem9vbS5zY2FsZShzY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIHpvb20udHJhbnNsYXRlKFt0cmFuc2xhdGVYLCB0cmFuc2xhdGVZXSk7XG4gICAgICAgICAgICAgICAgICAgIHBhblRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW4oZG9tTm9kZSwgc3BlZWQsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgdGVtcG9yYXJ5IGNvbm5lY3RvciBpbmRpY2F0aW5nIGRyYWdnaW5nIGFmZmlsaWF0aW9uXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVUZW1wQ29ubmVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XG4gICAgICAgICAgICAgICAgaWYgKGRyYWdnaW5nTm9kZSAhPT0gbnVsbCAmJiBzZWxlY3RlZE5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZSB0byBmbGlwIHRoZSBzb3VyY2UgY29vcmRpbmF0ZXMgc2luY2Ugd2UgZGlkIHRoaXMgZm9yIHRoZSBleGlzdGluZyBjb25uZWN0b3JzIG9uIHRoZSBvcmlnaW5hbCB0cmVlXG4gICAgICAgICAgICAgICAgICAgICB2YXIgZXh0ZW5kaW5nVmFsdWUgPSAodm0uaW1hZ2VwcmVzZW50KT81OjUwO1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHNlbGVjdGVkTm9kZS54MCsxMiArIChub2RlQm91bmRhcmllcy53aWR0aCAvIDIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHNlbGVjdGVkTm9kZS55MCs1MCArIG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIDEwXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZHJhZ2dpbmdOb2RlLngwKzEyICsgKG5vZGVCb3VuZGFyaWVzLndpZHRoIC8gMiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZHJhZ2dpbmdOb2RlLnkwK2V4dGVuZGluZ1ZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IHZpcy5zZWxlY3RBbGwoXCIudGVtcC1saW5rXCIpLmRhdGEoZGF0YSk7XG4gICAgICAgICAgICAgICAgbGluay5lbnRlcigpLmFwcGVuZChcInBhdGhcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInRlbXAtbGlua1wiKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImRcIiwgZDMuc3ZnLmRpYWdvbmFsKCkpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG4gICAgICAgICAgICAgICAgbGluay5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSk7XG4gICAgICAgICAgICAgICAgbGluay5leGl0KCkucmVtb3ZlKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgb3ZlckluR2hvc3RBcmVhID0gZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE5vZGUgPSBkO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBvdXRPZkdob3N0QXJlYSA9IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWROb2RlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB1cGRhdGVUZW1wQ29ubmVjdG9yKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBlbmREcmFnKCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkTm9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcuZ2hvc3QtYXJlYScpLmF0dHIoJ2NsYXNzJywgJ2dob3N0LWFyZWEnKTtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuYXR0cignY2xhc3MnLCAnbm9kZScpO1xuICAgICAgICAgICAgICAgIC8vIG5vdyByZXN0b3JlIHRoZSBtb3VzZW92ZXIgZXZlbnQgb3Igd2Ugd29uJ3QgYmUgYWJsZSB0byBkcmFnIGEgMm5kIHRpbWVcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCcuZ2hvc3QtYXJlYScpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJycpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcbiAgICAgICAgICAgICAgICBpZiAoZHJhZ2dpbmdOb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZShyb290KTtcbiAgICAgICAgICAgICAgICAgICAgcGFuVG9UaGVOb2RlKGRyYWdnaW5nTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nTm9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvbkluaXQoKTtcblxuICAgICAgICAgICAgdmFyIHZpcyA9IHdyYXBwZXJFbGVtZW50LmFwcGVuZChcImRpdlwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwibGF5b3V0XCIsIFwicm93XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJsYXlvdXQtYWxpZ25cIiwgXCJzcGFjZS1hcm91bmQgY2VudGVyXCIpXG4gICAgICAgICAgICAgICAgLmNhbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyAkY29tcGlsZSh0aGlzWzBdKShzY29wZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJmbGV4XCIsIFwiXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCBcInN2Zy1ib3gtY29udGFpbmVyXCIpXG4gICAgICAgICAgICAgICAgLmNhbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyAkY29tcGlsZSh0aGlzWzBdKShzY29wZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCBcInN2Z0JveFwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwidmlld0JveFwiLCB2aWV3Qm94Qm91bmRhcnkpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJzdHlsZVwiLCBcImN1cnNvcjptb3ZlO1wiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgXCIxMDAlXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaUhlaWdodClcbiAgICAgICAgICAgICAgICAvKiAgICAgICAgICAgICAgICAuY2FsbChkMy5iZWhhdmlvci56b29tKCkub24oXCJ6b29tXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xTZXRTZXJ2aWNlLnNldFpvb21TY2FsZShkMy5ldmVudC5zY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGQzLmV2ZW50LnNjYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGQzLmV2ZW50LnNjYWxlPjAuNSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmlzLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBkMy5ldmVudC50cmFuc2xhdGUgKyBcIilcIiArIFwiIHNjYWxlKFwiICsgZDMuZXZlbnQuc2NhbGUgKyBcIilcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmlzLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBkMy5ldmVudC50cmFuc2xhdGUgKyBcIilcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSovXG4gICAgICAgICAgICAgICAgLmNhbGwoem9vbSlcbiAgICAgICAgICAgICAgICAvLyAuY2FsbCh6b29tT2JqZWN0KVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJzdmc6Z1wiKVxuICAgICAgICAgICAgICAgIC8vLmF0dHIoXCJwb2ludGVyLWV2ZW50c1wiLCBcImFsbFwiKVxuICAgICAgICAgICAgICAgIC8vY2VudGVyaW5nIHRoZSByb290IG5vZGVcbiAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArICgoJHdpbmRvdy5pbm5lcldpZHRoIC8gMikgLSAxMjApICsgXCIsXCIgKyAoaCAvIDQpICsgXCIpXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJzdHlsZVwiLCBcImN1cnNvcjpwb2ludGVyO1wiKVxuICAgICAgICAgICAgICAgIC8vLmNhbGwoZDMuYmVoYXZpb3Iuem9vbSgpLnNjYWxlRXh0ZW50KFsxLDhdKS5vbihcInpvb21cIix6b29tKSk7XG4gICAgICAgICAgICAgICAgLy8uY2FsbChkMy5iZWhhdmlvci56b29tKCkueCh4KS55KHkpLnNjYWxlRXh0ZW50KFsxLCA4XSkub25cbiAgICAgICAgICAgICAgICAub24oXCJjbGlja1wiLCBzdG9wUHJvcG9nYXRpb24sIGZhbHNlKVxuICAgICAgICAgICAgICAgIC5jYWxsKGQzLmJlaGF2aW9yLmRyYWcoKS5vbihcImRyYWdzdGFydFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAvKiAgICAgICAgIHZpcy50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9kdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIG9mIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsYXkgdGltZSBpbiBtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRlbGF5KDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNjYWxlKFwiICsgdG9vbFNldFNlcnZpY2UuZ2V0Wm9vbVNjYWxlKCkgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB9KS5vbihcImRyYWdcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImRyYWdnZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIC8vIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ3aWR0aFwiLCAxNjApLmF0dHIoXCJoZWlnaHRcIiwgMTIwKS5hdHRyKFwiY2xhc3NcIiwgXCJ0cmVlLWhvbGRlclwiKS8qLmNhbGwoZDMuYmVoYXZpb3IuZHJhZygpLm9uKFwiZHJhZ3N0YXJ0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICBkMy5ldmVudC5zb3VyY2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICB9KS5vbihcImRyYWdcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZHJhZ2dlZFwiKTtcbiAgICAgICAgICAgICB9KSkqLztcblxuXG4gICAgICAgICAgICB2YXIgdHJlZSA9IGQzLmxheW91dC50cmVlKClcbiAgICAgICAgICAgIC8vIC5zaXplKFtoLCB3XSlcbiAgICAgICAgICAgICAgICAubm9kZVNpemUoW25vZGVCb3VuZGFyaWVzLndpZHRoICsgbm9kZUJvdW5kYXJpZXMuaG9yaXpvbnRhbFNlcGVyYXRpb24sIG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIG5vZGVCb3VuZGFyaWVzLnZlcnRpY2FsU2VwZXJhdGlvbl0pXG4gICAgICAgICAgICAgICAgLnNlcGFyYXRpb24oZnVuY3Rpb24gc2VwYXJhdGlvbihhLCBiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnBhcmVudCA9PSBiLnBhcmVudCA/IDEuMjUgOiAxLjU7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBsaW5lID0gZDMuc3ZnLmxpbmUoKVxuXG4gICAgICAgICAgICAgICAgLngoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHhTY2FsZShkLngpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnkoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlTY2FsZShkLnkpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBmZXRjaExpbmVEYXRhKCkge1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIFwieFwiOiBkLnNvdXJjZS54ICsgKG5vZGVCb3VuZGFyaWVzLndpZHRoKSAvIDIsXG4gICAgICAgICAgICAgICAgICAgIFwieVwiOiBkLnNvdXJjZS55ICsgKG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIDEwKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHtcbiAgICAgICAgICAgICAgICAgICAgXCJ4XCI6IGQudGFyZ2V0LnggKyAobm9kZUJvdW5kYXJpZXMud2lkdGgpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgXCJ5XCI6IGQudGFyZ2V0LnkgLSAoYXR0cnMuaW1hZ2VwcmVzZW50ID09ICd0cnVlJyA/IDQ1IDogMClcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdmFyIGxpbmVEYXRhQXJyYXkgPSBbXTtcbiAgICAgICAgICAgICAgICBsaW5lRGF0YUFycmF5LnB1c2goc291cmNlKTtcbiAgICAgICAgICAgICAgICBsaW5lRGF0YUFycmF5LnB1c2godGFyZ2V0KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBsaW5lRGF0YUFycmF5O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZGlhZ29uYWwgPSBkMy5zdmcuZGlhZ29uYWwoKVxuICAgICAgICAgICAgLyogICAgICAgICAgICAgICAgLnByb2plY3Rpb24oZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtkLnggKyAxMjAsIGQueSArIDExMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7Ki9cbiAgICAgICAgICAgICAgICAuc291cmNlKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInhcIjogZC5zb3VyY2UueCArIChub2RlQm91bmRhcmllcy53aWR0aCkgLyAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgLypcInlcIjogZC5zb3VyY2UueSArIDE1MCovXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcInhcIjogZC5zb3VyY2UueCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieVwiOiBkLnNvdXJjZS55ICsgKG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIDEwKVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRhcmdldChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4XCI6IGQudGFyZ2V0LnggKyAobm9kZUJvdW5kYXJpZXMud2lkdGgpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qXCJ5XCI6IGQudGFyZ2V0LnkqL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCJ4XCI6IGQudGFyZ2V0LngsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInlcIjogZC50YXJnZXQueSAtIChhdHRycy5pbWFnZXByZXNlbnQgPT0gJ3RydWUnID8gNDUgOiAwKVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnByb2plY3Rpb24oZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtkLnggKyAwLCBkLnkgKyAwXTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJvb3QgPSB2bS50cmVlZGF0YTtcbiAgICAgICAgICAgIHJvb3QueDAgPSBoIC8gMjtcbiAgICAgICAgICAgIHJvb3QueTAgPSAwO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiB0b2dnbGVBbGwoZCkge1xuICAgICAgICAgICAgICAgIGlmIChkLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGQuY2hpbGRyZW4uZm9yRWFjaCh0b2dnbGVBbGwpO1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGUoZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gZXhwYW5kQWxsQWZ0ZXIoZCkge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IChkLmNoaWxkcmVuKSA/IGQuY2hpbGRyZW4gOiBkLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBpZiAoZC5fY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZC5jaGlsZHJlbiA9IGQuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBkLl9jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjaGlsZHJlbilcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChleHBhbmRBbGxBZnRlcik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBjb2xsYXBzZUFsbEFmdGVyKGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSAoZC5jaGlsZHJlbikgPyBkLmNoaWxkcmVuIDogZC5fY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgaWYgKGQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZC5fY2hpbGRyZW4gPSBkLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBkLmNoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkcmVuKVxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGNvbGxhcHNlQWxsQWZ0ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBleHBhbmRBbGwoKSB7XG4gICAgICAgICAgICAgICAgZXhwYW5kQWxsQWZ0ZXIocm9vdCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlKHJvb3QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjb2xsYXBzZUFsbCgpIHtcbiAgICAgICAgICAgICAgICBjb2xsYXBzZUFsbEFmdGVyKHJvb3QpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZShyb290KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2cocm9vdCk7XG5cbiAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIGRpc3BsYXkgdG8gc2hvdyBhIGZldyBub2Rlcy5cbiAgICAgICAgICAgIHJvb3QuY2hpbGRyZW4uZm9yRWFjaCh0b2dnbGVBbGwpO1xuXG5cbiAgICAgICAgICAgIHVwZGF0ZShyb290KTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlKHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IGQzLmV2ZW50ICYmIGQzLmV2ZW50LmFsdEtleSA/IDUwMDAgOiA1MDA7XG5cbiAgICAgICAgICAgICAgICAvLyBDb21wdXRlIHRoZSBuZXcgdHJlZSBsYXlvdXQuXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gdHJlZS5ub2Rlcyhyb290KS5yZXZlcnNlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBOb3JtYWxpemUgZm9yIGZpeGVkLWRlcHRoIGFuZCBkeW5hbWljIGZvciB3ZWlnaHQuXG4gICAgICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZC53ZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQueSA9IChkLndlaWdodCAqIDEyKSArIGQuZGVwdGggKiAzMDA7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkLnkgPSBkLmRlcHRoICogMzAwO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbm9kZXMuLi5cbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IHZpcy5zZWxlY3RBbGwoXCJnLm5vZGVcIilcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEobm9kZXMsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5pZCB8fCAoZC5pZCA9ICsraSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gRW50ZXIgYW55IG5ldyBub2RlcyBhdCB0aGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVFbnRlciA9IG5vZGUuZW50ZXIoKS5hcHBlbmQoXCJzdmc6Z1wiKVxuICAgICAgICAgICAgICAgICAgICAuY2FsbChkcmFnTGlzdGVuZXIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2RlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vZGUtXCIgKyBkLmlkO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgc291cmNlLngwICsgXCIsXCIgKyBzb3VyY2UueTAgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZShkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZShkKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBub2RlRW50ZXIuYXBwZW5kKFwicmVjdFwiKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZ2hvc3QtYXJlYScpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgbm9kZUJvdW5kYXJpZXMud2lkdGgpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIDI1MClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJvcGFjaXR5XCIsIDAuMikgLy8gY2hhbmdlIHRoaXMgdG8gemVybyB0byBoaWRlIHRoZSB0YXJnZXQgYXJlYVxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIFwidHJhbnNwYXJlbnRcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ21vdXNlb3ZlcicpXG4gICAgICAgICAgICAgICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlckluR2hvc3RBcmVhKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0T2ZHaG9zdEFyZWEobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVUZXh0ID0gbm9kZUVudGVyXG4gICAgICAgICAgICAgICAgICAgIC8qLmFwcGVuZChcInN2Zzpmb3JlaWduT2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuID8gXCJlbmRcIiA6IFwic3RhcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDFlLTYpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcIm92ZXJmbG93XCIsIFwidmlzaWJsZVwiKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cih7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiBub2RlQm91bmRhcmllcy53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiBub2RlQm91bmRhcmllcy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiAnZm9yZWlnbi1vYmplY3QnXG4gICAgICAgICAgICAgICAgICAgIH0pKi9cblxuICAgICAgICAgICAgICAgICAgICAvLyAuY2xhc3NlZChcIm9mXCIsZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZTt9KVxuLyogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIG5vZGVCb3VuZGFyaWVzLndpZHRoKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0Jywgbm9kZUJvdW5kYXJpZXMuaGVpZ2h0KSovXG4vKiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgneGh0bWw6ZGl2JylcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoXCJkaXNhYmxlZFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZW5hYmxlICE9PSB1bmRlZmluZWQgJiYgIWQuZW5hYmxlO1xuICAgICAgICAgICAgICAgICAgICB9KS5vbihcImNsaWNrXCIsIG9uQ2xpY2tlZE5vZGUpKi8vKi5jYWxsKGQzLmJlaGF2aW9yLmRyYWcoKS5vbihcImRyYWdzdGFydFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICB9KS5vbihcImRyYWdcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImRyYWdnZWRcIik7XG4gICAgICAgICAgICAgICAgIH0pKSovO1xuXG4gICAgICAgICAgICAgICAgLypub2RlVGV4dC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJuZy1jbGFzc1wiLFwieydhY3RpdmUtbm9kZSc6dm0uaXNBY3RpdmV9XCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIixcInt7dm0ubm9kZUNsYXNzfX1cIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJuZy1tb3VzZWVudGVyXCIsXCJ2bS53aGVuTW91c2VFbnRlcigpXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwibmctbW91c2VsZWF2ZVwiLFwidm0ud2hlbk1vdXNlTGVhdmUoKVwiKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcIm5nLWNsaWNrXCIsXCJ2bS5tYWtlTm9kZUFjdGl2ZSgpXCIpXG5cbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImxheW91dFwiLFwiY29sdW1uXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwibGF5b3V0LWFsaWduXCIsXCJjZW50ZXIgY2VudGVyXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwibGF5b3V0LWFsaWduXCIsXCJjZW50ZXIgY2VudGVyXCIpXG5cbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcIm5nLWNsYXNzXCIsXCJ7J25vZGUtdGV4dC1tYWluLW5vLWltYWdlJzohdm0uaXNJbWFnZVByZXNlbnR9XCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIixcIm1kLXN1YmhlYWQgbm9kZS10ZXh0LW1haW5cIikqL1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIC5hcHBlbmQoJGNvbXBpbGUoJzxkaXYgbmctY2xhc3M9XCJ7XFwnYWN0aXZlLW5vZGVcXCc6dm0uaXNBY3RpdmV9XCIgY2xhc3M9XCJ7e3ZtLm5vZGVDbGFzc319XCIgbmctbW91c2VlbnRlcj1cInZtLndoZW5Nb3VzZUVudGVyKClcIiBuZy1tb3VzZWxlYXZlPVwidm0ud2hlbk1vdXNlTGVhdmUoKVwiIG5nLWNsaWNrPVwidm0ubWFrZU5vZGVBY3RpdmUoKVwiPiA8ZGl2IGxheW91dD1cImNvbHVtblwiIGxheW91dC1hbGlnbj1cImNlbnRlciBjZW50ZXJcIj4gPGRpdiBuZy1jbGFzcz1cIntcXCdub2RlLXRleHQtbWFpbi1uby1pbWFnZVxcJzohdm0uaW1hZ2VwcmVzZW50fVwiIGNsYXNzPVwibWQtc3ViaGVhZCBub2RlLXRleHQtbWFpblwiPjx0cmltLXdvcmQgd29yZC1vcHRpb25zID1cInZtLndvcmRUcmltT3B0aW9uc1wiIHdvcmQ9XCJkLm5hbWVcIj48L3RyaW0td29yZD48L2Rpdj48ZGl2PiA8ZGl2IGNsYXNzPVwicm91bmQtY2hpcC13cmFwcGVyXCI+PGltZyBuZy1pZj1cInZtLmltYWdlcHJlc2VudFwiIG5nLXNyYz1cInt7ZC5pbWFnZV91cmx9fVwiIGNsYXNzPVwicm91bmQtY2hpcFwiPiA8L2Rpdj48L2Rpdj48ZGl2ICBuZy1jbGFzcz1cIntcXCdub2RlLXRleHQtc3ViLW5vLWltYWdlXFwnOiF2bS5pbWFnZXByZXNlbnR9XCIgY2xhc3M9XCJtZC1zdWJoZWFkIG5vZGUtdGV4dC1zdWJcIj57e2QubmFtZX19PC9kaXY+PGRpdiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCIgbGF5b3V0LWZpbGwgbGF5b3V0PVwicm93XCI+IDxkaXYgbmctcmVwZWF0PVwiYWN0aW9uIGluIHZtLm5vZGVBY3Rpb25zXCI+IDxidXR0b24gbmctY2xpY2s9XCJ2bS5tYWtlQ2FsbEJhY2soYWN0aW9uLmNhbGxCYWNrKTsgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1wiIGNsYXNzPVwiYWN0aW9uLWJ0blwiPjxzcGFuPjwvc3Bhbj4mbmJzcDs8aSBjbGFzcz1cInt7YWN0aW9uLmljb259fVwiPjwvaT48L2J1dHRvbj4gPC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+Jykoc2NvcGUpKVxuXG5cblxuICAgICAgICAgICAgICAgIG5vZGVUZXh0LmFwcGVuZChcInRyZWUtbm9kZVwiKS5hdHRyKFwibm9kZVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICB0cmVlVmlld1NlcnZpY2UucHVzaE5vZGUoZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgb25DbGlja2VkTm9kZSlcbiAgICAgICAgICAgICAgICAuYXR0cihcIm5vZGVJZFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5pZDtcbiAgICAgICAgICAgICAgICB9KS5hdHRyKFwiaW1hZ2VQcmVzZW50XCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2bS5pbWFnZXByZXNlbnQ7XG4gICAgICAgICAgICAgICAgfSkuYXR0cihcImlzUGlubmVkTm9kZVwiLCBcImZhbHNlXCIpLmF0dHIoXCJub2RlQWN0aW9uc1wiLCBhdHRycy5ub2RlYWN0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUodGhpcykoc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFRyYW5zaXRpb24gbm9kZXMgdG8gdGhlaXIgbmV3IHBvc2l0aW9uLlxuICAgICAgICAgICAgICAgIHZhciBub2RlVXBkYXRlID0gbm9kZS50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgZC54ICsgXCIsXCIgKyBkLnkgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVVwZGF0ZS5zZWxlY3QoXCJjaXJjbGVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiclwiLCA0LjUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQuY2xhc3MgPT09ICdoaWdobGlnaHQtbGluaycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcjZmY0MTM2JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGQuX2NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnbGlnaHRzdGVlbGJsdWUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnI2ZmZic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVVwZGF0ZS5zZWxlY3QoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMSk7Ki9cblxuICAgICAgICAgICAgICAgIC8vIFRyYW5zaXRpb24gZXhpdGluZyBuZG9lcyB0byB0aGUgcGFyZW50J3MgbmV3IHBvc2l0aW9uLlxuICAgICAgICAgICAgICAgIHZhciBub2RlRXhpdCA9IG5vZGUuZXhpdCgpLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueCArIFwiLFwiICsgc291cmNlLnkgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgbm9kZUV4aXQuc2VsZWN0KFwiY2lyY2xlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiclwiLCAxZS02KTtcbiAgICAgICAgICAgICAgICBub2RlRXhpdC5zZWxlY3QoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAxZS02KTtcblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbGlua3MuLi5cbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IHZpcy5zZWxlY3RBbGwoXCJwYXRoLmxpbmtcIilcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEodHJlZS5saW5rcyhub2RlcyksIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQuaWQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gRW50ZXIgYW55IG5ldyBsaW5rcyBhdCBodGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb25cbiAgICAgICAgICAgICAgICBsaW5rLmVudGVyKCkuaW5zZXJ0KFwic3ZnOnBhdGhcIiwgXCJnXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5rXCIpXG4gICAgICAgICAgICAgICAgICAgIC8vIC5zdHlsZShcInN0cm9rZS1kYXNoYXJyYXlcIiwoXCIzLDNcIikpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogc291cmNlLngwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHNvdXJjZS55MFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkaWFnb25hbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogb1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImRcIiwgZ2VuZXJhdGVQYXRoKTtcbiAgICAgICAgICAgICAgICAvKiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiTVwiICsgZC5zb3VyY2UueSArIFwiLFwiICsgZC5zb3VyY2UueFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiQ1wiICsgKGQudGFyZ2V0LnkgKyAxMDApICsgXCIsXCIgKyBkLnNvdXJjZS54XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCIgXCIgKyAoZC50YXJnZXQueSArIDEwMCkgKyBcIixcIiArIGQudGFyZ2V0LnhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIiBcIiArIGQudGFyZ2V0LnkgKyBcIixcIiArIGQudGFyZ2V0Lng7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsqL1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW50ZXIgYW55IEluZGlyZWN0IGxpbmtzIGF0IGh0ZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rLmVhY2goZnVuY3Rpb24oZCxpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZC5pbmRpcmVjdCk/dHJ1ZTpmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZW50ZXIoKS5pbnNlcnQoXCJzdmc6cGF0aFwiLCBcImdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5rXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJzdHJva2UtZGFzaGFycmF5XCIsKFwiMywzXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHNvdXJjZS54MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogc291cmNlLnkwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGlhZ29uYWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBnZW5lcmF0ZVBhdGgpO1xuICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvLyBUcmFuc2l0aW9uIGxpbmtzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICBsaW5rLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBnZW5lcmF0ZVBhdGgpXG4gICAgICAgICAgICAgICAgICAgIC8qICAgICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZC50YXJnZXQuY2xhc3MgPT09IFwiaGlnaGxpZ2h0LWxpbmtcIik/XCJoaWdobGlnaHQtbGluay1zdHJva2UtYWN0aXZlXCI6XCJoaWdobGlnaHQtbGluay1zdHJva2UtaW5hY3RpdmVcIjtcbiAgICAgICAgICAgICAgICAgICAgIH0pOyovXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcInN0cm9rZVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQudGFyZ2V0LmNsYXNzID09PSBcImhpZ2hsaWdodC1saW5rXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIjZmY0MTM2XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pLnN0eWxlKFwiei1pbmRleFwiLGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgICAgICBpZiAoZC50YXJnZXQuY2xhc3MgPT09IFwiaGlnaGxpZ2h0LWxpbmtcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiMjAwMFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICBsaW5rLmV4aXQoKS50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogc291cmNlLngsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogc291cmNlLnlcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGlhZ29uYWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IG9cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBTdGFzaCB0aGUgb2xkIHBvc2l0aW9ucyBmb3IgdHJhbnNpdGlvbi5cbiAgICAgICAgICAgICAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIGQueDAgPSBkLng7XG4gICAgICAgICAgICAgICAgICAgIGQueTAgPSBkLnk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KG5vZGVzLCBub2RlTGlzdCk7XG5cbiAgICAgICAgICAgICAgICB0cmVlVmlld1NlcnZpY2Uuc2V0Tm9kZXMobm9kZUxpc3QpO1xuICAgICAgICAgICAgfVxuXG4vLyBUb2dnbGUgY2hpbGRyZW5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZShkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZC5fY2hpbGRyZW4gPSBkLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBkLmNoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkLmNoaWxkcmVuID0gZC5fY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgIGQuX2NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4cGFuZE5vZGUobm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGUuY2hpbGRyZW4gPSBub2RlLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBub2RlLl9jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbi8vIHpvb20gaW4gLyBvdXRcbi8vICAgICAgICAgICAgIGZ1bmN0aW9uIHpvb20oZCkge1xuLy8gICAgICAgICAgICAgICAgIC8vdmlzLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2wzYXRlKFwiICsgZDMuZXZlbnQudHJhbnNsYXRlICsgXCIpc2NhbGUoXCIgKyBkMy5ldmVudC5zY2FsZSArIFwiKVwiKTtcbi8vICAgICAgICAgICAgICAgICB2YXIgbm9kZXMgPSB2aXMuc2VsZWN0QWxsKFwiZy5ub2RlXCIpO1xuLy8gICAgICAgICAgICAgICAgIG5vZGVzLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtKTtcbi8vXG4vLyAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBsaW5rcy4uLlxuLy8gICAgICAgICAgICAgICAgIHZhciBsaW5rID0gdmlzLnNlbGVjdEFsbChcInBhdGgubGlua1wiKTtcbi8vICAgICAgICAgICAgICAgICBsaW5rLmF0dHIoXCJkXCIsIHRyYW5zbGF0ZSk7XG4vL1xuLy8gICAgICAgICAgICAgICAgIC8vIEVudGVyIGFueSBuZXcgbGlua3MgYXQgaHRlIHBhcmVudCdzIHByZXZpb3VzIHBvc2l0aW9uXG4vLyAgICAgICAgICAgICAgICAgLy9saW5rLmF0dHIoXCJkXCIsIGZ1bmN0aW9uKGQpIHtcbi8vICAgICAgICAgICAgICAgICAvLyAgICAgIHZhciBvID0ge3g6IGQueDAsIHk6IGQueTB9O1xuLy8gICAgICAgICAgICAgICAgIC8vICAgICAgcmV0dXJuIGRpYWdvbmFsKHtzb3VyY2U6IG8sIHRhcmdldDogb30pO1xuLy8gICAgICAgICAgICAgICAgIC8vICAgIH0pO1xuLy8gICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBkZXRlcm1pbmVOb2RlUmVsYXRpdmVMb2NhdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGQuc291cmNlLmNoaWxkcmVuLmxlbmd0aCA+IDEgJiYgZC5zb3VyY2UuY2hpbGRyZW5bMF0gPT0gZC50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdvbmxlZnQnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC5zb3VyY2UuY2hpbGRyZW4ubGVuZ3RoID4gMSAmJiBkLnNvdXJjZS5jaGlsZHJlbltkLnNvdXJjZS5jaGlsZHJlbi5sZW5ndGggLSAxXSA9PSBkLnRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ29ucmlnaHQnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnc3RyYWlnaHQnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVQYXRoKGQpIHtcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiTVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoZC5zb3VyY2UueCsobm9kZUJvdW5kYXJpZXMud2lkdGgvMikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIixcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGQuc291cmNlLnkrbm9kZUJvdW5kYXJpZXMuaGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJWXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChkLnNvdXJjZS55K25vZGVCb3VuZGFyaWVzLmhlaWdodCsobm9kZUJvdW5kYXJpZXMuaGVpZ2h0LzIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJIXCIgKyAoZC50YXJnZXQueCsoKG5vZGVCb3VuZGFyaWVzLndpZHRoKS8yKS04KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCIgUSBcIiArICgoZC50YXJnZXQueCsoKG5vZGVCb3VuZGFyaWVzLndpZHRoKS8yKS04KSArIDgpICsgXCIsXCIgKyAoZC5zb3VyY2UueStub2RlQm91bmRhcmllcy5oZWlnaHQrKG5vZGVCb3VuZGFyaWVzLmhlaWdodC8yKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiIFwiICsgKChkLnRhcmdldC54Kygobm9kZUJvdW5kYXJpZXMud2lkdGgpLzIpLTgpICsgOCkgKyBcIixcIiArIChkLnNvdXJjZS55K25vZGVCb3VuZGFyaWVzLmhlaWdodCsobm9kZUJvdW5kYXJpZXMuaGVpZ2h0LzIpKzgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKyBcIiBcIiArICgoKGQuc291cmNlLnggLSA4KSAtICgoZC50YXJnZXQueCAtIGQuc291cmNlLngpIC0gMTIwKSkgLSA4KSArIFwiLFwiICsgKCgoZC5zb3VyY2UueSArIDEwKSArIDgpICsgOClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiVlwiICsgZC50YXJnZXQueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICtcIk1cIitkLnRhcmdldC54K1wiLFwiK2QudGFyZ2V0Lnk7XG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB2YXIgcmVsYXRpdmVMb2NhdGlvbiA9IGRldGVybWluZU5vZGVSZWxhdGl2ZUxvY2F0aW9uKGQpO1xuICAgICAgICAgICAgICAgIHZhciBwYXRoU3RyaW5nID0gJyc7XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlbGF0aXZlTG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3RyYWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aFN0cmluZyArPSBcIk1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGQuc291cmNlLnggKyAobm9kZUJvdW5kYXJpZXMud2lkdGggLyAyKSsxMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiLFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoZC5zb3VyY2UueSArIG5vZGVCb3VuZGFyaWVzLmhlaWdodCs1NSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiVlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoZC5zb3VyY2UueSArIG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIChub2RlQm91bmRhcmllcy5oZWlnaHQgLyAyKSszNSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiSFwiICsgKGQudGFyZ2V0LngrMTIgKyAoKG5vZGVCb3VuZGFyaWVzLndpZHRoKSAvIDIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJWXCIgKyAoZC50YXJnZXQueSs1MClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiTVwiICsgZC50YXJnZXQueCsxMiArIFwiLFwiICsgKGQudGFyZ2V0LnkrNTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ29ubGVmdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoU3RyaW5nICs9IFwiTVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoZC5zb3VyY2UueCArIChub2RlQm91bmRhcmllcy53aWR0aCAvIDIpKzEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCIsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChkLnNvdXJjZS55ICsgbm9kZUJvdW5kYXJpZXMuaGVpZ2h0KzU1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJWXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChkLnNvdXJjZS55ICsgbm9kZUJvdW5kYXJpZXMuaGVpZ2h0ICsgKG5vZGVCb3VuZGFyaWVzLmhlaWdodCAvIDIpKzM1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJIXCIgKyAoZC50YXJnZXQueCsxMiArICgobm9kZUJvdW5kYXJpZXMud2lkdGgpIC8gMikgKyA4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCIgUSBcIiArICgoZC50YXJnZXQueCsxMiArICgobm9kZUJvdW5kYXJpZXMud2lkdGgpIC8gMikgLSA4KSArIDgpICsgXCIsXCIgKyAoZC5zb3VyY2UueSArIG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIChub2RlQm91bmRhcmllcy5oZWlnaHQgLyAyKSszNSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiIFwiICsgKChkLnRhcmdldC54KzEyICsgKChub2RlQm91bmRhcmllcy53aWR0aCkgLyAyKSAtIDgpICsgOCkgKyBcIixcIiArIChkLnNvdXJjZS55ICsgbm9kZUJvdW5kYXJpZXMuaGVpZ2h0ICsgKG5vZGVCb3VuZGFyaWVzLmhlaWdodCAvIDIpICsgOCszNSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiVlwiICsgKGQudGFyZ2V0LnkrNTApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIk1cIiArIGQudGFyZ2V0LngrMTIgKyBcIixcIiArIChkLnRhcmdldC55KzUwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdvbnJpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhTdHJpbmcgKz0gXCJNXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChkLnNvdXJjZS54KzEyICsgKG5vZGVCb3VuZGFyaWVzLndpZHRoIC8gMikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIixcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGQuc291cmNlLnkgKyBub2RlQm91bmRhcmllcy5oZWlnaHQrNTUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIlZcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGQuc291cmNlLnkgKyBub2RlQm91bmRhcmllcy5oZWlnaHQgKyAobm9kZUJvdW5kYXJpZXMuaGVpZ2h0IC8gMikrMzUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIkhcIiArIChkLnRhcmdldC54KzEyICsgKChub2RlQm91bmRhcmllcy53aWR0aCkgLyAyKSAtIDgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIiBRIFwiICsgKChkLnRhcmdldC54KzEyICsgKChub2RlQm91bmRhcmllcy53aWR0aCkgLyAyKSkgKSArIFwiLFwiICsgKGQuc291cmNlLnkgKyBub2RlQm91bmRhcmllcy5oZWlnaHQgKyAobm9kZUJvdW5kYXJpZXMuaGVpZ2h0IC8gMikrMzUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIiBcIiArICgoZC50YXJnZXQueCsxMiArICgobm9kZUJvdW5kYXJpZXMud2lkdGgpIC8gMikpKSArIFwiLFwiICsgKGQuc291cmNlLnkgKyBub2RlQm91bmRhcmllcy5oZWlnaHQgKyAobm9kZUJvdW5kYXJpZXMuaGVpZ2h0IC8gMikgKyA4KzM1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJWXCIgKyAoZC50YXJnZXQueSs1MClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiTVwiICsgZC50YXJnZXQueCsxMiArIFwiLFwiICsgKGQudGFyZ2V0LnkrNTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhdGhTdHJpbmc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNhdmVBc1BERigpe1xuICAgICAgICAgICAgICAgIHZhciAgc3ZnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdmctYm94LWNvbnRhaW5lclwiKS5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgaWYgKHZpcyl7XG4gICAgICAgICAgICAgICAgICAgICBzdmcgPSBzdmcucmVwbGFjZSgvXFxyP1xcbnxcXHIvZywgJycpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG5cbiAgICAgICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGNhbnZnKGNhbnZhcywgc3ZnKTtcblxuXG4gICAgICAgICAgICAgICAgdmFyIGltZ0RhdGEgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcblxuICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIFBERlxuICAgICAgICAgICAgICAgIHZhciBkb2MgPSBuZXcganNQREYoJ3AnLCAncHQnLCAnYTQnKTtcbiAgICAgICAgICAgICAgICBkb2MuYWRkSW1hZ2UoaW1nRGF0YSwgJ1BORycsIDQwLCA0MCwgNzUsIDc1KTtcbiAgICAgICAgICAgICAgICBkb2Muc2F2ZSgndGVzdC5wZGYnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIHNhdmVBc1BERigpO1xuICAgICAgICAgICAgfSwzMDApO1xuICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNmb3JtKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB4KGQueSkgKyBcIixcIiArIHkoZC54KSArIFwiKVwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2xhdGUoZCkge1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2VYID0geChkLnRhcmdldC5wYXJlbnQueSk7XG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZVkgPSB5KGQudGFyZ2V0LnBhcmVudC54KTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0WCA9IHgoZC50YXJnZXQueSk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFkgPSAoc291cmNlWCArIHRhcmdldFgpIC8gMjtcbiAgICAgICAgICAgICAgICB2YXIgbGlua1RhcmdldFkgPSB5KGQudGFyZ2V0LngwKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gXCJNXCIgKyBzb3VyY2VYICsgXCIsXCIgKyBzb3VyY2VZICsgXCIgQ1wiICsgdGFyZ2V0WCArIFwiLFwiICsgc291cmNlWSArIFwiIFwiICsgdGFyZ2V0WSArIFwiLFwiICsgeShkLnRhcmdldC54MCkgKyBcIiBcIiArIHRhcmdldFggKyBcIixcIiArIGxpbmtUYXJnZXRZICsgXCJcIjtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3VsdCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRWRpdE5vZGUoZCkge1xuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSA5O1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnJlcGxhY2UoL1teYS16XSsvZywgJycpLnN1YnN0cigwLCBsZW5ndGgpO1xuICAgICAgICAgICAgICAgIGFkZENoaWxkTm9kZShkLmlkLCB7XG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIm5ldyBjaGlsZCBub2RlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIjogaWQsXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdG9wUHJvcG9nYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25BZGROb2RlKHBhcmVudCwgY2hpbGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gOTtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5yZXBsYWNlKC9bXmEtel0rL2csICcnKS5zdWJzdHIoMCwgbGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBhZGRDaGlsZE5vZGUocGFyZW50LmlkLCBjaGlsZCk7XG4gICAgICAgICAgICAgICAgLy8gc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uUmVtb3ZlTm9kZShkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZC5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihkKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBkLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5kSW50aGVSb290QW5kRGVzdG9yb3kocm9vdC5jaGlsZHJlbiwgZCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlKGQucGFyZW50KTtcbiAgICAgICAgICAgICAgICBzdG9wUHJvcG9nYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZmluZEludGhlUm9vdEFuZERlc3Rvcm95KGxpc3QsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobGlzdCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5pZCA9PSB2YWx1ZS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gbGlzdC5pbmRleE9mKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlLmNoaWxkcmVuKSAmJiB2YWx1ZS5jaGlsZHJlbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluZEludGhlUm9vdEFuZERlc3Rvcm95KHZhbHVlLmNoaWxkcmVuLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBmaW5kSW50aGVSb290QW5kUmVwbGFjZU5hbWUobGlzdCwgbm9kZSkge1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChsaXN0LCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmlkID09IHZhbHVlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBsaXN0LmluZGV4T2YodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0W2luZGV4XS5uYW1lID0gbm9kZS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlLmNoaWxkcmVuKSAmJiB2YWx1ZS5jaGlsZHJlbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluZEludGhlUm9vdEFuZERlc3Rvcm95KHZhbHVlLmNoaWxkcmVuLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBhZGRDaGlsZE5vZGUocGFyZW50SWQsIG5ld05vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGQzLnNlbGVjdCgnIycgKyAnbm9kZS0nICsgcGFyZW50SWQpO1xuICAgICAgICAgICAgICAgIHZhciBub2RlRGF0YSA9IG5vZGUuZGF0dW0oKTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZURhdGEuY2hpbGRyZW4gPT09IHVuZGVmaW5lZCAmJiBub2RlRGF0YS5fY2hpbGRyZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlRGF0YS5jaGlsZHJlbiA9IFtuZXdOb2RlXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVEYXRhLl9jaGlsZHJlbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVEYXRhLl9jaGlsZHJlbi5wdXNoKG5ld05vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGUobm9kZURhdGEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZURhdGEuY2hpbGRyZW4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlRGF0YS5jaGlsZHJlbi5wdXNoKG5ld05vZGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZURhdGEuX2NoaWxkcmVuID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZURhdGEuX2NoaWxkcmVuID0gW107XG4gICAgICAgICAgICAgICAgICAgIG5vZGVEYXRhLl9jaGlsZHJlbi5wdXNoKG5ld05vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGUobm9kZURhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGUobm9kZURhdGEpO1xuXG4gICAgICAgICAgICAgICAgLy8gc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUVuYWJsZShkKSB7XG4gICAgICAgICAgICAgICAgZC5lbmFibGUgPSAhZC5lbmFibGU7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBkMy5zZWxlY3QoJyMnICsgJ25vZGUtJyArIGQuaWQgKyBcIiAubm9kZS1sYWJlbFwiKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZChcImRpc2FibGVkXCIsICFkLmVuYWJsZSk7XG4gICAgICAgICAgICAgICAgc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gc3RvcFByb3BvZ2F0aW9uKCkge1xuICAgICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYWN0aXZlID0gZDMuc2VsZWN0KG51bGwpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkNsaWNrZWROb2RlKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vZGUpO1xuICAgICAgICAgICAgICAgIHZhciBpc1Jlc2V0ID0gbWFrZUNsaWNrZWROb2RlQWN0aXZlKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vVE9ETyBzY2FsZSBhY2NvcmRpbmcgdG8gdGhlIGJvdW5kc1xuICAgICAgICAgICAgICAgIC8vIHZhciBib3VuZHMgPSBkMy5zZWxlY3QoZWxlbVswXSkubm9kZSgpLmdldEJCb3goKTtcbiAgICAgICAgICAgICAgICAvLyB2YXIgc2NhbGUgPSBNYXRoLm1heCgxLCBNYXRoLm1pbig4LCAwLjkgLyBNYXRoLm1heChkLnggLCBkLnkgKSkpO1xuICAgICAgICAgICAgICAgIHBhblRvVGhlTm9kZShub2RlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gaGlnaGxpZ2h0UGF0aChub2RlKSB7XG4gICAgICAgICAgICAgICAgLy9UT0RPIG11c3QgaW5jbHVkZSB0aGUgcm9vdCBub2RlIGluIHRoZSBhcnJheVxuICAgICAgICAgICAgICAgIC8vUGF0aCBhcnJheSB0byBzdG9yZSBub2Rlc1xuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gc2VhcmNoV2l0aGluVHJlZSh2bS50cmVlZGF0YSwgbm9kZS5uYW1lLCBbXSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQocGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9mdW5jdGlvbiB0byBvcGVuIHBhdGhzXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySGlnaExpZ2h0TGlua3MobGFzdFNlYXJjaGVkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodExpbmtzKHBhdGgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZWFyY2hlZCBub2RlICcgKyBub2RlLm5hbWUgKyAnIG5vdCBmb3VuZCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxhc3RTZWFyY2hlZFBhdGggPSBwYXRoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBoaWdobGlnaHRMaW5rcyhwYXRoKSB7XG5cbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocGF0aCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcblxuICAgICAgICAgICAgICAgICAgICAvL1RPRE8gYXNzdW1lIHRoYXQgaWQgb2YgdGhlIHJvb3Qgbm9kZSBpcyAxLC5tYWtlIHRoaXMgbW9yZSBjb25zaXN0ZW50IGxhdGVyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmICh2YWx1ZS5pZCAhPT0naWQxJykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5jbGFzcyA9ICdoaWdobGlnaHQtbGluayc7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5fY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmNoaWxkcmVuID0gdmFsdWUuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuX2NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJIaWdoTGlnaHRMaW5rcyhwYXRoKSB7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHBhdGgsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmNsYXNzID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5fY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmNoaWxkcmVuID0gdmFsdWUuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuX2NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGUodmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUhpZ2hsaWdodChub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuY2xhc3MgPT09ICdoaWdobGlnaHQtbGluaycpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jbGFzcyA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9zZWFyY2ggb24gdHJlZSBmb3IgYSBsaW5rXG4gICAgICAgICAgICBmdW5jdGlvbiBzZWFyY2hXaXRoaW5UcmVlKG5vZGUsIHNlYXJjaEtleSwgcGF0aCkge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLm5hbWUgPT09IHNlYXJjaEtleSkgeyAvL2lmIHNlYXJjaCBpcyBmb3VuZCByZXR1cm4sIGFkZCB0aGUgb2JqZWN0IHRvIHRoZSBwYXRoIGFuZCByZXR1cm4gaXRcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5jaGlsZHJlbiB8fCBub2RlLl9jaGlsZHJlbikgeyAvL2lmIGNoaWxkcmVuIGFyZSBjb2xsYXBzZWQgZDMgb2JqZWN0IHdpbGwgaGF2ZSB0aGVtIGluc3RhbnRpYXRlZCBhcyBfY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gKG5vZGUuY2hpbGRyZW4pID8gbm9kZS5jaGlsZHJlbiA6IG5vZGUuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoLnB1c2gobm9kZSk7Ly8gd2UgYXNzdW1lIHRoaXMgcGF0aCBpcyB0aGUgcmlnaHQgb25lXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBzZWFyY2hXaXRoaW5UcmVlKGNoaWxkcmVuW2ldLCBzZWFyY2hLZXksIHBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kKSB7Ly8gd2Ugd2VyZSByaWdodCwgdGhpcyBzaG91bGQgcmV0dXJuIHRoZSBidWJibGVkLXVwIHBhdGggZnJvbSB0aGUgZmlyc3QgaWYgc3RhdGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7Ly93ZSB3ZXJlIHdyb25nLCByZW1vdmUgdGhpcyBwYXJlbnQgZnJvbSB0aGUgcGF0aCBhbmQgY29udGludWUgaXRlcmF0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHsvL25vdCB0aGUgcmlnaHQgb2JqZWN0LCByZXR1cm4gZmFsc2Ugc28gaXQgd2lsbCBjb250aW51ZSB0byBpdGVyYXRlIGluIHRoZSBsb29wXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG1ha2VDbGlja2VkTm9kZUFjdGl2ZShlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzUmVzZXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlLm5vZGUoKSA9PT0gZWxlbSkge1xuICAgICAgICAgICAgICAgICAgICBpc1Jlc2V0ID0gcmVzZXQoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNSZXNldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmUuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZSA9IGQzLnNlbGVjdChlbGVtKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhblRvVGhlTm9kZShub2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gdmFyIHNjYWxlID0gMTsvL0ZJWE1FIGFkZCBzY2FsZSB0byBoaWdoZXIgaWYgbmVlZFxuICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpO1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGUgPSBbLXNjYWxlICogbm9kZS54LCAtc2NhbGUgKiBub2RlLnldO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdub2RlJywgbm9kZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25vZGUgdHJhbnNsYXRlICcsIHRyYW5zbGF0ZSk7XG4gICAgICAgICAgICAgICAgdmlzLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMTI1MClcbiAgICAgICAgICAgICAgICAgICAgLmNhbGwoem9vbS50cmFuc2xhdGUodHJhbnNsYXRlKS5zY2FsZShzY2FsZSkuZXZlbnQpO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHpvb21lZFdyYXBwZXIoKSB7XG4gICAgICAgICAgICAgICAgLy8gZy5zdHlsZShcInN0cm9rZS13aWR0aFwiLCAxLjUgLyBkMy5ldmVudC5zY2FsZSArIFwicHhcIik7XG4gICAgICAgICAgICAgICAgdmlzLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBkMy5ldmVudC50cmFuc2xhdGUgKyBcIilzY2FsZShcIiArIGQzLmV2ZW50LnNjYWxlICsgXCIpXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlc2V0IGNhbGxlZFwiKTtcbiAgICAgICAgICAgICAgICBhY3RpdmUuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgYWN0aXZlID0gZDMuc2VsZWN0KG51bGwpO1xuXG4gICAgICAgICAgICAgICAgLy9UT0RPIHJlbW92ZSBBU0FQXG4gICAgICAgICAgICAgICAgLyogICAgICAgICAgICAgICAgdmlzLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDc1MClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYWxsKHpvb21PYmplY3QudHJhbnNsYXRlKFsxNTAsIDEwMF0pLnNjYWxlKDEpLmV2ZW50KTsqL1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFRyZWVOb2RlQnlPYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyZWVOb2RlID0gJGZpbHRlcignZmlsdGVyJykobm9kZUxpc3QsIHsnaWQnOiBvYmplY3QuaWR9LCB0cnVlKVswXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJlZU5vZGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFRyZWVOb2RlQnlJRChpZCkge1xuICAgICAgICAgICAgICAgIHZhciB0cmVlTm9kZSA9ICRmaWx0ZXIoJ2ZpbHRlcicpKG5vZGVMaXN0LCB7J2lkJzogaWR9LCB0cnVlKVswXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJlZU5vZGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNlbnRlclRoZVJvb3QoKSB7XG4gICAgICAgICAgICAgICAgLy9UcmFuc2Zvcm0gdG8gdGhlIGNlbnRlciAoMCwwKVxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybU5vZGUoMCwgMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zZm9ybU5vZGUoeFBvcywgeVBvcykge1xuICAgICAgICAgICAgICAgIHZpcy50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAvL2R1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gb2YgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMTAwMClcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsYXkgdGltZSBpbiBtc1xuICAgICAgICAgICAgICAgICAgICAuZGVsYXkoMTAwKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgKHhQb3MpICsgXCIsXCIgKyAoeVBvcykgKyBcIilcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJzY2FsZShcIiArIHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpICsgXCIpXCI7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBub2RlQWN0aXZlQ2xlYXJMaXN0ZW5lciA9IHNjb3BlLiRvbignYXBwOm5vZGVzOmNsZWFyYWN0aXZlJywgb25EZWFjdGl2YXRlTm9kZXMpO1xuICAgICAgICAgICAgbm9kZURlbGV0ZUxpc3RlbmVyID0gc2NvcGUuJG9uKCdhcHA6bm9kZXM6ZGVsZXRlJywgb25Ob2RlRGVsZXRlKTtcbiAgICAgICAgICAgIG5vZGVBZnRlckFkZExpc3RlbmVyID0gc2NvcGUuJG9uKCdhcHA6bm9kZXM6YWRkOjphZnRlcicsIG9uTm9kZUFmdGVyQWRkKTtcbiAgICAgICAgICAgIG5vZGVBZnRlclVwZGF0ZUxpc3RlbmVyID0gc2NvcGUuJG9uKCdhcHA6bm9kZXM6dXBkYXRlOjphZnRlcicsIG9uTm9kZUFmdGVyVXBkYXRlKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Ob2RlQWZ0ZXJVcGRhdGUoZXYsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBmaW5kSW50aGVSb290QW5kUmVwbGFjZU5hbWUocm9vdC5jaGlsZHJlbiwgZGF0YS5sYXN0RWRpdGVkTm9kZSk7XG4gICAgICAgICAgICAgICAgdXBkYXRlKGRhdGEubGFzdEVkaXRlZE5vZGUpO1xuICAgICAgICAgICAgICAgIHN0b3BQcm9wb2dhdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbk5vZGVBZnRlckFkZChldiwgZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciByZXNvbHZlZE5vZGUgPSBnZXRUcmVlTm9kZUJ5SUQoZGF0YS5wYXJlbnROb2RlLmlkKTtcbiAgICAgICAgICAgICAgICBvbkFkZE5vZGUocmVzb2x2ZWROb2RlLCBkYXRhLmxhc3RBZGRlZE5vZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbk5vZGVEZWxldGUoZXYsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZWROb2RlID0gZ2V0VHJlZU5vZGVCeUlEKGRhdGEubm9kZUlEKTtcbiAgICAgICAgICAgICAgICBvblJlbW92ZU5vZGUocmVzb2x2ZWROb2RlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gbWFrZU5vZGVBY3RpdmUoaWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZUxpc3QgPSBkMy5zZWxlY3RBbGwoXCIubm9kZS1cIiArIGlkLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChub2RlTGlzdFswXSkuYWRkQ2xhc3MoJ2FjdGl2ZS1ub2RlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFyQWxsQWN0aXZlTm9kZXMoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGVMaXN0ID0gZDMuc2VsZWN0QWxsKFwiLm5vZGUtbGFiZWxcIik7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG5vZGVMaXN0LCBmdW5jdGlvbiAodiwgaykge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQodikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1ub2RlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRGVhY3RpdmF0ZU5vZGVzKGV2LCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJBbGxBY3RpdmVOb2RlcygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBpbnRlcnBvbGF0ZVpvb20odHJhbnNsYXRlLCBzY2FsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkMy50cmFuc2l0aW9uKCkuZHVyYXRpb24oMjUwKS50d2VlbihcIndoZWVsLnpvb21cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaVRyYW5zbGF0ZSA9IGQzLmludGVycG9sYXRlKHpvb20udHJhbnNsYXRlKCksIHRyYW5zbGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpU2NhbGUgPSBkMy5pbnRlcnBvbGF0ZSh6b29tLnNjYWxlKCksIHNjYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNjYWxlKGlTY2FsZSh0KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJhbnNsYXRlKGlUcmFuc2xhdGUodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgem9vbWVkKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHpvb21DbGljayhzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gMSxcbiAgICAgICAgICAgICAgICAgICAgZmFjdG9yID0gMC4yLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRfem9vbSA9IDEsXG4gICAgICAgICAgICAgICAgICAgIGNlbnRlciA9IFt3IC8gMiwgaCAvIDJdLFxuICAgICAgICAgICAgICAgICAgICBleHRlbnQgPSB6b29tLnNjYWxlRXh0ZW50KCksXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZSA9IHpvb20udHJhbnNsYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZTAgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgbCA9IFtdLFxuICAgICAgICAgICAgICAgICAgICB2aWV3ID0ge3g6IHRyYW5zbGF0ZVswXSwgeTogdHJhbnNsYXRlWzFdLCBrOiB6b29tLnNjYWxlKCl9O1xuXG4gICAgICAgICAgICAgICAgLy8gZDMuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAoc3RhdHVzID09PSAnaW5jcmVtZW50JykgPyAxIDogLTE7XG4gICAgICAgICAgICAgICAgdGFyZ2V0X3pvb20gPSB6b29tLnNjYWxlKCkgKiAoMSArIGZhY3RvciAqIGRpcmVjdGlvbik7XG5cbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0X3pvb20gPCBleHRlbnRbMF0gfHwgdGFyZ2V0X3pvb20gPiBleHRlbnRbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZTAgPSBbKGNlbnRlclswXSAtIHZpZXcueCkgLyB2aWV3LmssIChjZW50ZXJbMV0gLSB2aWV3LnkpIC8gdmlldy5rXTtcbiAgICAgICAgICAgICAgICB2aWV3LmsgPSB0YXJnZXRfem9vbTtcbiAgICAgICAgICAgICAgICBsID0gW3RyYW5zbGF0ZTBbMF0gKiB2aWV3LmsgKyB2aWV3LngsIHRyYW5zbGF0ZTBbMV0gKiB2aWV3LmsgKyB2aWV3LnldO1xuXG4gICAgICAgICAgICAgICAgdmlldy54ICs9IGNlbnRlclswXSAtIGxbMF07XG4gICAgICAgICAgICAgICAgdmlldy55ICs9IGNlbnRlclsxXSAtIGxbMV07XG5cbiAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZVpvb20oem9vbS50cmFuc2xhdGUoKSwgdmlldy5rKTtcbiAgICAgICAgICAgICAgICAvLyB6b29tZWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gem9vbWVkKCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHpvb20uc2NhbGUoKSk7XG4gICAgICAgICAgICAgICAgdG9vbFNldFNlcnZpY2Uuc2V0Wm9vbVNjYWxlKHpvb20uc2NhbGUoKSk7XG4gICAgICAgICAgICAgICAgdmlzLmF0dHIoXCJ0cmFuc2Zvcm1cIixcbiAgICAgICAgICAgICAgICAgICAgXCJ0cmFuc2xhdGUoXCIgKyB6b29tLnRyYW5zbGF0ZSgpICsgXCIpXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInNjYWxlKFwiICsgdG9vbFNldFNlcnZpY2UuZ2V0Wm9vbVNjYWxlKCkgKyBcIilcIlxuICAgICAgICAgICAgICAgICAgICAvLyBcInNjYWxlKFwiICsgem9vbS5zY2FsZSgpICsgXCIpXCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIC8vIHpvb21XaXRoVHdlZW4oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gem9vbVdpdGhUd2VlbigpIHtcbiAgICAgICAgICAgICAgICB2aXMudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgem9vbS50cmFuc2xhdGUoKSArIFwiKXNjYWxlKFwiICsgdG9vbFNldFNlcnZpY2UuZ2V0Wm9vbVNjYWxlKCkgKyBcIilcIik7XG4gICAgICAgICAgICAgICAgLyogICAgICAgICAgICAgICAgICAgIC5lYWNoKFwiZW5kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnRlcnBvbGF0ZVpvb20oem9vbS50cmFuc2xhdGUoKSx6b29tLnNjYWxlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7Ki9cbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZGVzdHJveUxpc3RlbmVyKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gZGVzdHJveUxpc3RlbmVyKCkge1xuICAgICAgICAgICAgICAgIG5vZGVBY3RpdmVDbGVhckxpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgbm9kZURlbGV0ZUxpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgbm9kZUFmdGVyQWRkTGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICBub2RlQWZ0ZXJVcGRhdGVMaXN0ZW5lcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICByZXR1cm4gdHJlZVZpZXdEaXJlY3RpdmU7XG4gICAgfVxuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIFRyZWVWaWV3RGlyZWN0aXZlQ29udHJvbGxlcigkcm9vdFNjb3BlLCAkc2NvcGUsIHRyZWVWaWV3U2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5tYWtlQ2FsbEJhY2sgPSBtYWtlQ2FsbEJhY2s7XG5cbiAgICAgICAgY29uc29sZS5sb2codm0uc2VhcmNoYWJsZUxpc3QpO1xuXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VDYWxsQmFjayhpZGVudGlmaWVyLCBub2RlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2FsbGVkIHRyZWV2aWV3IGNhbGwgYmFjayBhYm4nKTtcbiAgICAgICAgICAgICRzY29wZS52bVtpZGVudGlmaWVyXSh7bm9kZTogbm9kZX0pO1xuICAgICAgICB9XG5cbiAgICB9XG59KSgpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNi8xLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdvcmdDaGFydCcpLmZhY3RvcnkoJ3RyZWVWaWV3U2VydmljZScsIHRyZWVWaWV3U2VydmljZSk7XG5cbiAgICBmdW5jdGlvbiB0cmVlVmlld1NlcnZpY2UoJGZpbHRlcikge1xuICAgICAgICB2YXIgc2VsZWN0ZWROb2RlID0gbnVsbDtcbiAgICAgICAgdmFyIG5vZGVzID0gW107XG5cbiAgICAgICAgdmFyIHNlcnZpY2VFeHBvc2FibGUgPSB7XG4gICAgICAgICAgICBzZXRTZWFyY2hlZE5vZGU6IHNldFNlYXJjaGVkTm9kZSxcbiAgICAgICAgICAgIGdldFNlYXJjaGVkTm9kZTogZ2V0U2VhcmNoZWROb2RlLFxuICAgICAgICAgICAgc2V0Tm9kZXM6IHNldE5vZGVzLFxuICAgICAgICAgICAgcHVzaE5vZGU6IHB1c2hOb2RlLFxuICAgICAgICAgICAgZ2V0Tm9kZXM6IGdldE5vZGVzLFxuICAgICAgICAgICAgZmluZEJ5SWQ6IGZpbmRCeUlkXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHNlcnZpY2VFeHBvc2FibGU7XG5cbiAgICAgICAgZnVuY3Rpb24gZmluZEJ5SWQoaWQpIHtcbiAgICAgICAgICAgIHZhciB0cmVlTm9kZSA9ICRmaWx0ZXIoJ2ZpbHRlcicpKG5vZGVzLCB7J2lkJzogaWR9LCB0cnVlKVswXTtcbiAgICAgICAgICAgIHJldHVybiB0cmVlTm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldE5vZGVzKHNldE9mbm9kZXMpIHtcbiAgICAgICAgICAgIG5vZGVzID0gc2V0T2Zub2RlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldE5vZGVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGVzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcHVzaE5vZGUobm9kZSkge1xuICAgICAgICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFNlYXJjaGVkTm9kZShub2RlKSB7XG4gICAgICAgICAgICBzZWxlY3RlZE5vZGUgPSBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0U2VhcmNoZWROb2RlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkTm9kZTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA2LzIzLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5kaXJlY3RpdmUoJ3RyaW1Xb3JkJywgdHJpbVdvcmQpO1xuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIHRyaW1Xb3JkKCkge1xuICAgICAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPHNwYW4gbmctYmluZD1cInZtLnBhcnNlZFRleHRcIj48bWQtdG9vbHRpcCBuZy1pZj1cInZtLmlzVG9vbFRpcE5lZWQoKVwiIG1kLWRpcmVjdGlvbj1cInZtLndvcmRPcHRpb25zLnRvb2xUaXBEaXJlY3Rpb25cIj57ezo6dm0ud29yZH19PC9tZC10b29sdGlwPjwvc3Bhbj4nLFxuICAgICAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICAgICAgY29udHJvbGxlcjogdHJpbVdvcmRDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazogbGluayxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgICAgICB3b3JkT3B0aW9uczonPScsXG4gICAgICAgICAgICAgICAgd29yZDonPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW0sIGF0dHIsdm0pIHtcblxuICAgICAgICAgICAgdm0uaXNUb29sVGlwTmVlZCA9IGlzVG9vbFRpcE5lZWQ7XG5cbiAgICAgICAgICAgIG9uSW5pdCgpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkluaXQoKXtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZVdhdGNoZXJzKCk7XG4gICAgICAgICAgICAgICAgcGFyc2VUZXh0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlV2F0Y2hlcnMoKXtcbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goYW5ndWxhci5iaW5kKHZtLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2bS53b3JkO1xuICAgICAgICAgICAgICAgIH0pLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnd29yZCBjaGFuZ2UgdG8gJyArIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VUZXh0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRyaW1Xb3JkKCkge1xuICAgICAgICAgICAgICAgIHZhciBmcm9tVmFsdWUgPSBwYXJzZUludCh2bS53b3JkT3B0aW9ucy5mcm9tKTtcbiAgICAgICAgICAgICAgICB2YXIgdG9WYWx1ZSA9IHBhcnNlSW50KHZtLndvcmRPcHRpb25zLnVudGlsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdm0ud29yZC5zdWJzdHJpbmcoZnJvbVZhbHVlLCB0b1ZhbHVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gaXNUb29sVGlwTmVlZCgpe1xuICAgICAgICAgICAgICAgIHJldHVybiB2bS53b3JkT3B0aW9ucy50b29sVGlwPT0ndHJ1ZSc/dHJ1ZTpmYWxzZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZVRleHQoKXtcbiAgICAgICAgICAgICAgICB2bS5wYXJzZWRUZXh0ID0gdHJpbVdvcmQoKTtcbiAgICAgICAgICAgICAgICAodm0ud29yZC5sZW5ndGg+cGFyc2VJbnQodm0ud29yZE9wdGlvbnMudW50aWwpKT92bS5wYXJzZWRUZXh0ID0gdm0ucGFyc2VkVGV4dC5jb25jYXQoXCIgLi4uXCIpOnZtLnBhcnNlZFRleHQ7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIHRyaW1Xb3JkQ29udHJvbGxlcigpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgIH1cbn0pKCk7XG4iXX0=
