!function(){"use strict";angular.module("orgChart",[])}(),function(){"use strict";angular.module("orgChart").directive("cascadeTreeSearchBox",function(e,n,t){return{replace:!1,restrict:"EA",controller:function(o){function a(e){var n=angular.lowercase(e);return function(e){return 0===e.displayLowerCase.indexOf(n)}}var i=this;i.simulateQuery=!1,i.isDisabled=!1,i.noCache=!0,i.states=[{value:{name:"PublisherNameLongName",id:"id1",type:"type0",addable:!1,editable:!1,removable:!1,enableble:!1},display:"PublisherNameLongName",displayLowerCase:"PublisherNameLongName".toLowerCase()},{value:{name:"Landing A",id:"id2",type:"type1",addable:!0,editable:!0,removable:!0,enablable:!0,enable:!1},display:"Landing A",displayLowerCase:"Landing A".toLowerCase()},{value:{name:"Account 1",id:"id3",type:"type2"},display:"Account 1",displayLowerCase:"Account 1".toLowerCase()},{value:{name:"Landing B",id:"id8",type:"type1"},display:"Landing B",displayLowerCase:"Landing B".toLowerCase()}],i.querySearch=function(t){var o,l=t?i.states.filter(a(t)):i.states;return i.simulateQuery?(o=n.defer(),e(function(){o.resolve(l)},1e3*Math.random(),!1),o.promise):l},i.selectedItemChange=function(e){e&&(t.info("Item changed to "+JSON.stringify(e)),o.setSearchedNode(e.value))},i.searchTextChange=function(e){t.info("Text changed to "+e)},i.newState=function(e){alert("Sorry! You'll need to create a Constitution for "+e+" first!")}},template:'<div layout-align="start center" layout="row" layout-fill> <div flex-offset="5"> <md-autocomplete style="margin-top: 20px" ng-disabled="vm.isDisabled" md-no-cache="vm.noCache" md-selected-item="vm.selectedItem" md-search-text-change="vm.searchTextChange(vm.searchText)" md-search-text="vm.searchText" md-selected-item-change="vm.selectedItemChange(item)" md-items="item in vm.querySearch(vm.searchText)" md-item-text="item.display" md-min-length="0" placeholder="Search People"> <md-item-template> <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.display}}</span> </md-item-template> <md-not-found> No states matching "{{ctrl.searchText}}" were found. <a ng-click="ctrl.newState(ctrl.searchText)">Create a new one!</a> </md-not-found> </md-autocomplete> </div></div>',controllerAs:"vm",scope:{},bindToController:{},link:function(){}}})}(),function(){"use strict";function e(e){var n=this;n.isExpandAllMode=e.isExpandAllMode(),n.toggleExpandAllMode=function(){n.isExpandAllMode=e.toggleExpandAllMode()},n.incrementZoomScale=function(){n.zoomScale=e.incrementZoomScale()},n.decrementZoomScale=function(){n.zoomScale=e.decrementZoomScale()},n.zoomScale=e.getZoomScale()}angular.module("orgChart").directive("cascadeToolSet",function(){return{replace:!1,restrict:"EA",controller:e,controllerAs:"vm",template:'<div layout="column" layout-align="center end"> <div layout="row" layout-align="space-around center" style="margin-top: 20px" flex-offset="5"> <div> <md-button class="md-icon-button" ng-click="vm.incrementZoomScale()"> <md-tooltip md-direction="bottom">Zoom In</md-tooltip> <md-icon md-font-icon="zmdi zmdi-plus"></md-icon></md-button> </div><div> <md-button class="md-icon-button" ng-click="vm.decrementZoomScale()" ng-disabled="vm.zoomScale<=1"> <md-tooltip md-direction="bottom">Zoom Out</md-tooltip> <md-icon md-font-icon="zmdi zmdi-minus"></md-icon></md-button> </div><div> <md-button class="md-icon-button" ng-hide="vm.isExpandAllMode" ng-click="vm.toggleExpandAllMode()"> <md-tooltip md-direction="bottom">Expand All</md-tooltip> <md-icon md-font-icon="zmdi zmdi-triangle-down"></md-icon></md-button> </div><div> <md-button class="md-icon-button" ng-show="vm.isExpandAllMode" ng-click="vm.toggleExpandAllMode()"> <md-tooltip md-direction="bottom">Collapse All</md-tooltip> <md-icon md-font-icon="zmdi zmdi-triangle-up"></md-icon></md-button> </div></div></div>',scope:{},bindToController:{},link:function(e,n,t,o){}}})}(),function(){"use strict";angular.module("orgChart").factory("toolSetService",function(){var e=!1,n=1;return{isExpandAllMode:function(){return e},toggleExpandAllMode:function(){return e=!e},getZoomScale:function(){return n},setZoomScale:function(e){n=e,console.log("zoom scale",n)},incrementZoomScale:function(){return n+=.1},decrementZoomScale:function(){return n>1&&(n-=.1),n}}})}(),function(){"use strict";function e(e){}angular.module("orgChart").directive("cascadeTreeNode",function(n,t,o,a){return{restrict:"E",replace:!1,controller:e,template:'<div ng-class="{\'active-node\':vm.isActive}" class="{{vm.nodeClass}}" ng-mouseenter="vm.whenMouseEnter()" ng-mouseleave="vm.whenMouseLeave()" ng-click="vm.makeNodeActive()"> <div layout="column" layout-align="center center"> <div class="md-subhead">Some Text</div><div> <div class=""><img ng-src="assets/images/avatars/flasher.thumb.jpg" class="round-chip"></div></div><div class="md-subhead">{{vm.node.name}}</div><div layout-align="center center" layout-fill class="action-area" layout="row" ng-show="vm.isExpandedView"> <div ng-repeat="action in vm.nodeActions"><button ng-click="vm.makeCallBack(action.callBack)"><span ng-bind="action.name"></span>&nbsp;<i class="{{action.icon}}"></i></button></div></div></div></div>',controllerAs:"vm",scope:{},bindToController:{nodeId:"@",nodeActions:"@"},link:function(e,t,i,l){function c(){a.$broadcast("app:nodes:clearactive",{data:""})}function r(n){t===n.target||t[0].contains(n.target)||e.$apply(function(){l.isActive=!1})}l.id=i.nodeid,l.nodeActions=angular.fromJson(i.nodeactions),console.log(l.nodeActions),l.isPinnedNode=!1,l.node=n.findById(i.nodeid),l.nodeClass="node-label node-"+l.node.type+" node-"+l.id,l.isExpandedView=!1,l.isActive=!1,l.whenMouseEnter=function(){console.log("mouse Entered"),l.isExpandedView=!0},l.whenMouseLeave=function(){console.log("mouse leaved"),l.isExpandedView=!1},l.togglePinnedMode=function(){l.isPinnedNode=!0,console.log(l.isPinnedNode)},l.makeCallBack=function(n){console.log(n),e.$parent.vm.makeCallBack(n)},l.makeNodeActive=function(){c(),l.isActive=!0},angular.element(t.children()[0]),o.on("click",r),e.$on("$destroy",function(){o.off("click",r)})}}})}(),function(){"use strict";function e(e,n,t){this.makeCallBack=function(e){console.log("called treeview call back abn"),n.vm[e]()}}angular.module("orgChart").directive("cascadeTreeView",function(n,t,o,a,i,l){return{replace:"false",restrict:"E",scope:{},bindToController:{data:"=",abn:"&",nodeActions:"@"},controller:e,controllerAs:"vm",link:function(e,c,r,d){function s(){m(),f(),u()}function u(){e.$watch(function(){return i.isExpandAllMode()},function(e){e?h():y()})}function m(){e.$watch(function(){return o.getSearchedNode()},function(e){if(console.log(e),e){w(e);var n=z(e);_(),a(function(){console.log(n.x,n.y),T(),M(n.id),N(n)},500)}})}function f(){e.$watch(function(){return i.getZoomScale()},function(e){console.log(e),q.transition().duration(750).call(R.translate([150,100]).scale(e).scaleExtent([1,8]).event)})}function v(e){e.children&&(e.children.forEach(v),x(e))}function p(e){var n=e.children?e.children:e._children;e._children&&(e.children=e._children,e._children=null),n&&n.forEach(p)}function g(e){var n=e.children?e.children:e._children;e.children&&(e._children=e.children,e.children=null),n&&n.forEach(g)}function h(){p(Z),b(Z)}function y(){g(Z),b(Z)}function b(n){var a=d3.event&&d3.event.altKey?5e3:500,i=J.nodes(Z).reverse();i.forEach(function(e){e.y=200*e.depth});var l=q.selectAll("g.node").data(i,function(e){return e.id||(e.id=++O)}),c=l.enter().append("svg:g").attr("class","node").attr("id",function(e){return"node-"+e.id}).attr("transform",function(e){return"translate("+n.x0+","+n.y0+")"}).on("click",function(e){d3.event.defaultPrevented||(x(e),b(e),e.info&&playvid(e.info))});c.append("svg:circle").attr("r",1e-6).style("fill",function(e){return e._children?"lightsteelblue":"#fff"}),c.append("svg:foreignObject").attr("y",-30).attr("x",-5).attr("text-anchor",function(e){return e.children||e._children?"end":"start"}).style("fill-opacity",1e-6).attr("width",160).attr("height",120).append("xhtml:div").classed("disabled",function(e){return void 0!==e.enable&&!e.enable}).on("click",k).append("cascade-tree-node").attr("nodeId",function(e){return e.id}).attr("isPinnedNode","false").attr("nodeActions",r.nodeactions).each(function(){t(this)(e)});var d=l.transition().duration(a).attr("transform",function(e){return"translate("+e.x+","+e.y+")"});d.select("circle").attr("r",4.5).style("fill",function(e){return"highlight-link"===e.class?"#ff4136":e._children?"lightsteelblue":"#fff"}),d.select("text").style("fill-opacity",1);var s=l.exit().transition().duration(a).attr("transform",function(e){return"translate("+n.x+","+n.y+")"}).remove();s.select("circle").attr("r",1e-6),s.select("text").style("fill-opacity",1e-6);var u=q.selectAll("path.link").data(J.links(i),function(e){return e.target.id});u.enter().insert("svg:path","g").attr("class","link").attr("d",function(e){var t={x:n.x0,y:n.y0};return Q({source:t,target:t})}).transition().duration(a).attr("d",Q),u.transition().duration(a).attr("d",Q).style("stroke",function(e){if("highlight-link"===e.target.class)return"#ff4136"}),u.exit().transition().duration(a).attr("d",function(e){var t={x:n.x,y:n.y};return Q({source:t,target:t})}).remove(),i.forEach(function(e){e.x0=e.x,e.y0=e.y}),angular.copy(i,B),o.setNodes(B)}function x(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null)}function A(){d3.event.stopPropagation()}function k(e){d3.event.defaultPrevented||(console.log(e),L(this)||N(e))}function w(e){var n=E(P,e.name,[]);angular.isDefined(n)?(C(D),S(n)):console.log("Searched node "+e.name+" not found"),D=n}function S(e){angular.forEach(e,function(e,n){e.class="highlight-link",e._children&&(e.children=e._children,e._children=null),b(e)})}function C(e){angular.forEach(e,function(e,n){e.class="",e._children&&(e.children=e._children,e._children=null),b(e)})}function E(e,n,t){if(e.name===n)return t.push(e),t;if(!e.children&&!e._children)return!1;for(var o=e.children?e.children:e._children,a=0;a<o.length;a++){t.push(e);var i=E(o[a],n,t);if(i)return i;t.pop()}}function L(e){var n=!1;return K.node()===e&&(n=_()),!!n||(K.classed("active",!1),K=d3.select(e).classed("active",!0),!1)}function N(e){var n=[e.x/2-1*e.x,e.y/2-1*e.y];q.transition().duration(1250).call(R.translate(n).scale(1).event)}function _(){return console.log("reset called"),K.classed("active",!1),K=d3.select(null),q.transition().duration(750).call(R.translate([150,100]).scale(1).event),!0}function z(e){return n("filter")(B,{id:e.id},!0)[0]}function M(e){var n=d3.selectAll(".node-"+e.toString());angular.element(n[0]).addClass("active-node")}function T(){var e=d3.selectAll(".node-label");angular.forEach(e,function(e,n){angular.element(e).removeClass("active-node")})}var Z,P={name:"RootNode",id:"id1",type:"type0",addable:!1,editable:!1,removable:!1,enableble:!1,root:!0,children:[{name:"Landing A",id:"id2",type:"type1",addable:!0,editable:!0,removable:!0,enablable:!0,enable:!1,children:[{name:"Account 1",id:"id3",type:"type2",children:[{name:"tracking link 1",id:"id4",type:"type3",enablable:!0,enable:!0},{name:"tracking link 2",id:"id5",type:"type3",enablable:!0,enable:!0},{name:"tracking link 3",id:"id6",type:"type3",enablable:!0,enable:!1}]},{name:"Account 2",id:"id7",type:"type2"},{name:"Account 3",id:"id9",type:"type2"}]},{name:"Landing B",id:"id8",type:"type1",children:[{name:"Account 4",id:"id10",type:"type2"},{name:"Account 5",id:"id11",type:"type2"},{name:"Account 6",id:"id12",type:"type2"}]},{name:"Landing C",id:"id13",type:"type1",children:[{name:"Subtopic 7",id:"id14",type:"type3"},{name:"Subtopic 8",id:"id15",type:"type3"},{name:"Subtopic 9",id:"id16",type:"type3"}]}]},B=[],$=[20,20,20,20],I=l.innerWidth-20-$[1]-$[3],V=600-$[0]-$[2],O=0,j=(d3.scale.linear().domain([0,I]).range([0,I]),d3.scale.linear().domain([0,V]).range([0,V]),d3.select(c[0])),D=[];c.append(t('<div layout="row" layout-align="space-around center"><div flex><cascade-tree-search-box></cascade-tree-search-box></div><div flex><cascade-tool-set></cascade-tool-set></div></div>')(e)),s();var q=j.append("div").attr("layout","row").attr("layout-align","space-around center").call(function(){t(this[0])(e)}).append("div").attr("flex","").call(function(){t(this[0])(e)}).append("svg:svg").attr("viewBox","0 0 600 600").attr("width",I+$[1]+$[3]).attr("height",V+$[0]+$[2]).append("svg:g").attr("transform","translate("+$[3]+","+$[0]+")").call(d3.behavior.zoom().on("zoom",function(){i.setZoomScale(d3.event.scale),e.$apply(),console.log(d3.event.scale),q.attr("transform","translate("+d3.event.translate+")")})).on("click",A,!1).call(d3.behavior.drag().on("dragstart",function(){d3.event.sourceEvent.stopPropagation()}).on("drag",function(){console.log("dragged"),d3.event.sourceEvent.stopPropagation()})).append("g").attr("width",160).attr("height",120).attr("class","tree-holder"),J=d3.layout.tree().size([V,I]).nodeSize([110,60]).separation(function(e,n){return e.parent,n.parent,2}),Q=d3.svg.diagonal().projection(function(e){return[e.x+80,e.y+80]});(Z=P).x0=V/2,Z.y0=0,console.log(Z),Z.children.forEach(v),b(Z);var K=d3.select(null),R=d3.behavior.zoom().translate([0,0]).scale(1).scaleExtent([1,8]).on("zoom",function(){q.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")});e.$on("app:nodes:clearactive",function(e,n){T()}),e.$on("$destroy",function(){})}}})}(),function(){"use strict";angular.module("orgChart").factory("treeViewService",function(e){var n=null,t=[];return{setSearchedNode:function(e){n=e},getSearchedNode:function(){return n},setNodes:function(e){t=e},getNodes:function(){return t},findById:function(n){return e("filter")(t,{id:n},!0)[0]}}})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZ2NoYXJ0Lm1vZHVsZS5qcyIsImRpcmVjdGl2ZXMvc2VhcmNoYm94LmRpcmVjdGl2ZS5qcyIsImRpcmVjdGl2ZXMvdG9vbHNldC5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3Rvb2xzZXQuc2VydmljZS5qcyIsImRpcmVjdGl2ZXMvdHJlZW5vZGUuZGlyZWN0aXZlLmpzIiwiZGlyZWN0aXZlcy90cmVldmlldy5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3RyZWV2aWV3LnNlcnZpY2UuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImRpcmVjdGl2ZSIsIiR0aW1lb3V0IiwiJHEiLCIkbG9nIiwicmVwbGFjZSIsInJlc3RyaWN0IiwiY29udHJvbGxlciIsInRyZWVWaWV3U2VydmljZSIsImNyZWF0ZUZpbHRlckZvciIsInF1ZXJ5IiwibG93ZXJjYXNlUXVlcnkiLCJsb3dlcmNhc2UiLCJzdGF0ZSIsImRpc3BsYXlMb3dlckNhc2UiLCJpbmRleE9mIiwidm0iLCJ0aGlzIiwic2ltdWxhdGVRdWVyeSIsImlzRGlzYWJsZWQiLCJub0NhY2hlIiwic3RhdGVzIiwidmFsdWUiLCJuYW1lIiwiaWQiLCJ0eXBlIiwiYWRkYWJsZSIsImVkaXRhYmxlIiwicmVtb3ZhYmxlIiwiZW5hYmxlYmxlIiwiZGlzcGxheSIsInRvTG93ZXJDYXNlIiwiZW5hYmxhYmxlIiwiZW5hYmxlIiwicXVlcnlTZWFyY2giLCJkZWZlcnJlZCIsInJlc3VsdHMiLCJmaWx0ZXIiLCJkZWZlciIsInJlc29sdmUiLCJNYXRoIiwicmFuZG9tIiwicHJvbWlzZSIsInNlbGVjdGVkSXRlbUNoYW5nZSIsIml0ZW0iLCJpbmZvIiwiSlNPTiIsInN0cmluZ2lmeSIsInNldFNlYXJjaGVkTm9kZSIsInNlYXJjaFRleHRDaGFuZ2UiLCJ0ZXh0IiwibmV3U3RhdGUiLCJhbGVydCIsInRlbXBsYXRlIiwiY29udHJvbGxlckFzIiwic2NvcGUiLCJiaW5kVG9Db250cm9sbGVyIiwibGluayIsImNhc2NhZGVUb29sU2V0Q29udHJvbGxlciIsInRvb2xTZXRTZXJ2aWNlIiwiaXNFeHBhbmRBbGxNb2RlIiwidG9nZ2xlRXhwYW5kQWxsTW9kZSIsImluY3JlbWVudFpvb21TY2FsZSIsInpvb21TY2FsZSIsImRlY3JlbWVudFpvb21TY2FsZSIsImdldFpvb21TY2FsZSIsImVsZW0iLCJhdHRyIiwiZmFjdG9yeSIsImlzQWxsRXhwYW5kZWRNb2RlIiwic2V0Wm9vbVNjYWxlIiwic2NhbGUiLCJjb25zb2xlIiwibG9nIiwiQ2FzY2FkZVRyZWVOb2RlQ29udHJvbGxlciIsIiRkb2N1bWVudCIsIiRyb290U2NvcGUiLCJub2RlSWQiLCJub2RlQWN0aW9ucyIsImF0dHJzIiwiY2xlYXJBbGxPdGhlckFjdGl2ZU5vZGVzIiwiJGJyb2FkY2FzdCIsImRhdGEiLCJvbkRvY3VtZW50Q2xpY2siLCJldiIsInRhcmdldCIsImNvbnRhaW5zIiwiJGFwcGx5IiwiaXNBY3RpdmUiLCJub2RlaWQiLCJmcm9tSnNvbiIsIm5vZGVhY3Rpb25zIiwiaXNQaW5uZWROb2RlIiwibm9kZSIsImZpbmRCeUlkIiwibm9kZUNsYXNzIiwiaXNFeHBhbmRlZFZpZXciLCJ3aGVuTW91c2VFbnRlciIsIndoZW5Nb3VzZUxlYXZlIiwidG9nZ2xlUGlubmVkTW9kZSIsIm1ha2VDYWxsQmFjayIsImNhbGxCYWNrRnVuY05hbWUiLCIkcGFyZW50IiwibWFrZU5vZGVBY3RpdmUiLCJlbGVtZW50IiwiY2hpbGRyZW4iLCJvbiIsIiRvbiIsIm9mZiIsIlRyZWVWaWV3RGlyZWN0aXZlQ29udHJvbGxlciIsIiRzY29wZSIsImlkZW50aWZpZXIiLCIkZmlsdGVyIiwiJGNvbXBpbGUiLCIkd2luZG93IiwiYWJuIiwiYWN0aXZhdGVXYXRjaGVycyIsIm9uU2VhcmNoV2F0Y2giLCJvblpvb21XYXRjaCIsIm9uRXhwYW5kV2F0Y2giLCIkd2F0Y2giLCJpc0luRXhwYW5kQWxsTW9kZSIsImV4cGFuZEFsbCIsImNvbGxhcHNlQWxsIiwiZ2V0U2VhcmNoZWROb2RlIiwiaGlnaGxpZ2h0UGF0aCIsInJlc29sdmVkTm9kZSIsImdldFRyZWVOb2RlQnlPYmplY3QiLCJyZXNldCIsIngiLCJ5IiwiY2xlYXJBbGxBY3RpdmVOb2RlcyIsInBhblRvVGhlTm9kZSIsInZpcyIsInRyYW5zaXRpb24iLCJkdXJhdGlvbiIsImNhbGwiLCJ6b29tT2JqZWN0IiwidHJhbnNsYXRlIiwic2NhbGVFeHRlbnQiLCJldmVudCIsInRvZ2dsZUFsbCIsImQiLCJmb3JFYWNoIiwidG9nZ2xlIiwiZXhwYW5kQWxsQWZ0ZXIiLCJfY2hpbGRyZW4iLCJjb2xsYXBzZUFsbEFmdGVyIiwicm9vdCIsInVwZGF0ZSIsInNvdXJjZSIsImQzIiwiYWx0S2V5Iiwibm9kZXMiLCJ0cmVlIiwicmV2ZXJzZSIsImRlcHRoIiwic2VsZWN0QWxsIiwiaSIsIm5vZGVFbnRlciIsImVudGVyIiwiYXBwZW5kIiwieDAiLCJ5MCIsImRlZmF1bHRQcmV2ZW50ZWQiLCJwbGF5dmlkIiwic3R5bGUiLCJjbGFzc2VkIiwidW5kZWZpbmVkIiwib25DbGlja2VkTm9kZSIsImVhY2giLCJub2RlVXBkYXRlIiwic2VsZWN0IiwiY2xhc3MiLCJub2RlRXhpdCIsImV4aXQiLCJyZW1vdmUiLCJsaW5rcyIsImluc2VydCIsIm8iLCJkaWFnb25hbCIsImNvcHkiLCJub2RlTGlzdCIsInNldE5vZGVzIiwic3RvcFByb3BvZ2F0aW9uIiwic3RvcFByb3BhZ2F0aW9uIiwibWFrZUNsaWNrZWROb2RlQWN0aXZlIiwicGF0aCIsInNlYXJjaFdpdGhpblRyZWUiLCJ0cmVlZGF0YSIsImlzRGVmaW5lZCIsImNsZWFySGlnaExpZ2h0TGlua3MiLCJsYXN0U2VhcmNoZWRQYXRoIiwiaGlnaGxpZ2h0TGlua3MiLCJrZXkiLCJzZWFyY2hLZXkiLCJwdXNoIiwibGVuZ3RoIiwiZm91bmQiLCJwb3AiLCJpc1Jlc2V0IiwiYWN0aXZlIiwib2JqZWN0IiwidG9TdHJpbmciLCJhZGRDbGFzcyIsInYiLCJrIiwicmVtb3ZlQ2xhc3MiLCJtIiwidyIsImlubmVyV2lkdGgiLCJoIiwid3JhcHBlckVsZW1lbnQiLCJsaW5lYXIiLCJkb21haW4iLCJyYW5nZSIsImJlaGF2aW9yIiwiem9vbSIsImRyYWciLCJzb3VyY2VFdmVudCIsImxheW91dCIsInNpemUiLCJub2RlU2l6ZSIsInNlcGFyYXRpb24iLCJhIiwiYiIsInBhcmVudCIsInN2ZyIsInByb2plY3Rpb24iLCJzZWxlY3RlZE5vZGUiLCJzZXRPZm5vZGVzIiwiZ2V0Tm9kZXMiXSwibWFwcGluZ3MiOiJDQUdBLFdBQ0EsYUFDQUEsUUFBQUMsT0FBQSxrQkNGQSxXQUNBLGFBRUFELFFBQUFDLE9BQUEsWUFBQUMsVUFBQSx1QkFHQSxTQUFBQyxFQUFBQyxFQUFBQyxHQWNBLE9BWEFDLFNBQUEsRUFDQUMsU0FBQSxLQUNBQyxXQWVBLFNBQUFDLEdBcU9BLFNBQUFDLEVBQUFDLEdBQ0EsSUFBQUMsRUFBQVosUUFBQWEsVUFBQUYsR0FFQSxPQUFBLFNBQUFHLEdBQ0EsT0FBQSxJQUFBQSxFQUFBQyxpQkFBQUMsUUFBQUosSUF2T0EsSUFBQUssRUFBQUMsS0FDQUQsRUFBQUUsZUFBQSxFQUNBRixFQUFBRyxZQUFBLEVBQ0FILEVBQUFJLFNBQUEsRUFHQUosRUFBQUssU0FvREFDLE9BQ0FDLEtBQUEsd0JBQ0FDLEdBQUEsTUFDQUMsS0FBQSxRQUNBQyxTQUFBLEVBQ0FDLFVBQUEsRUFDQUMsV0FBQSxFQUNBQyxXQUFBLEdBRUFDLFFBQUEsd0JBQ0FoQixpQkFBQSx3QkFBQWlCLGdCQUdBVCxPQUNBQyxLQUFBLFlBQ0FDLEdBQUEsTUFDQUMsS0FBQSxRQUNBQyxTQUFBLEVBQ0FDLFVBQUEsRUFDQUMsV0FBQSxFQUNBSSxXQUFBLEVBQ0FDLFFBQUEsR0FFQUgsUUFBQSxZQUNBaEIsaUJBQUEsWUFBQWlCLGdCQUVBVCxPQUNBQyxLQUFBLFlBQ0FDLEdBQUEsTUFDQUMsS0FBQSxTQUNBSyxRQUFBLFlBQ0FoQixpQkFBQSxZQUFBaUIsZ0JBRUFULE9BQ0FDLEtBQUEsWUFDQUMsR0FBQSxNQUNBQyxLQUFBLFNBQ0FL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QkFzQkEsU0FBQTZDLEdBQ0F3SSxFQUFBeEksR0F0QkErQixnQkF5QkEsV0FDQSxPQUFBeUcsR0F6QkE5QyxTQVlBLFNBQUErQyxHQUNBN0UsRUFBQTZFLEdBWkFDLFNBZUEsV0FDQSxPQUFBOUUsR0FmQTNELFNBS0EsU0FBQXRFLEdBRUEsT0FEQXdGLEVBQUEsVUFBQXlDLEdBQUFqSSxHQUFBQSxJQUFBLEdBQUEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNy8xMC8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgYW5ndWxhci5tb2R1bGUoJ29yZ0NoYXJ0JyxbXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDYvMS8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5kaXJlY3RpdmUoJ2Nhc2NhZGVUcmVlU2VhcmNoQm94JywgY2FzY2FkZVRyZWVTZWFyY2hCb3gpO1xuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIGNhc2NhZGVUcmVlU2VhcmNoQm94KCR0aW1lb3V0LCAkcSwgJGxvZykge1xuXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXBsYWNlOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogQ2FzY2FkZVRyZWVTZWFyY2hCb3hDb250cm9sbGVyLFxuICAgICAgICAgICAgLy8gdGVtcGxhdGVVcmw6ICdzZWFyY2hib3gudG1wbC5odG1sJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOic8ZGl2IGxheW91dC1hbGlnbj1cInN0YXJ0IGNlbnRlclwiIGxheW91dD1cInJvd1wiIGxheW91dC1maWxsPiA8ZGl2IGZsZXgtb2Zmc2V0PVwiNVwiPiA8bWQtYXV0b2NvbXBsZXRlIHN0eWxlPVwibWFyZ2luLXRvcDogMjBweFwiIG5nLWRpc2FibGVkPVwidm0uaXNEaXNhYmxlZFwiIG1kLW5vLWNhY2hlPVwidm0ubm9DYWNoZVwiIG1kLXNlbGVjdGVkLWl0ZW09XCJ2bS5zZWxlY3RlZEl0ZW1cIiBtZC1zZWFyY2gtdGV4dC1jaGFuZ2U9XCJ2bS5zZWFyY2hUZXh0Q2hhbmdlKHZtLnNlYXJjaFRleHQpXCIgbWQtc2VhcmNoLXRleHQ9XCJ2bS5zZWFyY2hUZXh0XCIgbWQtc2VsZWN0ZWQtaXRlbS1jaGFuZ2U9XCJ2bS5zZWxlY3RlZEl0ZW1DaGFuZ2UoaXRlbSlcIiBtZC1pdGVtcz1cIml0ZW0gaW4gdm0ucXVlcnlTZWFyY2godm0uc2VhcmNoVGV4dClcIiBtZC1pdGVtLXRleHQ9XCJpdGVtLmRpc3BsYXlcIiBtZC1taW4tbGVuZ3RoPVwiMFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIFBlb3BsZVwiPiA8bWQtaXRlbS10ZW1wbGF0ZT4gPHNwYW4gbWQtaGlnaGxpZ2h0LXRleHQ9XCJjdHJsLnNlYXJjaFRleHRcIiBtZC1oaWdobGlnaHQtZmxhZ3M9XCJeaVwiPnt7aXRlbS5kaXNwbGF5fX08L3NwYW4+IDwvbWQtaXRlbS10ZW1wbGF0ZT4gPG1kLW5vdC1mb3VuZD4gTm8gc3RhdGVzIG1hdGNoaW5nIFwie3tjdHJsLnNlYXJjaFRleHR9fVwiIHdlcmUgZm91bmQuIDxhIG5nLWNsaWNrPVwiY3RybC5uZXdTdGF0ZShjdHJsLnNlYXJjaFRleHQpXCI+Q3JlYXRlIGEgbmV3IG9uZSE8L2E+IDwvbWQtbm90LWZvdW5kPiA8L21kLWF1dG9jb21wbGV0ZT4gPC9kaXY+PC9kaXY+JyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHt9LFxuICAgICAgICAgICAgbGluazogbGlua1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoKSB7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8qQG5nSW5qZWN0Ki9cbiAgICAgICAgZnVuY3Rpb24gQ2FzY2FkZVRyZWVTZWFyY2hCb3hDb250cm9sbGVyKHRyZWVWaWV3U2VydmljZSkge1xuXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICAgICAgdm0uc2ltdWxhdGVRdWVyeSA9IGZhbHNlO1xuICAgICAgICAgICAgdm0uaXNEaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdm0ubm9DYWNoZSA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIGxpc3Qgb2YgYHN0YXRlYCB2YWx1ZS9kaXNwbGF5IG9iamVjdHNcbiAgICAgICAgICAgIHZtLnN0YXRlcyA9IGxvYWRBbGwoKTtcbiAgICAgICAgICAgIHZtLnF1ZXJ5U2VhcmNoID0gcXVlcnlTZWFyY2g7XG4gICAgICAgICAgICB2bS5zZWxlY3RlZEl0ZW1DaGFuZ2UgPSBzZWxlY3RlZEl0ZW1DaGFuZ2U7XG4gICAgICAgICAgICB2bS5zZWFyY2hUZXh0Q2hhbmdlID0gc2VhcmNoVGV4dENoYW5nZTtcblxuICAgICAgICAgICAgdm0ubmV3U3RhdGUgPSBuZXdTdGF0ZTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gbmV3U3RhdGUoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIlNvcnJ5ISBZb3UnbGwgbmVlZCB0byBjcmVhdGUgYSBDb25zdGl0dXRpb24gZm9yIFwiICsgc3RhdGUgKyBcIiBmaXJzdCFcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgICAgICAgLy8gSW50ZXJuYWwgbWV0aG9kc1xuICAgICAgICAgICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2VhcmNoIGZvciBzdGF0ZXMuLi4gdXNlICR0aW1lb3V0IHRvIHNpbXVsYXRlXG4gICAgICAgICAgICAgKiByZW1vdGUgZGF0YXNlcnZpY2UgY2FsbC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gcXVlcnlTZWFyY2gocXVlcnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IHF1ZXJ5ID8gdm0uc3RhdGVzLmZpbHRlcihjcmVhdGVGaWx0ZXJGb3IocXVlcnkpKSA6IHZtLnN0YXRlcyxcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHZtLnNpbXVsYXRlUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICB9LCBNYXRoLnJhbmRvbSgpICogMTAwMCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNlYXJjaFRleHRDaGFuZ2UodGV4dCkge1xuICAgICAgICAgICAgICAgICRsb2cuaW5mbygnVGV4dCBjaGFuZ2VkIHRvICcgKyB0ZXh0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc2VsZWN0ZWRJdGVtQ2hhbmdlKGl0ZW0pIHtcblxuICAgICAgICAgICAgICAgIGlmKGl0ZW0pe1xuICAgICAgICAgICAgICAgICAgICAkbG9nLmluZm8oJ0l0ZW0gY2hhbmdlZCB0byAnICsgSlNPTi5zdHJpbmdpZnkoaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICB0cmVlVmlld1NlcnZpY2Uuc2V0U2VhcmNoZWROb2RlKGl0ZW0udmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEJ1aWxkIGBzdGF0ZXNgIGxpc3Qgb2Yga2V5L3ZhbHVlIHBhaXJzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvYWRBbGwoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF1dG9Db21wbGV0ZUxpc3QgPSBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiUHVibGlzaGVyTmFtZUxvbmdOYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRhYmxlXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZWRpdGFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZW1vdmFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVibGVcIjogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIlB1Ymxpc2hlck5hbWVMb25nTmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUxvd2VyQ2FzZTogXCJQdWJsaXNoZXJOYW1lTG9uZ05hbWVcIi50b0xvd2VyQ2FzZSgpXG5cbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJMYW5kaW5nIEFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVkaXRhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZW1vdmFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxlXCI6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJMYW5kaW5nIEFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlMb3dlckNhc2U6IFwiTGFuZGluZyBBXCIudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwifSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiQWNjb3VudCAxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TG93ZXJDYXNlOiBcIkFjY291bnQgMVwiLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJMYW5kaW5nIEJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQ4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTFcIn0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIkxhbmRpbmcgQlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUxvd2VyQ2FzZTogXCJMYW5kaW5nIEJcIi50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgdmFyIHRyZWVkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJQdWJsaXNoZXJOYW1lTG9uZ05hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMVwiLFxuICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMFwiLFxuICAgICAgICAgICAgICAgICAgICBcImFkZGFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIFwiZWRpdGFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIFwicmVtb3ZhYmxlXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBcImVuYWJsZWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiTGFuZGluZyBBXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVkaXRhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInJlbW92YWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxlXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwidHJhY2tpbmcgbGluayAxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVcIjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwidHJhY2tpbmcgbGluayAyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVcIjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwidHJhY2tpbmcgbGluayAzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVcIjogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiQWNjb3VudCAzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkOVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkxhbmRpbmcgQlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkOFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBY2NvdW50IDRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBY2NvdW50IDVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBY2NvdW50IDZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkxhbmRpbmcgQ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNoaWxkcmVuXCI6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiU3VidG9waWMgN1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDE0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIlN1YnRvcGljIDhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxNVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJTdWJ0b3BpYyA5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMTZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKiAgICAgICAgICAgICAgICB2YXIgYWxsU3RhdGVzID0gJ0FsYWJhbWEsIEFsYXNrYSwgQXJpem9uYSwgQXJrYW5zYXMsIENhbGlmb3JuaWEsIENvbG9yYWRvLCBDb25uZWN0aWN1dCwgRGVsYXdhcmUsXFxcbiAgICAgICAgICAgICAgICAgRmxvcmlkYSwgR2VvcmdpYSwgSGF3YWlpLCBJZGFobywgSWxsaW5vaXMsIEluZGlhbmEsIElvd2EsIEthbnNhcywgS2VudHVja3ksIExvdWlzaWFuYSxcXFxuICAgICAgICAgICAgICAgICBNYWluZSwgTWFyeWxhbmQsIE1hc3NhY2h1c2V0dHMsIE1pY2hpZ2FuLCBNaW5uZXNvdGEsIE1pc3Npc3NpcHBpLCBNaXNzb3VyaSwgTW9udGFuYSxcXFxuICAgICAgICAgICAgICAgICBOZWJyYXNrYSwgTmV2YWRhLCBOZXcgSGFtcHNoaXJlLCBOZXcgSmVyc2V5LCBOZXcgTWV4aWNvLCBOZXcgWW9yaywgTm9ydGggQ2Fyb2xpbmEsXFxcbiAgICAgICAgICAgICAgICAgTm9ydGggRGFrb3RhLCBPaGlvLCBPa2xhaG9tYSwgT3JlZ29uLCBQZW5uc3lsdmFuaWEsIFJob2RlIElzbGFuZCwgU291dGggQ2Fyb2xpbmEsXFxcbiAgICAgICAgICAgICAgICAgU291dGggRGFrb3RhLCBUZW5uZXNzZWUsIFRleGFzLCBVdGFoLCBWZXJtb250LCBWaXJnaW5pYSwgV2FzaGluZ3RvbiwgV2VzdCBWaXJnaW5pYSxcXFxuICAgICAgICAgICAgICAgICBXaXNjb25zaW4sIFd5b21pbmcnO1xuXG4gICAgICAgICAgICAgICAgIHJldHVybiBhbGxTdGF0ZXMuc3BsaXQoLywgKy9nKS5tYXAoIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICB2YWx1ZTogc3RhdGUudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgZGlzcGxheTogc3RhdGVcbiAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgfSk7Ki9cblxuICAgICAgICAgICAgICAgIC8qICAgICAgICAgICAgICAgIHJldHVybiB0cmVlZGF0YS5jaGlsZHJlbi5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgdmFsdWU6IG5vZGUsXG4gICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vZGUubmFtZSxcbiAgICAgICAgICAgICAgICAgZGlzcGxheUxvd2VyQ2FzZTogbm9kZS5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgfSk7Ki9cblxuICAgICAgICAgICAgICAgIC8vIHJldHVybiBleHRyYWN0Tm9kZXModHJlZWRhdGEuY2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIHJldHVybiBhdXRvQ29tcGxldGVMaXN0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBleHRyYWN0Tm9kZXMobGlzdE9mTm9kZXMpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0T2ZOb2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBub2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9kZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUxvd2VyQ2FzZTogbm9kZS5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGUgZmlsdGVyIGZ1bmN0aW9uIGZvciBhIHF1ZXJ5IHN0cmluZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVGaWx0ZXJGb3IocXVlcnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG93ZXJjYXNlUXVlcnkgPSBhbmd1bGFyLmxvd2VyY2FzZShxdWVyeSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZmlsdGVyRm4oc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChzdGF0ZS5kaXNwbGF5TG93ZXJDYXNlLmluZGV4T2YobG93ZXJjYXNlUXVlcnkpID09PSAwKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH1cblxuXG59KSgpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNi81LzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdvcmdDaGFydCcpLmRpcmVjdGl2ZSgnY2FzY2FkZVRvb2xTZXQnLCBjYXNjYWRlVG9vbFNldCk7XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gY2FzY2FkZVRvb2xTZXQoKSB7XG5cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBjYXNjYWRlVG9vbFNldENvbnRyb2xsZXIsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAvLyB0ZW1wbGF0ZVVybDogJ3Rvb2xzZXQudG1wbC5odG1sJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOic8ZGl2IGxheW91dD1cImNvbHVtblwiIGxheW91dC1hbGlnbj1cImNlbnRlciBlbmRcIj4gPGRpdiBsYXlvdXQ9XCJyb3dcIiBsYXlvdXQtYWxpZ249XCJzcGFjZS1hcm91bmQgY2VudGVyXCIgc3R5bGU9XCJtYXJnaW4tdG9wOiAyMHB4XCIgZmxleC1vZmZzZXQ9XCI1XCI+IDxkaXY+IDxtZC1idXR0b24gY2xhc3M9XCJtZC1pY29uLWJ1dHRvblwiIG5nLWNsaWNrPVwidm0uaW5jcmVtZW50Wm9vbVNjYWxlKClcIj4gPG1kLXRvb2x0aXAgbWQtZGlyZWN0aW9uPVwiYm90dG9tXCI+Wm9vbSBJbjwvbWQtdG9vbHRpcD4gPG1kLWljb24gbWQtZm9udC1pY29uPVwiem1kaSB6bWRpLXBsdXNcIj48L21kLWljb24+PC9tZC1idXR0b24+IDwvZGl2PjxkaXY+IDxtZC1idXR0b24gY2xhc3M9XCJtZC1pY29uLWJ1dHRvblwiIG5nLWNsaWNrPVwidm0uZGVjcmVtZW50Wm9vbVNjYWxlKClcIiBuZy1kaXNhYmxlZD1cInZtLnpvb21TY2FsZTw9MVwiPiA8bWQtdG9vbHRpcCBtZC1kaXJlY3Rpb249XCJib3R0b21cIj5ab29tIE91dDwvbWQtdG9vbHRpcD4gPG1kLWljb24gbWQtZm9udC1pY29uPVwiem1kaSB6bWRpLW1pbnVzXCI+PC9tZC1pY29uPjwvbWQtYnV0dG9uPiA8L2Rpdj48ZGl2PiA8bWQtYnV0dG9uIGNsYXNzPVwibWQtaWNvbi1idXR0b25cIiBuZy1oaWRlPVwidm0uaXNFeHBhbmRBbGxNb2RlXCIgbmctY2xpY2s9XCJ2bS50b2dnbGVFeHBhbmRBbGxNb2RlKClcIj4gPG1kLXRvb2x0aXAgbWQtZGlyZWN0aW9uPVwiYm90dG9tXCI+RXhwYW5kIEFsbDwvbWQtdG9vbHRpcD4gPG1kLWljb24gbWQtZm9udC1pY29uPVwiem1kaSB6bWRpLXRyaWFuZ2xlLWRvd25cIj48L21kLWljb24+PC9tZC1idXR0b24+IDwvZGl2PjxkaXY+IDxtZC1idXR0b24gY2xhc3M9XCJtZC1pY29uLWJ1dHRvblwiIG5nLXNob3c9XCJ2bS5pc0V4cGFuZEFsbE1vZGVcIiBuZy1jbGljaz1cInZtLnRvZ2dsZUV4cGFuZEFsbE1vZGUoKVwiPiA8bWQtdG9vbHRpcCBtZC1kaXJlY3Rpb249XCJib3R0b21cIj5Db2xsYXBzZSBBbGw8L21kLXRvb2x0aXA+IDxtZC1pY29uIG1kLWZvbnQtaWNvbj1cInptZGkgem1kaS10cmlhbmdsZS11cFwiPjwvbWQtaWNvbj48L21kLWJ1dHRvbj4gPC9kaXY+PC9kaXY+PC9kaXY+JyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHt9LFxuICAgICAgICAgICAgbGluazogbGlua1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbSwgYXR0ciwgdm0pIHtcblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIGNhc2NhZGVUb29sU2V0Q29udHJvbGxlcih0b29sU2V0U2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmlzRXhwYW5kQWxsTW9kZSA9IHRvb2xTZXRTZXJ2aWNlLmlzRXhwYW5kQWxsTW9kZSgpO1xuICAgICAgICB2bS50b2dnbGVFeHBhbmRBbGxNb2RlID0gdG9nZ2xlRXhwYW5kQWxsTW9kZTtcbiAgICAgICAgdm0uaW5jcmVtZW50Wm9vbVNjYWxlID0gaW5jcmVtZW50Wm9vbVNjYWxlO1xuICAgICAgICB2bS5kZWNyZW1lbnRab29tU2NhbGUgPSBkZWNyZW1lbnRab29tU2NhbGU7XG4gICAgICAgIHZtLnpvb21TY2FsZSA9IHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUV4cGFuZEFsbE1vZGUoKSB7XG4gICAgICAgICAgICB2bS5pc0V4cGFuZEFsbE1vZGUgPSB0b29sU2V0U2VydmljZS50b2dnbGVFeHBhbmRBbGxNb2RlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gaW5jcmVtZW50Wm9vbVNjYWxlKCkge1xuICAgICAgICAgICAgdm0uem9vbVNjYWxlID0gdG9vbFNldFNlcnZpY2UuaW5jcmVtZW50Wm9vbVNjYWxlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZWNyZW1lbnRab29tU2NhbGUoKSB7XG4gICAgICAgICAgICB2bS56b29tU2NhbGUgPSB0b29sU2V0U2VydmljZS5kZWNyZW1lbnRab29tU2NhbGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxufSkoKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDYvNS8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5mYWN0b3J5KCd0b29sU2V0U2VydmljZScsIHRvb2xTZXRTZXJ2aWNlKTtcblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiB0b29sU2V0U2VydmljZSgpIHtcblxuICAgICAgICB2YXIgaXNBbGxFeHBhbmRlZE1vZGUgPSBmYWxzZTtcbiAgICAgICAgdmFyIExPV0VTVF9aT09NX1NDQUxFID0gMTtcbiAgICAgICAgdmFyIHpvb21TY2FsZSA9IExPV0VTVF9aT09NX1NDQUxFO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0V4cGFuZEFsbE1vZGU6IGlzRXhwYW5kQWxsTW9kZSxcbiAgICAgICAgICAgIHRvZ2dsZUV4cGFuZEFsbE1vZGU6IHRvZ2dsZUV4cGFuZEFsbE1vZGUsXG4gICAgICAgICAgICBnZXRab29tU2NhbGU6IGdldFpvb21TY2FsZSxcbiAgICAgICAgICAgIHNldFpvb21TY2FsZTogc2V0Wm9vbVNjYWxlLFxuICAgICAgICAgICAgaW5jcmVtZW50Wm9vbVNjYWxlOiBpbmNyZW1lbnRab29tU2NhbGUsXG4gICAgICAgICAgICBkZWNyZW1lbnRab29tU2NhbGU6IGRlY3JlbWVudFpvb21TY2FsZVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzRXhwYW5kQWxsTW9kZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0FsbEV4cGFuZGVkTW9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUV4cGFuZEFsbE1vZGUoKSB7XG4gICAgICAgICAgICBpc0FsbEV4cGFuZGVkTW9kZSA9ICFpc0FsbEV4cGFuZGVkTW9kZTtcbiAgICAgICAgICAgIHJldHVybiBpc0FsbEV4cGFuZGVkTW9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFpvb21TY2FsZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB6b29tU2NhbGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRab29tU2NhbGUoc2NhbGUpIHtcbiAgICAgICAgICAgIGlmIChzY2FsZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAvLyB6b29tU2NhbGUgPSBzY2FsZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gem9vbVNjYWxlID0gTE9XRVNUX1pPT01fU0NBTEUgKyBzY2FsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHpvb21TY2FsZSA9IHNjYWxlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3pvb20gc2NhbGUnLCB6b29tU2NhbGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5jcmVtZW50Wm9vbVNjYWxlKCkge1xuICAgICAgICAgICAgem9vbVNjYWxlICs9IDAuMTtcblxuICAgICAgICAgICAgcmV0dXJuIHpvb21TY2FsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRlY3JlbWVudFpvb21TY2FsZSgpIHtcbiAgICAgICAgICAgIGlmICh6b29tU2NhbGUgPiAxKSB7XG4gICAgICAgICAgICAgICAgem9vbVNjYWxlIC09IDAuMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHpvb21TY2FsZTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA1LzMxLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5kaXJlY3RpdmUoJ2Nhc2NhZGVUcmVlTm9kZScsIGNhc2NhZGVUcmVlTm9kZSk7XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gY2FzY2FkZVRyZWVOb2RlKHRyZWVWaWV3U2VydmljZSwgJHRpbWVvdXQsICRkb2N1bWVudCwkcm9vdFNjb3BlKSB7XG5cbiAgICAgICAgdmFyIGNhc2NhZGVUcmVlTm9kZURpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICByZXBsYWNlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIHJlcXVpcmU6J15jYXNjYWRlVHJlZVZpZXcnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogQ2FzY2FkZVRyZWVOb2RlQ29udHJvbGxlcixcbiAgICAgICAgICAgIC8vIHRlbXBsYXRlVXJsOiAndHJlZW5vZGUudG1wbC5odG1sJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBuZy1jbGFzcz1cIntcXCdhY3RpdmUtbm9kZVxcJzp2bS5pc0FjdGl2ZX1cIiBjbGFzcz1cInt7dm0ubm9kZUNsYXNzfX1cIiBuZy1tb3VzZWVudGVyPVwidm0ud2hlbk1vdXNlRW50ZXIoKVwiIG5nLW1vdXNlbGVhdmU9XCJ2bS53aGVuTW91c2VMZWF2ZSgpXCIgbmctY2xpY2s9XCJ2bS5tYWtlTm9kZUFjdGl2ZSgpXCI+IDxkaXYgbGF5b3V0PVwiY29sdW1uXCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiPiA8ZGl2IGNsYXNzPVwibWQtc3ViaGVhZFwiPlNvbWUgVGV4dDwvZGl2PjxkaXY+IDxkaXYgY2xhc3M9XCJcIj48aW1nIG5nLXNyYz1cImFzc2V0cy9pbWFnZXMvYXZhdGFycy9mbGFzaGVyLnRodW1iLmpwZ1wiIGNsYXNzPVwicm91bmQtY2hpcFwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJtZC1zdWJoZWFkXCI+e3t2bS5ub2RlLm5hbWV9fTwvZGl2PjxkaXYgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiIGxheW91dC1maWxsIGNsYXNzPVwiYWN0aW9uLWFyZWFcIiBsYXlvdXQ9XCJyb3dcIiBuZy1zaG93PVwidm0uaXNFeHBhbmRlZFZpZXdcIj4gPGRpdiBuZy1yZXBlYXQ9XCJhY3Rpb24gaW4gdm0ubm9kZUFjdGlvbnNcIj48YnV0dG9uIG5nLWNsaWNrPVwidm0ubWFrZUNhbGxCYWNrKGFjdGlvbi5jYWxsQmFjaylcIj48c3BhbiBuZy1iaW5kPVwiYWN0aW9uLm5hbWVcIj48L3NwYW4+Jm5ic3A7PGkgY2xhc3M9XCJ7e2FjdGlvbi5pY29ufX1cIj48L2k+PC9idXR0b24+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+JyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgICAgICBub2RlSWQ6ICdAJyxcbiAgICAgICAgICAgICAgICBub2RlQWN0aW9uczogJ0AnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGluazogbGlua1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBjYXNjYWRlVHJlZU5vZGVEaXJlY3RpdmU7XG5cblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtLCBhdHRycywgdm0pIHtcbiAgICAgICAgICAgIHZtLmlkID0gYXR0cnMubm9kZWlkO1xuICAgICAgICAgICAgdm0ubm9kZUFjdGlvbnMgPSBhbmd1bGFyLmZyb21Kc29uKGF0dHJzLm5vZGVhY3Rpb25zKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZtLm5vZGVBY3Rpb25zKTtcbiAgICAgICAgICAgIHZtLmlzUGlubmVkTm9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgdm0ubm9kZSA9IHRyZWVWaWV3U2VydmljZS5maW5kQnlJZChhdHRycy5ub2RlaWQpO1xuICAgICAgICAgICAgdm0ubm9kZUNsYXNzID0gJ25vZGUtbGFiZWwgbm9kZS0nICsgdm0ubm9kZS50eXBlKyAnIG5vZGUtJyt2bS5pZDtcblxuICAgICAgICAgICAgLy8gdm0uaXNQaW5uZWROb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgIHZtLmlzRXhwYW5kZWRWaWV3ID0gZmFsc2U7XG4gICAgICAgICAgICB2bS5pc0FjdGl2ZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICB2bS53aGVuTW91c2VFbnRlciA9IHdoZW5Nb3VzZUVudGVyO1xuICAgICAgICAgICAgdm0ud2hlbk1vdXNlTGVhdmUgPSB3aGVuTW91c2VMZWF2ZTtcbiAgICAgICAgICAgIHZtLnRvZ2dsZVBpbm5lZE1vZGUgPSB0b2dnbGVQaW5uZWRNb2RlO1xuICAgICAgICAgICAgdm0ubWFrZUNhbGxCYWNrID0gbWFrZUNhbGxCYWNrO1xuICAgICAgICAgICAgdm0ubWFrZU5vZGVBY3RpdmUgPSBtYWtlTm9kZUFjdGl2ZTtcbiAgICAgICAgICAgIHZhciBub2RlRE9NRWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChlbGVtLmNoaWxkcmVuKClbMF0pO1xuICAgICAgICAgICAgLyogICAgICAgICAgICBlbGVtLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICBlbGVtLmFkZENsYXNzKCdhY3RpdmUtbm9kZScpO1xuICAgICAgICAgICAgIH0pOyovXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG1ha2VOb2RlQWN0aXZlKCkge1xuICAgICAgICAgICAgICAgIGNsZWFyQWxsT3RoZXJBY3RpdmVOb2RlcygpO1xuICAgICAgICAgICAgICAgIHZtLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gd2hlbk1vdXNlRW50ZXIoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21vdXNlIEVudGVyZWQnKTtcbiAgICAgICAgICAgICAgICB2bS5pc0V4cGFuZGVkVmlldyA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gdm0uaXNQaW5uZWROb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gd2hlbk1vdXNlTGVhdmUoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21vdXNlIGxlYXZlZCcpO1xuICAgICAgICAgICAgICAgIHZtLmlzRXhwYW5kZWRWaWV3ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLyogICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICB2bS5pc1Bpbm5lZE5vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgfSwxMDAwKTsqL1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB0b2dnbGVQaW5uZWRNb2RlKCkge1xuICAgICAgICAgICAgICAgIHZtLmlzUGlubmVkTm9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codm0uaXNQaW5uZWROb2RlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gbWFrZUNhbGxCYWNrKGNhbGxCYWNrRnVuY05hbWUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYWxsQmFja0Z1bmNOYW1lKTtcbiAgICAgICAgICAgICAgICBzY29wZS4kcGFyZW50LnZtLm1ha2VDYWxsQmFjayhjYWxsQmFja0Z1bmNOYW1lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJBbGxPdGhlckFjdGl2ZU5vZGVzKCl7XG4vKiAgICAgICAgICAgICAgICBlbGVtLmZpbmQoJy5ub2RlLWxhYmVsJyk7Ly9UT0RPXG4gICAgICAgICAgICAgICAgZWxlbS5wYXJlbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYWN0aXZlLW5vZGUnKTsqL1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnYXBwOm5vZGVzOmNsZWFyYWN0aXZlJyx7J2RhdGEnOiAnJ30pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBmaW5kUmVsZXZhbnROb2RlKGtsYXNzKXtcbiAgICAgICAgICAgICAgICBlbGVtLmZpbmQoJy50cmVlLWhvbGRlcicpOy8vVE9ET1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gb25Eb2N1bWVudENsaWNrKGV2KSB7XG5cbiAgICAgICAgICAgICAgICAvL0NoZWNrIGlmIGNsaWNrZWQgb3V0c2lkZSBhbmQgZGlzY2FyZCBBY3RpdmVcbiAgICAgICAgICAgICAgICBpZiAoZWxlbSAhPT0gZXYudGFyZ2V0ICYmICFlbGVtWzBdLmNvbnRhaW5zKGV2LnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9yZW1vdmUgZXZlbnQgaGFuZGxlcnMgd2hlbiBjdXN0b20gZGlyZWN0aXZlIGRlc3Ryb3llZFxuICAgICAgICAgICAgZnVuY3Rpb24gb25EZXN0cm95KCkge1xuICAgICAgICAgICAgICAgICRkb2N1bWVudC5vZmYoJ2NsaWNrJywgb25Eb2N1bWVudENsaWNrKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAkZG9jdW1lbnQub24oJ2NsaWNrJywgb25Eb2N1bWVudENsaWNrKTtcbiAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBvbkRlc3Ryb3kpO1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gQ2FzY2FkZVRyZWVOb2RlQ29udHJvbGxlcih0cmVlVmlld1NlcnZpY2UpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgLyogICAgICAgIHZtLm5vZGUgPSB0cmVlVmlld1NlcnZpY2UuZmluZEJ5SWQodm0ubm9kZUlkKTtcbiAgICAgICAgIHZtLm5vZGVDbGFzcyA9ICdub2RlLWxhYmVsIG5vZGUtJyt2bS5ub2RlLnR5cGU7Ki9cblxuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA1LzMwLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5kaXJlY3RpdmUoJ2Nhc2NhZGVUcmVlVmlldycsIGNhc2NhZGVUcmVlVmlldyk7XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gY2FzY2FkZVRyZWVWaWV3KCRmaWx0ZXIsICRjb21waWxlLCB0cmVlVmlld1NlcnZpY2UsICR0aW1lb3V0LCB0b29sU2V0U2VydmljZSwgJHdpbmRvdykge1xuICAgICAgICB2YXIgdHJlZVZpZXdEaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXBsYWNlOiAnZmFsc2UnLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgICAgICBkYXRhOiAnPScsXG4gICAgICAgICAgICAgICAgYWJuOiAnJicsXG4gICAgICAgICAgICAgICAgbm9kZUFjdGlvbnM6ICdAJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFRyZWVWaWV3RGlyZWN0aXZlQ29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtLCBhdHRycywgdm0pIHtcbiAgICAgICAgICAgIC8vVE9ETyBGZXRjaCBGcm9tIHRoZSBkYiBhbmQgYWRkIHRvIHRoZSBzZXJ2aWNlXG4gICAgICAgICAgICB2YXIgdHJlZWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiUm9vdE5vZGVcIixcbiAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxXCIsXG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTBcIixcbiAgICAgICAgICAgICAgICBcImFkZGFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgXCJlZGl0YWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBcInJlbW92YWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBcImVuYWJsZWJsZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBcInJvb3RcIjp0cnVlLFxuICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiTGFuZGluZyBBXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTFcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhZGRhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIFwiZWRpdGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgXCJyZW1vdmFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgXCJlbmFibGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ0cmFja2luZyBsaW5rIDFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQ0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxlXCI6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ0cmFja2luZyBsaW5rIDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQ1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxlXCI6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ0cmFja2luZyBsaW5rIDNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQ2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxlXCI6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBY2NvdW50IDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiQWNjb3VudCAzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQ5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwiXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJMYW5kaW5nIEJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkOFwiLFxuICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMVwiLFxuICAgICAgICAgICAgICAgICAgICBcImNoaWxkcmVuXCI6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBY2NvdW50IDRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDEwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwiXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFjY291bnQgNVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkMTFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUyXCJcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiQWNjb3VudCA2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWQxMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTJcIlxuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiTGFuZGluZyBDXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDEzXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInR5cGUxXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIlN1YnRvcGljIDdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDE0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIlN1YnRvcGljIDhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDE1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIlN1YnRvcGljIDlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZDE2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlM1wiXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBub2RlQWN0aXZlQ2xlYXJMaXN0ZW5lcjtcbiAgICAgICAgICAgIHZhciBub2RlTGlzdCA9IFtdO1xuICAgICAgICAgICAgdmFyIG0gPSBbMjAsIDIwLCAyMCwgMjBdLFxuICAgICAgICAgICAgICAgIHcgPSAkd2luZG93LmlubmVyV2lkdGggLSAyMCAtIG1bMV0gLSBtWzNdLFxuICAgICAgICAgICAgICAgIGggPSA2MDAgLSBtWzBdIC0gbVsyXSxcbiAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICByID0gODAwLFxuICAgICAgICAgICAgICAgIHggPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oWzAsIHddKS5yYW5nZShbMCwgd10pLFxuICAgICAgICAgICAgICAgIHkgPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oWzAsIGhdKS5yYW5nZShbMCwgaF0pLFxuICAgICAgICAgICAgICAgIHJvb3Q7XG5cbiAgICAgICAgICAgIHZhciB3cmFwcGVyRWxlbWVudCA9IGQzLnNlbGVjdChlbGVtWzBdKTtcbiAgICAgICAgICAgIHZhciBsYXN0U2VhcmNoZWRQYXRoID0gW107XG4gICAgICAgICAgICBlbGVtLmFwcGVuZCgkY29tcGlsZShcIjxkaXYgbGF5b3V0PVxcXCJyb3dcXFwiIGxheW91dC1hbGlnbj1cXFwic3BhY2UtYXJvdW5kIGNlbnRlclxcXCI+PGRpdiBmbGV4PjxjYXNjYWRlLXRyZWUtc2VhcmNoLWJveD48L2Nhc2NhZGUtdHJlZS1zZWFyY2gtYm94PjwvZGl2PjxkaXYgZmxleD48Y2FzY2FkZS10b29sLXNldD48L2Nhc2NhZGUtdG9vbC1zZXQ+PC9kaXY+PC9kaXY+XCIpKHNjb3BlKSk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uSW5pdCgpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZVdhdGNoZXJzKCk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGVXYXRjaGVycygpIHtcbiAgICAgICAgICAgICAgICBvblNlYXJjaFdhdGNoKCk7XG4gICAgICAgICAgICAgICAgb25ab29tV2F0Y2goKTtcbiAgICAgICAgICAgICAgICBvbkV4cGFuZFdhdGNoKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRXhwYW5kV2F0Y2goKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvb2xTZXRTZXJ2aWNlLmlzRXhwYW5kQWxsTW9kZSgpXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGlzSW5FeHBhbmRBbGxNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0luRXhwYW5kQWxsTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXBzZUFsbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25TZWFyY2hXYXRjaCgpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJlZVZpZXdTZXJ2aWNlLmdldFNlYXJjaGVkTm9kZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJzdCBmaW5kIGFuZCBoaWdobGlnaHQgdGhlIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodFBhdGgobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZWROb2RlID0gZ2V0VHJlZU5vZGVCeU9iamVjdChub2RlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vVE9ETyByZW1vdmUgbGF0ZXIgY296IGV4cGFuZGluZyBvY2N1cnMgd2hlbiBoaWdobGlnaHRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kTm9kZShyZXNvbHZlZE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZShyZXNvbHZlZE5vZGUpOyovXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNvbHZlZE5vZGUueCwgcmVzb2x2ZWROb2RlLnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyQWxsQWN0aXZlTm9kZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlTm9kZUFjdGl2ZShyZXNvbHZlZE5vZGUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhblRvVGhlTm9kZShyZXNvbHZlZE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uWm9vbVdhdGNoKCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b29sU2V0U2VydmljZS5nZXRab29tU2NhbGUoKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoem9vbVNjYWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHpvb21TY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIHZpcy50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbig3NTApXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2FsbCh6b29tT2JqZWN0LnRyYW5zbGF0ZShbMTUwLCAxMDBdKS5zY2FsZSh6b29tU2NhbGUpLnNjYWxlRXh0ZW50KFsxLCA4XSkuZXZlbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9uSW5pdCgpO1xuXG4gICAgICAgICAgICB2YXIgdmlzID0gd3JhcHBlckVsZW1lbnQuYXBwZW5kKFwiZGl2XCIpLmF0dHIoXCJsYXlvdXRcIiwgXCJyb3dcIikuYXR0cihcImxheW91dC1hbGlnblwiLCBcInNwYWNlLWFyb3VuZCBjZW50ZXJcIilcbiAgICAgICAgICAgICAgICAuY2FsbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRjb21waWxlKHRoaXNbMF0pKHNjb3BlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJkaXZcIikuYXR0cihcImZsZXhcIiwgXCJcIikuY2FsbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRjb21waWxlKHRoaXNbMF0pKHNjb3BlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJzdmc6c3ZnXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ2aWV3Qm94XCIsIFwiMCAwIDYwMCA2MDBcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHcgKyBtWzFdICsgbVszXSlcbiAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBoICsgbVswXSArIG1bMl0pXG4gICAgICAgICAgICAgICAgLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgICAgICAgICAgICAgLy8uYXR0cihcInBvaW50ZXItZXZlbnRzXCIsIFwiYWxsXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtWzNdICsgXCIsXCIgKyBtWzBdICsgXCIpXCIpXG4gICAgICAgICAgICAgICAgLy8uY2FsbChkMy5iZWhhdmlvci56b29tKCkuc2NhbGVFeHRlbnQoWzEsOF0pLm9uKFwiem9vbVwiLHpvb20pKTtcbiAgICAgICAgICAgICAgICAvLy5jYWxsKGQzLmJlaGF2aW9yLnpvb20oKS54KHgpLnkoeSkuc2NhbGVFeHRlbnQoWzEsIDhdKS5vblxuICAgICAgICAgICAgICAgIC5jYWxsKGQzLmJlaGF2aW9yLnpvb20oKS5vbihcInpvb21cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0b29sU2V0U2VydmljZS5zZXRab29tU2NhbGUoZDMuZXZlbnQuc2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZDMuZXZlbnQuc2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICAvLyB2aXMuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQzLmV2ZW50LnRyYW5zbGF0ZSArIFwiKVwiICsgXCIgc2NhbGUoXCIgKyBkMy5ldmVudC5zY2FsZSArIFwiKVwiKVxuICAgICAgICAgICAgICAgICAgICB2aXMuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQzLmV2ZW50LnRyYW5zbGF0ZSArIFwiKVwiKTtcbiAgICAgICAgICAgICAgICB9KSkub24oXCJjbGlja1wiLCBzdG9wUHJvcG9nYXRpb24sIGZhbHNlKS5jYWxsKGQzLmJlaGF2aW9yLmRyYWcoKS5vbihcImRyYWdzdGFydFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIH0pLm9uKFwiZHJhZ1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZHJhZ2dlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSkpLmFwcGVuZChcImdcIikuYXR0cihcIndpZHRoXCIsIDE2MCkuYXR0cihcImhlaWdodFwiLCAxMjApLmF0dHIoXCJjbGFzc1wiLCBcInRyZWUtaG9sZGVyXCIpLyouY2FsbChkMy5iZWhhdmlvci5kcmFnKCkub24oXCJkcmFnc3RhcnRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgIH0pLm9uKFwiZHJhZ1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgY29uc29sZS5sb2coXCJkcmFnZ2VkXCIpO1xuICAgICAgICAgICAgIH0pKSovO1xuXG4gICAgICAgICAgICAvL1RPRE8gdW5jb21tZW50IGxhdGVyXG4gICAgICAgICAgICAvKiAgICAgICAgICAgIHZpcy5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgICAgICAgLy8gLmF0dHIoXCJjbGFzc1wiLCBcIm92ZXJsYXlcIilcbiAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHcgKyBtWzFdICsgbVszXSlcbiAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBoICsgbVswXSArIG1bMl0pXG4gICAgICAgICAgICAgLmF0dHIoXCJvcGFjaXR5XCIsIDApLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgIHN0b3BQcm9wb2dhdGlvbigpO1xuICAgICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgICAgICAgfSk7Ki9cblxuICAgICAgICAgICAgdmFyIHRyZWUgPSBkMy5sYXlvdXQudHJlZSgpXG4gICAgICAgICAgICAgICAgLnNpemUoW2gsIHddKVxuICAgICAgICAgICAgICAgIC5ub2RlU2l6ZShbMTEwLCA2MF0pXG4gICAgICAgICAgICAgICAgLnNlcGFyYXRpb24oZnVuY3Rpb24gc2VwYXJhdGlvbihhLCBiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnBhcmVudCA9PSBiLnBhcmVudCA/IDIgOiAyO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgZGlhZ29uYWwgPSBkMy5zdmcuZGlhZ29uYWwoKVxuICAgICAgICAgICAgICAgIC5wcm9qZWN0aW9uKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbZC54ICsgODAsIGQueSArIDgwXTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcm9vdCA9IHRyZWVkYXRhO1xuICAgICAgICAgICAgcm9vdC54MCA9IGggLyAyO1xuICAgICAgICAgICAgcm9vdC55MCA9IDA7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUFsbChkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZC5jaGlsZHJlbi5mb3JFYWNoKHRvZ2dsZUFsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZShkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBleHBhbmRBbGxBZnRlcihkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gKGQuY2hpbGRyZW4pID8gZC5jaGlsZHJlbiA6IGQuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGlmIChkLl9jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBkLmNoaWxkcmVuID0gZC5fY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgIGQuX2NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkcmVuKVxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGV4cGFuZEFsbEFmdGVyKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbGxhcHNlQWxsQWZ0ZXIoZCkge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IChkLmNoaWxkcmVuKSA/IGQuY2hpbGRyZW4gOiBkLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBpZiAoZC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBkLl9jaGlsZHJlbiA9IGQuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgIGQuY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goY29sbGFwc2VBbGxBZnRlcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4cGFuZEFsbCgpIHtcbiAgICAgICAgICAgICAgICBleHBhbmRBbGxBZnRlcihyb290KTtcbiAgICAgICAgICAgICAgICB1cGRhdGUocm9vdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbGxhcHNlQWxsKCkge1xuICAgICAgICAgICAgICAgIGNvbGxhcHNlQWxsQWZ0ZXIocm9vdCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlKHJvb3QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyb290KTtcblxuLy8gaW5pdGlhbGl6ZSB0aGUgZGlzcGxheSB0byBzaG93IGEgZmV3IG5vZGVzLlxuICAgICAgICAgICAgcm9vdC5jaGlsZHJlbi5mb3JFYWNoKHRvZ2dsZUFsbCk7XG4vL3RvZ2dsZShyb290LmNoaWxkcmVuWzFdKTtcbi8vdG9nZ2xlKHJvb3QuY2hpbGRyZW5bOV0pO1xuXG5cbiAgICAgICAgICAgIHVwZGF0ZShyb290KTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlKHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IGQzLmV2ZW50ICYmIGQzLmV2ZW50LmFsdEtleSA/IDUwMDAgOiA1MDA7XG5cbiAgICAgICAgICAgICAgICAvLyBDb21wdXRlIHRoZSBuZXcgdHJlZSBsYXlvdXQuXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gdHJlZS5ub2Rlcyhyb290KS5yZXZlcnNlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBOb3JtYWxpemUgZm9yIGZpeGVkLWRlcHRoLlxuICAgICAgICAgICAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgZC55ID0gZC5kZXB0aCAqIDIwMDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbm9kZXMuLi5cbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IHZpcy5zZWxlY3RBbGwoXCJnLm5vZGVcIilcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEobm9kZXMsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5pZCB8fCAoZC5pZCA9ICsraSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gRW50ZXIgYW55IG5ldyBub2RlcyBhdCB0aGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVFbnRlciA9IG5vZGUuZW50ZXIoKS5hcHBlbmQoXCJzdmc6Z1wiKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibm9kZVwiKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImlkXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub2RlLVwiICsgZC5pZDtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHNvdXJjZS54MCArIFwiLFwiICsgc291cmNlLnkwICsgXCIpXCI7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGUoZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUoZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZFsnaW5mbyddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheXZpZChkWydpbmZvJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vQWRkaW5nIGEgcGljdHVyZSB0byB0aGUgbm9kZSBjaXJjbGVcblxuICAgICAgICAgICAgICAgIG5vZGVFbnRlci5hcHBlbmQoXCJzdmc6Y2lyY2xlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiclwiLCAxZS02KVxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5fY2hpbGRyZW4gPyBcImxpZ2h0c3RlZWxibHVlXCIgOiBcIiNmZmZcIjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbm9kZVRleHQgPSBub2RlRW50ZXJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcInN2Zzpmb3JlaWduT2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIC8vLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyAtMTAgOiAxMDsgfSlcbiAgICAgICAgICAgICAgICAgICAgLy8uYXR0cihcImR4XCIsIFwiLjM1ZW1cIilcbiAgICAgICAgICAgICAgICAgICAgLy8uYXR0cihcInhcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyAtMTAgOiAxMDtcbiAgICAgICAgICAgICAgICAgICAgLy99KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInlcIiwgLTMwKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgLTUpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuID8gXCJlbmRcIiA6IFwic3RhcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDFlLTYpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIDE2MClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDEyMClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgneGh0bWw6ZGl2JylcbiAgICAgICAgICAgICAgICAgICAgLyogICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vZGUtbGFiZWxcIiArIFwiIG5vZGUtXCIgKyBkLnR5cGVcbiAgICAgICAgICAgICAgICAgICAgIH0pLmF0dHIoXCJuZy1zaG93XCIsIFwidHJ1ZVwiKS5jYWxsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICRjb21waWxlKHRoaXNbMF0ucGFyZW50Tm9kZSkoc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgfSkqL1xuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZChcImRpc2FibGVkXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5lbmFibGUgIT09IHVuZGVmaW5lZCAmJiAhZC5lbmFibGU7XG4gICAgICAgICAgICAgICAgICAgIH0pLm9uKFwiY2xpY2tcIiwgb25DbGlja2VkTm9kZSkvKi5jYWxsKGQzLmJlaGF2aW9yLmRyYWcoKS5vbihcImRyYWdzdGFydFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICB9KS5vbihcImRyYWdcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImRyYWdnZWRcIik7XG4gICAgICAgICAgICAgICAgIH0pKSovO1xuXG4gICAgICAgICAgICAgICAgbm9kZVRleHQuYXBwZW5kKFwiY2FzY2FkZS10cmVlLW5vZGVcIikuYXR0cihcIm5vZGVJZFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5pZDtcbiAgICAgICAgICAgICAgICB9KS5hdHRyKFwiaXNQaW5uZWROb2RlXCIsIFwiZmFsc2VcIikuYXR0cihcIm5vZGVBY3Rpb25zXCIsIGF0dHJzLm5vZGVhY3Rpb25zKVxuICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29tcGlsZSh0aGlzKShzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgIC5jYWxsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgJGNvbXBpbGUodGhpc1swXS5wYXJlbnROb2RlKShzY29wZSk7XG4gICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgIC8vRW5hYmxlIG5vZGUgYnV0dG9uXG4gICAgICAgICAgICAgICAgIG5vZGVUZXh0LmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICByZXR1cm4gZC5lbmFibGFibGU7XG4gICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJpbnB1dFwiLCBcIi5cIilcbiAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIilcbiAgICAgICAgICAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICByZXR1cm4gZC5lbmFibGU7XG4gICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgIC5vbihcImNoYW5nZVwiLCB0b2dnbGVFbmFibGUsIHRydWUpXG4gICAgICAgICAgICAgICAgIC5vbihcImNsaWNrXCIsIHN0b3BQcm9wb2dhdGlvbiwgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgLy9Ob2RlIGxhYmVsXG4gICAgICAgICAgICAgICAgIG5vZGVUZXh0LmFwcGVuZChcInNwYW5cIilcbiAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm5vZGUtdGV4dFwiKVxuICAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICByZXR1cm4gZC5uYW1lICsgJyBYIC0gJyArIGQueCArICcsIFkgLSAnICsgZC55O1xuICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAvL0VkaXQgbm9kZSBidXR0b25cbiAgICAgICAgICAgICAgICAgbm9kZVRleHQuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgIHJldHVybiBkLmVkaXRhYmxlO1xuICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAuYXBwZW5kKFwiYVwiKVxuICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibm9kZS1lZGl0XCIpXG4gICAgICAgICAgICAgICAgIC5vbihcImNsaWNrXCIsIG9uRWRpdE5vZGUsIHRydWUpXG4gICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJpXCIpXG4gICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJmYSBmYS1wZW5jaWxcIik7XG5cbiAgICAgICAgICAgICAgICAgLy9BZGQgbm9kZSBidXR0b25cbiAgICAgICAgICAgICAgICAgbm9kZVRleHQuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgIHJldHVybiBkLmFkZGFibGU7XG4gICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJhXCIpXG4gICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2RlLWFkZFwiKVxuICAgICAgICAgICAgICAgICAub24oXCJjbGlja1wiLCBvbkFkZE5vZGUsIHRydWUpXG4gICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJpXCIpXG4gICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJmYSBmYS1wbHVzXCIpO1xuXG4gICAgICAgICAgICAgICAgIC8vUmVtb3ZlIG5vZGUgYnV0dG9uXG4gICAgICAgICAgICAgICAgIG5vZGVUZXh0LmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICByZXR1cm4gZC5yZW1vdmFibGU7XG4gICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJhXCIpXG4gICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2RlLXJlbW92ZVwiKVxuICAgICAgICAgICAgICAgICAub24oXCJjbGlja1wiLCBvblJlbW92ZU5vZGUsIHRydWUpXG4gICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJpXCIpXG4gICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJmYSBmYS10aW1lc1wiKTsqL1xuXG4gICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBub2RlcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVVcGRhdGUgPSBub2RlLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnggKyBcIixcIiArIGQueSArIFwiKVwiO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIG5vZGVVcGRhdGUuc2VsZWN0KFwiY2lyY2xlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiclwiLCA0LjUpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLmNsYXNzID09PSAnaGlnaGxpZ2h0LWxpbmsnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcjZmY0MTM2JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC5fY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2xpZ2h0c3RlZWxibHVlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcjZmZmJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBub2RlVXBkYXRlLnNlbGVjdChcInRleHRcIilcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDEpO1xuXG4gICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBleGl0aW5nIG5kb2VzIHRvIHRoZSBwYXJlbnQncyBuZXcgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVFeGl0ID0gbm9kZS5leGl0KCkudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHNvdXJjZS54ICsgXCIsXCIgKyBzb3VyY2UueSArIFwiKVwiO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICBub2RlRXhpdC5zZWxlY3QoXCJjaXJjbGVcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJyXCIsIDFlLTYpO1xuICAgICAgICAgICAgICAgIG5vZGVFeGl0LnNlbGVjdChcInRleHRcIilcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDFlLTYpO1xuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBsaW5rcy4uLlxuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gdmlzLnNlbGVjdEFsbChcInBhdGgubGlua1wiKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YSh0cmVlLmxpbmtzKG5vZGVzKSwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC5pZDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBFbnRlciBhbnkgbmV3IGxpbmtzIGF0IGh0ZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvblxuICAgICAgICAgICAgICAgIGxpbmsuZW50ZXIoKS5pbnNlcnQoXCJzdmc6cGF0aFwiLCBcImdcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmtcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBzb3VyY2UueDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogc291cmNlLnkwXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpYWdvbmFsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBvXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBkaWFnb25hbCk7XG5cbiAgICAgICAgICAgICAgICAvLyBUcmFuc2l0aW9uIGxpbmtzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICBsaW5rLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBkaWFnb25hbClcbiAgICAgICAgICAgICAgICAgICAgLyogICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIixmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChkLnRhcmdldC5jbGFzcyA9PT0gXCJoaWdobGlnaHQtbGlua1wiKT9cImhpZ2hsaWdodC1saW5rLXN0cm9rZS1hY3RpdmVcIjpcImhpZ2hsaWdodC1saW5rLXN0cm9rZS1pbmFjdGl2ZVwiO1xuICAgICAgICAgICAgICAgICAgICAgfSk7Ki9cbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwic3Ryb2tlXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC50YXJnZXQuY2xhc3MgPT09IFwiaGlnaGxpZ2h0LWxpbmtcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIiNmZjQxMzZcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICBsaW5rLmV4aXQoKS50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHNvdXJjZS54LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHNvdXJjZS55XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpYWdvbmFsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBvXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgLy8gU3Rhc2ggdGhlIG9sZCBwb3NpdGlvbnMgZm9yIHRyYW5zaXRpb24uXG4gICAgICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICBkLngwID0gZC54O1xuICAgICAgICAgICAgICAgICAgICBkLnkwID0gZC55O1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KG5vZGVzLCBub2RlTGlzdCk7XG5cbiAgICAgICAgICAgICAgICB0cmVlVmlld1NlcnZpY2Uuc2V0Tm9kZXMobm9kZUxpc3QpO1xuICAgICAgICAgICAgfVxuXG4vLyBUb2dnbGUgY2hpbGRyZW5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZShkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZC5fY2hpbGRyZW4gPSBkLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBkLmNoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkLmNoaWxkcmVuID0gZC5fY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgIGQuX2NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4cGFuZE5vZGUobm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGUuY2hpbGRyZW4gPSBub2RlLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBub2RlLl9jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbi8vIHpvb20gaW4gLyBvdXRcbiAgICAgICAgICAgIGZ1bmN0aW9uIHpvb20oZCkge1xuICAgICAgICAgICAgICAgIC8vdmlzLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2wzYXRlKFwiICsgZDMuZXZlbnQudHJhbnNsYXRlICsgXCIpc2NhbGUoXCIgKyBkMy5ldmVudC5zY2FsZSArIFwiKVwiKTtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZXMgPSB2aXMuc2VsZWN0QWxsKFwiZy5ub2RlXCIpO1xuICAgICAgICAgICAgICAgIG5vZGVzLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtKTtcblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbGlua3MuLi5cbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IHZpcy5zZWxlY3RBbGwoXCJwYXRoLmxpbmtcIik7XG4gICAgICAgICAgICAgICAgbGluay5hdHRyKFwiZFwiLCB0cmFuc2xhdGUpO1xuXG4gICAgICAgICAgICAgICAgLy8gRW50ZXIgYW55IG5ldyBsaW5rcyBhdCBodGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb25cbiAgICAgICAgICAgICAgICAvL2xpbmsuYXR0cihcImRcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIC8vICAgICAgdmFyIG8gPSB7eDogZC54MCwgeTogZC55MH07XG4gICAgICAgICAgICAgICAgLy8gICAgICByZXR1cm4gZGlhZ29uYWwoe3NvdXJjZTogbywgdGFyZ2V0OiBvfSk7XG4gICAgICAgICAgICAgICAgLy8gICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zZm9ybShkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgeChkLnkpICsgXCIsXCIgKyB5KGQueCkgKyBcIilcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNsYXRlKGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlWCA9IHgoZC50YXJnZXQucGFyZW50LnkpO1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2VZID0geShkLnRhcmdldC5wYXJlbnQueCk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFggPSB4KGQudGFyZ2V0LnkpO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRZID0gKHNvdXJjZVggKyB0YXJnZXRYKSAvIDI7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmtUYXJnZXRZID0geShkLnRhcmdldC54MCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFwiTVwiICsgc291cmNlWCArIFwiLFwiICsgc291cmNlWSArIFwiIENcIiArIHRhcmdldFggKyBcIixcIiArIHNvdXJjZVkgKyBcIiBcIiArIHRhcmdldFkgKyBcIixcIiArIHkoZC50YXJnZXQueDApICsgXCIgXCIgKyB0YXJnZXRYICsgXCIsXCIgKyBsaW5rVGFyZ2V0WSArIFwiXCI7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXN1bHQpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkVkaXROb2RlKGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gOTtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5yZXBsYWNlKC9bXmEtel0rL2csICcnKS5zdWJzdHIoMCwgbGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBhZGRDaGlsZE5vZGUoZC5pZCwge1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJuZXcgY2hpbGQgbm9kZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImlkXCI6IGlkLFxuICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0eXBlMlwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uQWRkTm9kZShkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IDk7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikucmVwbGFjZSgvW15hLXpdKy9nLCAnJykuc3Vic3RyKDAsIGxlbmd0aCk7XG4gICAgICAgICAgICAgICAgYWRkQ2hpbGROb2RlKGQuaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibmV3IGNoaWxkIG5vZGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidHlwZTJcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0b3BQcm9wb2dhdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvblJlbW92ZU5vZGUoZCkge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGQucGFyZW50LmNoaWxkcmVuLmluZGV4T2YoZCk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgZC5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXBkYXRlKGQucGFyZW50KTtcbiAgICAgICAgICAgICAgICBzdG9wUHJvcG9nYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkQ2hpbGROb2RlKHBhcmVudElkLCBuZXdOb2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBkMy5zZWxlY3QoJyMnICsgJ25vZGUtJyArIHBhcmVudElkKTtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZURhdGEgPSBub2RlLmRhdHVtKCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVEYXRhLmNoaWxkcmVuID09PSB1bmRlZmluZWQgJiYgbm9kZURhdGEuX2NoaWxkcmVuID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZURhdGEuY2hpbGRyZW4gPSBbbmV3Tm9kZV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlRGF0YS5fY2hpbGRyZW4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlRGF0YS5fY2hpbGRyZW4ucHVzaChuZXdOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlKG5vZGVEYXRhKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVEYXRhLmNoaWxkcmVuICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZURhdGEuY2hpbGRyZW4ucHVzaChuZXdOb2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXBkYXRlKG5vZGUpO1xuICAgICAgICAgICAgICAgIHN0b3BQcm9wb2dhdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB0b2dnbGVFbmFibGUoZCkge1xuICAgICAgICAgICAgICAgIGQuZW5hYmxlID0gIWQuZW5hYmxlO1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gZDMuc2VsZWN0KCcjJyArICdub2RlLScgKyBkLmlkICsgXCIgLm5vZGUtbGFiZWxcIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoXCJkaXNhYmxlZFwiLCAhZC5lbmFibGUpO1xuICAgICAgICAgICAgICAgIHN0b3BQcm9wb2dhdGlvbigpO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN0b3BQcm9wb2dhdGlvbigpIHtcbiAgICAgICAgICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGFjdGl2ZSA9IGQzLnNlbGVjdChudWxsKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gb25DbGlja2VkTm9kZShub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhub2RlKTtcbiAgICAgICAgICAgICAgICB2YXIgaXNSZXNldCA9IG1ha2VDbGlja2VkTm9kZUFjdGl2ZSh0aGlzKTtcblxuICAgICAgICAgICAgICAgIGlmIChpc1Jlc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL1RPRE8gc2NhbGUgYWNjb3JkaW5nIHRvIHRoZSBib3VuZHNcbiAgICAgICAgICAgICAgICAvLyB2YXIgYm91bmRzID0gZDMuc2VsZWN0KGVsZW1bMF0pLm5vZGUoKS5nZXRCQm94KCk7XG4gICAgICAgICAgICAgICAgLy8gdmFyIHNjYWxlID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oOCwgMC45IC8gTWF0aC5tYXgoZC54ICwgZC55ICkpKTtcbiAgICAgICAgICAgICAgICBwYW5Ub1RoZU5vZGUobm9kZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGhpZ2hsaWdodFBhdGgobm9kZSkge1xuICAgICAgICAgICAgICAgIC8vVE9ETyBtdXN0IGluY2x1ZGUgdGhlIHJvb3Qgbm9kZSBpbiB0aGUgYXJyYXlcbiAgICAgICAgICAgICAgICAvL1BhdGggYXJyYXkgdG8gc3RvcmUgbm9kZXNcbiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IHNlYXJjaFdpdGhpblRyZWUodHJlZWRhdGEsIG5vZGUubmFtZSwgW10pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vZnVuY3Rpb24gdG8gb3BlbiBwYXRoc1xuICAgICAgICAgICAgICAgICAgICBjbGVhckhpZ2hMaWdodExpbmtzKGxhc3RTZWFyY2hlZFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRMaW5rcyhwYXRoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VhcmNoZWQgbm9kZSAnICsgbm9kZS5uYW1lICsgJyBub3QgZm91bmQnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsYXN0U2VhcmNoZWRQYXRoID0gcGF0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gaGlnaGxpZ2h0TGlua3MocGF0aCkge1xuXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHBhdGgsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPIGFzc3VtZSB0aGF0IGlkIG9mIHRoZSByb290IG5vZGUgaXMgMSwubWFrZSB0aGlzIG1vcmUgY29uc2lzdGVudCBsYXRlclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAodmFsdWUuaWQgIT09J2lkMScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmNsYXNzID0gJ2hpZ2hsaWdodC1saW5rJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5fY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5jaGlsZHJlbiA9IHZhbHVlLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5fY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFySGlnaExpZ2h0TGlua3MocGF0aCkge1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChwYXRoLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5jbGFzcyA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuX2NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5jaGlsZHJlbiA9IHZhbHVlLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLl9jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVIaWdobGlnaHQobm9kZSkge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmNsYXNzID09PSAnaGlnaGxpZ2h0LWxpbmsnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2xhc3MgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vc2VhcmNoIG9uIHRyZWUgZm9yIGEgbGlua1xuICAgICAgICAgICAgZnVuY3Rpb24gc2VhcmNoV2l0aGluVHJlZShub2RlLCBzZWFyY2hLZXksIHBhdGgpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5uYW1lID09PSBzZWFyY2hLZXkpIHsgLy9pZiBzZWFyY2ggaXMgZm91bmQgcmV0dXJuLCBhZGQgdGhlIG9iamVjdCB0byB0aGUgcGF0aCBhbmQgcmV0dXJuIGl0XG4gICAgICAgICAgICAgICAgICAgIHBhdGgucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUuY2hpbGRyZW4gfHwgbm9kZS5fY2hpbGRyZW4pIHsgLy9pZiBjaGlsZHJlbiBhcmUgY29sbGFwc2VkIGQzIG9iamVjdCB3aWxsIGhhdmUgdGhlbSBpbnN0YW50aWF0ZWQgYXMgX2NoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IChub2RlLmNoaWxkcmVuKSA/IG5vZGUuY2hpbGRyZW4gOiBub2RlLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUpOy8vIHdlIGFzc3VtZSB0aGlzIHBhdGggaXMgdGhlIHJpZ2h0IG9uZVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gc2VhcmNoV2l0aGluVHJlZShjaGlsZHJlbltpXSwgc2VhcmNoS2V5LCBwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZCkgey8vIHdlIHdlcmUgcmlnaHQsIHRoaXMgc2hvdWxkIHJldHVybiB0aGUgYnViYmxlZC11cCBwYXRoIGZyb20gdGhlIGZpcnN0IGlmIHN0YXRlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugey8vd2Ugd2VyZSB3cm9uZywgcmVtb3ZlIHRoaXMgcGFyZW50IGZyb20gdGhlIHBhdGggYW5kIGNvbnRpbnVlIGl0ZXJhdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7Ly9ub3QgdGhlIHJpZ2h0IG9iamVjdCwgcmV0dXJuIGZhbHNlIHNvIGl0IHdpbGwgY29udGludWUgdG8gaXRlcmF0ZSBpbiB0aGUgbG9vcFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBtYWtlQ2xpY2tlZE5vZGVBY3RpdmUoZWxlbSkge1xuICAgICAgICAgICAgICAgIHZhciBpc1Jlc2V0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZS5ub2RlKCkgPT09IGVsZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXNldCA9IHJlc2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmUgPSBkMy5zZWxlY3QoZWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBwYW5Ub1RoZU5vZGUobm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IDE7Ly9GSVhNRSBhZGQgc2NhbGUgdG8gaGlnaGVyIGlmIG5lZWRcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNsYXRlID0gW25vZGUueCAvIDIgLSBzY2FsZSAqIG5vZGUueCwgbm9kZS55IC8gMiAtIHNjYWxlICogbm9kZS55XTtcbiAgICAgICAgICAgICAgICB2aXMudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbigxMjUwKVxuICAgICAgICAgICAgICAgICAgICAuY2FsbCh6b29tT2JqZWN0LnRyYW5zbGF0ZSh0cmFuc2xhdGUpLnNjYWxlKHNjYWxlKS5ldmVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qICAgICAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlVHJhbnNsYXRpb24obm9kZSkge1xuICAgICAgICAgICAgIHZhciB0cm5hc2xhdGlvblNldD0gW107XG4gICAgICAgICAgICAgaWYobm9kZS54PDMwMCl7XG4gICAgICAgICAgICAgMzAwLW5vZGUueDtcbiAgICAgICAgICAgICB9ZWxzZSBpZihub2RlLng+MzAwKXtcbiAgICAgICAgICAgICBub2RlLngtMzAwO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICB9Ki9cblxuICAgICAgICAgICAgdmFyIHpvb21PYmplY3QgPSBkMy5iZWhhdmlvci56b29tKClcbiAgICAgICAgICAgICAgICAudHJhbnNsYXRlKFswLCAwXSlcbiAgICAgICAgICAgICAgICAuc2NhbGUoMSlcbiAgICAgICAgICAgICAgICAuc2NhbGVFeHRlbnQoWzEsIDhdKVxuICAgICAgICAgICAgICAgIC5vbihcInpvb21cIiwgem9vbWVkV3JhcHBlcik7XG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gem9vbWVkV3JhcHBlcigpIHtcbiAgICAgICAgICAgICAgICAvLyBnLnN0eWxlKFwic3Ryb2tlLXdpZHRoXCIsIDEuNSAvIGQzLmV2ZW50LnNjYWxlICsgXCJweFwiKTtcbiAgICAgICAgICAgICAgICB2aXMuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQzLmV2ZW50LnRyYW5zbGF0ZSArIFwiKXNjYWxlKFwiICsgZDMuZXZlbnQuc2NhbGUgKyBcIilcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVzZXQgY2FsbGVkXCIpO1xuICAgICAgICAgICAgICAgIGFjdGl2ZS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBhY3RpdmUgPSBkMy5zZWxlY3QobnVsbCk7XG5cbiAgICAgICAgICAgICAgICB2aXMudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbig3NTApXG4gICAgICAgICAgICAgICAgICAgIC5jYWxsKHpvb21PYmplY3QudHJhbnNsYXRlKFsxNTAsIDEwMF0pLnNjYWxlKDEpLmV2ZW50KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRUcmVlTm9kZUJ5T2JqZWN0KG9iamVjdCkge1xuICAgICAgICAgICAgICAgIHZhciB0cmVlTm9kZSA9ICRmaWx0ZXIoJ2ZpbHRlcicpKG5vZGVMaXN0LCB7J2lkJzogb2JqZWN0LmlkfSwgdHJ1ZSlbMF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyZWVOb2RlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiAgICAgICAgICAgIGVsZW0ucmVtb3ZlQXR0cihcImNhc2NhZGUtdHJlZS12aWV3XCIpO1xuICAgICAgICAgICAgICRjb21waWxlKGVsZW0pKHNjb3BlKTsqL1xuXG4gICAgICAgICAgICBub2RlQWN0aXZlQ2xlYXJMaXN0ZW5lciA9IHNjb3BlLiRvbignYXBwOm5vZGVzOmNsZWFyYWN0aXZlJywgb25EZWFjdGl2YXRlTm9kZXMpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBtYWtlTm9kZUFjdGl2ZShpZCkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlTGlzdCA9IGQzLnNlbGVjdEFsbChcIi5ub2RlLVwiICsgaWQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KG5vZGVMaXN0WzBdKS5hZGRDbGFzcygnYWN0aXZlLW5vZGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJBbGxBY3RpdmVOb2RlcygpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZUxpc3QgPSBkMy5zZWxlY3RBbGwoXCIubm9kZS1sYWJlbFwiKTtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobm9kZUxpc3QsIGZ1bmN0aW9uICh2LCBrKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCh2KS5yZW1vdmVDbGFzcygnYWN0aXZlLW5vZGUnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25EZWFjdGl2YXRlTm9kZXMoZXYsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjbGVhckFsbEFjdGl2ZU5vZGVzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBkZXN0cm95TGlzdGVuZXIpO1xuICAgICAgICAgICAgZnVuY3Rpb24gZGVzdHJveUxpc3RlbmVyKCkge1xuICAgICAgICAgICAgICAgIG5vZGVBY3RpdmVDbGVhckxpc3RlbmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRyZWVWaWV3RGlyZWN0aXZlO1xuICAgIH1cblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiBUcmVlVmlld0RpcmVjdGl2ZUNvbnRyb2xsZXIoJHJvb3RTY29wZSwgJHNjb3BlLCB0cmVlVmlld1NlcnZpY2UpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0ubWFrZUNhbGxCYWNrID0gbWFrZUNhbGxCYWNrO1xuXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VDYWxsQmFjayhpZGVudGlmaWVyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2FsbGVkIHRyZWV2aWV3IGNhbGwgYmFjayBhYm4nKTtcbiAgICAgICAgICAgICRzY29wZS52bVtpZGVudGlmaWVyXSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogICAgICAgIGZ1bmN0aW9uIG9uSW5pdCgpIHtcbiAgICAgICAgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgcmV0dXJuIHRyZWVWaWV3U2VydmljZS5nZXRTZWFyY2hlZE5vZGUoKTtcbiAgICAgICAgIH0sIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICBjb25zb2xlLmxvZyhub2RlKTtcbiAgICAgICAgIH0pO1xuICAgICAgICAgfVxuXG4gICAgICAgICBvbkluaXQoKTsqL1xuICAgICAgICAvKiAgICAgICAgdmFyIHNlYXJjaExpc3RlbmVyID0gJHJvb3RTY29wZS4kb24oJ2NoYXJ0OmhpZXJhcmNoeTpzZWFyY2gnLCBvblNlYXJjaCk7XG5cbiAgICAgICAgIGZ1bmN0aW9uIG9uU2VhcmNoKG5vZGUpIHtcbiAgICAgICAgIGNvbnNvbGUubG9nKG5vZGUpO1xuICAgICAgICAgfVxuXG5cbiAgICAgICAgICRyb290U2NvcGUuJG9uKCckZGVzdHJveScsIGRlc3Ryb3lMaXN0ZW5lcik7XG4gICAgICAgICBmdW5jdGlvbiBkZXN0cm95TGlzdGVuZXIoKSB7XG4gICAgICAgICBzZWFyY2hMaXN0ZW5lcigpO1xuICAgICAgICAgfSovXG4gICAgfVxufSkoKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDYvMS8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5mYWN0b3J5KCd0cmVlVmlld1NlcnZpY2UnLCB0cmVlVmlld1NlcnZpY2UpO1xuXG4gICAgZnVuY3Rpb24gdHJlZVZpZXdTZXJ2aWNlKCRmaWx0ZXIpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkTm9kZSA9IG51bGw7XG4gICAgICAgIHZhciBub2RlcyA9IFtdO1xuXG4gICAgICAgIHZhciBzZXJ2aWNlRXhwb3NhYmxlID0ge1xuICAgICAgICAgICAgc2V0U2VhcmNoZWROb2RlOiBzZXRTZWFyY2hlZE5vZGUsXG4gICAgICAgICAgICBnZXRTZWFyY2hlZE5vZGU6IGdldFNlYXJjaGVkTm9kZSxcbiAgICAgICAgICAgIHNldE5vZGVzOiBzZXROb2RlcyxcbiAgICAgICAgICAgIGdldE5vZGVzOiBnZXROb2RlcyxcbiAgICAgICAgICAgIGZpbmRCeUlkOiBmaW5kQnlJZFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzZXJ2aWNlRXhwb3NhYmxlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRCeUlkKGlkKSB7XG4gICAgICAgICAgICB2YXIgdHJlZU5vZGUgPSAkZmlsdGVyKCdmaWx0ZXInKShub2RlcywgeydpZCc6IGlkfSx0cnVlKVswXTtcbiAgICAgICAgICAgIHJldHVybiB0cmVlTm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldE5vZGVzKHNldE9mbm9kZXMpIHtcbiAgICAgICAgICAgIG5vZGVzID0gc2V0T2Zub2RlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldE5vZGVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGVzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0U2VhcmNoZWROb2RlKG5vZGUpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkTm9kZSA9IG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRTZWFyY2hlZE5vZGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWROb2RlO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiJdfQ==
