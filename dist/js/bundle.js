!function(){"use strict";angular.module("orgChart",[])}(),function(){"use strict";function e(e,t,n){function o(o,r){function i(e){var t=angular.lowercase(e);return function(e){return 0===e.name.toLowerCase().indexOf(t)}}var a=this;a.simulateQuery=!1,a.isDisabled=!1,a.noCache=!0,a.querySearch=function(n){console.log(a.searchableList);var o,r=n?a.searchableList.filter(i(n)):a.searchableList;return a.simulateQuery?(o=t.defer(),e(function(){o.resolve(r)},1e3*Math.random(),!1),o.promise):r},a.selectedItemChange=function(e){e&&(n.info("Item changed to "+JSON.stringify(e)),o.setSearchedNode(e))},a.searchTextChange=function(e){n.info("Text changed to "+e)},a.newState=function(e){alert("Sorry! You'll need to create a Constitution for "+e+" first!")};var l=r.$on("app:nodes:changed",function(e,t){});r.$on("$destroy",function(){l()})}return o.$inject=["treeViewService","$scope"],{replace:!1,restrict:"EA",controller:o,template:'<div layout-align="start center" layout="row" layout-fill> <div flex-offset="5" class="search-box-holder"> <md-autocomplete ng-disabled="vm.isDisabled" md-no-cache="vm.noCache" md-selected-item="vm.selectedItem" md-search-text-change="vm.searchTextChange(vm.searchText)" md-search-text="vm.searchText" md-selected-item-change="vm.selectedItemChange(item)" md-items="item in vm.querySearch(vm.searchText)" md-item-text="item.name" md-min-length="0" placeholder="Search People" class="auto-complete-custom"> <md-item-template> <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.name}}</span> </md-item-template> <md-not-found> No states matching "{{ctrl.searchText}}" were found. <a ng-click="ctrl.newState(ctrl.searchText)">Create a new one!</a> </md-not-found> </md-autocomplete> </div><div flex class="btn-search-holder"><button class="btn-search" type="button"><i class="fa fa-search"></i> </button></div></div>',controllerAs:"vm",scope:{},bindToController:{searchableList:"="},link:function(e,t,n){}}}e.$inject=["$timeout","$q","$log"],angular.module("orgChart").directive("treeSearchBox",e)}(),function(){"use strict";function e(e){var t=this;t.isExpandAllMode=e.isExpandAllMode(),t.toggleExpandAllMode=function(){t.isExpandAllMode=e.toggleExpandAllMode()},t.zoomTrigger=function(e){t.zoomTriggerCallBack({status:e})},t.zoomScale=e.getZoomScale()}e.$inject=["toolSetService"],angular.module("orgChart").directive("treeToolSet",function(){return{replace:!1,restrict:"EA",controller:e,controllerAs:"vm",template:'<div layout="column" layout-align="center end"> <div layout="column" layout-align="space-around center" class="toolset-wrapper" flex-offset="5"> <div> <button class="toolset-btn upper-rounded" ng-click="vm.zoomTrigger(\'increment\')"> <md-tooltip md-direction="bottom">Zoom In</md-tooltip> <md-icon><i ng-class="{\'fa fa-plus\':true,\'custom-font-icon\':true}"></i></md-icon></button> </div><div> <button class="toolset-btn lower-rounded" ng-click="vm.zoomTrigger(\'decrement\')"> <md-tooltip md-direction="bottom">Zoom Out</md-tooltip> <md-icon><i ng-class="{\'fa fa-minus\':true,\'custom-font-icon\':true}"></i></md-icon></button> </div><div style="margin-top: 10px"> <button class="toolset-btn" ng-click="vm.toggleExpandAllMode()"> <md-tooltip md-direction="bottom"><span ng-if="!vm.isExpandAllMode">Expand All</span><span ng-if="vm.isExpandAllMode">Collapse All</span></md-tooltip> <md-icon><i ng-class="{\'fa fa-expand\':!vm.isExpandAllMode,\'fa fa-compress\':vm.isExpandAllMode,\'custom-font-icon\':true}"></i> </md-icon></button> </div></div></div>',scope:{},bindToController:{zoomTriggerCallBack:"&"},link:function(e,t,n,o){}}})}(),function(){"use strict";angular.module("orgChart").factory("toolSetService",function(){var e=!1,t=1;return{isExpandAllMode:function(){return e},toggleExpandAllMode:function(){return e=!e},getZoomScale:function(){return console.log("getZoom Scale",t),t},setZoomScale:function(e){t=e,console.log("zoom scale",t)},incrementZoomScale:function(){return t+=.1},decrementZoomScale:function(){return t>-2.5&&(t-=.1),t}}})}(),function(){"use strict";function e(e,n,o){return{restrict:"E",replace:!0,templateNamespace:"svg",controller:t,template:'<foreignObject width="260" height="220" style="overflow: visible"><div style="margin-top: 50px;margin-left:10px" class="{{vm.nodeClass}}" ng-mouseenter="vm.whenMouseEnter()" ng-mouseleave="vm.whenMouseLeave()" ng-click="vm.makeNodeActive()"> <div layout="column" layout-align="center center"> <div ng-class="{\'node-text-main-no-image\':!vm.isImagePresent}" class="md-subhead node-text-main"><trim-word word-options ="vm.wordTrimOptions" word="vm.getDisplayName(0)"></trim-word></div><div> <div class="round-chip-wrapper"><img ng-if="vm.isImagePresent" ng-src="{{vm.node.image_url}}" class="round-chip" id="img-chip"> </div></div><div  ng-class="{\'node-text-sub-no-image\':!vm.isImagePresent}" class="md-subhead node-text-sub">{{vm.getDisplayName(1)}}</div><div  ng-class="{\'node-text-sub-no-image\':!vm.isImagePresent}" ng-if="!vm.isActionBarPresent" class="md-subhead node-text-sub">Sample Text</div><div layout-align="center center" layout-fill layout="row" ng-if="vm.isActionBarPresent"> <div ng-repeat="action in vm.nodeActions"> <button ng-click="vm.makeCallBack(action.callBack); $event.stopPropagation();" class="action-btn"><span></span>&nbsp;<i class="{{action.icon}}"></i></button> </div></div></div></div></foreignObject>',controllerAs:"vm",scope:{},bindToController:{nodeId:"@",nodeActions:"@"},link:{pre:function(t,r,i,a){function l(){o.$broadcast("app:nodes:clearactive",{data:""})}function c(e){r===e.target||r[0].contains(e.target)||t.$apply(function(){a.isActive=!1})}console.log(i.imagepresent),a.isImagePresent="true"==i.imagepresent,a.isActionBarPresent="true"==i.actionbarpresent,a.nodeDisplayProps=i.nodedisplayprops.split(","),a.id=i.nodeid,a.nodeActions=angular.fromJson(i.nodeactions),console.log(a.nodeActions),a.isPinnedNode=!1,a.node=e.findById(i.nodeid),a.wordTrimOptions={word:"d",from:"0",until:"12",toolTip:"true",toolTipDirection:"top"},a.nodeClass="node-label node-"+a.node.type+" node-"+a.id,a.isExpandedView=!1,a.isActive=!1,a.whenMouseEnter=function(){console.log("mouse Entered")},a.whenMouseLeave=function(){console.log("mouse leaved")},a.togglePinnedMode=function(){a.isPinnedNode=!0,console.log(a.isPinnedNode)},a.makeCallBack=function(e){console.log(e),t.$parent.vm.makeCallBack(e,a.node)},a.makeNodeActive=function(){l(),a.isActive=!0},a.getDisplayName=function(e){return a.node[a.nodeDisplayProps[e]]};angular.element(r.children()[0]);n.on("click",c),t.$on("$destroy",function(){n.off("click",c)})}}}}function t(){}e.$inject=["treeViewService","$document","$rootScope"],angular.module("orgChart").directive("treeNode",e)}(),function(){"use strict";function e(e,n,o,r,i,a,l){return{replace:"false",templateNamespace:"svg",restrict:"E",scope:{},bindToController:{data:"=",abn:"&",del:"&",add:"&",edit:"&",fetchSearchableList:"&",nodeActions:"@",treedata:"=",searchableList:"=",imagePresent:"=",actionBarPresent:"=",nodeDisplayProps:"@"},controller:t,controllerAs:"vm",link:{pre:function(t,c,s,d){function u(){m(),h()}function h(){t.$watch(function(){return a.isExpandAllMode()},function(e){e?f():g()})}function f(){p(.5),a.setZoomScale(.5),K(),T()}function g(){p(1),a.setZoomScale(1),K(),E()}function m(){t.$watch(function(){return r.getSearchedNode()},function(e){if(console.log(e),e){L(e);var t=J(e);W(),i(function(){console.log(t.x,t.y),G(),Y(t.id),q(t)},500)}})}function p(e){var t={x:0,y:0,k:e};U([t.x,t.y],t.k)}function v(e,t){ye=e,d3.select(t).select(".ghost-area").attr("pointer-events","none"),d3.selectAll(".ghost-area").attr("class","ghost-area show"),d3.select(t).attr("class","node active-drag"),Be.selectAll("g.node").sort(function(e,t){return e.id!=ye.id?1:-1}),te.length>1&&(ae=Ie.links(te),le=Be.selectAll("path.link").data(ae,function(e){return e.target.id}).remove(),ce=Be.selectAll("g.node").data(te,function(e){return e.id}).filter(function(e,t){return e.id!=ye.id}).remove()),se=Ie.links(Ie.nodes(ye.parent)),Be.selectAll("path.link").filter(function(e,t){return e.target.id==ye.id}).remove(),ve=null}function x(e,t){var n,o,r,i=we;re&&(clearTimeout(re),ie=d3.transform(Be.attr("transform")),"left"==t||"right"==t?(n="left"==t?ie.translate[0]+i:ie.translate[0]-i,o=ie.translate[1]):"up"!=t&&"down"!=t||(n=ie.translate[0],o="up"==t?ie.translate[1]+i:ie.translate[1]-i),ie.scale[0],ie.scale[1],r=a.getZoomScale(),Be.transition().attr("transform","translate("+n+","+o+")scale("+r+")"),d3.select(e).select("g.node").attr("transform","translate("+n+","+o+")"),Ne.scale(r),Ne.translate([n,o]),re=setTimeout(function(){x(e,i,t)},50))}function y(){var e=[];if(null!==ye&&null!==xe){var t=d.imagePresent?5:50;e=[{source:{x:xe.x0+12+pe.width/2,y:xe.y0+50+pe.height+10},target:{x:ye.x0+12+pe.width/2,y:ye.y0+t}}]}var n=Be.selectAll(".temp-link").data(e);n.enter().append("path").attr("class","temp-link").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),n.attr("d",d3.svg.diagonal()),n.exit().remove()}function w(){xe=null,d3.selectAll(".ghost-area").attr("class","ghost-area"),d3.select(ne).attr("class","node"),d3.select(ne).select(".ghost-area").attr("pointer-events",""),y(),null!==ye&&(b(),C(me),q(ye),ye=null)}function b(){var e={target:xe,source:ye};o.$broadcast("app:nodes:re-arranged",e)}function k(e){e.children&&(e.children.forEach(k),P(e))}function S(e){var t=e.children?e.children:e._children;e._children&&(e.children=e._children,e._children=null),t&&t.forEach(S)}function A(e){var t=e.children?e.children:e._children;e.children&&(e._children=e.children,e.children=null),t&&t.forEach(A)}function T(){S(me),C(me)}function E(){A(me),C(me)}function C(e){var o=d3.event&&d3.event.altKey?5e3:500,i=Ie.nodes(me).reverse();i.forEach(function(e){e.weight?e.y=12*e.weight+300*e.depth:e.y=300*e.depth});var a=Be.selectAll("g.node").data(i,function(e){return e.id||(e.id=++$e)}),l=a.enter().append("svg:g").call(ge).attr("class","node").attr("id",function(e){return"node-"+e.id}).attr("transform",function(t){return"translate("+e.x0+","+e.y0+")"}).on("click",function(e){d3.event.defaultPrevented||(P(e),C(e))});l.append("rect").attr("class","ghost-area").attr("width",pe.width).attr("height",pe.height+250).attr("opacity",.2).style("fill","transparent").attr("pointer-events","mouseover").on("mouseover",function(e){Me(e)}).on("mouseout",function(e){_e(e)}),l.append("tree-node").attr("node",function(e){return r.pushNode(e),""}).on("click",Z).attr("nodeId",function(e){return e.id}).attr("imagePresent",function(e){return d.imagePresent}).attr("actionBarPresent",function(e){return d.actionBarPresent}).attr("nodeDisplayProps",function(e){return d.nodeDisplayProps}).attr("isPinnedNode","false").attr("nodeActions",s.nodeactions).each(function(){n(this)(t)}),a.transition().duration(o).attr("transform",function(e){return"translate("+e.x+","+e.y+")"});var c=a.exit().transition().duration(o).attr("transform",function(t){return"translate("+e.x+","+e.y+")"}).remove();c.select("circle").attr("r",1e-6),c.select("text").style("fill-opacity",1e-6);var u=Be.selectAll("path.link").data(Ie.links(i),function(e){return e.target.id});u.enter().insert("svg:path","g").attr("class","link").attr("d",function(t){var n={x:e.x0,y:e.y0};return Oe({source:n,target:n})}).transition().duration(o).attr("d",M),u.transition().duration(o).attr("d",M).style("stroke",function(e){if("highlight-link"===e.target.class)return this.parentNode.appendChild(this),"#ff4136"}),u.exit().transition().duration(0).attr("d",function(t){var n={x:e.x,y:e.y};return Oe({source:n,target:n})}).remove(),i.forEach(function(e){e.x0=e.x,e.y0=e.y}),angular.copy(i,be),r.setNodes(be)}function P(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null)}function N(e){return e.source.children.length>1&&e.source.children[0]==e.target?"onleft":e.source.children.length>1&&e.source.children[e.source.children.length-1]==e.target?"onright":"straight"}function M(e){var t=N(e),n="",o=d.imagePresent?5:50;switch(t){case"straight":n+="M"+(e.source.x+pe.width/2+12)+","+(e.source.y+pe.height+57)+"V"+(e.source.y+pe.height+pe.height/2+35)+"H"+(e.target.x+12+pe.width/2)+"V"+(e.target.y+o)+"M"+e.target.x+"12,"+(e.target.y+o);break;case"onleft":n+="M"+(e.source.x+pe.width/2+12)+","+(e.source.y+pe.height+57)+"V"+(e.source.y+pe.height+pe.height/2+35)+"H"+(e.target.x+12+pe.width/2+8)+" Q "+(e.target.x+12+pe.width/2-8+8)+","+(e.source.y+pe.height+pe.height/2+35)+" "+(e.target.x+12+pe.width/2-8+8)+","+(e.source.y+pe.height+pe.height/2+8+35)+"V"+(e.target.y+o)+"M"+e.target.x+"12,"+(e.target.y+o);break;case"onright":n+="M"+(e.source.x+12+pe.width/2)+","+(e.source.y+pe.height+57)+"V"+(e.source.y+pe.height+pe.height/2+35)+"H"+(e.target.x+12+pe.width/2-8)+" Q "+(e.target.x+12+pe.width/2)+","+(e.source.y+pe.height+pe.height/2+35)+" "+(e.target.x+12+pe.width/2)+","+(e.source.y+pe.height+pe.height/2+8+35)+"V"+(e.target.y+o)+"M"+e.target.x+"12,"+(e.target.y+o)}return n}function _(e,t){Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,9),z(e.id,t)}function B(e){var t=e.parent.children.indexOf(e);t>-1&&e.parent.children.splice(t,1),I(me.children,e),C(e.parent)}function I(e,t){angular.forEach(e,function(n,o){if(t.id==n.id){var r=e.indexOf(n);r>-1&&e.splice(r,1)}else angular.isDefined(n.children)&&null!==n.children&&I(n.children,t)})}function O(e,t){angular.forEach(e,function(n,o){if(t.id==n.id){var r=e.indexOf(n);r>-1&&(e[r].name=t.name)}else angular.isDefined(n.children)&&null!==n.children&&I(n.children,t)})}function z(e,t){var n=d3.select("#node-"+e).datum();void 0===n.children&&void 0===n._children?n.children=[t]:null!=n._children?(n._children.push(t),P(n)):null!=n.children?n.children.push(t):null==n._children&&(n._children=[],n._children.push(t),P(n)),C(n)}function D(){d.fetchSearchableList()}function Z(e){d3.event.defaultPrevented||(console.log(e),Q(this)||q(e))}function L(e){var t=H(d.treedata,e.name,[]);angular.isDefined(t)?(j(Pe),V(t)):console.log("Searched node "+e.name+" not found"),Pe=t}function V(e){angular.forEach(e,function(e,t){e.class="highlight-link",e._children&&(e.children=e._children,e._children=null),C(e)})}function j(e){angular.forEach(e,function(e,t){e.class="",e._children&&(e.children=e._children,e._children=null),C(e)})}function H(e,t,n){if(e.name===t)return n.push(e),n;if(!e.children&&!e._children)return!1;for(var o=e.children?e.children:e._children,r=0;r<o.length;r++){n.push(e);var i=H(o[r],t,n);if(i)return i;n.pop()}}function Q(e){var t=!1;return ze.node()===e&&(t=W()),!!t||(ze.classed("active",!1),ze=d3.select(e).classed("active",!0),!1)}function q(e){var t=a.getZoomScale(),n=[-t*e.x,-t*e.y];console.log("node",e),console.log("node translate ",n),Be.transition().duration(1250).call(Ne.translate(n).scale(t).event)}function W(){return console.log("Resetting Active nodes"),ze.classed("active",!1),ze=d3.select(null),!0}function J(t){return e("filter")(be,{id:t.id},!0)[0]}function F(t){return e("filter")(be,{id:t},!0)[0]}function K(){R(0,0)}function R(e,t){Be.transition().duration(1e3).delay(100).attr("transform",function(n){return"translate("+e+","+t+")scale("+a.getZoomScale()+")"})}function Y(e){var t=d3.selectAll(".node-"+e.toString());angular.element(t[0]).find("img").addClass("active-node")}function G(){var e=d3.selectAll(".node-label");angular.forEach(e,function(e,t){angular.element(e).find("img").removeClass("active-node")})}function U(e,t){return d3.transition().duration(250).tween("wheel.zoom",function(){var n=d3.interpolate(Ne.translate(),e),o=d3.interpolate(Ne.scale(),t);return function(e){Ne.scale(o(e)).translate(n(e)),ee()}})}function X(e){var t=1,n=1,o=[Se/2,Te/2],r=Ne.scaleExtent(),i=Ne.translate(),a=[],l=[],c={x:i[0],y:i[1],k:Ne.scale()};if(t="increment"===e?1:-1,(n=Ne.scale()*(1+.2*t))<r[0]||n>r[1])return!1;a=[(o[0]-c.x)/c.k,(o[1]-c.y)/c.k],c.k=n,l=[a[0]*c.k+c.x,a[1]*c.k+c.y],c.x+=o[0]-l[0],c.y+=o[1]-l[1],U(Ne.translate(),c.k)}function ee(){console.log(Ne.scale()),a.setZoomScale(Ne.scale()),Be.attr("transform","translate("+Ne.translate()+")scale("+a.getZoomScale()+")"),Be.selectAll("g.parent").attr("transform",function(e){return"translate("+e.x+","+e.y+")scale("+a.getZoomScale()+")"})}var te,ne,oe,re,ie,ae,le,ce,se,de,ue,he,fe,ge,me,pe={width:240,height:146,horizontalSeperation:16,verticalSeperation:128},ve=!1,xe=null,ye=null,we=200,be=[],ke=[20,20,20,20],Se=l.innerWidth-20-ke[1]-ke[3],Ae=l.innerHeight,Te=600-ke[0]-ke[2],$e=0,Ee=(d3.scale.linear().domain([0,Se]).range([0,Se]),d3.scale.linear().domain([0,Te]).range([0,Te]),"0 0 "+Se+" "+Ae),Ce=d3.select(c[0]),Pe=[],Ne=d3.behavior.zoom().translate([0,0]).scale(a.getZoomScale()).scaleExtent([.3,8]).on("zoom",ee);d.wordTrimOptions={word:"d",from:"0",until:"12",toolTip:"true",toolTipDirection:"top"},c.append(n("<div class='component-container'><div layout=\"row\" layout-align=\"space-around center\"><div flex><tree-search-box searchable-list='vm.searchableList'></tree-search-box></div><div flex><tree-tool-set zoom-trigger-call-back='vm.zoomTrigger(status)'></tree-tool-set></div></div></div>")(t)),d.zoomTrigger=function(e){console.log(e),X(e)},de=t.$on("app:nodes:clearactive",function(e,t){G()}),ue=t.$on("app:nodes:delete",function(e,t){console.log(t),B(F(t.nodeID)),D()}),he=t.$on("app:nodes:add::after",function(e,t){_(F(t.parentNode.id),t.lastAddedNode),D()}),fe=t.$on("app:nodes:update::after",function(e,t){O(me.children,t.lastEditedNode),D()}),ge=d3.behavior.drag().on("dragstart",function(e){e!=me&&(ve=!0,te=Ie.nodes(e),d3.event.sourceEvent.stopPropagation())}).on("drag",function(e){if(e!=me){if(ve&&v(e,ne=this),(oe=d3.mouse($("svg").get(0)))[0]<20)re=!0,x(this,"left");else if(oe[0]>$("svg").width()-20)re=!0,x(this,"right");else if(oe[1]<20)re=!0,x(this,"up");else if(oe[1]>$("svg").height()-20)re=!0,x(this,"down");else try{clearTimeout(re)}catch(e){console.error(e)}e.x0+=d3.event.dx,e.y0+=d3.event.dy,d3.select(this).attr("transform","translate("+e.x0+","+e.y0+")"),y()}}).on("dragend",function(e){if(e!=me)if(ne=this,xe){var t=ye.parent.children.indexOf(ye);t>-1&&ye.parent.children.splice(t,1),void 0!==xe.children||void 0!==xe._children?void 0!==xe.children?xe.children.push(ye):xe._children.push(ye):(xe.children=[],xe.children.push(ye)),w()}else w()});var Me=function(e){xe=e,y()},_e=function(e){xe=null,y()};u();var Be=Ce.append("div").attr("layout","row").attr("layout-align","space-around center").append("div").attr("flex","").attr("id","svg-box-container").call(function(){}).append("svg").attr("id","svgBox").attr("viewBox",Ee).attr("style","cursor:move;").attr("width","100%").attr("height",Ae).call(Ne).append("svg:g").attr("transform","translate("+(l.innerWidth/2-120)+","+Te/4+")").attr("style","cursor:pointer;").on("click",function(){d3.event.stopPropagation()},!1).call(d3.behavior.drag().on("dragstart",function(){}).on("drag",function(){})).append("g").attr("width",160).attr("height",120).attr("class","tree-holder");d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})};var Ie=d3.layout.tree().nodeSize([pe.width+pe.horizontalSeperation,pe.height+pe.verticalSeperation]).separation(function(e,t){return e.parent==t.parent?1.25:1.5}),Oe=d3.svg.diagonal().source(function(e){return{x:e.source.x+pe.width/2,y:e.source.y+(pe.height+10)}}).target(function(e){return{x:e.target.x+pe.width/2,y:e.target.y-("true"==d.imagePresent?45:0)}}).projection(function(e){return[e.x+0,e.y+0]});(me=d.treedata).x0=Te/2,me.y0=0,console.log(me),me.children.forEach(k),C(me);var ze=d3.select(null);t.$on("$destroy",function(){de(),ue(),he(),fe()})}}}}function t(e){var t=this;t.makeCallBack=function(t,n){e.vm[t]({node:n})},console.log(t.searchableList)}e.$inject=["$filter","$compile","$rootScope","treeViewService","$timeout","toolSetService","$window"],t.$inject=["$scope"],angular.module("orgChart").directive("treeView",e)}(),function(){"use strict";function e(e){var t=null,n=[];return{setSearchedNode:function(e){t=e},getSearchedNode:function(){return t},setNodes:function(e){n=e},pushNode:function(e){n.push(e)},getNodes:function(){return n},findById:function(t){return e("filter")(n,{id:t},!0)[0]}}}e.$inject=["$filter"],angular.module("orgChart").factory("treeViewService",e)}(),function(){"use strict";function e(){}angular.module("orgChart").directive("trimWord",function(){return{restrict:"E",template:'<span ng-bind="vm.parsedText"><md-tooltip ng-if="vm.isToolTipNeed()" md-direction="vm.wordOptions.toolTipDirection">{{::vm.word}}</md-tooltip></span>',scope:{},controller:e,controllerAs:"vm",link:function(e,t,n,o){function r(){e.$watch(angular.bind(o,function(){return o.word}),function(e){console.log("word change to "+e),a()})}function i(){var e=parseInt(o.wordOptions.from),t=parseInt(o.wordOptions.until);return o.word.substring(e,t)}function a(){o.parsedText=i(),o.word.length>parseInt(o.wordOptions.until)?o.parsedText=o.parsedText.concat(" ..."):o.parsedText}o.isToolTipNeed=function(){return"true"==o.wordOptions.toolTip},r(),a()},bindToController:{wordOptions:"=",word:"="}}})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZ2NoYXJ0Lm1vZHVsZS5qcyIsImRpcmVjdGl2ZXMvc2VhcmNoYm94LmRpcmVjdGl2ZS5qcyIsImRpcmVjdGl2ZXMvdG9vbHNldC5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3Rvb2xzZXQuc2VydmljZS5qcyIsImRpcmVjdGl2ZXMvdHJlZW5vZGUuZGlyZWN0aXZlLmpzIiwiZGlyZWN0aXZlcy90cmVldmlldy5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3RyZWV2aWV3LnNlcnZpY2UuanMiLCJkaXJlY3RpdmVzL3RyaW13b3JkLmRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwidHJlZVNlYXJjaEJveCIsIiR0aW1lb3V0IiwiJHEiLCIkbG9nIiwiQ2FzY2FkZVRyZWVTZWFyY2hCb3hDb250cm9sbGVyIiwidHJlZVZpZXdTZXJ2aWNlIiwiJHNjb3BlIiwiY3JlYXRlRmlsdGVyRm9yIiwicXVlcnkiLCJsb3dlcmNhc2VRdWVyeSIsImxvd2VyY2FzZSIsInN0YXRlIiwibmFtZSIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsInZtIiwidGhpcyIsInNpbXVsYXRlUXVlcnkiLCJpc0Rpc2FibGVkIiwibm9DYWNoZSIsInF1ZXJ5U2VhcmNoIiwiY29uc29sZSIsImxvZyIsInNlYXJjaGFibGVMaXN0IiwiZGVmZXJyZWQiLCJyZXN1bHRzIiwiZmlsdGVyIiwiZGVmZXIiLCJyZXNvbHZlIiwiTWF0aCIsInJhbmRvbSIsInByb21pc2UiLCJzZWxlY3RlZEl0ZW1DaGFuZ2UiLCJpdGVtIiwiaW5mbyIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXRTZWFyY2hlZE5vZGUiLCJzZWFyY2hUZXh0Q2hhbmdlIiwidGV4dCIsIm5ld1N0YXRlIiwiYWxlcnQiLCJub2RlQ2hhbmdlZExpc3RlbmVyIiwiJG9uIiwiZXZlbnQiLCJkYXRhIiwicmVwbGFjZSIsInJlc3RyaWN0IiwiY29udHJvbGxlciIsInRlbXBsYXRlIiwiY29udHJvbGxlckFzIiwic2NvcGUiLCJiaW5kVG9Db250cm9sbGVyIiwibGluayIsImVsZW0iLCJhdHRycyIsImRpcmVjdGl2ZSIsIlRyZWVUb29sU2V0IiwidG9vbFNldFNlcnZpY2UiLCJpc0V4cGFuZEFsbE1vZGUiLCJ0b2dnbGVFeHBhbmRBbGxNb2RlIiwiem9vbVRyaWdnZXIiLCJzdGF0dXMiLCJ6b29tVHJpZ2dlckNhbGxCYWNrIiwiem9vbVNjYWxlIiwiZ2V0Wm9vbVNjYWxlIiwiYXR0ciIsImZhY3RvcnkiLCJpc0FsbEV4cGFuZGVkTW9kZSIsInNldFpvb21TY2FsZSIsInNjYWxlIiwiaW5jcmVtZW50Wm9vbVNjYWxlIiwiZGVjcmVtZW50Wm9vbVNjYWxlIiwidHJlZU5vZGUiLCIkZG9jdW1lbnQiLCIkcm9vdFNjb3BlIiwidGVtcGxhdGVOYW1lc3BhY2UiLCJDYXNjYWRlVHJlZU5vZGVDb250cm9sbGVyIiwibm9kZUlkIiwibm9kZUFjdGlvbnMiLCJwcmUiLCJjbGVhckFsbE90aGVyQWN0aXZlTm9kZXMiLCIkYnJvYWRjYXN0Iiwib25Eb2N1bWVudENsaWNrIiwiZXYiLCJ0YXJnZXQiLCJjb250YWlucyIsIiRhcHBseSIsImlzQWN0aXZlIiwiaW1hZ2VwcmVzZW50IiwiaXNJbWFnZVByZXNlbnQiLCJpc0FjdGlvbkJhclByZXNlbnQiLCJhY3Rpb25iYXJwcmVzZW50Iiwibm9kZURpc3BsYXlQcm9wcyIsIm5vZGVkaXNwbGF5cHJvcHMiLCJzcGxpdCIsImlkIiwibm9kZWlkIiwiZnJvbUpzb24iLCJub2RlYWN0aW9ucyIsImlzUGlubmVkTm9kZSIsIm5vZGUiLCJmaW5kQnlJZCIsIndvcmRUcmltT3B0aW9ucyIsIndvcmQiLCJmcm9tIiwidW50aWwiLCJ0b29sVGlwIiwidG9vbFRpcERpcmVjdGlvbiIsIm5vZGVDbGFzcyIsInR5cGUiLCJpc0V4cGFuZGVkVmlldyIsIndoZW5Nb3VzZUVudGVyIiwid2hlbk1vdXNlTGVhdmUiLCJ0b2dnbGVQaW5uZWRNb2RlIiwibWFrZUNhbGxCYWNrIiwiY2FsbEJhY2tGdW5jTmFtZSIsIiRwYXJlbnQiLCJtYWtlTm9kZUFjdGl2ZSIsImdldERpc3BsYXlOYW1lIiwiaW5kZXgiLCJlbGVtZW50IiwiY2hpbGRyZW4iLCJvbiIsIm9mZiIsInRyZWVWaWV3IiwiJGZpbHRlciIsIiRjb21waWxlIiwiJHdpbmRvdyIsImFibiIsImRlbCIsImFkZCIsImVkaXQiLCJmZXRjaFNlYXJjaGFibGVMaXN0IiwidHJlZWRhdGEiLCJpbWFnZVByZXNlbnQiLCJhY3Rpb25CYXJQcmVzZW50IiwiVHJlZVZpZXdEaXJlY3RpdmVDb250cm9sbGVyIiwiYWN0aXZhdGVXYXRjaGVycyIsIm9uU2VhcmNoV2F0Y2giLCJvbkV4cGFuZFdhdGNoIiwiJHdhdGNoIiwiaXNJbkV4cGFuZEFsbE1vZGUiLCJleHBhbmRBbGxJbkNoYWluIiwiY29sbGFwc2VBbGxJbkNoYWluIiwiZm9yY2VTY2FsZSIsImNlbnRlclRoZVJvb3QiLCJleHBhbmRBbGwiLCJjb2xsYXBzZUFsbCIsImdldFNlYXJjaGVkTm9kZSIsImhpZ2hsaWdodFBhdGgiLCJyZXNvbHZlZE5vZGUiLCJnZXRUcmVlTm9kZUJ5T2JqZWN0IiwicmVzZXQiLCJ4IiwieSIsImNsZWFyQWxsQWN0aXZlTm9kZXMiLCJwYW5Ub1RoZU5vZGUiLCJ2aWV3IiwiayIsImludGVycG9sYXRlWm9vbSIsImluaXRpYXRlRHJhZyIsImQiLCJkb21Ob2RlIiwiZHJhZ2dpbmdOb2RlIiwiZDMiLCJzZWxlY3QiLCJzZWxlY3RBbGwiLCJ2aXMiLCJzb3J0IiwiYSIsImIiLCJub2RlcyIsImxlbmd0aCIsImxpbmtzIiwidHJlZSIsIm5vZGVQYXRocyIsInJlbW92ZSIsIm5vZGVzRXhpdCIsImkiLCJwYXJlbnRMaW5rIiwicGFyZW50IiwiZHJhZ1N0YXJ0ZWQiLCJwYW4iLCJkaXJlY3Rpb24iLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsInNwZWVkIiwicGFuU3BlZWQiLCJwYW5UaW1lciIsImNsZWFyVGltZW91dCIsInRyYW5zbGF0ZUNvb3JkcyIsInRyYW5zZm9ybSIsInRyYW5zbGF0ZSIsInRyYW5zaXRpb24iLCJ6b29tIiwic2V0VGltZW91dCIsInVwZGF0ZVRlbXBDb25uZWN0b3IiLCJzZWxlY3RlZE5vZGUiLCJleHRlbmRpbmdWYWx1ZSIsInNvdXJjZSIsIngwIiwibm9kZUJvdW5kYXJpZXMiLCJ3aWR0aCIsInkwIiwiaGVpZ2h0IiwiZW50ZXIiLCJhcHBlbmQiLCJzdmciLCJkaWFnb25hbCIsImV4aXQiLCJlbmREcmFnIiwiYnJvYWRDYXN0RHJhZ05Ecm9wIiwidXBkYXRlIiwicm9vdCIsInJlQXJyYW5nZWRPYmplY3QiLCJ0b2dnbGVBbGwiLCJmb3JFYWNoIiwidG9nZ2xlIiwiZXhwYW5kQWxsQWZ0ZXIiLCJfY2hpbGRyZW4iLCJjb2xsYXBzZUFsbEFmdGVyIiwiZHVyYXRpb24iLCJhbHRLZXkiLCJyZXZlcnNlIiwid2VpZ2h0IiwiZGVwdGgiLCJub2RlRW50ZXIiLCJjYWxsIiwiZHJhZ0xpc3RlbmVyIiwiZGVmYXVsdFByZXZlbnRlZCIsInN0eWxlIiwib3ZlckluR2hvc3RBcmVhIiwib3V0T2ZHaG9zdEFyZWEiLCJwdXNoTm9kZSIsIm9uQ2xpY2tlZE5vZGUiLCJlYWNoIiwibm9kZUV4aXQiLCJpbnNlcnQiLCJvIiwiZ2VuZXJhdGVQYXRoIiwiY2xhc3MiLCJwYXJlbnROb2RlIiwiYXBwZW5kQ2hpbGQiLCJjb3B5Iiwibm9kZUxpc3QiLCJzZXROb2RlcyIsImRldGVybWluZU5vZGVSZWxhdGl2ZUxvY2F0aW9uIiwicmVsYXRpdmVMb2NhdGlvbiIsInBhdGhTdHJpbmciLCJvbkFkZE5vZGUiLCJjaGlsZCIsInRvU3RyaW5nIiwic3Vic3RyIiwiYWRkQ2hpbGROb2RlIiwib25SZW1vdmVOb2RlIiwic3BsaWNlIiwiZmluZEludGhlUm9vdEFuZERlc3Rvcm95IiwibGlzdCIsInZhbHVlIiwia2V5IiwiaXNEZWZpbmVkIiwiZmluZEludGhlUm9vdEFuZFJlcGxhY2VOYW1lIiwicGFyZW50SWQiLCJuZXdOb2RlIiwibm9kZURhdGEiLCJkYXR1bSIsInVuZGVmaW5lZCIsInB1c2giLCJvbk5vZGVDaGFuZ2UiLCJtYWtlQ2xpY2tlZE5vZGVBY3RpdmUiLCJwYXRoIiwic2VhcmNoV2l0aGluVHJlZSIsImNsZWFySGlnaExpZ2h0TGlua3MiLCJsYXN0U2VhcmNoZWRQYXRoIiwiaGlnaGxpZ2h0TGlua3MiLCJzZWFyY2hLZXkiLCJmb3VuZCIsInBvcCIsImlzUmVzZXQiLCJhY3RpdmUiLCJjbGFzc2VkIiwib2JqZWN0IiwiZ2V0VHJlZU5vZGVCeUlEIiwidHJhbnNmb3JtTm9kZSIsInhQb3MiLCJ5UG9zIiwiZGVsYXkiLCJmaW5kIiwiYWRkQ2xhc3MiLCJ2IiwicmVtb3ZlQ2xhc3MiLCJ0d2VlbiIsImlUcmFuc2xhdGUiLCJpbnRlcnBvbGF0ZSIsImlTY2FsZSIsInQiLCJ6b29tZWQiLCJ6b29tQ2xpY2siLCJ0YXJnZXRfem9vbSIsImNlbnRlciIsInciLCJoIiwiZXh0ZW50Iiwic2NhbGVFeHRlbnQiLCJ0cmFuc2xhdGUwIiwibCIsInJlbENvb3JkcyIsIm5vZGVBY3RpdmVDbGVhckxpc3RlbmVyIiwibm9kZURlbGV0ZUxpc3RlbmVyIiwibm9kZUFmdGVyQWRkTGlzdGVuZXIiLCJub2RlQWZ0ZXJVcGRhdGVMaXN0ZW5lciIsImhvcml6b250YWxTZXBlcmF0aW9uIiwidmVydGljYWxTZXBlcmF0aW9uIiwibSIsImlubmVyV2lkdGgiLCJpSGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJ2aWV3Qm94Qm91bmRhcnkiLCJsaW5lYXIiLCJkb21haW4iLCJyYW5nZSIsIndyYXBwZXJFbGVtZW50IiwiYmVoYXZpb3IiLCJub2RlSUQiLCJsYXN0QWRkZWROb2RlIiwibGFzdEVkaXRlZE5vZGUiLCJkcmFnIiwic291cmNlRXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJtb3VzZSIsIiQiLCJnZXQiLCJlIiwiZXJyb3IiLCJkeCIsImR5Iiwic2VsZWN0aW9uIiwicHJvdG90eXBlIiwibW92ZVRvRnJvbnQiLCJsYXlvdXQiLCJub2RlU2l6ZSIsInNlcGFyYXRpb24iLCJwcm9qZWN0aW9uIiwiaWRlbnRpZmllciIsInNldE9mbm9kZXMiLCJnZXROb2RlcyIsInRyaW1Xb3JkQ29udHJvbGxlciIsImJpbmQiLCJwYXJzZVRleHQiLCJ0cmltV29yZCIsImZyb21WYWx1ZSIsInBhcnNlSW50Iiwid29yZE9wdGlvbnMiLCJ0b1ZhbHVlIiwic3Vic3RyaW5nIiwicGFyc2VkVGV4dCIsImNvbmNhdCIsImlzVG9vbFRpcE5lZWQiXSwibWFwcGluZ3MiOiJDQUdBLFdBQ0EsYUFDQUEsUUFBQUMsT0FBQSxrQkNGQSxXQUNBLGFBS0EsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0F1QkEsU0FBQUMsRUFBQUMsRUFBQUMsR0FpRUEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBWCxRQUFBWSxVQUFBRixHQUVBLE9BQUEsU0FBQUcsR0FDQSxPQUFBLElBQUFBLEVBQUFDLEtBQUFDLGNBQUFDLFFBQUFMLElBbkVBLElBQUFNLEVBQUFDLEtBQ0FELEVBQUFFLGVBQUEsRUFDQUYsRUFBQUcsWUFBQSxFQUNBSCxFQUFBSSxTQUFBLEVBR0FKLEVBQUFLLFlBeUJBLFNBQUFaLEdBQ0FhLFFBQUFDLElBQUFQLEVBQUFRLGdCQUNBLElBQ0FDLEVBREFDLEVBQUFqQixFQUFBTyxFQUFBUSxlQUFBRyxPQUFBbkIsRUFBQUMsSUFBQU8sRUFBQVEsZUFFQSxPQUFBUixFQUFBRSxlQUNBTyxFQUFBdEIsRUFBQXlCLFFBQ0ExQixFQUFBLFdBQ0F1QixFQUFBSSxRQUFBSCxJQUNBLElBQUFJLEtBQUFDLFVBQUEsR0FDQU4sRUFBQU8sU0FFQU4sR0FuQ0FWLEVBQUFpQixtQkEyQ0EsU0FBQUMsR0FFQUEsSUFDQTlCLEVBQUErQixLQUFBLG1CQUFBQyxLQUFBQyxVQUFBSCxJQUNBNUIsRUFBQWdDLGdCQUFBSixLQTlDQWxCLEVBQUF1QixpQkFzQ0EsU0FBQUMsR0FDQXBDLEVBQUErQixLQUFBLG1CQUFBSyxJQXJDQXhCLEVBQUF5QixTQUtBLFNBQUE3QixHQUNBOEIsTUFBQSxtREFBQTlCLEVBQUEsWUFKQSxJQUFBK0IsRUFBQXBDLEVBQUFx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QXFWLFdBQUFOLElBQ0EvVSxFQUFBeUYsS0FBQXFFLE9BQUFtTCxTQUFBalYsRUFBQWtWLFlBQUF2UCxPQUFBM0YsRUFBQXFWLFdBQUFyVixFQUFBcVYsV0FBQUMsT0FBQSxRQUFBdFYsRUFBQXFWLFdBOUJBclYsRUFBQXVWLGNBd0JBLFdBQ0EsTUFBQSxRQUFBdlYsRUFBQWtWLFlBQUF0UCxTQXBCQStCLElBQ0FtTixLQWhCQXpTLGtCQUNBNlMsWUFBQSxJQUNBelAsS0FBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA3LzEwLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnLFtdKTtcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNi8xLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdvcmdDaGFydCcpLmRpcmVjdGl2ZSgndHJlZVNlYXJjaEJveCcsIHRyZWVTZWFyY2hCb3gpO1xuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIHRyZWVTZWFyY2hCb3goJHRpbWVvdXQsICRxLCAkbG9nKSB7XG5cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBDYXNjYWRlVHJlZVNlYXJjaEJveENvbnRyb2xsZXIsXG4gICAgICAgICAgICAvLyB0ZW1wbGF0ZVVybDogJ3NlYXJjaGJveC50bXBsLmh0bWwnLFxuICAgICAgICAgICAgdGVtcGxhdGU6JzxkaXYgbGF5b3V0LWFsaWduPVwic3RhcnQgY2VudGVyXCIgbGF5b3V0PVwicm93XCIgbGF5b3V0LWZpbGw+IDxkaXYgZmxleC1vZmZzZXQ9XCI1XCIgY2xhc3M9XCJzZWFyY2gtYm94LWhvbGRlclwiPiA8bWQtYXV0b2NvbXBsZXRlIG5nLWRpc2FibGVkPVwidm0uaXNEaXNhYmxlZFwiIG1kLW5vLWNhY2hlPVwidm0ubm9DYWNoZVwiIG1kLXNlbGVjdGVkLWl0ZW09XCJ2bS5zZWxlY3RlZEl0ZW1cIiBtZC1zZWFyY2gtdGV4dC1jaGFuZ2U9XCJ2bS5zZWFyY2hUZXh0Q2hhbmdlKHZtLnNlYXJjaFRleHQpXCIgbWQtc2VhcmNoLXRleHQ9XCJ2bS5zZWFyY2hUZXh0XCIgbWQtc2VsZWN0ZWQtaXRlbS1jaGFuZ2U9XCJ2bS5zZWxlY3RlZEl0ZW1DaGFuZ2UoaXRlbSlcIiBtZC1pdGVtcz1cIml0ZW0gaW4gdm0ucXVlcnlTZWFyY2godm0uc2VhcmNoVGV4dClcIiBtZC1pdGVtLXRleHQ9XCJpdGVtLm5hbWVcIiBtZC1taW4tbGVuZ3RoPVwiMFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIFBlb3BsZVwiIGNsYXNzPVwiYXV0by1jb21wbGV0ZS1jdXN0b21cIj4gPG1kLWl0ZW0tdGVtcGxhdGU+IDxzcGFuIG1kLWhpZ2hsaWdodC10ZXh0PVwiY3RybC5zZWFyY2hUZXh0XCIgbWQtaGlnaGxpZ2h0LWZsYWdzPVwiXmlcIj57e2l0ZW0ubmFtZX19PC9zcGFuPiA8L21kLWl0ZW0tdGVtcGxhdGU+IDxtZC1ub3QtZm91bmQ+IE5vIHN0YXRlcyBtYXRjaGluZyBcInt7Y3RybC5zZWFyY2hUZXh0fX1cIiB3ZXJlIGZvdW5kLiA8YSBuZy1jbGljaz1cImN0cmwubmV3U3RhdGUoY3RybC5zZWFyY2hUZXh0KVwiPkNyZWF0ZSBhIG5ldyBvbmUhPC9hPiA8L21kLW5vdC1mb3VuZD4gPC9tZC1hdXRvY29tcGxldGU+IDwvZGl2PjxkaXYgZmxleCBjbGFzcz1cImJ0bi1zZWFyY2gtaG9sZGVyXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi1zZWFyY2hcIiB0eXBlPVwiYnV0dG9uXCI+PGkgY2xhc3M9XCJmYSBmYS1zZWFyY2hcIj48L2k+IDwvYnV0dG9uPjwvZGl2PjwvZGl2PicsXG4gICAgICAgICAgICAvLyB0ZW1wbGF0ZTonPGRpdiBsYXlvdXQtYWxpZ249XCJzdGFydCBjZW50ZXJcIiBsYXlvdXQ9XCJyb3dcIiBsYXlvdXQtZmlsbD4gPGRpdiBmbGV4LW9mZnNldD1cIjVcIiBmbGV4PVwiNjBcIj4gPGRpdiBjbGFzcz1cInNlYXJjaC1ncm91cCBhY3RpdmVcIj4gPGRpdj4gPGlucHV0IGlkPVwic2VhcmNoX3R4dFwiIG5hbWU9XCJzZWFyY2hfdHh0XCIgdHlwZT1cInRleHRcIiBvbmtleXVwPVwidmlld0VtcGxveWVlKDEpO1wiIHBsYWNlaG9sZGVyPVwiU2VhcmNoXCI+IDxidXR0b24gY2xhc3M9XCJidG4tc2VhcmNoXCIgdHlwZT1cImJ1dHRvblwiIG9uY2xpY2s9XCJ2aWV3RW1wbG95ZWUoMSk7XCI+PC9idXR0b24+IDwvZGl2PjxhIGNsYXNzPVwiYWR2YWNlXCIgaHJlZj1cIiNcIj5BZHZhbmNlPC9hPiA8L2Rpdj4gPC9kaXY+PC9kaXY+JyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgICAgICBzZWFyY2hhYmxlTGlzdDonPSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgIH07XG5cblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLGVsZW0sYXR0cnMpIHtcblxuICAgICAgICB9XG5cbiAgICAgICAgLypAbmdJbmplY3QqL1xuICAgICAgICBmdW5jdGlvbiBDYXNjYWRlVHJlZVNlYXJjaEJveENvbnRyb2xsZXIodHJlZVZpZXdTZXJ2aWNlLCRzY29wZSkge1xuXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICAgICAgdm0uc2ltdWxhdGVRdWVyeSA9IGZhbHNlO1xuICAgICAgICAgICAgdm0uaXNEaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdm0ubm9DYWNoZSA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIGxpc3Qgb2YgYHN0YXRlYCB2YWx1ZS9kaXNwbGF5IG9iamVjdHNcbiAgICAgICAgICAgIHZtLnF1ZXJ5U2VhcmNoID0gcXVlcnlTZWFyY2g7XG4gICAgICAgICAgICB2bS5zZWxlY3RlZEl0ZW1DaGFuZ2UgPSBzZWxlY3RlZEl0ZW1DaGFuZ2U7XG4gICAgICAgICAgICB2bS5zZWFyY2hUZXh0Q2hhbmdlID0gc2VhcmNoVGV4dENoYW5nZTtcblxuICAgICAgICAgICAgdm0ubmV3U3RhdGUgPSBuZXdTdGF0ZTtcblxuICAgICAgICAgICAgdmFyIG5vZGVDaGFuZ2VkTGlzdGVuZXIgPSAkc2NvcGUuJG9uKCdhcHA6bm9kZXM6Y2hhbmdlZCcsIG9uQ2hhbmdlZE5vZGVzKTtcbiAgICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZGVzdHJveUxpc3RlbmVyKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gbmV3U3RhdGUoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIlNvcnJ5ISBZb3UnbGwgbmVlZCB0byBjcmVhdGUgYSBDb25zdGl0dXRpb24gZm9yIFwiICsgc3RhdGUgKyBcIiBmaXJzdCFcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uQ2hhbmdlZE5vZGVzKGV2ZW50LGRhdGEpIHtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgICAgICAgIC8vIEludGVybmFsIG1ldGhvZHNcbiAgICAgICAgICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNlYXJjaCBmb3Igc3RhdGVzLi4uIHVzZSAkdGltZW91dCB0byBzaW11bGF0ZVxuICAgICAgICAgICAgICogcmVtb3RlIGRhdGFzZXJ2aWNlIGNhbGwuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIHF1ZXJ5U2VhcmNoKHF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codm0uc2VhcmNoYWJsZUxpc3QpO1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gcXVlcnkgPyB2bS5zZWFyY2hhYmxlTGlzdC5maWx0ZXIoY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSkgOiB2bS5zZWFyY2hhYmxlTGlzdCxcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHZtLnNpbXVsYXRlUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICB9LCBNYXRoLnJhbmRvbSgpICogMTAwMCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNlYXJjaFRleHRDaGFuZ2UodGV4dCkge1xuICAgICAgICAgICAgICAgICRsb2cuaW5mbygnVGV4dCBjaGFuZ2VkIHRvICcgKyB0ZXh0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc2VsZWN0ZWRJdGVtQ2hhbmdlKGl0ZW0pIHtcblxuICAgICAgICAgICAgICAgIGlmKGl0ZW0pe1xuICAgICAgICAgICAgICAgICAgICAkbG9nLmluZm8oJ0l0ZW0gY2hhbmdlZCB0byAnICsgSlNPTi5zdHJpbmdpZnkoaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICB0cmVlVmlld1NlcnZpY2Uuc2V0U2VhcmNoZWROb2RlKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlIGZpbHRlciBmdW5jdGlvbiBmb3IgYSBxdWVyeSBzdHJpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGxvd2VyY2FzZVF1ZXJ5ID0gYW5ndWxhci5sb3dlcmNhc2UocXVlcnkpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGZpbHRlckZuKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoc3RhdGUubmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YobG93ZXJjYXNlUXVlcnkpID09PSAwKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICBmdW5jdGlvbiBkZXN0cm95TGlzdGVuZXIoKSB7XG4gICAgICAgICAgICAgICAgbm9kZUNoYW5nZWRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuICAgIH1cblxuXG59KSgpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNi81LzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdvcmdDaGFydCcpLmRpcmVjdGl2ZSgndHJlZVRvb2xTZXQnLCB0cmVlVG9vbFNldCk7XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gdHJlZVRvb2xTZXQoKSB7XG5cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBUcmVlVG9vbFNldCxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIC8vIHRlbXBsYXRlVXJsOiAndG9vbHNldC50bXBsLmh0bWwnLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGxheW91dD1cImNvbHVtblwiIGxheW91dC1hbGlnbj1cImNlbnRlciBlbmRcIj4nICtcbiAgICAgICAgICAgICcgPGRpdiBsYXlvdXQ9XCJjb2x1bW5cIiBsYXlvdXQtYWxpZ249XCJzcGFjZS1hcm91bmQgY2VudGVyXCIgY2xhc3M9XCJ0b29sc2V0LXdyYXBwZXJcIiBmbGV4LW9mZnNldD1cIjVcIj4nICtcbiAgICAgICAgICAgICcgPGRpdj4gPGJ1dHRvbiBjbGFzcz1cInRvb2xzZXQtYnRuIHVwcGVyLXJvdW5kZWRcIiBuZy1jbGljaz1cInZtLnpvb21UcmlnZ2VyKFxcJ2luY3JlbWVudFxcJylcIj4gPG1kLXRvb2x0aXAgbWQtZGlyZWN0aW9uPVwiYm90dG9tXCI+Wm9vbSBJbjwvbWQtdG9vbHRpcD4gPG1kLWljb24+PGkgbmctY2xhc3M9XCJ7XFwnZmEgZmEtcGx1c1xcJzp0cnVlLFxcJ2N1c3RvbS1mb250LWljb25cXCc6dHJ1ZX1cIj48L2k+PC9tZC1pY29uPjwvYnV0dG9uPiA8L2Rpdj4nICtcbiAgICAgICAgICAgICc8ZGl2PiA8YnV0dG9uIGNsYXNzPVwidG9vbHNldC1idG4gbG93ZXItcm91bmRlZFwiIG5nLWNsaWNrPVwidm0uem9vbVRyaWdnZXIoXFwnZGVjcmVtZW50XFwnKVwiPiA8bWQtdG9vbHRpcCBtZC1kaXJlY3Rpb249XCJib3R0b21cIj5ab29tIE91dDwvbWQtdG9vbHRpcD4gPG1kLWljb24+PGkgbmctY2xhc3M9XCJ7XFwnZmEgZmEtbWludXNcXCc6dHJ1ZSxcXCdjdXN0b20tZm9udC1pY29uXFwnOnRydWV9XCI+PC9pPjwvbWQtaWNvbj48L2J1dHRvbj4gPC9kaXY+JyArXG4gICAgICAgICAgICAnPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6IDEwcHhcIj4gPGJ1dHRvbiBjbGFzcz1cInRvb2xzZXQtYnRuXCIgbmctY2xpY2s9XCJ2bS50b2dnbGVFeHBhbmRBbGxNb2RlKClcIj4gPG1kLXRvb2x0aXAgbWQtZGlyZWN0aW9uPVwiYm90dG9tXCI+PHNwYW4gbmctaWY9XCIhdm0uaXNFeHBhbmRBbGxNb2RlXCI+RXhwYW5kIEFsbDwvc3Bhbj48c3BhbiBuZy1pZj1cInZtLmlzRXhwYW5kQWxsTW9kZVwiPkNvbGxhcHNlIEFsbDwvc3Bhbj48L21kLXRvb2x0aXA+IDxtZC1pY29uPjxpIG5nLWNsYXNzPVwie1xcJ2ZhIGZhLWV4cGFuZFxcJzohdm0uaXNFeHBhbmRBbGxNb2RlLFxcJ2ZhIGZhLWNvbXByZXNzXFwnOnZtLmlzRXhwYW5kQWxsTW9kZSxcXCdjdXN0b20tZm9udC1pY29uXFwnOnRydWV9XCI+PC9pPiA8L21kLWljb24+PC9idXR0b24+IDwvZGl2PicgK1xuICAgICAgICAgICAgJzwvZGl2PjwvZGl2PicsXG4gICAgICAgICAgICBzY29wZToge30sXG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG4gICAgICAgICAgICAgICAgem9vbVRyaWdnZXJDYWxsQmFjazogJyYnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGluazogbGlua1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbSwgYXR0ciwgdm0pIHtcblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIFRyZWVUb29sU2V0KHRvb2xTZXRTZXJ2aWNlKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0uaXNFeHBhbmRBbGxNb2RlID0gdG9vbFNldFNlcnZpY2UuaXNFeHBhbmRBbGxNb2RlKCk7XG4gICAgICAgIHZtLnRvZ2dsZUV4cGFuZEFsbE1vZGUgPSB0b2dnbGVFeHBhbmRBbGxNb2RlO1xuICAgICAgICB2bS56b29tVHJpZ2dlciA9IHpvb21UcmlnZ2VyO1xuLyogICAgICAgIHZtLmluY3JlbWVudFpvb21TY2FsZSA9IGluY3JlbWVudFpvb21TY2FsZTtcbiAgICAgICAgdm0uZGVjcmVtZW50Wm9vbVNjYWxlID0gZGVjcmVtZW50Wm9vbVNjYWxlOyovXG4gICAgICAgIHZtLnpvb21TY2FsZSA9IHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUV4cGFuZEFsbE1vZGUoKSB7XG4gICAgICAgICAgICB2bS5pc0V4cGFuZEFsbE1vZGUgPSB0b29sU2V0U2VydmljZS50b2dnbGVFeHBhbmRBbGxNb2RlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gem9vbVRyaWdnZXIoc3RhdHVzKSB7XG4gICAgICAgICAgICB2bS56b29tVHJpZ2dlckNhbGxCYWNrKHtzdGF0dXM6c3RhdHVzfSk7XG4gICAgICAgIH1cblxuLyogICAgICAgIGZ1bmN0aW9uIGluY3JlbWVudFpvb21TY2FsZSgpIHtcbiAgICAgICAgICAgIHZtLnpvb21TY2FsZSA9IHRvb2xTZXRTZXJ2aWNlLmluY3JlbWVudFpvb21TY2FsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZGVjcmVtZW50Wm9vbVNjYWxlKCkge1xuICAgICAgICAgICAgdm0uem9vbVNjYWxlID0gdG9vbFNldFNlcnZpY2UuZGVjcmVtZW50Wm9vbVNjYWxlKCk7XG4gICAgICAgIH0qL1xuICAgIH1cblxufSkoKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDYvNS8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5mYWN0b3J5KCd0b29sU2V0U2VydmljZScsIHRvb2xTZXRTZXJ2aWNlKTtcblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiB0b29sU2V0U2VydmljZSgpIHtcblxuICAgICAgICB2YXIgaXNBbGxFeHBhbmRlZE1vZGUgPSBmYWxzZTtcbiAgICAgICAgdmFyIExPV0VTVF9aT09NX1NDQUxFID0gMC4zO1xuICAgICAgICB2YXIgREVGQVVMVF9aT09NX1NDQUxFID0gMTtcbiAgICAgICAgdmFyIHpvb21TY2FsZSA9IERFRkFVTFRfWk9PTV9TQ0FMRTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNFeHBhbmRBbGxNb2RlOiBpc0V4cGFuZEFsbE1vZGUsXG4gICAgICAgICAgICB0b2dnbGVFeHBhbmRBbGxNb2RlOiB0b2dnbGVFeHBhbmRBbGxNb2RlLFxuICAgICAgICAgICAgZ2V0Wm9vbVNjYWxlOiBnZXRab29tU2NhbGUsXG4gICAgICAgICAgICBzZXRab29tU2NhbGU6IHNldFpvb21TY2FsZSxcbiAgICAgICAgICAgIGluY3JlbWVudFpvb21TY2FsZTogaW5jcmVtZW50Wm9vbVNjYWxlLFxuICAgICAgICAgICAgZGVjcmVtZW50Wm9vbVNjYWxlOiBkZWNyZW1lbnRab29tU2NhbGVcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBpc0V4cGFuZEFsbE1vZGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNBbGxFeHBhbmRlZE1vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0b2dnbGVFeHBhbmRBbGxNb2RlKCkge1xuICAgICAgICAgICAgaXNBbGxFeHBhbmRlZE1vZGUgPSAhaXNBbGxFeHBhbmRlZE1vZGU7XG4gICAgICAgICAgICByZXR1cm4gaXNBbGxFeHBhbmRlZE1vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRab29tU2NhbGUoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0Wm9vbSBTY2FsZScsem9vbVNjYWxlKTtcbiAgICAgICAgICAgIHJldHVybiB6b29tU2NhbGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRab29tU2NhbGUoc2NhbGUpIHtcbiAgICAgICAgICAgIGlmIChzY2FsZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAvLyB6b29tU2NhbGUgPSBzY2FsZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gem9vbVNjYWxlID0gTE9XRVNUX1pPT01fU0NBTEUgKyBzY2FsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHpvb21TY2FsZSA9IHNjYWxlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3pvb20gc2NhbGUnLCB6b29tU2NhbGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5jcmVtZW50Wm9vbVNjYWxlKCkge1xuICAgICAgICAgICAgem9vbVNjYWxlICs9IDAuMTtcblxuICAgICAgICAgICAgcmV0dXJuIHpvb21TY2FsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRlY3JlbWVudFpvb21TY2FsZSgpIHtcbiAgICAgICAgICAgIGlmICh6b29tU2NhbGUgPiAtMi41KSB7XG4gICAgICAgICAgICAgICAgem9vbVNjYWxlIC09IDAuMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHpvb21TY2FsZTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiA1LzMxLzE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5kaXJlY3RpdmUoJ3RyZWVOb2RlJywgdHJlZU5vZGUpO1xuXG4gICAgLypAbmdJbmplY3QqL1xuICAgIGZ1bmN0aW9uIHRyZWVOb2RlKHRyZWVWaWV3U2VydmljZSwgJGRvY3VtZW50LCRyb290U2NvcGUpIHtcblxuICAgICAgICB2YXIgY2FzY2FkZVRyZWVOb2RlRGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZU5hbWVzcGFjZTonc3ZnJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IENhc2NhZGVUcmVlTm9kZUNvbnRyb2xsZXIsXG4gICAgICAgICAgICAvLyB0ZW1wbGF0ZVVybDogJ2FwcC9jYXNjYWRlL3Rlc3Qvb3JnY2hhcnQvZGlyZWN0aXZlcy90cmVlbm9kZS50bXBsLmh0bWwnLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8Zm9yZWlnbk9iamVjdCB3aWR0aD1cIjI2MFwiIGhlaWdodD1cIjIyMFwiIHN0eWxlPVwib3ZlcmZsb3c6IHZpc2libGVcIj48ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDogNTBweDttYXJnaW4tbGVmdDoxMHB4XCIgY2xhc3M9XCJ7e3ZtLm5vZGVDbGFzc319XCIgbmctbW91c2VlbnRlcj1cInZtLndoZW5Nb3VzZUVudGVyKClcIiBuZy1tb3VzZWxlYXZlPVwidm0ud2hlbk1vdXNlTGVhdmUoKVwiIG5nLWNsaWNrPVwidm0ubWFrZU5vZGVBY3RpdmUoKVwiPiA8ZGl2IGxheW91dD1cImNvbHVtblwiIGxheW91dC1hbGlnbj1cImNlbnRlciBjZW50ZXJcIj4gPGRpdiBuZy1jbGFzcz1cIntcXCdub2RlLXRleHQtbWFpbi1uby1pbWFnZVxcJzohdm0uaXNJbWFnZVByZXNlbnR9XCIgY2xhc3M9XCJtZC1zdWJoZWFkIG5vZGUtdGV4dC1tYWluXCI+PHRyaW0td29yZCB3b3JkLW9wdGlvbnMgPVwidm0ud29yZFRyaW1PcHRpb25zXCIgd29yZD1cInZtLmdldERpc3BsYXlOYW1lKDApXCI+PC90cmltLXdvcmQ+PC9kaXY+PGRpdj4gPGRpdiBjbGFzcz1cInJvdW5kLWNoaXAtd3JhcHBlclwiPjxpbWcgbmctaWY9XCJ2bS5pc0ltYWdlUHJlc2VudFwiIG5nLXNyYz1cInt7dm0ubm9kZS5pbWFnZV91cmx9fVwiIGNsYXNzPVwicm91bmQtY2hpcFwiIGlkPVwiaW1nLWNoaXBcIj4gPC9kaXY+PC9kaXY+PGRpdiAgbmctY2xhc3M9XCJ7XFwnbm9kZS10ZXh0LXN1Yi1uby1pbWFnZVxcJzohdm0uaXNJbWFnZVByZXNlbnR9XCIgY2xhc3M9XCJtZC1zdWJoZWFkIG5vZGUtdGV4dC1zdWJcIj57e3ZtLmdldERpc3BsYXlOYW1lKDEpfX08L2Rpdj48ZGl2ICBuZy1jbGFzcz1cIntcXCdub2RlLXRleHQtc3ViLW5vLWltYWdlXFwnOiF2bS5pc0ltYWdlUHJlc2VudH1cIiBuZy1pZj1cIiF2bS5pc0FjdGlvbkJhclByZXNlbnRcIiBjbGFzcz1cIm1kLXN1YmhlYWQgbm9kZS10ZXh0LXN1YlwiPlNhbXBsZSBUZXh0PC9kaXY+PGRpdiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCIgbGF5b3V0LWZpbGwgbGF5b3V0PVwicm93XCIgbmctaWY9XCJ2bS5pc0FjdGlvbkJhclByZXNlbnRcIj4gPGRpdiBuZy1yZXBlYXQ9XCJhY3Rpb24gaW4gdm0ubm9kZUFjdGlvbnNcIj4gPGJ1dHRvbiBuZy1jbGljaz1cInZtLm1ha2VDYWxsQmFjayhhY3Rpb24uY2FsbEJhY2spOyAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XCIgY2xhc3M9XCJhY3Rpb24tYnRuXCI+PHNwYW4+PC9zcGFuPiZuYnNwOzxpIGNsYXNzPVwie3thY3Rpb24uaWNvbn19XCI+PC9pPjwvYnV0dG9uPiA8L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+JyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgICAgICBub2RlSWQ6ICdAJyxcbiAgICAgICAgICAgICAgICBub2RlQWN0aW9uczogJ0AnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGluazoge1xuICAgICAgICAgICAgICAgIHByZTpsaW5rXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGNhc2NhZGVUcmVlTm9kZURpcmVjdGl2ZTtcblxuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW0sIGF0dHJzLCB2bSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYXR0cnMuaW1hZ2VwcmVzZW50KTtcbiAgICAgICAgICAgIHZtLmlzSW1hZ2VQcmVzZW50ID0gYXR0cnMuaW1hZ2VwcmVzZW50PT0ndHJ1ZSc/dHJ1ZTpmYWxzZTtcbiAgICAgICAgICAgIHZtLmlzQWN0aW9uQmFyUHJlc2VudCA9IGF0dHJzLmFjdGlvbmJhcnByZXNlbnQ9PSd0cnVlJz90cnVlOmZhbHNlO1xuICAgICAgICAgICAgdm0ubm9kZURpc3BsYXlQcm9wcyA9IGF0dHJzLm5vZGVkaXNwbGF5cHJvcHMuc3BsaXQoXCIsXCIpO1xuICAgICAgICAgICAgdm0uaWQgPSBhdHRycy5ub2RlaWQ7XG4gICAgICAgICAgICB2bS5ub2RlQWN0aW9ucyA9IGFuZ3VsYXIuZnJvbUpzb24oYXR0cnMubm9kZWFjdGlvbnMpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codm0ubm9kZUFjdGlvbnMpO1xuICAgICAgICAgICAgdm0uaXNQaW5uZWROb2RlID0gZmFsc2U7XG4gICAgICAgICAgICB2bS5ub2RlID0gdHJlZVZpZXdTZXJ2aWNlLmZpbmRCeUlkKGF0dHJzLm5vZGVpZCk7XG4gICAgICAgICAgICB2bS53b3JkVHJpbU9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgd29yZDogJ2QnLFxuICAgICAgICAgICAgICAgIGZyb206ICcwJyxcbiAgICAgICAgICAgICAgICB1bnRpbDogJzEyJyxcbiAgICAgICAgICAgICAgICB0b29sVGlwOiAndHJ1ZScsXG4gICAgICAgICAgICAgICAgdG9vbFRpcERpcmVjdGlvbjogJ3RvcCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2bS5ub2RlQ2xhc3MgPSAnbm9kZS1sYWJlbCBub2RlLScgKyB2bS5ub2RlLnR5cGUrICcgbm9kZS0nK3ZtLmlkO1xuICAgICAgICAgICAgdm0uaXNFeHBhbmRlZFZpZXcgPSBmYWxzZTtcbiAgICAgICAgICAgIHZtLmlzQWN0aXZlID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHZtLndoZW5Nb3VzZUVudGVyID0gd2hlbk1vdXNlRW50ZXI7XG4gICAgICAgICAgICB2bS53aGVuTW91c2VMZWF2ZSA9IHdoZW5Nb3VzZUxlYXZlO1xuICAgICAgICAgICAgdm0udG9nZ2xlUGlubmVkTW9kZSA9IHRvZ2dsZVBpbm5lZE1vZGU7XG4gICAgICAgICAgICB2bS5tYWtlQ2FsbEJhY2sgPSBtYWtlQ2FsbEJhY2s7XG4gICAgICAgICAgICB2bS5tYWtlTm9kZUFjdGl2ZSA9IG1ha2VOb2RlQWN0aXZlO1xuICAgICAgICAgICAgdm0uZ2V0RGlzcGxheU5hbWUgPSBnZXREaXNwbGF5TmFtZTtcbiAgICAgICAgICAgIHZhciBub2RlRE9NRWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChlbGVtLmNoaWxkcmVuKClbMF0pO1xuXG4gICAgICAgICAgICAkZG9jdW1lbnQub24oJ2NsaWNrJywgb25Eb2N1bWVudENsaWNrKTtcbiAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBvbkRlc3Ryb3kpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXREaXNwbGF5TmFtZShpbmRleCkge1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZtLm5vZGVbdm0ubm9kZURpc3BsYXlQcm9wc1tpbmRleF1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gbWFrZU5vZGVBY3RpdmUoKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJBbGxPdGhlckFjdGl2ZU5vZGVzKCk7XG4gICAgICAgICAgICAgICAgdm0uaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB3aGVuTW91c2VFbnRlcigpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbW91c2UgRW50ZXJlZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB3aGVuTW91c2VMZWF2ZSgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbW91c2UgbGVhdmVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZVBpbm5lZE1vZGUoKSB7XG4gICAgICAgICAgICAgICAgdm0uaXNQaW5uZWROb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2bS5pc1Bpbm5lZE5vZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBtYWtlQ2FsbEJhY2soY2FsbEJhY2tGdW5jTmFtZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhbGxCYWNrRnVuY05hbWUpO1xuICAgICAgICAgICAgICAgIHNjb3BlLiRwYXJlbnQudm0ubWFrZUNhbGxCYWNrKGNhbGxCYWNrRnVuY05hbWUsdm0ubm9kZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFyQWxsT3RoZXJBY3RpdmVOb2Rlcygpe1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnYXBwOm5vZGVzOmNsZWFyYWN0aXZlJyx7J2RhdGEnOiAnJ30pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkRvY3VtZW50Q2xpY2soZXYpIHtcblxuICAgICAgICAgICAgICAgIC8vQ2hlY2sgaWYgY2xpY2tlZCBvdXRzaWRlIGFuZCBkaXNjYXJkIEFjdGl2ZVxuICAgICAgICAgICAgICAgIGlmIChlbGVtICE9PSBldi50YXJnZXQgJiYgIWVsZW1bMF0uY29udGFpbnMoZXYudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdm0uaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3JlbW92ZSBldmVudCBoYW5kbGVycyB3aGVuIGN1c3RvbSBkaXJlY3RpdmUgZGVzdHJveWVkXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkRlc3Ryb3koKSB7XG4gICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9mZignY2xpY2snLCBvbkRvY3VtZW50Q2xpY2spO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiBDYXNjYWRlVHJlZU5vZGVDb250cm9sbGVyKCkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgR2F5YW4gUHJhc2FubmEgb24gNS8zMC8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgYW5ndWxhci5tb2R1bGUoJ29yZ0NoYXJ0JykuZGlyZWN0aXZlKCd0cmVlVmlldycsIHRyZWVWaWV3KTtcblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiB0cmVlVmlldygkZmlsdGVyLCAkY29tcGlsZSwkcm9vdFNjb3BlLCB0cmVlVmlld1NlcnZpY2UsICR0aW1lb3V0LCB0b29sU2V0U2VydmljZSwgJHdpbmRvdykge1xuICAgICAgICB2YXIgdHJlZVZpZXdEaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXBsYWNlOiAnZmFsc2UnLFxuICAgICAgICAgICAgdGVtcGxhdGVOYW1lc3BhY2U6ICdzdmcnLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgICAgICBkYXRhOiAnPScsXG4gICAgICAgICAgICAgICAgYWJuOiAnJicsXG4gICAgICAgICAgICAgICAgZGVsOiAnJicsXG4gICAgICAgICAgICAgICAgYWRkOiAnJicsXG4gICAgICAgICAgICAgICAgZWRpdDogJyYnLFxuICAgICAgICAgICAgICAgIGZldGNoU2VhcmNoYWJsZUxpc3Q6ICcmJyxcbiAgICAgICAgICAgICAgICBub2RlQWN0aW9uczogJ0AnLFxuICAgICAgICAgICAgICAgIHRyZWVkYXRhOiAnPScsXG4gICAgICAgICAgICAgICAgc2VhcmNoYWJsZUxpc3Q6ICc9JyxcbiAgICAgICAgICAgICAgICBpbWFnZVByZXNlbnQ6ICc9JyxcbiAgICAgICAgICAgICAgICBhY3Rpb25CYXJQcmVzZW50OiAnPScsXG4gICAgICAgICAgICAgICAgbm9kZURpc3BsYXlQcm9wczogJ0AnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlcjogVHJlZVZpZXdEaXJlY3RpdmVDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgbGluazoge1xuICAgICAgICAgICAgICAgIHByZTogbGlua1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW0sIGF0dHJzLCB2bSkge1xuXG4gICAgICAgICAgICB2YXIgbm9kZUJvdW5kYXJpZXMgPSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDI0MCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE0NixcbiAgICAgICAgICAgICAgICBob3Jpem9udGFsU2VwZXJhdGlvbjogMTYsXG4gICAgICAgICAgICAgICAgdmVydGljYWxTZXBlcmF0aW9uOiAxMjhcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZHJhZ1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBub2RlcztcbiAgICAgICAgICAgIHZhciBkb21Ob2RlO1xuICAgICAgICAgICAgdmFyIHJlbENvb3JkcztcbiAgICAgICAgICAgIHZhciBwYW5UaW1lcjtcbiAgICAgICAgICAgIC8vIHZhcmlhYmxlcyBmb3IgZHJhZy9kcm9wXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWROb2RlID0gbnVsbDtcbiAgICAgICAgICAgIHZhciBkcmFnZ2luZ05vZGUgPSBudWxsO1xuICAgICAgICAgICAgLy8gcGFubmluZyB2YXJpYWJsZXNcbiAgICAgICAgICAgIHZhciBwYW5TcGVlZCA9IDIwMDtcbiAgICAgICAgICAgIHZhciBwYW5Cb3VuZGFyeSA9IDIwOyAvLyBXaXRoaW4gMjBweCBmcm9tIGVkZ2VzIHdpbGwgcGFuIHdoZW4gZHJhZ2dpbmcuXG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlQ29vcmRzO1xuICAgICAgICAgICAgdmFyIGxpbmtzO1xuICAgICAgICAgICAgdmFyIG5vZGVQYXRocztcbiAgICAgICAgICAgIHZhciBub2Rlc0V4aXQ7XG4gICAgICAgICAgICB2YXIgcGFyZW50TGluaztcblxuICAgICAgICAgICAgdmFyIG5vZGVBY3RpdmVDbGVhckxpc3RlbmVyO1xuICAgICAgICAgICAgdmFyIG5vZGVEZWxldGVMaXN0ZW5lcjtcbiAgICAgICAgICAgIHZhciBub2RlQWZ0ZXJBZGRMaXN0ZW5lcjtcbiAgICAgICAgICAgIHZhciBub2RlQWZ0ZXJVcGRhdGVMaXN0ZW5lcjtcbiAgICAgICAgICAgIHZhciBkcmFnTGlzdGVuZXI7XG5cbiAgICAgICAgICAgIHZhciBub2RlTGlzdCA9IFtdO1xuICAgICAgICAgICAgdmFyIG0gPSBbMjAsIDIwLCAyMCwgMjBdLFxuICAgICAgICAgICAgICAgIHcgPSAkd2luZG93LmlubmVyV2lkdGggLSAyMCAtIG1bMV0gLSBtWzNdLFxuICAgICAgICAgICAgICAgIGlIZWlnaHQgPSAkd2luZG93LmlubmVySGVpZ2h0LFxuICAgICAgICAgICAgICAgIGggPSA2MDAgLSBtWzBdIC0gbVsyXSxcbiAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICByID0gODAwLFxuICAgICAgICAgICAgICAgIHggPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oWzAsIHddKS5yYW5nZShbMCwgd10pLFxuICAgICAgICAgICAgICAgIHkgPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oWzAsIGhdKS5yYW5nZShbMCwgaF0pLFxuICAgICAgICAgICAgICAgIHJvb3Q7XG4gICAgICAgICAgICB2YXIgdmlld0JveEJvdW5kYXJ5ID0gJzAgMCAnICsgdyArIFwiIFwiICsgaUhlaWdodDtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyRWxlbWVudCA9IGQzLnNlbGVjdChlbGVtWzBdKTtcbiAgICAgICAgICAgIHZhciBsYXN0U2VhcmNoZWRQYXRoID0gW107XG5cbiAgICAgICAgICAgIHZhciB6b29tID0gZDMuYmVoYXZpb3Iuem9vbSgpXG4gICAgICAgICAgICAgICAgLnRyYW5zbGF0ZShbMCwgMF0pXG4gICAgICAgICAgICAgICAgLnNjYWxlKHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpKVxuICAgICAgICAgICAgICAgIC5zY2FsZUV4dGVudChbMC4zLCA4XSlcbiAgICAgICAgICAgICAgICAub24oXCJ6b29tXCIsIHpvb21lZCk7XG5cbiAgICAgICAgICAgIHZtLndvcmRUcmltT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICB3b3JkOiAnZCcsXG4gICAgICAgICAgICAgICAgZnJvbTogJzAnLFxuICAgICAgICAgICAgICAgIHVudGlsOiAnMTInLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6ICd0cnVlJyxcbiAgICAgICAgICAgICAgICB0b29sVGlwRGlyZWN0aW9uOiAndG9wJ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZWxlbS5hcHBlbmQoJGNvbXBpbGUoXCI8ZGl2IGNsYXNzPSdjb21wb25lbnQtY29udGFpbmVyJz48ZGl2IGxheW91dD1cXFwicm93XFxcIiBsYXlvdXQtYWxpZ249XFxcInNwYWNlLWFyb3VuZCBjZW50ZXJcXFwiPjxkaXYgZmxleD48dHJlZS1zZWFyY2gtYm94IHNlYXJjaGFibGUtbGlzdD0ndm0uc2VhcmNoYWJsZUxpc3QnPjwvdHJlZS1zZWFyY2gtYm94PjwvZGl2PjxkaXYgZmxleD48dHJlZS10b29sLXNldCB6b29tLXRyaWdnZXItY2FsbC1iYWNrPSd2bS56b29tVHJpZ2dlcihzdGF0dXMpJz48L3RyZWUtdG9vbC1zZXQ+PC9kaXY+PC9kaXY+PC9kaXY+XCIpKHNjb3BlKSk7XG5cbiAgICAgICAgICAgIHZtLnpvb21UcmlnZ2VyID0gem9vbVRyaWdnZXI7XG5cbiAgICAgICAgICAgIC8qTGlzdGVuZXJzKi9cblxuICAgICAgICAgICAgbm9kZUFjdGl2ZUNsZWFyTGlzdGVuZXIgPSBzY29wZS4kb24oJ2FwcDpub2RlczpjbGVhcmFjdGl2ZScsIG9uRGVhY3RpdmF0ZU5vZGVzKTtcbiAgICAgICAgICAgIG5vZGVEZWxldGVMaXN0ZW5lciA9IHNjb3BlLiRvbignYXBwOm5vZGVzOmRlbGV0ZScsIG9uTm9kZURlbGV0ZSk7XG4gICAgICAgICAgICBub2RlQWZ0ZXJBZGRMaXN0ZW5lciA9IHNjb3BlLiRvbignYXBwOm5vZGVzOmFkZDo6YWZ0ZXInLCBvbk5vZGVBZnRlckFkZCk7XG4gICAgICAgICAgICBub2RlQWZ0ZXJVcGRhdGVMaXN0ZW5lciA9IHNjb3BlLiRvbignYXBwOm5vZGVzOnVwZGF0ZTo6YWZ0ZXInLCBvbk5vZGVBZnRlclVwZGF0ZSk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHpvb21UcmlnZ2VyKHN0YXR1cykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgem9vbUNsaWNrKHN0YXR1cyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uSW5pdCgpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZVdhdGNoZXJzKCk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGVXYXRjaGVycygpIHtcbiAgICAgICAgICAgICAgICBvblNlYXJjaFdhdGNoKCk7XG4gICAgICAgICAgICAgICAgb25FeHBhbmRXYXRjaCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkV4cGFuZFdhdGNoKCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b29sU2V0U2VydmljZS5pc0V4cGFuZEFsbE1vZGUoKVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChpc0luRXhwYW5kQWxsTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJbkV4cGFuZEFsbE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZEFsbEluQ2hhaW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlQWxsSW5DaGFpbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXhwYW5kQWxsSW5DaGFpbigpIHtcbiAgICAgICAgICAgICAgICBmb3JjZVNjYWxlKDAuNSk7XG4gICAgICAgICAgICAgICAgdG9vbFNldFNlcnZpY2Uuc2V0Wm9vbVNjYWxlKDAuNSk7XG4gICAgICAgICAgICAgICAgY2VudGVyVGhlUm9vdCgpO1xuICAgICAgICAgICAgICAgIGV4cGFuZEFsbCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjb2xsYXBzZUFsbEluQ2hhaW4oKSB7XG4gICAgICAgICAgICAgICAgZm9yY2VTY2FsZSgxKTtcbiAgICAgICAgICAgICAgICB0b29sU2V0U2VydmljZS5zZXRab29tU2NhbGUoMSk7XG4gICAgICAgICAgICAgICAgY2VudGVyVGhlUm9vdCgpO1xuICAgICAgICAgICAgICAgIC8qICAgICAgICAgICAgICAgIGZvcmNlWm9vbSgpOyovXG4gICAgICAgICAgICAgICAgY29sbGFwc2VBbGwoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25TZWFyY2hXYXRjaCgpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJlZVZpZXdTZXJ2aWNlLmdldFNlYXJjaGVkTm9kZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJzdCBmaW5kIGFuZCBoaWdobGlnaHQgdGhlIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodFBhdGgobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZWROb2RlID0gZ2V0VHJlZU5vZGVCeU9iamVjdChub2RlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vVE9ETyByZW1vdmUgbGF0ZXIgY296IGV4cGFuZGluZyBvY2N1cnMgd2hlbiBoaWdobGlnaHRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kTm9kZShyZXNvbHZlZE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZShyZXNvbHZlZE5vZGUpOyovXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNvbHZlZE5vZGUueCwgcmVzb2x2ZWROb2RlLnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyQWxsQWN0aXZlTm9kZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlTm9kZUFjdGl2ZShyZXNvbHZlZE5vZGUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhblRvVGhlTm9kZShyZXNvbHZlZE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGZvcmNlU2NhbGUoc2NhbGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmlldyA9IHtcbiAgICAgICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgICAgICAgazogc2NhbGVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGludGVycG9sYXRlWm9vbShbdmlldy54LCB2aWV3LnldLCB2aWV3LmspO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBEZWZpbmUgdGhlIGRyYWcgbGlzdGVuZXJzIGZvciBkcmFnL2Ryb3AgYmVoYXZpb3VyIG9mIG5vZGVzLlxuICAgICAgICAgICAgZHJhZ0xpc3RlbmVyID0gZDMuYmVoYXZpb3IuZHJhZygpXG4gICAgICAgICAgICAgICAgLm9uKFwiZHJhZ3N0YXJ0XCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkID09IHJvb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkcmFnU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzID0gdHJlZS5ub2RlcyhkKTtcbiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgaW1wb3J0YW50IHRoYXQgd2Ugc3VwcHJlc3MgdGhlIG1vdXNlb3ZlciBldmVudCBvbiB0aGUgbm9kZSBiZWluZyBkcmFnZ2VkLiBPdGhlcndpc2UgaXQgd2lsbCBhYnNvcmIgdGhlIG1vdXNlb3ZlciBldmVudCBhbmQgdGhlIHVuZGVybHlpbmcgbm9kZSB3aWxsIG5vdCBkZXRlY3QgaXQgZDMuc2VsZWN0KHRoaXMpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbihcImRyYWdcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQgPT0gcm9vdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChkcmFnU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9tTm9kZSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWF0ZURyYWcoZCwgZG9tTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGNvb3JkcyBvZiBtb3VzZUV2ZW50IHJlbGF0aXZlIHRvIHN2ZyBjb250YWluZXIgdG8gYWxsb3cgZm9yIHBhbm5pbmdcbiAgICAgICAgICAgICAgICAgICAgcmVsQ29vcmRzID0gZDMubW91c2UoJCgnc3ZnJykuZ2V0KDApKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbENvb3Jkc1swXSA8IHBhbkJvdW5kYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5UaW1lciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW4odGhpcywgJ2xlZnQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWxDb29yZHNbMF0gPiAoJCgnc3ZnJykud2lkdGgoKSAtIHBhbkJvdW5kYXJ5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFuVGltZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFuKHRoaXMsICdyaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlbENvb3Jkc1sxXSA8IHBhbkJvdW5kYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5UaW1lciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW4odGhpcywgJ3VwJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVsQ29vcmRzWzFdID4gKCQoJ3N2ZycpLmhlaWdodCgpIC0gcGFuQm91bmRhcnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5UaW1lciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW4odGhpcywgJ2Rvd24nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHBhblRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZC54MCArPSBkMy5ldmVudC5keDtcbiAgICAgICAgICAgICAgICAgICAgZC55MCArPSBkMy5ldmVudC5keTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGQzLnNlbGVjdCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICBub2RlLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBkLngwICsgXCIsXCIgKyBkLnkwICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUZW1wQ29ubmVjdG9yKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAub24oXCJkcmFnZW5kXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkID09IHJvb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkb21Ob2RlID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm93IHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBwYXJlbnQsIGFuZCBpbnNlcnQgaXQgaW50byB0aGUgbmV3IGVsZW1lbnRzIGNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBkcmFnZ2luZ05vZGUucGFyZW50LmNoaWxkcmVuLmluZGV4T2YoZHJhZ2dpbmdOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdOb2RlLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RlZE5vZGUuY2hpbGRyZW4gIT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBzZWxlY3RlZE5vZGUuX2NoaWxkcmVuICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0ZWROb2RlLmNoaWxkcmVuICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE5vZGUuY2hpbGRyZW4ucHVzaChkcmFnZ2luZ05vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTm9kZS5fY2hpbGRyZW4ucHVzaChkcmFnZ2luZ05vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWROb2RlLmNoaWxkcmVuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWROb2RlLmNoaWxkcmVuLnB1c2goZHJhZ2dpbmdOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBub2RlIGJlaW5nIGFkZGVkIHRvIGlzIGV4cGFuZGVkIHNvIHVzZXIgY2FuIHNlZSBhZGRlZCBub2RlIGlzIGNvcnJlY3RseSBtb3ZlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLyogICAgICAgICAgICAgICAgICAgICAgICBleHBhbmQoc2VsZWN0ZWROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRUcmVlKCk7Ki9cbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZERyYWcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZERyYWcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBpbml0aWF0ZURyYWcoZCwgZG9tTm9kZSkge1xuICAgICAgICAgICAgICAgIGRyYWdnaW5nTm9kZSA9IGQ7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLnNlbGVjdCgnLmdob3N0LWFyZWEnKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcuZ2hvc3QtYXJlYScpLmF0dHIoJ2NsYXNzJywgJ2dob3N0LWFyZWEgc2hvdycpO1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5hdHRyKCdjbGFzcycsICdub2RlIGFjdGl2ZS1kcmFnJyk7XG4gICAgICAgICAgICAgICAgdmlzLnNlbGVjdEFsbChcImcubm9kZVwiKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IC8vIHNlbGVjdCB0aGUgcGFyZW50IGFuZCBzb3J0IHRoZSBwYXRoJ3NcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEuaWQgIT0gZHJhZ2dpbmdOb2RlLmlkKSByZXR1cm4gMTsgLy8gYSBpcyBub3QgdGhlIGhvdmVyZWQgZWxlbWVudCwgc2VuZCBcImFcIiB0byB0aGUgYmFja1xuICAgICAgICAgICAgICAgICAgICBlbHNlIHJldHVybiAtMTsgLy8gYSBpcyB0aGUgaG92ZXJlZCBlbGVtZW50LCBicmluZyBcImFcIiB0byB0aGUgZnJvbnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBpZiBub2RlcyBoYXMgY2hpbGRyZW4sIHJlbW92ZSB0aGUgbGlua3MgYW5kIG5vZGVzXG4gICAgICAgICAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGxpbmsgcGF0aHNcbiAgICAgICAgICAgICAgICAgICAgbGlua3MgPSB0cmVlLmxpbmtzKG5vZGVzKTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZVBhdGhzID0gdmlzLnNlbGVjdEFsbChcInBhdGgubGlua1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEobGlua3MsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0LmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjaGlsZCBub2Rlc1xuICAgICAgICAgICAgICAgICAgICBub2Rlc0V4aXQgPSB2aXMuc2VsZWN0QWxsKFwiZy5ub2RlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShub2RlcywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLmlkID09IGRyYWdnaW5nTm9kZS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBwYXJlbnQgbGlua1xuICAgICAgICAgICAgICAgIHBhcmVudExpbmsgPSB0cmVlLmxpbmtzKHRyZWUubm9kZXMoZHJhZ2dpbmdOb2RlLnBhcmVudCkpO1xuICAgICAgICAgICAgICAgIHZpcy5zZWxlY3RBbGwoJ3BhdGgubGluaycpLmZpbHRlcihmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZC50YXJnZXQuaWQgPT0gZHJhZ2dpbmdOb2RlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgZHJhZ1N0YXJ0ZWQgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBwYW4oZG9tTm9kZSwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwZWVkID0gcGFuU3BlZWQ7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZVg7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZVk7XG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlWDtcbiAgICAgICAgICAgICAgICB2YXIgc2NhbGVZO1xuICAgICAgICAgICAgICAgIHZhciBzY2FsZTtcbiAgICAgICAgICAgICAgICBpZiAocGFuVGltZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHBhblRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlQ29vcmRzID0gZDMudHJhbnNmb3JtKHZpcy5hdHRyKFwidHJhbnNmb3JtXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSAnbGVmdCcgfHwgZGlyZWN0aW9uID09ICdyaWdodCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVggPSBkaXJlY3Rpb24gPT0gJ2xlZnQnID8gdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVswXSArIHNwZWVkIDogdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVswXSAtIHNwZWVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlWSA9IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMV07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09ICd1cCcgfHwgZGlyZWN0aW9uID09ICdkb3duJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlWCA9IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVZID0gZGlyZWN0aW9uID09ICd1cCcgPyB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdICsgc3BlZWQgOiB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdIC0gc3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2NhbGVYID0gdHJhbnNsYXRlQ29vcmRzLnNjYWxlWzBdO1xuICAgICAgICAgICAgICAgICAgICBzY2FsZVkgPSB0cmFuc2xhdGVDb29yZHMuc2NhbGVbMV07XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlID0gdG9vbFNldFNlcnZpY2UuZ2V0Wm9vbVNjYWxlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZpcy50cmFuc2l0aW9uKCkuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHRyYW5zbGF0ZVggKyBcIixcIiArIHRyYW5zbGF0ZVkgKyBcIilzY2FsZShcIiArIHNjYWxlICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCdnLm5vZGUnKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgdHJhbnNsYXRlWCArIFwiLFwiICsgdHJhbnNsYXRlWSArIFwiKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgem9vbS5zY2FsZShzY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIHpvb20udHJhbnNsYXRlKFt0cmFuc2xhdGVYLCB0cmFuc2xhdGVZXSk7XG4gICAgICAgICAgICAgICAgICAgIHBhblRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYW4oZG9tTm9kZSwgc3BlZWQsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgdGVtcG9yYXJ5IGNvbm5lY3RvciBpbmRpY2F0aW5nIGRyYWdnaW5nIGFmZmlsaWF0aW9uXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVUZW1wQ29ubmVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XG4gICAgICAgICAgICAgICAgaWYgKGRyYWdnaW5nTm9kZSAhPT0gbnVsbCAmJiBzZWxlY3RlZE5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZSB0byBmbGlwIHRoZSBzb3VyY2UgY29vcmRpbmF0ZXMgc2luY2Ugd2UgZGlkIHRoaXMgZm9yIHRoZSBleGlzdGluZyBjb25uZWN0b3JzIG9uIHRoZSBvcmlnaW5hbCB0cmVlXG4gICAgICAgICAgICAgICAgICAgIHZhciBleHRlbmRpbmdWYWx1ZSA9ICh2bS5pbWFnZVByZXNlbnQpID8gNSA6IDUwO1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHNlbGVjdGVkTm9kZS54MCArIDEyICsgKG5vZGVCb3VuZGFyaWVzLndpZHRoIC8gMiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogc2VsZWN0ZWROb2RlLnkwICsgNTAgKyBub2RlQm91bmRhcmllcy5oZWlnaHQgKyAxMFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGRyYWdnaW5nTm9kZS54MCArIDEyICsgKG5vZGVCb3VuZGFyaWVzLndpZHRoIC8gMiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZHJhZ2dpbmdOb2RlLnkwICsgZXh0ZW5kaW5nVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gdmlzLnNlbGVjdEFsbChcIi50ZW1wLWxpbmtcIikuZGF0YShkYXRhKTtcbiAgICAgICAgICAgICAgICBsaW5rLmVudGVyKCkuYXBwZW5kKFwicGF0aFwiKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwidGVtcC1saW5rXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICBsaW5rLmF0dHIoXCJkXCIsIGQzLnN2Zy5kaWFnb25hbCgpKTtcbiAgICAgICAgICAgICAgICBsaW5rLmV4aXQoKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBvdmVySW5HaG9zdEFyZWEgPSBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkTm9kZSA9IGQ7XG4gICAgICAgICAgICAgICAgdXBkYXRlVGVtcENvbm5lY3RvcigpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIG91dE9mR2hvc3RBcmVhID0gZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE5vZGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGVuZERyYWcoKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWROb2RlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5naG9zdC1hcmVhJykuYXR0cignY2xhc3MnLCAnZ2hvc3QtYXJlYScpO1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5hdHRyKCdjbGFzcycsICdub2RlJyk7XG4gICAgICAgICAgICAgICAgLy8gbm93IHJlc3RvcmUgdGhlIG1vdXNlb3ZlciBldmVudCBvciB3ZSB3b24ndCBiZSBhYmxlIHRvIGRyYWcgYSAybmQgdGltZVxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5zZWxlY3QoJy5naG9zdC1hcmVhJykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnJyk7XG4gICAgICAgICAgICAgICAgdXBkYXRlVGVtcENvbm5lY3RvcigpO1xuICAgICAgICAgICAgICAgIGlmIChkcmFnZ2luZ05vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJvYWRDYXN0RHJhZ05Ecm9wKCk7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZShyb290KTtcbiAgICAgICAgICAgICAgICAgICAgcGFuVG9UaGVOb2RlKGRyYWdnaW5nTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nTm9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBicm9hZENhc3REcmFnTkRyb3AoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlQXJyYW5nZWRPYmplY3QgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogc2VsZWN0ZWROb2RlLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IGRyYWdnaW5nTm9kZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdhcHA6bm9kZXM6cmUtYXJyYW5nZWQnLCByZUFycmFuZ2VkT2JqZWN0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb25Jbml0KCk7XG5cbiAgICAgICAgICAgIHZhciB2aXMgPSB3cmFwcGVyRWxlbWVudC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImxheW91dFwiLCBcInJvd1wiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwibGF5b3V0LWFsaWduXCIsIFwic3BhY2UtYXJvdW5kIGNlbnRlclwiKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImZsZXhcIiwgXCJcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImlkXCIsIFwic3ZnLWJveC1jb250YWluZXJcIilcbiAgICAgICAgICAgICAgICAuY2FsbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICRjb21waWxlKHRoaXNbMF0pKHNjb3BlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImlkXCIsIFwic3ZnQm94XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ2aWV3Qm94XCIsIHZpZXdCb3hCb3VuZGFyeSlcbiAgICAgICAgICAgICAgICAuYXR0cihcInN0eWxlXCIsIFwiY3Vyc29yOm1vdmU7XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCBcIjEwMCVcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBpSGVpZ2h0KVxuICAgICAgICAgICAgICAgIC5jYWxsKHpvb20pXG4gICAgICAgICAgICAgICAgLmFwcGVuZChcInN2ZzpnXCIpXG4gICAgICAgICAgICAgICAgLy9jZW50ZXJpbmcgdGhlIHJvb3Qgbm9kZVxuICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKCgkd2luZG93LmlubmVyV2lkdGggLyAyKSAtIDEyMCkgKyBcIixcIiArIChoIC8gNCkgKyBcIilcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInN0eWxlXCIsIFwiY3Vyc29yOnBvaW50ZXI7XCIpXG4gICAgICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgc3RvcFByb3BvZ2F0aW9uLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAuY2FsbChkMy5iZWhhdmlvci5kcmFnKCkub24oXCJkcmFnc3RhcnRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIH0pLm9uKFwiZHJhZ1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIDE2MClcbiAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCAxMjApXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInRyZWUtaG9sZGVyXCIpO1xuXG4gICAgICAgICAgICBkMy5zZWxlY3Rpb24ucHJvdG90eXBlLm1vdmVUb0Zyb250ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgdHJlZSA9IGQzLmxheW91dC50cmVlKClcbiAgICAgICAgICAgICAgICAubm9kZVNpemUoW25vZGVCb3VuZGFyaWVzLndpZHRoICsgbm9kZUJvdW5kYXJpZXMuaG9yaXpvbnRhbFNlcGVyYXRpb24sIG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIG5vZGVCb3VuZGFyaWVzLnZlcnRpY2FsU2VwZXJhdGlvbl0pXG4gICAgICAgICAgICAgICAgLnNlcGFyYXRpb24oZnVuY3Rpb24gc2VwYXJhdGlvbihhLCBiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnBhcmVudCA9PSBiLnBhcmVudCA/IDEuMjUgOiAxLjU7XG4gICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgdmFyIGRpYWdvbmFsID0gZDMuc3ZnLmRpYWdvbmFsKClcbiAgICAgICAgICAgICAgICAuc291cmNlKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInhcIjogZC5zb3VyY2UueCArIChub2RlQm91bmRhcmllcy53aWR0aCkgLyAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ5XCI6IGQuc291cmNlLnkgKyAobm9kZUJvdW5kYXJpZXMuaGVpZ2h0ICsgMTApXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGFyZ2V0KGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInhcIjogZC50YXJnZXQueCArIChub2RlQm91bmRhcmllcy53aWR0aCkgLyAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ5XCI6IGQudGFyZ2V0LnkgLSAodm0uaW1hZ2VQcmVzZW50ID09ICd0cnVlJyA/IDQ1IDogMClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5wcm9qZWN0aW9uKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbZC54ICsgMCwgZC55ICsgMF07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb290ID0gdm0udHJlZWRhdGE7XG4gICAgICAgICAgICByb290LngwID0gaCAvIDI7XG4gICAgICAgICAgICByb290LnkwID0gMDtcblxuICAgICAgICAgICAgZnVuY3Rpb24gdG9nZ2xlQWxsKGQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBkLmNoaWxkcmVuLmZvckVhY2godG9nZ2xlQWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlKGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4cGFuZEFsbEFmdGVyKGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSAoZC5jaGlsZHJlbikgPyBkLmNoaWxkcmVuIDogZC5fY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgaWYgKGQuX2NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGQuY2hpbGRyZW4gPSBkLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgZC5fY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goZXhwYW5kQWxsQWZ0ZXIpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gY29sbGFwc2VBbGxBZnRlcihkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gKGQuY2hpbGRyZW4pID8gZC5jaGlsZHJlbiA6IGQuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGlmIChkLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgZC5jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjaGlsZHJlbilcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChjb2xsYXBzZUFsbEFmdGVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXhwYW5kQWxsKCkge1xuICAgICAgICAgICAgICAgIGV4cGFuZEFsbEFmdGVyKHJvb3QpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZShyb290KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY29sbGFwc2VBbGwoKSB7XG4gICAgICAgICAgICAgICAgY29sbGFwc2VBbGxBZnRlcihyb290KTtcbiAgICAgICAgICAgICAgICB1cGRhdGUocm9vdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJvb3QpO1xuXG4gICAgICAgICAgICAvLyBpbml0aWFsaXplIHRoZSBkaXNwbGF5IHRvIHNob3cgYSBmZXcgbm9kZXMuXG4gICAgICAgICAgICByb290LmNoaWxkcmVuLmZvckVhY2godG9nZ2xlQWxsKTtcblxuXG4gICAgICAgICAgICB1cGRhdGUocm9vdCk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZShzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBkMy5ldmVudCAmJiBkMy5ldmVudC5hbHRLZXkgPyA1MDAwIDogNTAwO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29tcHV0ZSB0aGUgbmV3IHRyZWUgbGF5b3V0LlxuICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IHRyZWUubm9kZXMocm9vdCkucmV2ZXJzZSgpO1xuXG4gICAgICAgICAgICAgICAgLy8gTm9ybWFsaXplIGZvciBmaXhlZC1kZXB0aCBhbmQgZHluYW1pYyBmb3Igd2VpZ2h0LlxuICAgICAgICAgICAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQud2VpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkLnkgPSAoZC53ZWlnaHQgKiAxMikgKyBkLmRlcHRoICogMzAwO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZC55ID0gZC5kZXB0aCAqIDMwMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIG5vZGVzLi4uXG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSB2aXMuc2VsZWN0QWxsKFwiZy5ub2RlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKG5vZGVzLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuaWQgfHwgKGQuaWQgPSArK2kpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIEVudGVyIGFueSBuZXcgbm9kZXMgYXQgdGhlIHBhcmVudCdzIHByZXZpb3VzIHBvc2l0aW9uLlxuICAgICAgICAgICAgICAgIHZhciBub2RlRW50ZXIgPSBub2RlLmVudGVyKCkuYXBwZW5kKFwic3ZnOmdcIilcbiAgICAgICAgICAgICAgICAgICAgLmNhbGwoZHJhZ0xpc3RlbmVyKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibm9kZVwiKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImlkXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub2RlLVwiICsgZC5pZDtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHNvdXJjZS54MCArIFwiLFwiICsgc291cmNlLnkwICsgXCIpXCI7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGUoZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUoZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbm9kZUVudGVyLmFwcGVuZChcInJlY3RcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2dob3N0LWFyZWEnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIG5vZGVCb3VuZGFyaWVzLndpZHRoKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBub2RlQm91bmRhcmllcy5oZWlnaHQgKyAyNTApXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwib3BhY2l0eVwiLCAwLjIpIC8vIGNoYW5nZSB0aGlzIHRvIHplcm8gdG8gaGlkZSB0aGUgdGFyZ2V0IGFyZWFcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBcInRyYW5zcGFyZW50XCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdtb3VzZW92ZXInKVxuICAgICAgICAgICAgICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJJbkdob3N0QXJlYShub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dE9mR2hvc3RBcmVhKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIG5vZGVFbnRlci5hcHBlbmQoXCJ0cmVlLW5vZGVcIikuYXR0cihcIm5vZGVcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJlZVZpZXdTZXJ2aWNlLnB1c2hOb2RlKGQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAub24oXCJjbGlja1wiLCBvbkNsaWNrZWROb2RlKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcIm5vZGVJZFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuaWQ7XG4gICAgICAgICAgICAgICAgICAgIH0pLmF0dHIoXCJpbWFnZVByZXNlbnRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZtLmltYWdlUHJlc2VudDtcbiAgICAgICAgICAgICAgICB9KS5hdHRyKFwiYWN0aW9uQmFyUHJlc2VudFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm0uYWN0aW9uQmFyUHJlc2VudDtcbiAgICAgICAgICAgICAgICB9KS5hdHRyKFwibm9kZURpc3BsYXlQcm9wc1wiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm0ubm9kZURpc3BsYXlQcm9wcztcbiAgICAgICAgICAgICAgICB9KS5hdHRyKFwiaXNQaW5uZWROb2RlXCIsIFwiZmFsc2VcIikuYXR0cihcIm5vZGVBY3Rpb25zXCIsIGF0dHJzLm5vZGVhY3Rpb25zKVxuICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29tcGlsZSh0aGlzKShzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBub2RlcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVVcGRhdGUgPSBub2RlLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnggKyBcIixcIiArIGQueSArIFwiKVwiO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBleGl0aW5nIG5kb2VzIHRvIHRoZSBwYXJlbnQncyBuZXcgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVFeGl0ID0gbm9kZS5leGl0KCkudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHNvdXJjZS54ICsgXCIsXCIgKyBzb3VyY2UueSArIFwiKVwiO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICBub2RlRXhpdC5zZWxlY3QoXCJjaXJjbGVcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJyXCIsIDFlLTYpO1xuICAgICAgICAgICAgICAgIG5vZGVFeGl0LnNlbGVjdChcInRleHRcIilcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDFlLTYpO1xuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBsaW5rcy4uLlxuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gdmlzLnNlbGVjdEFsbChcInBhdGgubGlua1wiKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YSh0cmVlLmxpbmtzKG5vZGVzKSwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC5pZDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBFbnRlciBhbnkgbmV3IGxpbmtzIGF0IGh0ZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvblxuICAgICAgICAgICAgICAgIGxpbmsuZW50ZXIoKS5pbnNlcnQoXCJzdmc6cGF0aFwiLCBcImdcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmtcIilcbiAgICAgICAgICAgICAgICAgICAgLy8gLnN0eWxlKFwic3Ryb2tlLWRhc2hhcnJheVwiLChcIjMsM1wiKSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBzb3VyY2UueDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogc291cmNlLnkwXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpYWdvbmFsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBvXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGdlbmVyYXRlUGF0aCk7XG5cbiAgICAgICAgICAgICAgICAvLyBUcmFuc2l0aW9uIGxpbmtzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICBsaW5rLnRyYW5zaXRpb24oKVxuXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGdlbmVyYXRlUGF0aClcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwic3Ryb2tlXCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC50YXJnZXQuY2xhc3MgPT09IFwiaGlnaGxpZ2h0LWxpbmtcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIjZmY0MTM2XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBleGl0aW5nIG5vZGVzIHRvIHRoZSBwYXJlbnQncyBuZXcgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgbGluay5leGl0KCkudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHNvdXJjZS54LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHNvdXJjZS55XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpYWdvbmFsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBvXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgLy8gU3Rhc2ggdGhlIG9sZCBwb3NpdGlvbnMgZm9yIHRyYW5zaXRpb24uXG4gICAgICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICBkLngwID0gZC54O1xuICAgICAgICAgICAgICAgICAgICBkLnkwID0gZC55O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShub2Rlcywgbm9kZUxpc3QpO1xuXG4gICAgICAgICAgICAgICAgdHJlZVZpZXdTZXJ2aWNlLnNldE5vZGVzKG5vZGVMaXN0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVG9nZ2xlIGNoaWxkcmVuXG4gICAgICAgICAgICBmdW5jdGlvbiB0b2dnbGUoZCkge1xuICAgICAgICAgICAgICAgIGlmIChkLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgZC5jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZC5jaGlsZHJlbiA9IGQuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBkLl9jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBkZXRlcm1pbmVOb2RlUmVsYXRpdmVMb2NhdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGQuc291cmNlLmNoaWxkcmVuLmxlbmd0aCA+IDEgJiYgZC5zb3VyY2UuY2hpbGRyZW5bMF0gPT0gZC50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdvbmxlZnQnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC5zb3VyY2UuY2hpbGRyZW4ubGVuZ3RoID4gMSAmJiBkLnNvdXJjZS5jaGlsZHJlbltkLnNvdXJjZS5jaGlsZHJlbi5sZW5ndGggLSAxXSA9PSBkLnRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ29ucmlnaHQnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnc3RyYWlnaHQnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVQYXRoKGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVsYXRpdmVMb2NhdGlvbiA9IGRldGVybWluZU5vZGVSZWxhdGl2ZUxvY2F0aW9uKGQpO1xuICAgICAgICAgICAgICAgIHZhciBwYXRoU3RyaW5nID0gJyc7XG4gICAgICAgICAgICAgICAgdmFyIGV4dGVuZGluZ1ZhbHVlID0gKHZtLmltYWdlUHJlc2VudCkgPyA1IDogNTA7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChyZWxhdGl2ZUxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmFpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhTdHJpbmcgKz0gXCJNXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChkLnNvdXJjZS54ICsgKG5vZGVCb3VuZGFyaWVzLndpZHRoIC8gMikgKyAxMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiLFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoZC5zb3VyY2UueSArIG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIDU3KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJWXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChkLnNvdXJjZS55ICsgbm9kZUJvdW5kYXJpZXMuaGVpZ2h0ICsgKG5vZGVCb3VuZGFyaWVzLmhlaWdodCAvIDIpICsgMzUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIkhcIiArIChkLnRhcmdldC54ICsgMTIgKyAoKG5vZGVCb3VuZGFyaWVzLndpZHRoKSAvIDIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJWXCIgKyAoZC50YXJnZXQueSArIGV4dGVuZGluZ1ZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJNXCIgKyBkLnRhcmdldC54ICsgMTIgKyBcIixcIiArIChkLnRhcmdldC55ICsgZXh0ZW5kaW5nVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ29ubGVmdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoU3RyaW5nICs9IFwiTVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoZC5zb3VyY2UueCArIChub2RlQm91bmRhcmllcy53aWR0aCAvIDIpICsgMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIixcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGQuc291cmNlLnkgKyBub2RlQm91bmRhcmllcy5oZWlnaHQgKyA1NylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiVlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoZC5zb3VyY2UueSArIG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIChub2RlQm91bmRhcmllcy5oZWlnaHQgLyAyKSArIDM1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJIXCIgKyAoZC50YXJnZXQueCArIDEyICsgKChub2RlQm91bmRhcmllcy53aWR0aCkgLyAyKSArIDgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIiBRIFwiICsgKChkLnRhcmdldC54ICsgMTIgKyAoKG5vZGVCb3VuZGFyaWVzLndpZHRoKSAvIDIpIC0gOCkgKyA4KSArIFwiLFwiICsgKGQuc291cmNlLnkgKyBub2RlQm91bmRhcmllcy5oZWlnaHQgKyAobm9kZUJvdW5kYXJpZXMuaGVpZ2h0IC8gMikgKyAzNSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiIFwiICsgKChkLnRhcmdldC54ICsgMTIgKyAoKG5vZGVCb3VuZGFyaWVzLndpZHRoKSAvIDIpIC0gOCkgKyA4KSArIFwiLFwiICsgKGQuc291cmNlLnkgKyBub2RlQm91bmRhcmllcy5oZWlnaHQgKyAobm9kZUJvdW5kYXJpZXMuaGVpZ2h0IC8gMikgKyA4ICsgMzUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIlZcIiArIChkLnRhcmdldC55ICsgZXh0ZW5kaW5nVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIk1cIiArIGQudGFyZ2V0LnggKyAxMiArIFwiLFwiICsgKGQudGFyZ2V0LnkgKyBleHRlbmRpbmdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnb25yaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoU3RyaW5nICs9IFwiTVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoZC5zb3VyY2UueCArIDEyICsgKG5vZGVCb3VuZGFyaWVzLndpZHRoIC8gMikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIixcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGQuc291cmNlLnkgKyBub2RlQm91bmRhcmllcy5oZWlnaHQgKyA1NylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwiVlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoZC5zb3VyY2UueSArIG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIChub2RlQm91bmRhcmllcy5oZWlnaHQgLyAyKSArIDM1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCJIXCIgKyAoZC50YXJnZXQueCArIDEyICsgKChub2RlQm91bmRhcmllcy53aWR0aCkgLyAyKSAtIDgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIiBRIFwiICsgKChkLnRhcmdldC54ICsgMTIgKyAoKG5vZGVCb3VuZGFyaWVzLndpZHRoKSAvIDIpKSApICsgXCIsXCIgKyAoZC5zb3VyY2UueSArIG5vZGVCb3VuZGFyaWVzLmhlaWdodCArIChub2RlQm91bmRhcmllcy5oZWlnaHQgLyAyKSArIDM1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCIgXCIgKyAoKGQudGFyZ2V0LnggKyAxMiArICgobm9kZUJvdW5kYXJpZXMud2lkdGgpIC8gMikpKSArIFwiLFwiICsgKGQuc291cmNlLnkgKyBub2RlQm91bmRhcmllcy5oZWlnaHQgKyAobm9kZUJvdW5kYXJpZXMuaGVpZ2h0IC8gMikgKyA4ICsgMzUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIlZcIiArIChkLnRhcmdldC55ICsgZXh0ZW5kaW5nVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIk1cIiArIGQudGFyZ2V0LnggKyAxMiArIFwiLFwiICsgKGQudGFyZ2V0LnkgKyBleHRlbmRpbmdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcGF0aFN0cmluZztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25BZGROb2RlKHBhcmVudCwgY2hpbGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gOTtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5yZXBsYWNlKC9bXmEtel0rL2csICcnKS5zdWJzdHIoMCwgbGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBhZGRDaGlsZE5vZGUocGFyZW50LmlkLCBjaGlsZCk7XG4gICAgICAgICAgICAgICAgLy8gc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uUmVtb3ZlTm9kZShkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZC5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihkKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBkLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5kSW50aGVSb290QW5kRGVzdG9yb3kocm9vdC5jaGlsZHJlbiwgZCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlKGQucGFyZW50KTtcbiAgICAgICAgICAgICAgICAvKiAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcFByb3BvZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgfWNhdGNoIChlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigncHJvcG9nYXRpb24gZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICB9Ki9cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBmaW5kSW50aGVSb290QW5kRGVzdG9yb3kobGlzdCwgbm9kZSkge1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChsaXN0LCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmlkID09IHZhbHVlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBsaXN0LmluZGV4T2YodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5ndWxhci5pc0RlZmluZWQodmFsdWUuY2hpbGRyZW4pICYmIHZhbHVlLmNoaWxkcmVuICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5kSW50aGVSb290QW5kRGVzdG9yb3kodmFsdWUuY2hpbGRyZW4sIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGZpbmRJbnRoZVJvb3RBbmRSZXBsYWNlTmFtZShsaXN0LCBub2RlKSB7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGxpc3QsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuaWQgPT0gdmFsdWUuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGxpc3QuaW5kZXhPZih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RbaW5kZXhdLm5hbWUgPSBub2RlLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5ndWxhci5pc0RlZmluZWQodmFsdWUuY2hpbGRyZW4pICYmIHZhbHVlLmNoaWxkcmVuICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5kSW50aGVSb290QW5kRGVzdG9yb3kodmFsdWUuY2hpbGRyZW4sIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZENoaWxkTm9kZShwYXJlbnRJZCwgbmV3Tm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gZDMuc2VsZWN0KCcjJyArICdub2RlLScgKyBwYXJlbnRJZCk7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGVEYXRhID0gbm9kZS5kYXR1bSgpO1xuICAgICAgICAgICAgICAgIGlmIChub2RlRGF0YS5jaGlsZHJlbiA9PT0gdW5kZWZpbmVkICYmIG5vZGVEYXRhLl9jaGlsZHJlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVEYXRhLmNoaWxkcmVuID0gW25ld05vZGVdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZURhdGEuX2NoaWxkcmVuICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZURhdGEuX2NoaWxkcmVuLnB1c2gobmV3Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZShub2RlRGF0YSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlRGF0YS5jaGlsZHJlbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVEYXRhLmNoaWxkcmVuLnB1c2gobmV3Tm9kZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlRGF0YS5fY2hpbGRyZW4gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlRGF0YS5fY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZURhdGEuX2NoaWxkcmVuLnB1c2gobmV3Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZShub2RlRGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZShub2RlRGF0YSk7XG5cbiAgICAgICAgICAgICAgICAvLyBzdG9wUHJvcG9nYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Ob2RlQ2hhbmdlKCkge1xuICAgICAgICAgICAgICAgIC8vJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdhcHA6bm9kZXM6Y2hhbmdlZCcsIG51bGwpO1xuICAgICAgICAgICAgICAgIHZtLmZldGNoU2VhcmNoYWJsZUxpc3QoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc3RvcFByb3BvZ2F0aW9uKCkge1xuICAgICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYWN0aXZlID0gZDMuc2VsZWN0KG51bGwpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkNsaWNrZWROb2RlKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vZGUpO1xuICAgICAgICAgICAgICAgIHZhciBpc1Jlc2V0ID0gbWFrZUNsaWNrZWROb2RlQWN0aXZlKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYW5Ub1RoZU5vZGUobm9kZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGhpZ2hsaWdodFBhdGgobm9kZSkge1xuICAgICAgICAgICAgICAgIC8vVE9ETyBtdXN0IGluY2x1ZGUgdGhlIHJvb3Qgbm9kZSBpbiB0aGUgYXJyYXlcbiAgICAgICAgICAgICAgICAvL1BhdGggYXJyYXkgdG8gc3RvcmUgbm9kZXNcbiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IHNlYXJjaFdpdGhpblRyZWUodm0udHJlZWRhdGEsIG5vZGUubmFtZSwgW10pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vZnVuY3Rpb24gdG8gb3BlbiBwYXRoc1xuICAgICAgICAgICAgICAgICAgICBjbGVhckhpZ2hMaWdodExpbmtzKGxhc3RTZWFyY2hlZFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRMaW5rcyhwYXRoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VhcmNoZWQgbm9kZSAnICsgbm9kZS5uYW1lICsgJyBub3QgZm91bmQnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsYXN0U2VhcmNoZWRQYXRoID0gcGF0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gaGlnaGxpZ2h0TGlua3MocGF0aCkge1xuXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHBhdGgsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmNsYXNzID0gJ2hpZ2hsaWdodC1saW5rJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLl9jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuY2hpbGRyZW4gPSB2YWx1ZS5fY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5fY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJIaWdoTGlnaHRMaW5rcyhwYXRoKSB7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHBhdGgsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmNsYXNzID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5fY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmNoaWxkcmVuID0gdmFsdWUuX2NoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuX2NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGUodmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vc2VhcmNoIG9uIHRyZWUgZm9yIGEgbGlua1xuICAgICAgICAgICAgZnVuY3Rpb24gc2VhcmNoV2l0aGluVHJlZShub2RlLCBzZWFyY2hLZXksIHBhdGgpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5uYW1lID09PSBzZWFyY2hLZXkpIHsgLy9pZiBzZWFyY2ggaXMgZm91bmQgcmV0dXJuLCBhZGQgdGhlIG9iamVjdCB0byB0aGUgcGF0aCBhbmQgcmV0dXJuIGl0XG4gICAgICAgICAgICAgICAgICAgIHBhdGgucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUuY2hpbGRyZW4gfHwgbm9kZS5fY2hpbGRyZW4pIHsgLy9pZiBjaGlsZHJlbiBhcmUgY29sbGFwc2VkIGQzIG9iamVjdCB3aWxsIGhhdmUgdGhlbSBpbnN0YW50aWF0ZWQgYXMgX2NoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IChub2RlLmNoaWxkcmVuKSA/IG5vZGUuY2hpbGRyZW4gOiBub2RlLl9jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUpOy8vIHdlIGFzc3VtZSB0aGlzIHBhdGggaXMgdGhlIHJpZ2h0IG9uZVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gc2VhcmNoV2l0aGluVHJlZShjaGlsZHJlbltpXSwgc2VhcmNoS2V5LCBwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZCkgey8vIHdlIHdlcmUgcmlnaHQsIHRoaXMgc2hvdWxkIHJldHVybiB0aGUgYnViYmxlZC11cCBwYXRoIGZyb20gdGhlIGZpcnN0IGlmIHN0YXRlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugey8vd2Ugd2VyZSB3cm9uZywgcmVtb3ZlIHRoaXMgcGFyZW50IGZyb20gdGhlIHBhdGggYW5kIGNvbnRpbnVlIGl0ZXJhdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7Ly9ub3QgdGhlIHJpZ2h0IG9iamVjdCwgcmV0dXJuIGZhbHNlIHNvIGl0IHdpbGwgY29udGludWUgdG8gaXRlcmF0ZSBpbiB0aGUgbG9vcFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBtYWtlQ2xpY2tlZE5vZGVBY3RpdmUoZWxlbSkge1xuICAgICAgICAgICAgICAgIHZhciBpc1Jlc2V0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZS5ub2RlKCkgPT09IGVsZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXNldCA9IHJlc2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmUgPSBkMy5zZWxlY3QoZWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBwYW5Ub1RoZU5vZGUobm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IHRvb2xTZXRTZXJ2aWNlLmdldFpvb21TY2FsZSgpO1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGUgPSBbLXNjYWxlICogbm9kZS54LCAtc2NhbGUgKiBub2RlLnldO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdub2RlJywgbm9kZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25vZGUgdHJhbnNsYXRlICcsIHRyYW5zbGF0ZSk7XG4gICAgICAgICAgICAgICAgdmlzLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMTI1MClcbiAgICAgICAgICAgICAgICAgICAgLmNhbGwoem9vbS50cmFuc2xhdGUodHJhbnNsYXRlKS5zY2FsZShzY2FsZSkuZXZlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlc2V0dGluZyBBY3RpdmUgbm9kZXNcIik7XG4gICAgICAgICAgICAgICAgYWN0aXZlLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGFjdGl2ZSA9IGQzLnNlbGVjdChudWxsKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRUcmVlTm9kZUJ5T2JqZWN0KG9iamVjdCkge1xuICAgICAgICAgICAgICAgIHZhciB0cmVlTm9kZSA9ICRmaWx0ZXIoJ2ZpbHRlcicpKG5vZGVMaXN0LCB7J2lkJzogb2JqZWN0LmlkfSwgdHJ1ZSlbMF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyZWVOb2RlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRUcmVlTm9kZUJ5SUQoaWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHJlZU5vZGUgPSAkZmlsdGVyKCdmaWx0ZXInKShub2RlTGlzdCwgeydpZCc6IGlkfSwgdHJ1ZSlbMF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyZWVOb2RlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjZW50ZXJUaGVSb290KCkge1xuICAgICAgICAgICAgICAgIC8vVHJhbnNmb3JtIHRvIHRoZSBjZW50ZXIgKDAsMClcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Ob2RlKDAsIDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2Zvcm1Ob2RlKHhQb3MsIHlQb3MpIHtcbiAgICAgICAgICAgICAgICB2aXMudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgLy9kdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIG9mIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDEwMDApXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlbGF5IHRpbWUgaW4gbXNcbiAgICAgICAgICAgICAgICAgICAgLmRlbGF5KDEwMClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArICh4UG9zKSArIFwiLFwiICsgKHlQb3MpICsgXCIpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwic2NhbGUoXCIgKyB0b29sU2V0U2VydmljZS5nZXRab29tU2NhbGUoKSArIFwiKVwiO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Ob2RlQWZ0ZXJVcGRhdGUoZXYsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBmaW5kSW50aGVSb290QW5kUmVwbGFjZU5hbWUocm9vdC5jaGlsZHJlbiwgZGF0YS5sYXN0RWRpdGVkTm9kZSk7XG4gICAgICAgICAgICAgICAgb25Ob2RlQ2hhbmdlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uTm9kZUFmdGVyQWRkKGV2LCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc29sdmVkTm9kZSA9IGdldFRyZWVOb2RlQnlJRChkYXRhLnBhcmVudE5vZGUuaWQpO1xuICAgICAgICAgICAgICAgIG9uQWRkTm9kZShyZXNvbHZlZE5vZGUsIGRhdGEubGFzdEFkZGVkTm9kZSk7XG4gICAgICAgICAgICAgICAgb25Ob2RlQ2hhbmdlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uTm9kZURlbGV0ZShldiwgZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgIHZhciByZXNvbHZlZE5vZGUgPSBnZXRUcmVlTm9kZUJ5SUQoZGF0YS5ub2RlSUQpO1xuICAgICAgICAgICAgICAgIG9uUmVtb3ZlTm9kZShyZXNvbHZlZE5vZGUpO1xuICAgICAgICAgICAgICAgIG9uTm9kZUNoYW5nZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBtYWtlTm9kZUFjdGl2ZShpZCkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlTGlzdCA9IGQzLnNlbGVjdEFsbChcIi5ub2RlLVwiICsgaWQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KG5vZGVMaXN0WzBdKS5maW5kKFwiaW1nXCIpLmFkZENsYXNzKCdhY3RpdmUtbm9kZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhckFsbEFjdGl2ZU5vZGVzKCkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlTGlzdCA9IGQzLnNlbGVjdEFsbChcIi5ub2RlLWxhYmVsXCIpO1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChub2RlTGlzdCwgZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KHYpLmZpbmQoXCJpbWdcIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1ub2RlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRGVhY3RpdmF0ZU5vZGVzKGV2LCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJBbGxBY3RpdmVOb2RlcygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBpbnRlcnBvbGF0ZVpvb20odHJhbnNsYXRlLCBzY2FsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkMy50cmFuc2l0aW9uKCkuZHVyYXRpb24oMjUwKS50d2VlbihcIndoZWVsLnpvb21cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaVRyYW5zbGF0ZSA9IGQzLmludGVycG9sYXRlKHpvb20udHJhbnNsYXRlKCksIHRyYW5zbGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpU2NhbGUgPSBkMy5pbnRlcnBvbGF0ZSh6b29tLnNjYWxlKCksIHNjYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNjYWxlKGlTY2FsZSh0KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJhbnNsYXRlKGlUcmFuc2xhdGUodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgem9vbWVkKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHpvb21DbGljayhzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gMSxcbiAgICAgICAgICAgICAgICAgICAgZmFjdG9yID0gMC4yLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRfem9vbSA9IDEsXG4gICAgICAgICAgICAgICAgICAgIGNlbnRlciA9IFt3IC8gMiwgaCAvIDJdLFxuICAgICAgICAgICAgICAgICAgICBleHRlbnQgPSB6b29tLnNjYWxlRXh0ZW50KCksXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZSA9IHpvb20udHJhbnNsYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZTAgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgbCA9IFtdLFxuICAgICAgICAgICAgICAgICAgICB2aWV3ID0ge3g6IHRyYW5zbGF0ZVswXSwgeTogdHJhbnNsYXRlWzFdLCBrOiB6b29tLnNjYWxlKCl9O1xuXG4gICAgICAgICAgICAgICAgLy8gZDMuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAoc3RhdHVzID09PSAnaW5jcmVtZW50JykgPyAxIDogLTE7XG4gICAgICAgICAgICAgICAgdGFyZ2V0X3pvb20gPSB6b29tLnNjYWxlKCkgKiAoMSArIGZhY3RvciAqIGRpcmVjdGlvbik7XG5cbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0X3pvb20gPCBleHRlbnRbMF0gfHwgdGFyZ2V0X3pvb20gPiBleHRlbnRbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZTAgPSBbKGNlbnRlclswXSAtIHZpZXcueCkgLyB2aWV3LmssIChjZW50ZXJbMV0gLSB2aWV3LnkpIC8gdmlldy5rXTtcbiAgICAgICAgICAgICAgICB2aWV3LmsgPSB0YXJnZXRfem9vbTtcbiAgICAgICAgICAgICAgICBsID0gW3RyYW5zbGF0ZTBbMF0gKiB2aWV3LmsgKyB2aWV3LngsIHRyYW5zbGF0ZTBbMV0gKiB2aWV3LmsgKyB2aWV3LnldO1xuXG4gICAgICAgICAgICAgICAgdmlldy54ICs9IGNlbnRlclswXSAtIGxbMF07XG4gICAgICAgICAgICAgICAgdmlldy55ICs9IGNlbnRlclsxXSAtIGxbMV07XG5cbiAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZVpvb20oem9vbS50cmFuc2xhdGUoKSwgdmlldy5rKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gem9vbWVkKCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHpvb20uc2NhbGUoKSk7XG4gICAgICAgICAgICAgICAgdG9vbFNldFNlcnZpY2Uuc2V0Wm9vbVNjYWxlKHpvb20uc2NhbGUoKSk7XG4gICAgICAgICAgICAgICAgdmlzLmF0dHIoXCJ0cmFuc2Zvcm1cIixcbiAgICAgICAgICAgICAgICAgICAgXCJ0cmFuc2xhdGUoXCIgKyB6b29tLnRyYW5zbGF0ZSgpICsgXCIpXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInNjYWxlKFwiICsgdG9vbFNldFNlcnZpY2UuZ2V0Wm9vbVNjYWxlKCkgKyBcIilcIlxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICB2aXMuc2VsZWN0QWxsKFwiZy5wYXJlbnRcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGQueCArIFwiLFwiICsgZC55ICsgXCIpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwic2NhbGUoXCIgKyB0b29sU2V0U2VydmljZS5nZXRab29tU2NhbGUoKSArIFwiKVwiXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBkZXN0cm95TGlzdGVuZXIpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBkZXN0cm95TGlzdGVuZXIoKSB7XG4gICAgICAgICAgICAgICAgbm9kZUFjdGl2ZUNsZWFyTGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICBub2RlRGVsZXRlTGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICBub2RlQWZ0ZXJBZGRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgIG5vZGVBZnRlclVwZGF0ZUxpc3RlbmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIHJldHVybiB0cmVlVmlld0RpcmVjdGl2ZTtcbiAgICB9XG5cbiAgICAvKkBuZ0luamVjdCovXG4gICAgZnVuY3Rpb24gVHJlZVZpZXdEaXJlY3RpdmVDb250cm9sbGVyKCRzY29wZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5tYWtlQ2FsbEJhY2sgPSBtYWtlQ2FsbEJhY2s7XG5cbiAgICAgICAgY29uc29sZS5sb2codm0uc2VhcmNoYWJsZUxpc3QpO1xuXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VDYWxsQmFjayhpZGVudGlmaWVyLCBub2RlKSB7XG4gICAgICAgICAgICAkc2NvcGUudm1baWRlbnRpZmllcl0oe25vZGU6IG5vZGV9KTtcbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDYvMS8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnb3JnQ2hhcnQnKS5mYWN0b3J5KCd0cmVlVmlld1NlcnZpY2UnLCB0cmVlVmlld1NlcnZpY2UpO1xuXG4gICAgZnVuY3Rpb24gdHJlZVZpZXdTZXJ2aWNlKCRmaWx0ZXIpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkTm9kZSA9IG51bGw7XG4gICAgICAgIHZhciBub2RlcyA9IFtdO1xuXG4gICAgICAgIHZhciBzZXJ2aWNlRXhwb3NhYmxlID0ge1xuICAgICAgICAgICAgc2V0U2VhcmNoZWROb2RlOiBzZXRTZWFyY2hlZE5vZGUsXG4gICAgICAgICAgICBnZXRTZWFyY2hlZE5vZGU6IGdldFNlYXJjaGVkTm9kZSxcbiAgICAgICAgICAgIHNldE5vZGVzOiBzZXROb2RlcyxcbiAgICAgICAgICAgIHB1c2hOb2RlOiBwdXNoTm9kZSxcbiAgICAgICAgICAgIGdldE5vZGVzOiBnZXROb2RlcyxcbiAgICAgICAgICAgIGZpbmRCeUlkOiBmaW5kQnlJZFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzZXJ2aWNlRXhwb3NhYmxlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRCeUlkKGlkKSB7XG4gICAgICAgICAgICB2YXIgdHJlZU5vZGUgPSAkZmlsdGVyKCdmaWx0ZXInKShub2RlcywgeydpZCc6IGlkfSwgdHJ1ZSlbMF07XG4gICAgICAgICAgICByZXR1cm4gdHJlZU5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXROb2RlcyhzZXRPZm5vZGVzKSB7XG4gICAgICAgICAgICBub2RlcyA9IHNldE9mbm9kZXM7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXROb2RlcygpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHB1c2hOb2RlKG5vZGUpIHtcbiAgICAgICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRTZWFyY2hlZE5vZGUobm9kZSkge1xuICAgICAgICAgICAgc2VsZWN0ZWROb2RlID0gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFNlYXJjaGVkTm9kZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZE5vZGU7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gNi8yMy8xNy5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgYW5ndWxhci5tb2R1bGUoJ29yZ0NoYXJ0JykuZGlyZWN0aXZlKCd0cmltV29yZCcsIHRyaW1Xb3JkKTtcblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiB0cmltV29yZCgpIHtcbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxzcGFuIG5nLWJpbmQ9XCJ2bS5wYXJzZWRUZXh0XCI+PG1kLXRvb2x0aXAgbmctaWY9XCJ2bS5pc1Rvb2xUaXBOZWVkKClcIiBtZC1kaXJlY3Rpb249XCJ2bS53b3JkT3B0aW9ucy50b29sVGlwRGlyZWN0aW9uXCI+e3s6OnZtLndvcmR9fTwvbWQtdG9vbHRpcD48L3NwYW4+JyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IHRyaW1Xb3JkQ29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmssXG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG4gICAgICAgICAgICAgICAgd29yZE9wdGlvbnM6Jz0nLFxuICAgICAgICAgICAgICAgIHdvcmQ6Jz0nXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtLCBhdHRyLHZtKSB7XG5cbiAgICAgICAgICAgIHZtLmlzVG9vbFRpcE5lZWQgPSBpc1Rvb2xUaXBOZWVkO1xuXG4gICAgICAgICAgICBvbkluaXQoKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Jbml0KCl7XG4gICAgICAgICAgICAgICAgYWN0aXZhdGVXYXRjaGVycygpO1xuICAgICAgICAgICAgICAgIHBhcnNlVGV4dCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZVdhdGNoZXJzKCl7XG4gICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGFuZ3VsYXIuYmluZCh2bSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm0ud29yZDtcbiAgICAgICAgICAgICAgICB9KSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3dvcmQgY2hhbmdlIHRvICcgKyB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlVGV4dCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB0cmltV29yZCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZnJvbVZhbHVlID0gcGFyc2VJbnQodm0ud29yZE9wdGlvbnMuZnJvbSk7XG4gICAgICAgICAgICAgICAgdmFyIHRvVmFsdWUgPSBwYXJzZUludCh2bS53b3JkT3B0aW9ucy51bnRpbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZtLndvcmQuc3Vic3RyaW5nKGZyb21WYWx1ZSwgdG9WYWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzVG9vbFRpcE5lZWQoKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdm0ud29yZE9wdGlvbnMudG9vbFRpcD09J3RydWUnP3RydWU6ZmFsc2VcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VUZXh0KCl7XG4gICAgICAgICAgICAgICAgdm0ucGFyc2VkVGV4dCA9IHRyaW1Xb3JkKCk7XG4gICAgICAgICAgICAgICAgKHZtLndvcmQubGVuZ3RoPnBhcnNlSW50KHZtLndvcmRPcHRpb25zLnVudGlsKSk/dm0ucGFyc2VkVGV4dCA9IHZtLnBhcnNlZFRleHQuY29uY2F0KFwiIC4uLlwiKTp2bS5wYXJzZWRUZXh0O1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qQG5nSW5qZWN0Ki9cbiAgICBmdW5jdGlvbiB0cmltV29yZENvbnRyb2xsZXIoKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICB9XG59KSgpO1xuIl19
